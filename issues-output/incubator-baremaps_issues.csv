type,issue_url,comment_url,repo_name,id,issue_num,title,user_login,user_id,user_name,user_email,issue_state,created_at,updated_at,body,reactions
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/4,https://api.github.com/repos/apache/incubator-baremaps/issues/4,incubator-baremaps,512581824,4,Replace GIST with SP-GIST,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2019-10-25T15:31:26Z,2020-02-10T10:55:32Z,"As tiles are a form of space partitionning, SP-GIST are probably  a better fit than GIST for indexing geometries. The idea would be to investigate how an SP-GIST can be configured to match tile boundaries.

https://www.postgresql.org/docs/12/spgist.html","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/4/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/5,https://api.github.com/repos/apache/incubator-baremaps/issues/5,incubator-baremaps,513855321,5,Improve the configuration file for producing tiles,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2019-10-29T11:32:35Z,2021-02-20T11:29:28Z,"The `config/config.yaml` file is used to generate vector tiles. It contains SQL queries for each zoom levels. As for now, the example provided only specifies queries for the zoom level 14. The idea would be to add queries for zoom levels 0 to 13, taking inspiration from what OpenStreetMap does for raster tiles.

https://www.openstreetmap.ch/
https://github.com/gravitystorm/openstreetmap-carto
https://wiki.openstreetmap.org/wiki/Features","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/5/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/5,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MDI1OTcyOQ==,incubator-baremaps,650259729,5,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-06-26T16:04:20Z,2020-06-26T16:04:20Z,"Some of these changes have already been made. However, the minZoom and maxZoom levels should be set at the level of the query instead of the layer.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MDI1OTcyOQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/6,https://api.github.com/repos/apache/incubator-baremaps/issues/6,incubator-baremaps,513857187,6,Improve the style of the map,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2019-10-29T11:36:23Z,2020-06-03T11:19:53Z,"The `/config/style.json` file is used to render the vector tiles in mapbox. It can easily be edited with [maputnik](https://maputnik.github.io/). As for now, the style provided does not support all the zoom levels. The idea would be improve this style, taking inspiration from what OpenStreetMap does for raster tiles.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/6/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/6,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzODEzMTMwOQ==,incubator-baremaps,638131309,6,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-06-03T11:19:53Z,2020-06-03T11:19:53Z,"The latest release introduced a blueprint feature that automatically generates a style. The development of a general purpose stylesheet for OpenStreetMap has been moved outside of this repository.

https://github.com/baremaps/openstreetmap-vecto","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzODEzMTMwOQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/10,https://api.github.com/repos/apache/incubator-baremaps/issues/10,incubator-baremaps,566145382,10,Handle empty tiles more properly,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-02-17T08:49:49Z,2020-04-28T21:35:46Z,"Empty tiles raises errors in the browser:

```
evented.js:109 Error: Error: http status 200 returned without content.
```

We should find a way to handle this case more properly","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/10/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/10,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYyMDg2ODM5MQ==,incubator-baremaps,620868391,10,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-04-28T21:35:46Z,2020-04-28T21:35:46Z,"A good practice is apparently to return a 204 in case of empty tiles.
https://github.com/mapbox/mapbox-gl-js/issues/1800","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYyMDg2ODM5MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/13,https://api.github.com/repos/apache/incubator-baremaps/issues/13,incubator-baremaps,568839343,13,Make data import transactional,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-02-21T09:32:03Z,2023-04-24T16:57:31Z,"The current approach for importing data drops the tables, creates a new one, fills them, creates the indexes, etc. This means that the database is in an unusable state for some time. It would be a good thing to perform these operations within a transaction to ensure that the database remains in a usable state.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/13/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/46,https://api.github.com/repos/apache/incubator-baremaps/issues/46,incubator-baremaps,603307957,46,Serve issue if no S3 configuration,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2020-04-20T15:03:10Z,2020-04-28T21:06:38Z,"`serve` process expects to have an AWS S3 configuration on the hosting machine, while it should run even though you don't have S3 configured.




","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/46/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/46,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYxNjYzNDMwNg==,incubator-baremaps,616634306,46,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-04-20T15:39:08Z,2020-04-20T15:39:08Z,"```
com.amazonaws.SdkClientException: Unable to find a region via the region provider chain. Must provide an explicit region in the builder or setup environment to supply a region.
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYxNjYzNDMwNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/46,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYyMDg1NTExMQ==,incubator-baremaps,620855111,46,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-04-28T21:06:38Z,2020-04-28T21:06:38Z,The aws-java-sdk uses the DefaultAwsRegionProviderChain class to look at different configuration options. As this class throws an exception if the host is not properly configured it now has to be explicitly activated in the command line client with the --enable-aws option. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYyMDg1NTExMQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/62,https://api.github.com/repos/apache/incubator-baremaps/issues/62,incubator-baremaps,617225721,62,Add batch index and batch number to the command line client,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-05-13T07:49:56Z,2020-05-15T13:56:16Z,[AWS Batch](https://aws.amazon.com/batch/) allows to distribute the computation of embarrassingly parallel problems. The creation of vector tiles is embarrassingly parallel. Adding command line arguments for the number of batches and the batch to be processed would allow baremaps to be deployed on AWS batch as a docker image.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/62/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/67,https://api.github.com/repos/apache/incubator-baremaps/issues/67,incubator-baremaps,622802271,67,Export in the mbtiles format,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-05-21T21:28:27Z,2020-05-23T11:14:41Z,"MBTiles is a specification for storing arbitrary tiled map data in SQLite databases for immediate usage and for efficient transfer.

https://github.com/mapbox/mbtiles-spec","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/67/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/69,https://api.github.com/repos/apache/incubator-baremaps/issues/69,incubator-baremaps,625763686,69,Encoding issue in blueprint.html,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2020-05-27T14:48:20Z,2020-06-02T13:56:39Z,"If you put accent in `blueprint.html`, the the encoding is not correct.

![Screenshot from 2020-05-27 16-47-34](https://user-images.githubusercontent.com/1491924/83035463-c9f3ce80-a039-11ea-90f1-15475d9e5ef2.png)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/69/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/69,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzNTE2NTQ3Nw==,incubator-baremaps,635165477,69,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-05-28T07:31:25Z,2020-05-28T07:31:25Z,"Thanks for reporting this issue. At the moment the serve command uses the HttpServer from Java's standard library. Fixing this shouldn't be too difficult, but I'm considering to use [Armeria](https://line.github.io/armeria/) to serve the tiles. In the future, Armeria would allow to create additional web services (for localization, search, routing, etc.) with [gRPC](https://grpc.io/) and to generate web and mobile SDKs. As for now, the release is about 28MB, and it gets to about 45MB with armeria. Would you consider this an issue?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzNTE2NTQ3Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/69,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzNTE4NTk3NQ==,incubator-baremaps,635185975,69,NA,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,NA,2020-05-28T08:06:33Z,2020-05-28T08:06:33Z,"> Would you consider this an issue?

Not at all, I think Armeria is a great choice.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzNTE4NTk3NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/69,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzNzU2MDAwNw==,incubator-baremaps,637560007,69,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-06-02T13:56:39Z,2020-06-02T13:56:39Z,The issue has been fixed in the latest release.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDYzNzU2MDAwNw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/79,https://api.github.com/repos/apache/incubator-baremaps/issues/79,incubator-baremaps,646357214,79,Create a location service (GRPC) based on GeoIP,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-26T15:55:56Z,2021-04-10T19:45:48Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/79/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/80,https://api.github.com/repos/apache/incubator-baremaps/issues/80,incubator-baremaps,646357392,80,Create a routing service (GRPC) based on Graphhopper,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-26T15:56:16Z,2021-04-10T19:45:45Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/80/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/81,https://api.github.com/repos/apache/incubator-baremaps/issues/81,incubator-baremaps,646357629,81,Create a search service (GRPC) based on Lucene,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-26T15:56:40Z,2021-04-10T19:45:22Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/81/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/82,https://api.github.com/repos/apache/incubator-baremaps/issues/82,incubator-baremaps,646360151,82,Reorganize the command line interface ,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-26T16:00:59Z,2021-02-20T11:29:28Z,"As new services will be added, the command line interface needs to be reorganized. The current idea is to have something similar to what aws-cli does, i.e., the sub command correspond to the context. In baremaps it could translate as follow:

```
baremaps [context] [action]
baremaps osm import
baremaps osm update
baremaps tiles export
baremaps tiles serve
baremaps tiles preview
baremaps location serve
baremaps search serve
baremaps route serve
...
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/82/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/83,https://api.github.com/repos/apache/incubator-baremaps/issues/83,incubator-baremaps,646363994,83,Add filtering capabilities to the Tile Service,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-26T16:07:41Z,2023-04-24T16:57:31Z,"For instance, a subset of the layers could be returned by passing parameters in the URL or in the query parameters.

```
/z/x/y.pbf?layers=layer1+layer2+layer3
```
If no filter is specified, all the layers are returned in the vector tile.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/83/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/83,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyODM4NzE2MQ==,incubator-baremaps,828387161,83,NA,RemiDesgrange,13271765,Rémi Desgrange,,NA,2021-04-28T11:44:00Z,2021-04-28T11:44:00Z,"Mapbox is doing it like this:

```
https://my-tile.com/layers/layer1,layer2,layer3/{z}/{y}/{x}.pbf
```

Better for caching purpose?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyODM4NzE2MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/83,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMDAzNTMwMw==,incubator-baremaps,830035303,83,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-30T11:39:47Z,2021-04-30T11:39:47Z,Thanks for the pointer. That's indeed a better way to do it. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMDAzNTMwMw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/84,incubator-baremaps,646642089,84,java.nio.file.InvalidPathException when using the LocalFileSystem in Windows,bytefish,239373,Philipp Wagner,philipp@bytefish.de,CLOSED,2020-06-27T09:00:08Z,2020-11-28T10:34:35Z,"I am working with Windows 10 and JDK 14. When using the ``LocalFileSystem`` in the application I run into the following exception when parsing a Windows File path passed from the CLI to ``LocalFileSystem``:

```
java.nio.file.InvalidPathException: Illegal char <:> at index 2: 
```

It happens when ``Path path = Paths.get(uri.getPath());`` on Windows is called. I saw several similar bugs in the internet, and some fixed this by resolving the path like this: ``Paths.get(new File(uri).getAbsolutePath())``, but I am unsure if it also works for Mac OS and Linux`. 

That's why I am opening an issue instead of directly making a PR.

The ``LocalFileSystem`` then looks like this:

```java
import com.baremaps.util.vfs.FileSystem;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URI;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class LocalFileSystem extends FileSystem {

    @Override
    public boolean accept(URI uri) {
        return uri.getHost() == null && uri.getPath() != null;
    }

    @Override
    public InputStream read(URI uri) throws IOException {
        Path path = getPathFromUri(uri);

        return Files.newInputStream(path);
    }

    @Override
    public byte[] readByteArray(URI uri) throws IOException {
        Path path = getPathFromUri(uri);

        return Files.readAllBytes(path);
    }

    @Override
    public OutputStream write(URI uri) throws IOException {
        Path path = getPathFromUri(uri);

        if (!Files.exists(path.getParent())) {
            Files.createDirectories(path.getParent());
        }
        return Files.newOutputStream(path);
    }

    @Override
    public void writeByteArray(URI uri, byte[] bytes) throws IOException {

        Path path = getPathFromUri(uri);

        if (!Files.exists(path.getParent())) {
            Files.createDirectories(path.getParent());
        }
        Files.write(path, bytes);
    }

    @Override
    public void delete(URI uri) throws IOException {
        Path path = getPathFromUri(uri);

        Files.deleteIfExists(path);
    }

    private Path getPathFromUri(URI uri) {
        return Paths.get(new File(uri).getAbsolutePath());
    }
}
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/84/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MDU1MDgzMA==,incubator-baremaps,650550830,84,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-06-27T11:55:35Z,2020-06-27T11:55:35Z,"Thanks a lot for reporting this issue, I have not tested Baremaps on Windows yet. 

Regarding the issue, the fix does not seem to work on linux and osx: the `getAbsolutePath()` call throws an Exception. For now, we may simply differentiate the environments until we find a solution that works on all operating systems. For instance, the following `getPathFromUri` method works on my side as well:

```java
 private Path getPathFromUri(URI uri) {
    if (System.getProperty(""os.name"").toLowerCase().contains(""win"")) {
      return Paths.get(new File(uri).getAbsolutePath());
    } else {
      return Paths.get(uri.getPath());
    }
  }
```

We could then add the different build target to `.github/workflows/maven.yml` in order to ensure that the tests are executed on every operating systems.

```yaml
  build-ubuntu:
    name: Build Project
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Build with Maven
        run: mvn -B package --file pom.xml
  build-macos:
    name: Build Project
    runs-on: macos-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Build with Maven
        run: mvn -B package --file pom.xml
  build-windows:
    name: Build Project
    runs-on: windows-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Build with Maven
        run: mvn -B package --file pom.xml
```

What do you think? If this approach suits you do not hesitate to create a PR with your changes.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MDU1MDgzMA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2MDgwNTM5Mg==,incubator-baremaps,660805392,84,NA,bytefish,239373,Philipp Wagner,philipp@bytefish.de,NA,2020-07-20T05:10:16Z,2020-07-20T05:10:16Z,"I am lacking the time for further experiments with baremaps on Windows. @bchapuis Thanks for your support and valuable feedback. Once I have more time I will revisit it. 

I am closing this issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2MDgwNTM5Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2MDg3Mjc2NA==,incubator-baremaps,660872764,84,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-07-20T08:07:20Z,2020-07-20T08:07:20Z,"No problem, thank a lot your feedbacks, it really helps. If you don't mind, I will keep the issue open as not been fixed yet. Hopefully, I will eventually find time to improve support on windows.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2MDg3Mjc2NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNDk5OTAwNg==,incubator-baremaps,734999006,84,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-11-27T22:02:34Z,2020-11-27T22:02:34Z,"I can at least try to run the latest and see what happens if someone has a second to instruct me. :) I downloaded https://github.com/baremaps/baremaps/releases/tag/v0.3.2 and decompressed it to `C:\baremaps`. I have the latest PostgreSQL with PostGIS and latest Java installed.

What should I do get it to run and generate vector tiles (e.g. generate vector tiles for the globe)? I see there is one file that has contents as 
> #!/bin/sh
DIR=""$( cd ""$(dirname ""$0"")"" ; pwd -P )""
java -cp ""$DIR/../lib/*"" com.baremaps.cli.Baremaps ""$@""

but I'm not sure what should that be in Windows. Maybe @bytefish got this far (tagging just in case). :)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNDk5OTAwNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTEzNjAwNQ==,incubator-baremaps,735136005,84,NA,bytefish,239373,Philipp Wagner,philipp@bytefish.de,NA,2020-11-28T08:49:12Z,2020-11-28T08:49:12Z,"@veikkoeeva I am not much of a help here, sorry. I cloned the project and experimented with the CLI implementation to find out how to fix the error and probably make a PR. So I didn't use the CLI. @bchapuis can better help here.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTEzNjAwNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/84,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTE1NTU4Nw==,incubator-baremaps,735155587,84,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-11-28T09:02:36Z,2020-11-28T09:02:36Z,"@veikkoeeva The current issue is solved so I created another one to track the creation of the bat script (#140). Also, notice that the project is now built on windows with github actions.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTE1NTU4Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/85,https://api.github.com/repos/apache/incubator-baremaps/issues/85,incubator-baremaps,646667764,85,Configure OSX and Windows builds in Github Action,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-27T11:57:41Z,2020-06-30T19:32:56Z,"This would ensure that baremaps works on every major operating systems (see #84).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/85/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/87,https://api.github.com/repos/apache/incubator-baremaps/issues/87,incubator-baremaps,648440202,87,Execute integration tests with Github Action,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-06-30T19:33:52Z,2020-07-19T22:03:54Z,(...and remove circleci builds),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/87/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/87,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2MDcxNjQwMw==,incubator-baremaps,660716403,87,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-07-19T22:03:53Z,2020-07-19T22:03:53Z,Adressed in pull request #100 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2MDcxNjQwMw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/96,https://api.github.com/repos/apache/incubator-baremaps/issues/96,incubator-baremaps,649443715,96,Dead link in readme/website,aapeliv,2975660,Aapeli,,CLOSED,2020-07-02T00:18:13Z,2020-07-02T06:46:14Z,"The page https://www.camptocamp.com/en/solutions/geospatial-solutions/ is dead.

Referenced in README.md and https://www.baremaps.com/.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/96/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/96,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MjgxNzMwNA==,incubator-baremaps,652817304,96,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-07-02T06:46:14Z,2020-07-02T06:46:14Z,"Thanks for reporting this issue, it is now fixed.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MjgxNzMwNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/97,https://api.github.com/repos/apache/incubator-baremaps/issues/97,incubator-baremaps,650045070,97,PostgisReferenceCache throws IllegalArgumentException,bytefish,239373,Philipp Wagner,philipp@bytefish.de,CLOSED,2020-07-02T16:00:31Z,2020-07-03T15:54:41Z,"While I am experimenting with Windows, I have noticed, that the ``osm_relations`` table is always empty after the import. I think the problem is due to the ``PostgisReferenceCache`` implementation I am using. 

In ``PostgisReferenceCache#get``  an ``IllegalArgumentException`` is thrown when the Reference does not exist:

* https://github.com/baremaps/baremaps/blob/40409acd91d002f16297432527fd92f28d072957/baremaps-osm/src/main/java/com/baremaps/osm/cache/PostgisReferenceCache.java#L57

I think this will cause the whole stream to cancel when it is thrown in the ``RelationBuilder#build``:

* https://github.com/baremaps/baremaps/blob/40409acd91d002f16297432527fd92f28d072957/baremaps-osm/src/main/java/com/baremaps/osm/geometry/RelationBuilder.java#L69

Can't the Cache return ``null``, when the Element is not available? Or should the call in the stream be wrapped with ``Try.of(...)``?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/97/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/97,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzE1MTQ5Mw==,incubator-baremaps,653151493,97,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-07-02T18:11:13Z,2020-07-02T18:11:13Z,"As of today, the LMDB cache is used when importing the data for the first time. The Postgis cache is used when updating previously imported data. In other words, the Postgis cache assumes an existing database fully populated  with nodes, ways, and relations. 

This decision comes from the OSM data model. In order to create the geometries associated with ways and relations, the OSM data need to be read two times: a first time to build a cache of the nodes, ways and relations, and a second time to denormalize the data and create the geometries.

For instance, in OSM, a node is characterized by an id, a longitude and a latitude and a way is characterized by an id and a list of node ids. In order to create the geometry for a way, baremaps fetches the nodes from the cache and use their longitude and latitude coordinates to create the corresponding line.

I upgraded the LMDB to version 0.8 a couple of days ago, do you think they addressed the issues associated with windows in this release? Regarding the null value returned by the cache, this is hard to tell, as the OSM data is supposed to be consistent, I would prefer to fail early. Another option could be to add an in memory cache (only suitable for small imports), or a more portable cache (for instance based on [MVStore](https://www.h2database.com/html/mvstore.html) or another kv store). What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzE1MTQ5Mw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/97,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzE2MjcwMg==,incubator-baremaps,653162702,97,NA,bytefish,239373,Philipp Wagner,philipp@bytefish.de,NA,2020-07-02T18:37:25Z,2020-07-02T18:37:25Z,"Thanks! Yes I already thought it would require the data to be read twice. 

I will try with the updated Lmdb Cache and see how it works out. 👍","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzE2MjcwMg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/97,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzE4NDE4MA==,incubator-baremaps,653184180,97,NA,bytefish,239373,Philipp Wagner,philipp@bytefish.de,NA,2020-07-02T19:29:54Z,2020-07-02T19:29:54Z,"The Import now works with the latest LMDB release. Although it is very slow, for a small city like Münster it takes 10 ninutes for caching references and coordinates. Is it faster for Linux?

Good job!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzE4NDE4MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/97,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzIwMDg1Ng==,incubator-baremaps,653200856,97,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-07-02T20:12:44Z,2020-07-02T20:12:44Z,"On linux, the creation of the cache (1min) and of the database (1min) is rather fast. What takes time is the creation of the indexes in postgis (about 8 minutes). Here is my output when importing `muenster-regbez-latest.osm.pbf`, do you obtained something similar?

```
baremaps import \
  --input 'muenster-regbez-latest.osm.pbf' \
  --database 'jdbc:postgresql://localhost:5432/baremaps?allowMultiQueries=true&user=baremaps&password=baremaps'
[INFO ] 2020-07-02 21:59:18.291 [main] Import - 8 processors available
[INFO ] 2020-07-02 21:59:18.306 [main] Import - Dropping tables
[INFO ] 2020-07-02 21:59:18.433 [main] Import - Creating tables
[INFO ] 2020-07-02 21:59:18.465 [main] Import - Creating primary keys
[INFO ] 2020-07-02 21:59:18.705 [main] Import - Fetching input
[INFO ] 2020-07-02 21:59:18.706 [main] Import - Populating cache
[INFO ] 2020-07-02 22:00:11.736 [main] Import - Populating database
[INFO ] 2020-07-02 22:01:07.474 [main] Import - Indexing geometries
[INFO ] 2020-07-02 22:06:17.411 [main] Import - Indexing attributes

```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzIwMDg1Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/97,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzYwNTcyMg==,incubator-baremaps,653605722,97,NA,bytefish,239373,Philipp Wagner,philipp@bytefish.de,NA,2020-07-03T15:54:21Z,2020-07-03T15:54:21Z,"Thanks for your results. When using ``createTempDirectory(...)`` it used the HDD, which took up to 10 minutes for building the cache. Putting it on the SSD yields much better results. They are slightly slower than yours, but this could be due to the hardware. Thanks for your patience with me!

```
[INFO ] 2020-07-03 17:48:34.973 [main] Import - 4 processors available
[INFO ] 2020-07-03 17:48:35.051 [main] Import - Dropping tables
[INFO ] 2020-07-03 17:48:35.307 [main] Import - Creating tables
[INFO ] 2020-07-03 17:48:35.322 [main] Import - Creating primary keys
[INFO ] 2020-07-03 17:48:35.947 [main] Import - Fetching input
[INFO ] 2020-07-03 17:48:35.947 [main] Import - Populating cache
[INFO ] 2020-07-03 17:49:42.873 [main] Import - Populating database
[INFO ] 2020-07-03 17:50:44.332 [main] Import - Indexing geometries
[INFO ] 2020-07-03 17:53:14.731 [main] Import - Indexing attributes
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY1MzYwNTcyMg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/98,https://api.github.com/repos/apache/incubator-baremaps/issues/98,incubator-baremaps,650782412,98,Add a command line parameter for the location of the LMDB cache,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-07-03T22:24:36Z,2020-07-17T15:28:18Z,"Right now, the command uses `createTempDirectory`. This is a good default value, but we shall be able to specify the location of the LMDB cache, especially if the host has several hard drives with different performance characteristics (HDD, SSD, see #97). Additionally, we should ensure that the cache is deleted when the execution terminates.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/98/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/106,https://api.github.com/repos/apache/incubator-baremaps/issues/106,incubator-baremaps,671984425,106,the code missing the package of com.baremaps.osm.binary,sunlingzhiliber,40552049,,,CLOSED,2020-08-03T10:45:49Z,2020-08-08T10:59:44Z,"hi，sir， i download the latest code of the baremaps，but in the com.baremaps.osm.pbf.FileBlock,it looks like missing com.baremaps.osm.binary.*","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/106/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/106,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2Nzk1NzMxNQ==,incubator-baremaps,667957315,106,NA,sunlingzhiliber,40552049,,,NA,2020-08-03T10:58:02Z,2020-08-03T10:58:02Z,I find the class is moving to com.baremaps.osm.model.Hope it works.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2Nzk1NzMxNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/106,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2ODU1NzI3Nw==,incubator-baremaps,668557277,106,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-08-04T12:10:21Z,2020-08-04T12:10:21Z,"The com.baremaps.osm.binary package correspond to the following [protocol buffer file](https://github.com/baremaps/baremaps/blob/master/baremaps-osm/src/main/proto/osmformat.proto). The source code is generated automatically during the build phase by the [protobuf maven plugin](https://github.com/baremaps/baremaps/blob/002951a1cff62e8367e1310169a6c27f297a63ff/baremaps-osm/pom.xml#L24).

Have you tried to run `mvn clean install` or to import the project in your favourite IDE using maven?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY2ODU1NzI3Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/109,https://api.github.com/repos/apache/incubator-baremaps/issues/109,incubator-baremaps,688324854,109,Link from 'and supported by Camptocamp.' on https://www.baremaps.com leads to a 404,habi,1651235,David Haberthür,email@davidhaberthuer.ch,CLOSED,2020-08-28T19:58:25Z,2020-09-01T12:50:36Z,"The link goes to https://www.camptocamp.com/en/solutions/geospatial-solutions/, but should (probably) go to https://www.camptocamp.com/geospatial_solutions","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/109/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/109,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY4NDU2MjkwMQ==,incubator-baremaps,684562901,109,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-09-01T08:25:57Z,2020-09-01T08:25:57Z,"Thank you for noticing this issue, I fixed it in the [repository of the website](https://github.com/baremaps/baremaps.github.io).

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY4NDU2MjkwMQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/109,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY4NDgyNDgzNg==,incubator-baremaps,684824836,109,NA,habi,1651235,David Haberthür,email@davidhaberthuer.ch,NA,2020-09-01T12:43:44Z,2020-09-01T12:43:44Z,BTW: I'm the 'Bern' guy from the [reddit thread](https://www.reddit.com/r/openstreetmap/comments/ii804r/baremaps_a_vector_tile_pipeline_for_openstreetmap/g362vcu/) :),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY4NDgyNDgzNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/109,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY4NDgyODcxMQ==,incubator-baremaps,684828711,109,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-09-01T12:50:36Z,2020-09-01T12:50:36Z,"Cool, I'm always surprised by the number of geo-geeks we have in Switzerland. Do not hesitate to open a ticket if you notice other issues.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY4NDgyODcxMQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/119,https://api.github.com/repos/apache/incubator-baremaps/issues/119,incubator-baremaps,709788739,119,Add progress indications in the export command,Tisamu,15633268,Samuel NAIT,nait.samuel@gmail.com,CLOSED,2020-09-27T18:16:50Z,2021-01-12T09:54:11Z,"Hello, my question is pretty simple : 

Is there a way to know or estimate the export time ? 

❗ I'm currently exporting **since 7 hours now**, for a DB based on the **[openstreemap-vecto](https://github.com/baremaps/openstreetmap-vecto/)** project, **for a ~120MB osm.pbf file on a 2vcore VPS.**

❓ I know it's a light machine and that I must except a looong export time, but I'm curious about what influence the export time and if there is some known numbers (export benchmarks ?).

By the way, I'm doing all of that in a Docker container which mirror the tiles/ (export) folder onto the host machine, if that makes a difference (even if I think it's more of a CPU bottleneck than a disk one but anyway).


Thanks by advance for you help. 👍 

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/119/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/119,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY5OTY3NDA1Nw==,incubator-baremaps,699674057,119,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-09-27T18:58:37Z,2020-09-27T18:58:37Z,"Thank you very much for the feedback, I should definitely add progress indications in baremaps. 

The current config in openstreetmap-vecto has a [maxZoom level of 18](https://github.com/baremaps/openstreetmap-vecto/blob/fe3ecebd1ca7cb30635dde9e50393da469976ecc/config.yaml#L15). This is fine when previewing the data in the browser with the server, but clearly too much when exporting a tile dataset. For instance, at zoom level 18, there are almost [70 billions tiles](https://wiki.openstreetmap.org/wiki/Zoom_levels) for the world, all of which would require a SQL query.

Could you try to to limit the zoom level to 14? It is the usual max zoom level set by other tile datasets. I will also try to investigate this issue next week and report on the time it takes on a small machine.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY5OTY3NDA1Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/119,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY5OTkxOTEyOA==,incubator-baremaps,699919128,119,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-09-28T10:20:46Z,2020-09-28T10:20:46Z,"Hi @Tisamu, the original bounds in the `config.yaml` file cover the whole world. I corrected it on my local setup and generated a tileset for Switzerland (pbf file of 336MB) with the following setup.

```
bounds:
  minLon: 5.8358
  minLat: 45.6591
  maxLon: 10.9794
  maxLat: 47.8700
  minZoom: 6
  maxZoom: 14
```

Here is the output of an execution with the time command (the resulting tileset weight 795MB):

```
time docker exec -ti osmvecto baremaps export --database 'jdbc:postgresql://localhost:5432/osmvecto?allowMultiQueries=true&user=osmvecto&password=osmvecto' --config 'config.yaml' --repository 'tiles/'

[INFO ] 2020-09-28 09:52:30.014 [main] Export - 4 processors available
[INFO ] 2020-09-28 09:52:30.070 [main] Export - Reading configuration
[INFO ] 2020-09-28 09:52:30.658 [main] Export - Initializing the source tile store
[INFO ] 2020-09-28 09:52:30.761 [main] Export - Initializing the target tile store
[INFO ] 2020-09-28 09:52:30.762 [main] Export - Generating the tiles

docker exec -ti osmvecto baremaps export --database  --config 'config.yaml'    0.19s user 0.33s system 0% cpu 20:41.71 total
```

Looking at htop during the execution, it seems that a lot of CPU time is lost waiting for io. Clearly, there is room for optimization ( the docker and postgis setting should probably be tweaked). 

I will keep this issue open until baremaps includes proper progress indications.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDY5OTkxOTEyOA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/119,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwMDAwNzI0NA==,incubator-baremaps,700007244,119,NA,Tisamu,15633268,Samuel NAIT,nait.samuel@gmail.com,NA,2020-09-28T13:29:20Z,2020-09-28T13:29:20Z,"I'm far from those number, so yes I definitely need to tweak the settings, and come back when I get correct numbers.

Thanks for your help. 👍 ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwMDAwNzI0NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/119,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwMDAwOTIzMg==,incubator-baremaps,700009232,119,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-09-28T13:32:45Z,2020-09-28T13:32:45Z,"Please, do not hesitate to let me know if you find good docker and postgis settings. The only thing I changed in my docker install is the number of cores it can use. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwMDAwOTIzMg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/129,https://api.github.com/repos/apache/incubator-baremaps/issues/129,incubator-baremaps,720031899,129,Examine the usage of a BufferedInputStream,otbutz,22315436,,,CLOSED,2020-10-13T09:08:32Z,2021-02-18T09:27:11Z,"https://github.com/baremaps/baremaps/blob/860396be5648d060712e5dedea0e5feb5f25a21a/baremaps-osm/src/main/java/com/baremaps/osm/reader/pbf/FileBlockStreamer.java#L20

If the consuming code of the stream is doing lots of small reads, using a BufferedInputStream might improve performance here.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/129/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/129,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwNzgyNDY2OA==,incubator-baremaps,707824668,129,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-10-13T15:33:57Z,2020-10-13T15:33:57Z,I somewhat believed (maybe wrongly?) that the java.nio.Files helper class was using channels and dealing with buffering. If it isn't it should definitively be fixed. Do you have any experience regarding the best buffer size for this kind of payloads (e.g. 64*1024)? ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwNzgyNDY2OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/129,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwNzg0MjM5OA==,incubator-baremaps,707842398,129,NA,otbutz,22315436,,,NA,2020-10-13T16:00:37Z,2020-10-13T16:00:37Z,"According to the Javadoc: [The stream will not be buffered](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#newInputStream-java.nio.file.Path-java.nio.file.OpenOption...-)

I would stick to the default buffer size used by the `BufferedInputStream(InputStream)` constructor until higher buffer sizes prove to be better.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwNzg0MjM5OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/130,https://api.github.com/repos/apache/incubator-baremaps/issues/130,incubator-baremaps,720040006,130,Don't create a parallel Stream if parallel==false,otbutz,22315436,,,CLOSED,2020-10-13T09:17:35Z,2021-01-08T13:58:09Z,https://github.com/baremaps/baremaps/blob/860396be5648d060712e5dedea0e5feb5f25a21a/baremaps-osm/src/main/java/com/baremaps/osm/reader/pbf/FileBlockStreamer.java#L24,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/130/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/130,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwNzgyMjMzNg==,incubator-baremaps,707822336,130,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-10-13T15:30:31Z,2020-10-13T15:30:31Z,Thank you for spotting this issue. I also checked the initialization of the xml streams. Please do not hesitate to provide feedbacks on the API (FileBlockStreamer and FileBlockReader). I'm actively looking to stabilize it and to make it more user friendly.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDcwNzgyMjMzNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/140,incubator-baremaps,752630324,140,Add an executable for windows in the bin directory,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2020-11-28T09:00:59Z,2021-04-10T20:16:33Z,"The current distribution contains a bash script. The equivalent for windows systems should be created. Probably something like a baremaps.bat file containing:

```
@echo off
set dir=%~dp0%
set LIB=""%dir%..\lib\*""
java -cp ""$DIR/../lib/*"" com.baremaps.cli.Baremaps %*
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/140/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTI2Mzg4Mg==,incubator-baremaps,735263882,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-11-28T17:38:40Z,2020-11-28T17:38:40Z,"I tried and received `Error: Could not find or load main class com.baremaps.cli.Baremaps`. Indeed, I don't see a jar file with that name (I'm not familiar with Java but assume a jar file with name should be found). I double-check later it's not something about uncompressing the release.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTI2Mzg4Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTI4MDE4NQ==,incubator-baremaps,735280185,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-11-28T19:27:59Z,2020-11-28T19:27:59Z,"The LIB variable was not set correctly, sorry. Could you try with the following snippet. I don't have a windows machine at hand, so I hope it helps.

```
@echo off
set dir=%~dp0%
set LIB=""%dir%..\lib\*""
java -cp %LIB% com.baremaps.cli.Baremaps %*
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTI4MDE4NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTI5NDIwOQ==,incubator-baremaps,735294209,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-11-28T21:43:50Z,2020-11-28T21:43:50Z,"I get

> Unable to get Charset 'cp65001' for property 'sun.stdout.encoding', using default windows-1252 and continuing.
Usage: baremaps [COMMAND]
A toolkit for producing vector tiles.
Commands:
  execute  Execute queries in the database.
  import   Import OpenStreetMap data in the database.
  update   Update OpenStreetMap data in the database.
  export   Export vector tiles from the database.
  serve    Serve vector tiles from the the database.

This is a different problem. Using `chcp` tells `Active code page: 65001`, which is [UTF-8](https://docs.microsoft.com/en-us/windows/win32/intl/code-page-identifiers) but I take this means things work.

I think the next step is to download an `osm` file and see if it can be processed to Mapbox vector files. It was my initial idea. As an aside, I was also thinking if [OsmSharp](https://github.com/OsmSharp/core) could be used to load things into PostgreSQL. Not important here otherwise than that to note that if the PostgreSQL files would be as files (and loaded and executed dynamically"" the core contribution of this project would be the SQL queries while allowing potential modularity on loading the system and maybe preprocessing the data. :)

It's almost midnight here and I was erecting [this](https://en.wikipedia.org/wiki/Air-supported_structure) so a bit of delays here. :)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTI5NDIwOQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTMwMzgzNg==,incubator-baremaps,735303836,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-11-28T23:20:53Z,2020-11-28T23:20:53Z,"> It's almost midnight here and I was erecting [this](https://en.wikipedia.org/wiki/Air-supported_structure) so a bit of delays here. :)

Nice week-end project ;)

I published a new release (0.3.3) that includes a preliminary bat file.

Regarding the importation process, there are some simple examples in the current repo and a more complexe stylesheet in the following [repository](https://github.com/baremaps/openstreetmap-vecto).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNTMwMzgzNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNjA2Nzc1MQ==,incubator-baremaps,736067751,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-11-30T21:29:03Z,2020-11-30T21:29:03Z,"@bchapuis About hundred people getting sore muscles. :)

I thank you for this, check examples and see how things go when I try this. Hopefully Windows users find this more broadly. :)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNjA2Nzc1MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNzU0NTI2Nw==,incubator-baremaps,737545267,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-02T22:54:55Z,2020-12-02T22:54:55Z,"I add a bit to this thread, I have a running PostgreSQL and I added database `baremaps`, user `baremaps` with password `baremaps` with the rights to login and create objects to the database.

When I try to run `.\baremaps.bat execute --database='jdbc:postgresql://127.0.0.1:5432/baremaps?&user=baremaps&password=baremaps' --file='res://osm_create_extensions.sql' --file='res://osm_drop_tables.sql' --file='res://osm_create_tables.sql' --file='res://osm_create_gist_indexes.sql'--file='res://osm_create_gin_indexes.sql'` (from [OpenStreetMap example](https://github.com/baremaps/baremaps/tree/master/examples/openstreetmap)) I get

```
.\baremaps.bat : Missing required option: '--file=FILE'
At line:1 char:1
+ .\baremaps.bat execute --database='jdbc:postgresql://127.0.0.1:5432/b ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (Missing required option: '--file=FILE':String) [], RemoteExcepti 
   on
    + FullyQualifiedErrorId : NativeCommandError
 
Usage: baremaps execute [--enable-s3] --database=DATABASE
                        [--log-level=LOG_LEVEL] --file=FILE [--file=FILE]...
Execute queries in the database.
      --database=DATABASE     The JDBC url of the database.
      --enable-s3             Enable Amazon S3 integration.
      --file=FILE             The SQL file to execute in the database.
      --log-level=LOG_LEVEL   The log level.
'user' is not recognized as an internal or external command,
operable program or batch file.
'password' is not recognized as an internal or external command,
operable program or batch file.
```

This is likely caused by running a bat file that takes quoted parameters (otherwise puzzling). Maybe useful to record here these next steps even if I haven't gone more into details about this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNzU0NTI2Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNzkwNDE0OQ==,incubator-baremaps,737904149,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-03T12:13:18Z,2020-12-03T12:13:18Z,"Thank you for reporting this. Have you tried to remove the ""'""? I definitely need to setup a windows machine and perform more tests to see how the tool behave in a prompt.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczNzkwNDE0OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczODA3NzAxMA==,incubator-baremaps,738077010,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-03T15:25:23Z,2020-12-03T15:25:23Z,"@bchapuis I tried several variations. I look deeper into this when I get a bit of time cleared up. I want to be a bit more systematic. I did try that and a few other variations quickly and didn't have success (in a hurry, so I may have just erred). I think also one thing I should do is to move everything to `lib` and use java from the plain command line with only the `lib` envronment variable pointing to that folder (either as a path, dot or whatever I come up with it). This way I can establish a maybe functioning baseline so I know piping quotes between processes isn't at fault. I may also read some code, maybe I don't install Java tooling to actually debug (but we'll see).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczODA3NzAxMA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczODQxNjg3MQ==,incubator-baremaps,738416871,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-03T22:56:50Z,2020-12-03T22:56:50Z,"A quick update, running
> java -cp ""C:\\baremaps\\lib\\*"" com.baremaps.cli.Baremaps execute --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' --file 'res://osm_create_extensions.sql' --file 'res://osm_drop_tables.sql' --file 'res://osm_create_tables.sql' --file 'res://osm_create_gist_indexes.sql' --file 'res://osm_create_gin_indexes.sql'

will result in

```
java : java.lang.RuntimeException: org.postgresql.util.PSQLException: ERROR: permission denied to create 
extension ""postgis""
At line:11 char:1
+ java -cp ""C:\\baremaps\\lib\\*"" com.baremaps.cli.Baremaps execute --d ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (java.lang.Runti...nsion ""postgis"":String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  Hint: Must be superuser to create this extension.
	at com.baremaps.cli.Execute.lambda$call$0(Execute.java:59)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(Unknown Source)
	at java.util.Spliterators$ArraySpliterator.forEachRemaining(Unknown Source)
	at java.util.stream.AbstractPipeline.copyInto(Unknown Source)
	at java.util.stream.ForEachOps$ForEachTask.compute(Unknown Source)
	at java.util.concurrent.CountedCompleter.exec(Unknown Source)
	at java.util.concurrent.ForkJoinTask.doExec(Unknown Source)
	at java.util.concurrent.ForkJoinPool.helpComplete(Unknown Source)
	at java.util.concurrent.ForkJoinPool.externalHelpComplete(Unknown Source)
	at java.util.concurrent.ForkJoinTask.externalAwaitDone(Unknown Source)
	at java.util.concurrent.ForkJoinTask.doInvoke(Unknown Source)
	at java.util.concurrent.ForkJoinTask.invoke(Unknown Source)
	at java.util.stream.ForEachOps$ForEachOp.evaluateParallel(Unknown Source)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(Unknown Source)
	at java.util.stream.AbstractPipeline.evaluate(Unknown Source)
	at java.util.stream.ReferencePipeline.forEach(Unknown Source)
	at java.util.stream.ReferencePipeline$Head.forEach(Unknown Source)
	at com.baremaps.cli.Execute.call(Execute.java:54)
	at com.baremaps.cli.Execute.call(Execute.java:22)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
	at picocli.CommandLine.access$1200(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
	at picocli.CommandLine.execute(CommandLine.java:2058)
	at com.baremaps.cli.Baremaps.main(Baremaps.java:43)
Caused by: org.postgresql.util.PSQLException: ERROR: permission denied to create extension ""postgis""
  Hint: Must be superuser to create this extension.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2532)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2267)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:312)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:448)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:369)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:310)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:296)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:273)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:268)
	at org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:194)
	at org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:194)
	at com.baremaps.cli.Execute.lambda$call$0(Execute.java:57)
	... 26 more
```

Instead of giving `baremaps` user super user priviledges, I installed to the baremaps database the following extensions using pgAdmin GUI in browser

- postgis
- postgis_topology

I do not know if other PostGIS extensions are needed. Probably wouldn't hurt and depends on operations.

In any event, then re-runing the batch file results in...

```
java -cp ""C:\\baremaps\\lib\\*"" com.baremaps.cli.Baremaps execute --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' --file 'res://osm_create_extensions.sql' --file 'res://osm_drop_tables.sql' --file 'res://osm_create_tables.sql' --file 'res://osm_create_gist_indexes.sql' --file 'res://osm_create_gin_indexes.sql'
[INFO ] 2020-12-03 22:46:59.814 [main] Execute - 16 processors available
[INFO ] 2020-12-03 22:46:59.837 [main] Execute - res://osm_create_extensions.sql
[INFO ] 2020-12-03 22:47:00.044 [main] Execute - res://osm_drop_tables.sql
[INFO ] 2020-12-03 22:47:00.060 [main] Execute - res://osm_create_tables.sql
[INFO ] 2020-12-03 22:47:00.097 [main] Execute - res://osm_create_gist_indexes.sql
[INFO ] 2020-12-03 22:47:00.106 [main] Execute - res://osm_create_gin_indexes.sql
```

All looks good thus far. Next steps:

(&lt;Edit: The path to `lib` in the above also works with single slashes.)

1. Download an `.osm` map. Likely a small one like Luxembourg.
2. Import this file to the database.
3. Export it out as vector tiles. Preferably in format so it can be uploaded to cloud as files that can be used directly without a server.

Hopefully this week. I think this establishes that there is something iffy with the batch file. For instance, I'm not sure if that `%*` expands all variables, i.e. starting at position 0 or what's the problem here.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczODQxNjg3MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczOTU1MDgxNg==,incubator-baremaps,739550816,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-06T19:28:34Z,2020-12-06T19:28:34Z,"Thanks a lot for digging into this. I wasn't aware that installing the extensions through the sql script would require superuser privileges on windows.

Regarding the upload of the vector tiles there is an option to deploy them on an s3 bucket. This requires to install and configure aws-cli and to configure it with an AWS account.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDczOTU1MDgxNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDA2OTU0Mg==,incubator-baremaps,740069542,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-07T17:38:22Z,2020-12-07T17:38:22Z,"@bchapuis No problem at all! Would you have tip for the following issue?

I tried `java -cp ""C:\baremaps\lib\*"" com.baremaps.cli.Baremaps import --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' --file 'https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf'`

and it fails with

```
[INFO ] 2020-12-07 16:10:20.906 [main] Import - 16 processors available
java : Exception in thread ""main"" java.lang.UnsatisfiedLinkError: unknown
At line:14 char:1
+ java -cp ""C:\baremaps\lib\*"" com.baremaps.cli.Baremaps import --datab ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (Exception in th...kError: unknown:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
	at jnr.ffi.provider.jffi.NativeLibrary.loadNativeLibraries(NativeLibrary.java:93)
	at jnr.ffi.provider.jffi.NativeLibrary.getNativeLibraries(NativeLibrary.java:71)
	at jnr.ffi.provider.jffi.NativeLibrary.getSymbolAddress(NativeLibrary.java:50)
	at jnr.ffi.provider.jffi.NativeLibrary.findSymbolAddress(NativeLibrary.java:60)
	at jnr.ffi.provider.jffi.AsmLibraryLoader.generateInterfaceImpl(AsmLibraryLoader.java:138)
	at jnr.ffi.provider.jffi.AsmLibraryLoader.loadLibrary(AsmLibraryLoader.java:86)
	at jnr.ffi.provider.jffi.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:44)
	at jnr.ffi.LibraryLoader.load(LibraryLoader.java:392)
	at jnr.ffi.LibraryLoader.load(LibraryLoader.java:371)
	at org.lmdbjava.Library.<clinit>(Library.java:125)
	at org.lmdbjava.Env$Builder.open(Env.java:486)
	at org.lmdbjava.Env$Builder.open(Env.java:512)
	at com.baremaps.cli.Import.call(Import.java:116)
	at com.baremaps.cli.Import.call(Import.java:45)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
	at picocli.CommandLine.access$1200(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
	at picocli.CommandLine.execute(CommandLine.java:2058)
	at com.baremaps.cli.Baremaps.main(Baremaps.java:43)'
```

It appears I miss some native library, but I do do not know which one. I dropped https://jdbc.postgresql.org/download.html to the `lib` directory, just in case (didn't help).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDA2OTU0Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDEzOTY1NA==,incubator-baremaps,740139654,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-07T19:46:20Z,2020-12-07T19:46:20Z,"Ok, this is an issue associated with [LMDB](https://github.com/lmdbjava/lmdbjava) that will require some investigations (the binary does not seems to be loaded correctly). LMDB is supposed to work on windows but I must admit that I'm not using windows on a regular basis. I opened another issue to track this and will try to come up with a fix later this week. Thanks a lot for reporting this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDEzOTY1NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDIwNDgyNA==,incubator-baremaps,740204824,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-07T21:58:06Z,2020-12-07T21:58:06Z,"@bchapuis No problem. I was thinking that one next. I'll check too if there's something I could do by just adding binaries or maybe a C runtime or something.

I'm testing this on 64 bit Windows Server 2019. One thing to be aware of that it doesn't support Linux Docker images. I took deliberately the difficult option. :D","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDIwNDgyNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDIwOTE0Mw==,incubator-baremaps,740209143,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-07T22:07:09Z,2020-12-07T22:07:09Z,"@bchapuis I had both 32 and 64 bit Java runtime installed and the 64 bit one disabled. When I enabled it, loading succeeded. I also tested by enabling just the 64 bit Java and it worked (as expected, but wanted to make sure) &ndash; apart for having a duplicate key exception.

A few takes:
- If someone asks or searches, this is now documented here.
- I do not know if this possible to add checks based on architecture and loading or catch this particular native library exception and add a possible explanation so users would have easier time to solve this without hassle.

It's past midnight, but I probably try to produce maps tomorrow (<- edit: a bit later today, hah, have to always make the same mistake :)).

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDIwOTE0Mw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDQ2OTk4OQ==,incubator-baremaps,740469989,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-08T08:34:21Z,2020-12-08T08:34:21Z,"Out of curiosity, are you using [Windows Subsystem for Linux (WSL)](https://docs.microsoft.com/en-us/windows/wsl/install-win10)? I was very thrilled by this feature when it came out but I'm not really able to gauge its popularity.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDQ2OTk4OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDUyODYyNQ==,incubator-baremaps,740528625,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-08T10:19:54Z,2020-12-08T10:19:54Z,"@bchapuis It is somewhat popular and I have it installed on a desktop. I don't use it often, some do, but it depends on what they do. I just happened to start this on a temporary Windows Server 2019 installation so I might as well follow it through now.

My goal was to actually just to learn to produce vector tiles from `.osm` files and this looked like one way of doing it while I'm not that familiar with any of this. :)


Now that you bring this up, there is maybe one way to make using/cooperation easier. It might be of interest to some to replicate this using .NET, at least to people like me who are more comfortable with that, but I suppose the same type reasoning would work for other platforms (Python?) From this perspective this would be easier to me if:

1. If the scripts came just as `.sql` scripts to both create the database and basic ones to create the vector map tiles.
2. Note what does JTS do before the tables are loaded. So this can be replicated using language specific libraries (.NET examples [here](https://github.com/NetTopologySuite/NetTopologySuite) and [here (supports also producing vector tiles, I do not know about performance or quality](https://github.com/OsmSharp/core)).
3. Bulk load data to database in a way or another but cross-feeding on ideas in different platforms. I see LBDB used here, might be other options too.

Then the language specific part is more about synchronizing `.osm` files and bulk loading the database, which may be project dependent in any case. Then cooperation on creating more effective scripts and queries migh be the value add (also GDAL). This is a though I would like to try in the future. I don't know if this sort of an idea is interesting in general or if there is value add there. :) I see there is more development like web server and other features done or planned, but I would guess those too would be nice to have in more language/framework/platform particular way.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDUyODYyNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MTA2MzA0MA==,incubator-baremaps,741063040,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-08T21:29:49Z,2020-12-08T21:29:49Z,"Final update that generating vector tiles seemed to succeed. At least I got out `.pbf` files in a directory hierarch that corresponds to `/tiles/{z}/{x}/{y}.pbf` convention as described at https://docs.mapbox.com/archive/ios/maps/api/5.9.0/tile-url-templates.html. I used https://github.com/baremaps/baremaps/blob/master/examples/openstreetmap/config.yaml as the configuration file, so it may have the wrong postion regarding Luxemburg but probably doesn't invalidate the process other than they likely need to be considered too (how to consider it?). ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MTA2MzA0MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NDAxMjQ4Mg==,incubator-baremaps,744012482,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-13T14:03:31Z,2020-12-13T14:03:31Z,"One more added note, I got the Linux Docker container to run on Windows Server 2019. I installed Docker for Desktop and switched to Linux containers. I do not know why I couldn't get this to work first, may be related to https://github.com/OneGet/MicrosoftDockerProvider/pull/55 kind of issues. This may help someone who gets also an error running the Linux Docker image on Windows and somehow switching the container from Windows to Linux doesn't seem to work.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NDAxMjQ4Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NDI2ODE4Mg==,incubator-baremaps,744268182,140,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-14T08:24:07Z,2020-12-14T08:24:07Z,"Thanks a lot for looking into this. Yes, the `bounds` in the configuration file have to be changed according to the bounds of the input PBF file, otherwise, the generation will succeed but the vector tiles will be empty.

So if I understand correctly, #150 can be addressed by using the 64 bit Java runtime. I closed it for now, do not hesitate to reopen it if I miss-understood. 

I have only little experience with docker on Windows, is there something I could do when generating the images to make them work on windows more easily?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NDI2ODE4Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NTYzODI4Ng==,incubator-baremaps,745638286,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-15T23:48:18Z,2020-12-15T23:48:18Z,"@bchapuis I think it can be closed. I do knot know Java, but I think it would be possible to check the environment bitness and JVM bitness and if they are incompatible, issue a clear warning telling it &ndash; or maybe trying to load the another 32/64 version of the library.

I am not sure if there is anything you can make the Docker images work smoother apart them being Windows machines. I could imagine it's not worth the hassle since Docker for Desktop has worked just fine for me. It just happened that I used Server 2019 and got into trouble, partly because I'm not a Docker guru (especially not on Windows). Then I chose to go the non-Docker route and got into trouble again. The upside is that now there's some public documentation of the trail.

I tried a bit of my hand on OSM processing with .NET. I think I try replicate the contents of the tables your system produce. To get a better feeling of this data and processing times. If I get far enough, I most likely put the code to GitHub. In that case I think I would go for a more like single-binary commandline kind (ASCII graphics?) of an approach (that loads the scripts as-is and the program only cares about types and parameter names as required by the protocols, this way one can load data to other DBs also by re-creating the scripts).

Do tell if you if you this could be something worth your time. In that case I put code to GH earlier and may ask something, though my intention isn't to squeeze your valuable time. Here's something I dabbled during the few evenings. I'm not sure if that's correct, i.e. all ways in Liechtenstein are lines? Makes sense but can't be sure with my mad skillz. :P This is of course unoptimized (and copy-pasta formatting bad).


```
using(var fileStream = new FileInfo(""../../../../data/liechtenstein-latest.osm.pbf"").OpenRead())
            {
                var source = new PBFOsmStreamSource(fileStream);
                Polygonizer p = new Polygonizer(true);
                //WKBWriter wKBWriter
                const int OpenStreetMapProjection = 4326;
                GeometryFactory geometryFactory = new GeometryFactory(new PrecisionModel(PrecisionModels.Floating), srid: OpenStreetMapProjection);

                var allNodesLookup = source.Where(i => i.Type == OsmGeoType.Node).Select(i => i as Node).ToDictionary(key => key.Id, val => val);
                var allWays = source.Where(i => i.Type == OsmGeoType.Way).Select(i => i as Way).ToList();
                var allRelations = source.Where(i => i.Type == OsmGeoType.Relation).Select(i => i as Relation).ToList();

                //Could be parallel (and LINQ and alltogether do better with CPU cache)...
                foreach(var way in allWays)
                {
                    //The order must be preserved with ways, see https://wiki.openstreetmap.org/wiki/Way
                    //and see polygon geometry case. The same with relations? Cache coordinates if same ones
                    //are used, what's this with nullable IDs? Sure a flaggable error?
                    var wayNodeCoordinates = way.Nodes
                        .Select(i => new Coordinate(allNodesLookup[i].Latitude.GetValueOrDefault(), allNodesLookup[i].Longitude.GetValueOrDefault()))
                        .ToArray();

                    Geometry geometry;
                    if(wayNodeCoordinates.Length > 3 && wayNodeCoordinates[0] == wayNodeCoordinates[wayNodeCoordinates.Length - 1])
                    {
                        //If the first and last coordinates are the same and there are more than three nodes, must be a polygon/polyline.
                        geometry = geometryFactory.CreatePolygon(wayNodeCoordinates);
                    }
                    else if(wayNodeCoordinates.Length > 1)
                    {
                        //If more than three coordinates but first and last are not the same, then this is a line.
                        geometry = geometryFactory.CreateLineString(wayNodeCoordinates);
                    }
                    else
                    {
                        //Malformed cases?
                    }
                }
            }

            //No polygons in Liechenstein ways?
```

&lt;edit reading through https://github.com/OsmSharp/core/blob/c62b6d445187e15df35a310bac72e6300d8219d2/src/OsmSharp.Geo/DefaultFeatureInterpreter.cs, interesting, interesting (while not fastest?).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NTYzODI4Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NjI1NjYzOQ==,incubator-baremaps,746256639,140,NA,UsulPaul,7231322,,,NA,2020-12-16T13:03:37Z,2020-12-16T13:03:37Z,"Hi @bchapuis,

I am trying to use baremaps to serve  tiles from a postgis database and I cannot connect to the database. I get a message saying that  `_user_ ` and ` _password_ ` is not a recognized command. I have tried with `"""" ''` and without, removed the `?`. The credentials are definitely correct as I am currently connected to the database from QGIS. Also, the yaml files is not seen for some reason, although I added the path. I am no coding expert, but I do understand GIS very well. I enjoy baremaps as it seems very simple to use, compared to other tools that do a similar thing.  Any pointers will be highly appreciated.

`C:\Users\frant>baremaps serve --
database='jdbc:postgresql://127.0.0.1:5432/central_america&user=postgres&password=pjQK5erhCci4' config='C:\wgetdown\baremaps\config.yaml' --watch-changes`
**`Missing required option: '--config=YAML'`**
**`'user' is not recognized as an internal or external command,operable program or batch file.
'password' is not recognized as an internal or external command, operable program or batch file.`**

![image](https://user-images.githubusercontent.com/7231322/102351865-cdd44780-3faf-11eb-9e95-504b1fe8cde0.png)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NjI1NjYzOQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/140,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0Njc5MTk1OQ==,incubator-baremaps,746791959,140,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-16T18:34:39Z,2020-12-16T18:34:39Z,"@frantiucalexandru I think you need to see that `--` is next to `database` (there's a space now) and remove the `=` signs from the command-value pairs. E.g here's what worked for me `java -cp ""C:\baremaps\lib\*"" com.baremaps.cli.Baremaps export --database 'jdbc:postgresql://localhost:5432/baremaps?allowMultiQueries=true&user=baremaps&password=baremaps'  --config 'config.yaml' --repository 'tiles/'`.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0Njc5MTk1OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/150,https://api.github.com/repos/apache/incubator-baremaps/issues/150,incubator-baremaps,758798434,150,LMDB error on Windows,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2020-12-07T19:48:04Z,2020-12-14T08:26:31Z,"```
[INFO ] 2020-12-07 16:10:20.906 [main] Import - 16 processors available
java : Exception in thread ""main"" java.lang.UnsatisfiedLinkError: unknown
At line:14 char:1
+ java -cp ""C:\baremaps\lib\*"" com.baremaps.cli.Baremaps import --datab ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (Exception in th...kError: unknown:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
	at jnr.ffi.provider.jffi.NativeLibrary.loadNativeLibraries(NativeLibrary.java:93)
	at jnr.ffi.provider.jffi.NativeLibrary.getNativeLibraries(NativeLibrary.java:71)
	at jnr.ffi.provider.jffi.NativeLibrary.getSymbolAddress(NativeLibrary.java:50)
	at jnr.ffi.provider.jffi.NativeLibrary.findSymbolAddress(NativeLibrary.java:60)
	at jnr.ffi.provider.jffi.AsmLibraryLoader.generateInterfaceImpl(AsmLibraryLoader.java:138)
	at jnr.ffi.provider.jffi.AsmLibraryLoader.loadLibrary(AsmLibraryLoader.java:86)
	at jnr.ffi.provider.jffi.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:44)
	at jnr.ffi.LibraryLoader.load(LibraryLoader.java:392)
	at jnr.ffi.LibraryLoader.load(LibraryLoader.java:371)
	at org.lmdbjava.Library.<clinit>(Library.java:125)
	at org.lmdbjava.Env$Builder.open(Env.java:486)
	at org.lmdbjava.Env$Builder.open(Env.java:512)
	at com.baremaps.cli.Import.call(Import.java:116)
	at com.baremaps.cli.Import.call(Import.java:45)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
	at picocli.CommandLine.access$1200(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
	at picocli.CommandLine.execute(CommandLine.java:2058)
	at com.baremaps.cli.Baremaps.main(Baremaps.java:43)'
```

It appears I miss some native library, but I do do not know which one. I dropped https://jdbc.postgresql.org/download.html to the `lib` directory, just in case (didn't help).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/150/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/150,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDIwOTY1OA==,incubator-baremaps,740209658,150,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2020-12-07T22:08:17Z,2020-12-07T22:08:17Z,"I was too enthusiastic first and didn't notice this. Anyhow, solved and documented at https://github.com/baremaps/baremaps/issues/140#issuecomment-740209143. :)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0MDIwOTY1OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/151,incubator-baremaps,769721343,151,Import StreamProgress over 100%,suur,7937049,Agu Suur,,CLOSED,2020-12-17T08:57:30Z,2021-01-12T17:00:06Z,"Hello,

I am trying to import planet.pbf (55GB) using the OSMVecto example. According to log output, the import is at over 1800%:
```
[INFO ] 2020-12-17 08:51:28.203 [main] StreamProgress - Progress: 1850.24%
```
I'm running out of disk space since the import seems to require a lot (currently ~1.3TB and growing) and it's difficult to estimate the disk requirements for the full import with >100% progress indicator.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/151/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzMyMTMzMw==,incubator-baremaps,747321333,151,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-17T09:28:37Z,2020-12-17T09:28:37Z,"Thanks a lot for reporting this, there is clearly a problem with the progress logger that need to be corrected. Until now, Baremaps has been developed and tested at a country level (switzerland) with PFB files from geofabrick (which is my most pressing need). I scheduled some planet wise tests with the OSM exports in January, so you are clearly ahead of me and your input is very valuable ;)

Could you tell me a little bit more about your setup? Are you running baremaps in docker, is it a could hosted setup, or a bare metal server? Also, if you have time to dig in this issue, your inputs, propositions and patches are more than welcome. Otherwise, I will probably come up with some corrections in January.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzMyMTMzMw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzMyNzc1Nw==,incubator-baremaps,747327757,151,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-17T09:41:03Z,2020-12-17T09:41:03Z,"Also, do you know at which stage of the import you are? The first stage being the creation of an LMDB cache for the nodes and ways. The second stage being the creation of the geometries and the import in the database. This should appear in the logs.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzMyNzc1Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzMzMjE0OQ==,incubator-baremaps,747332149,151,NA,suur,7937049,Agu Suur,,NA,2020-12-17T09:49:50Z,2020-12-17T09:49:50Z,"I'm using the OSMVecto example which runs the `import.sh` in docker. I'm running 12c/24t on bare metal with 128GB RAM and an NVME SSD. I had to cancel the import at the moment because of disk space concerns.

The import stage was
```
baremaps import \
        --database ""jdbc:postgresql://localhost:5432/osmvecto?allowMultiQueries=true&user=osmvecto&password=osmvecto"" \
        --file ""${osm_file}""
```
Unfortunately I already removed the container/volume and related data to regain disk space, but I will re-run the import overnight to get more insight into the logs.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzMzMjE0OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzM0MDAzNg==,incubator-baremaps,747340036,151,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-17T10:04:45Z,2020-12-17T10:04:45Z,"Nice, I would love to have this kind of setup at hand ;) I managed to get a machine with 12CPUs and 64GB of RAM but the disk space, but the disk space is not sufficient for a planet import. My plan is to perform the tests on an AWS Aurora/Fargate setup, but I'm worried to explode my side project budget with a single run. I will keep you informed and, please, do not hesitate to report additional issues.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0NzM0MDAzNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0ODYwNjEzOA==,incubator-baremaps,748606138,151,NA,suur,7937049,Agu Suur,,NA,2020-12-20T13:12:21Z,2020-12-20T13:12:21Z,"I ran the `planet.osm.pbf` again and the issue with StreamProgress appears with both first and second stages.

I also ran a country extract to estimate disk requirements for the whole planet and a 603MB PBF expanded into a 34GB Postgres DB. Extrapolating this to the whole planet, a 55GB PBF would result in a 3.2TB DB and unfortunately I don't have that kind of space at the moment.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc0ODYwNjEzOA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc1MTUyMDUxNw==,incubator-baremaps,751520517,151,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2020-12-27T21:55:28Z,2020-12-27T21:55:28Z,"Two more data points: the 2.2MB pbf for Liechtenstein produces a 102MB database and the 336MB pbf for Switzerland produces a 12GB database. I guess that the tags column can get pretty massive as it is not compressed with a dictionary. According to the pricing page for AWS Aurora Serverless, the storage rate is $0.10 per GB-month, which remains relatively cheap to host a 3 to 4 TB database. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc1MTUyMDUxNw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/151,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc1Njc1ODg1NA==,incubator-baremaps,756758854,151,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-01-08T13:35:59Z,2021-01-08T13:35:59Z,"It may be interesting to test the zson extension that compresses JSONB. I guess that a lot of the tags are redundant.

https://github.com/postgrespro/zson

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc1Njc1ODg1NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/159,https://api.github.com/repos/apache/incubator-baremaps/issues/159,incubator-baremaps,785389506,159,service URL should be more parametrable,danduk82,2493436,Andrea Borghi,,CLOSED,2021-01-13T19:39:59Z,2023-11-20T20:36:47Z,"To deploy baremaps-server in an environment with complex http routing, It would be probably beneficial to be able to parametrize the service route instead of having it hardcoded as `/tiles`. 

See this point: https://github.com/baremaps/baremaps/blob/master/baremaps-server/src/main/java/com/baremaps/server/StyleBuilder.java#L54
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/159/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/160,https://api.github.com/repos/apache/incubator-baremaps/issues/160,incubator-baremaps,785766667,160,Create a serve command for production use cases,danduk82,2493436,Andrea Borghi,,CLOSED,2021-01-14T07:50:36Z,2021-04-10T20:18:40Z,"I just made a few tests on my laptop to check how many tiles/s baremaps can handle in `serve` mode. I used the lichtenstein example ""as is"". In my tests baremaps cannot handle more than 10rps (requests per second). If used with more (say 12rps) the success rate drastically drops to 20-25 % and we get 75% of failed connections.

This behaviour is consistent with the cpu which was completely used, and probably it was no more possible to create new connections with the server.

up to 10 rps we get:
```
['baremap-10rps.log']
response time [ms] statistics for test : '10rps' 
mean : 1389.6041366666666
median : 388.16700000000003
min-max-range : 9150.050000000001
percentage-of-http-200 : 100.0
percentage-of-http-errors : 0.0
percentage-of-network-errors : 0.0
percentile90 : 4911.853500000011
percentile95 : 6935.2443
std : 2162.730614611565
```

and with 12rps:

```
['baremap-12rps.log']
response time [ms] statistics for test : '12rps' 
mean : 2418.637625
median : 2029.3229999999999
min-max-range : 9834.434
percentage-of-http-200 : 24.444444444444443
percentage-of-http-errors : 0.0
percentage-of-network-errors : 75.55555555555556
percentile90 : 5562.04
percentile95 : 6381.597750000001
std : 2206.189541154367
```


the test setup (not optimal) is my laptop pc:
- ubuntu 18.04 64bit
- CPU
- postgresql 12 + postgis installed on local machine
- baremaps v.0.3.4

to test I used [yandex-tank](https://github.com/yandex/yandex-tank) with the input files provided as attachement [yandex-config.zip](https://github.com/baremaps/baremaps/files/5813027/yandex-config.zip). To run yandex, just do 
```bash
docker run \
    -v $(pwd):/var/loadtest \
    --net host \
    -it \
    --entrypoint /bin/bash \
    direvius/yandex-tank
```

and in the container:
```bash
yandex-tank -c shoot-baremaps.ini baremaps.ammo
```



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/160/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/160,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NDAwNzQwMw==,incubator-baremaps,774007403,160,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-05T12:36:11Z,2021-02-05T12:36:11Z,"Thanks a lot for reporting this, I have been able to reproduce the load tests pretty easilly. When profiling the application with VisualVM it, it can be noticed that postgresql seems to be the bottleneck here. 

I also noticed a minor issue with some blocking code that should not be executed by the thread pool of the server. However, I don't notice a major difference in terms of performance when executing this version.

https://github.com/baremaps/baremaps/compare/http-throughput

In general, I think that it is better to generate a static tileset (`export` mode) than serve tiles dynamically (`serve` mode). The `serve` mode has been created to preview the tiles and improving the developper experience.

That being said, we may improve the serve mode dramatically by introducing some caching. For instance, it would be nice to use [Caffeine](https://github.com/ben-manes/caffeine) to cache vector tiles in-memory and relieve the database from some traffic. What do you think?


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NDAwNzQwMw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/160,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NDAxNTcwNw==,incubator-baremaps,774015707,160,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-05T12:54:17Z,2021-02-05T12:54:17Z,"It looks like Armeria already uses Caffeine for caching. At least, there is a RouteCache available in the code base and it is worth checking if it can be enabled.

https://github.com/line/armeria/blob/bd7fe49f6999af1d1c26b19dd7a220008c7ea202/core/src/main/java/com/linecorp/armeria/server/RouteCache.java
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NDAxNTcwNw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/160,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MjA1MTkwNA==,incubator-baremaps,782051904,160,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-19T12:43:51Z,2021-02-19T12:43:51Z,"@danduk82 I recently renamed the old `serve` command into `preview` to clarify that it should not be used in production. The intent of this command is to accelerate the development of a stylesheet. The configuration is loaded and parsed for every tile, hence enabling to observe configuration changes in the browser without refreshing the window. 

I also started working on a new `serve` command in the `http-server` branch that will provide production grade performance. The idea is to load the configuration only once and to cache tiles in memory with caffeine.

The caching strategy can be tuned by specifying a [caffeine spec](https://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.1.0/com/github/benmanes/caffeine/cache/CaffeineSpec.html) (`cache` field) in the configuration file:

```
id: OpenStreetMapVecto
server:
  host: localhost
  port: 9001
  cache: maximumWeight=100000000
```

It would be interesting to stress the server and see how much it improves performance.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MjA1MTkwNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/160,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5NjU4MA==,incubator-baremaps,817196580,160,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-10T20:14:53Z,2021-04-10T20:14:53Z,We now have a serve command that should improve performence a bit.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5NjU4MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/161,https://api.github.com/repos/apache/incubator-baremaps/issues/161,incubator-baremaps,796305875,161,Issue importing data and serving tiles,jerryplin,39535077,,,CLOSED,2021-01-28T19:52:16Z,2021-01-28T23:51:14Z,"I was able to eventually get through the steps outlined in https://www.baremaps.com/examples/openstreetmap/ to show a map of Liechtenstein with the Blueprint style.

I've been trying to get this to work with Switzerland and the Openstreetmap-vecto style. When I import the switzerland-latest.osm.pbf file, I encountered exceptions such as:

[WARN ] 2021-01-28 11:20:12.881 [ForkJoinPool.commonPool-worker-83] GeometryHandler - Unable to build the geometry for relation 1713904
java.lang.NullPointerException: null
        at org.locationtech.jts.algorithm.locate.IndexedPointInAreaLocator.locate(IndexedPointInAreaLocator.java:88) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.EdgeRing.isInRing(EdgeRing.java:261) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.EdgeRing.findEdgeRingContaining(EdgeRing.java:87) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.HoleAssigner.findShellContaining(HoleAssigner.java:106) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.HoleAssigner.assignHoleToShell(HoleAssigner.java:78) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.HoleAssigner.assignHolesToShells(HoleAssigner.java:72) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.HoleAssigner.assignHolesToShells(HoleAssigner.java:40) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.Polygonizer.polygonize(Polygonizer.java:255) ~[jts-core-1.17.1.jar:?]
        at org.locationtech.jts.operation.polygonize.Polygonizer.getGeometry(Polygonizer.java:188) ~[jts-core-1.17.1.jar:?]
        at com.baremaps.importer.geometry.GeometryHandler.handle(GeometryHandler.java:104) ~[baremaps-importer-0.3.4.jar:?]
        at com.baremaps.osm.domain.Relation.accept(Relation.java:47) ~[baremaps-osm-0.3.4.jar:?]
        at com.baremaps.osm.EntityHandler.accept(EntityHandler.java:20) ~[baremaps-osm-0.3.4.jar:?]
        at com.baremaps.osm.EntityHandler.accept(EntityHandler.java:15) ~[baremaps-osm-0.3.4.jar:?]
        at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
        at java.util.ArrayList.forEach(ArrayList.java:1541) [?:?]
        at com.baremaps.osm.BlockEntityHandler.handle(BlockEntityHandler.java:27) [baremaps-osm-0.3.4.jar:?]
        at com.baremaps.osm.pbf.DataBlock.handle(DataBlock.java:42) [baremaps-osm-0.3.4.jar:?]
        at com.baremaps.osm.BlockHandler.accept(BlockHandler.java:15) [baremaps-osm-0.3.4.jar:?]
        at com.baremaps.osm.BlockHandler.accept(BlockHandler.java:9) [baremaps-osm-0.3.4.jar:?]

and then error messages such as:

[WARN ] 2021-01-28 11:20:32.414 [ForkJoinPool.commonPool-worker-123] GeometryHandler - Unable to build the geometry for relation 7521607
java.lang.NullPointerException: null
[WARN ] 2021-01-28 11:20:37.100 [ForkJoinPool.commonPool-worker-15] GeometryHandler - Unable to build the geometry for relation 5503310
java.lang.NullPointerException: null

It's unclear to me whether the import job finished despite the errors, and perhaps gave up after encountering the errors. Either way, when I try to run the server, I get exceptions such as:

[ERROR] 2021-01-28 11:47:05.277 [armeria-common-worker-epoll-2-6] TileService - org.postgresql.util.PSQLException: ERROR: relation ""osm_ways_z12"" does not exist
  Position: 320
[ERROR] 2021-01-28 11:47:05.276 [armeria-common-worker-epoll-2-5] TileService - org.postgresql.util.PSQLException: ERROR: relation ""osm_relations_z12"" does not exist
  Position: 320
[ERROR] 2021-01-28 11:47:05.276 [armeria-common-worker-epoll-2-4] TileService - org.postgresql.util.PSQLException: ERROR: relation ""osm_water_polygons"" does not exist
  Position: 335

I believe something similar happened when I tried to import us-west. My larger goal is to import the OSM data for the world.

On a tangential note, I have used imposm3 with some success before; could Baremaps' server be made to work with imposm imports? (e.g. specifying an appropriate mapping file)

Thank you.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/161/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/161,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc2OTQzNDE0Nw==,incubator-baremaps,769434147,161,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-01-28T22:14:25Z,2021-01-28T22:14:25Z,"```
[WARN ] 2021-01-28 11:20:12.881 [ForkJoinPool.commonPool-worker-83] GeometryHandler - Unable to build the geometry for relation 1713904
```

The warnings displayed during the import are due to a few complex relations in OpenStreetMap that are not easily translatable into valid geometries with the [JTS Polygonizer](https://github.com/baremaps/baremaps/blob/d99d3d59fb56a4a425c552b61ad799aab2f0ee8c/baremaps-importer/src/main/java/com/baremaps/importer/geometry/GeometryHandler.java#L102). The Poligonizer throws a NullPointerException) which does not stop the import procedure, hence the choice of displaying a warning. The affected relations get saved in the database with a geometry set to null and I hope that the log (which contains the ids) will help at fixing these corner cases in the future. ;)

```
[ERROR] 2021-01-28 11:47:05.277 [armeria-common-worker-epoll-2-6] TileService - org.postgresql.util.PSQLException: ERROR: relation ""osm_ways_z12"" does not exist
Position: 320
```

Here, `osm_ways_z12` corresponds to a materialized view used by openstreetmap-vecto to simplify geometries at a lower zoom levels (_z12) in order to improve performences. You can take a look at the [import script](https://github.com/baremaps/openstreetmap-vecto/blob/e29d2d0269c91bd1ff3e5c9cab70bcb5522c71be/import.sh#L85) and at the [materialized view file](https://github.com/baremaps/openstreetmap-vecto/blob/main/queries/osm_create_views.sql) to create the missing views and indexes.

Any data stored in postgis can be served with baremaps, so I guess that it should be possible to use imposm3 or osm2psql. Our goal with Baremaps is to create an cohesive pipeline from one end (import) to the other (export), so that it can easily be used on a desktop and then deployed on the cloud.

Our roadmap also includes the creation of a world map, so any feedback or bug fix is welcome. For now, our main limitation is infrastructure cost, i.e., a database for the whole world probably weight around 3-4TB.



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc2OTQzNDE0Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/161,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc2OTQ3NDc5OQ==,incubator-baremaps,769474799,161,NA,jerryplin,39535077,,,NA,2021-01-28T23:51:13Z,2021-01-28T23:51:13Z,"I didn't realize there was a separate import script. After I ran various lines manually, I am able to reproduce the map on the demo page. Thanks!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc2OTQ3NDc5OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/164,https://api.github.com/repos/apache/incubator-baremaps/issues/164,incubator-baremaps,798176232,164,Add allow and block lists for tags and entities,danduk82,2493436,Andrea Borghi,,OPEN,2021-02-01T09:49:43Z,2023-11-20T20:47:27Z,"**As** a data integrator
**I want to** import only the data that my style requires
**Because** I want to reduce the costs of storage and the import time

**use case**
I want to create a style for a basemap, that does not contain the buildings, but on a large dataset (planet OSM). I would like then to add a blacklist (in the config file?) where I list the tags related to buildings, so that in the end they are not imported in the PG database.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/164/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/164,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3MTQ0MDAzOA==,incubator-baremaps,771440038,164,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-02T07:49:29Z,2021-02-02T07:49:29Z,"Given the size of the database for a planet import this is a very good idea. Filtering entities is indeed needed and we may also want to import or exclude some tags. Any idea on how this feature may be configured with the CLI? For instance with a file:

```
--allow-entities tags.txt
--block-entities tags.txt
```

Or with a list of arguments:

```
--allow-entities tag1
--allow-entities tag2
```

We may have something similar for tags:

```
--allow-tags 
--block-tags
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3MTQ0MDAzOA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/164,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3MjU0Mjk3NQ==,incubator-baremaps,772542975,164,NA,danduk82,2493436,Andrea Borghi,,NA,2021-02-03T14:17:28Z,2021-02-03T14:17:28Z,"I think whitelist and blacklist should be mutually exclusive. Otherwise I like the idea of having them in a dedicated file, or directly in the config.yaml file?
I think if you use baremaps in something like aws-batch, it would be great that it allows to use also an http url to download the file (such as it is already done with the pbf for import). E.g `--whitelist https://my-s3-bucket.s3.amazonaws.com/my-style-whitelist.yaml`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3MjU0Mjk3NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/164,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3Mzk5ODA2NA==,incubator-baremaps,773998064,164,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-05T12:16:17Z,2021-02-05T12:16:17Z,"That's a good point. More generally, this calls for tinking about the configuration files. For now, the `serve` and `export` command use a single configuration format that addresses two problems: creating the vector tiles and styling the vector tiles. This approach is not ideal in terms of separation of concerns, as a set of vector tiles may be used with different styleseheet. Adding configuration files to the import command is a good idea, but I'm worried that It may become a bit confusing for the users.

We may decide to introduce multiple configuration files to improve the separtion of concern. For instance, the import command may be modified as follow:

```
baremaps export \
  --database 'jdbc:postgresql://...' \
  --tileset 'tileset.yaml' \
  --stylesheet 'stylesheet.yaml'
```

The import command may have a transformation flag that enables to specify the allow/block lists and additional informations regarding the schema (table names, column names, etc.).

```
baremaps import \
  --database 'jdbc:postgresql://...' \
  --transformation 'transformation.yaml'
```

What do you think? What would be the most suitable name for the flag in the import command (`--tranformation`, `--mapping`, `--schema`, or something else).


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3Mzk5ODA2NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/165,https://api.github.com/repos/apache/incubator-baremaps/issues/165,incubator-baremaps,801970511,165,Illegal reflective access by org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy (file:/opt/baremaps/lib/lmdbjava-0.8.1.jar) to field java.nio.Buffer.address,nicolas-heigvd,35065252,,,CLOSED,2021-02-05T08:40:43Z,2021-02-09T16:02:15Z,"Hi there,

I'm following the OSM tutorial, and at this stage: 

```
$ baremaps import \
>   --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' \
>   --file 'https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf'
```

I faced these warnings:

```
[INFO ] 2021-02-05 09:31:14.555 [main] Import - 56 processors available
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy (file:/opt/baremaps/lib/lmdbjava-0.8.1.jar) to field java.nio.Buffer.address
WARNING: Please consider reporting this to the maintainers of org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
[INFO ] 2021-02-05 09:31:14.777 [main] HttpBlobStore - Read https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf
```

Just wondering if it's normal?

Environment:
```
Ubuntu 18.04.5 LTS 5.4.0-65-generic x86_64 GNU/Linux
```

Release used: https://github.com/baremaps/baremaps/releases/tag/v0.3.4 
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/165/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/165,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3Mzk2OTc5OA==,incubator-baremaps,773969798,165,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-05T11:15:47Z,2021-02-05T11:15:47Z,"This issue due to a violation of encapsulation by lmdbjava. The warning appears in Java 9 and beyond, and I think it can simply be ignored for now.

https://github.com/lmdbjava/lmdbjava/issues/130

LMDB is the fastest key value store I found to create the cache when importing OpenStreetMap data. If this warning becomes an error in the future release of Java, I guess we will need to find an alternative (e.g. [LevelDB](https://github.com/google/leveldb), [RocksDB](https://rocksdb.org/) or [MVStore](https://www.h2database.com/html/mvstore.html)).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3Mzk2OTc5OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/168,https://api.github.com/repos/apache/incubator-baremaps/issues/168,incubator-baremaps,804602700,168,Odd coordinates after importing maps,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,CLOSED,2021-02-09T14:28:49Z,2021-02-13T13:32:02Z,"Hi!

I noticed a peculiar thing with coordinates when running baremaps to PostgreSQL database and thought to ask about the purpose or if there's something strange here.

The setup is:
- Custom PostgreSQL.
- Baremaps 0.32.
- Windows Server 2019, 64-bit, fi-FI.

Not sure if a language issue. If I change language settings, Baremaps stops working (LMDB errors with code 112, the ava wrapper does not understand it, Baremaps stops). Maybe I check a bit later.

As for an example for https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf
```
SELECT * FROM public.osm_ways WHERE id = 294942376;
SELECT * FROM public.osm_nodes WHERE id IN (2985838396, 2985838357, 2985838346, 2985838390, 2985838517, 2985838501, 2985838396);
SELECT ST_AsText(geom) FROM public.osm_nodes WHERE id = 2985838396;
SELECT ST_SRID(geom) FROM public.osm_nodes WHERE id = 2985838396;
SELECT ST_AsText(geom) FROM public.osm_ways WHERE id = 294942376;
```

to a database that is generated from `https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf`. It's that the coordinates look very large. Here are the results from the SQL queries


**id**|**version**|**uid**|**timestamp**|**changeset**|**tags**|**nodes**|**geom**
:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:
294942376|1|0|2014-07-29T11:56:56|0|""building""=>""yes""|[2985838396, 2985838357, 2985838346, 2985838390, 2985838517, 2985838501, 2985838396]|0103000020110F000001000000070000001C92315647273041BF750E0517C45641EA7078054B27304113BCC09010C45641148CE30540273041FE3D2B2C10C456417DDC054F3E273041ACE9432E13C456411B446521382730418707BCF612C45641E414FC2836273041B0C2E46716C456411C92315647273041BF750E0517C45641

**id**|**version**|**uid**|**timestamp**|**changeset**|**tags**|**lon**|**lat**|**geom**
:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:
2985838346|1|0|2014-07-29T11:56:50|0|NULL|9.509781400000001|47.1582123|0101000020110F0000148CE30540273041FE3D2B2C10C45641
2985838357|1|0|2014-07-29T11:56:50|0|NULL|9.509880200000001|47.1582219|0101000020110F0000EA7078054B27304113BCC09010C45641
2985838390|1|0|2014-07-29T11:56:51|0|NULL|9.509766|47.1582858|0101000020110F00007DDC054F3E273041ACE9432E13C45641
2985838396|1|0|2014-07-29T11:56:51|0|NULL|9.5098471|47.1583796|0101000020110F00001C92315647273041BF750E0517C45641
2985838501|1|0|2014-07-29T11:56:52|0|NULL|9.5096928|47.158364600000006|0101000020110F0000E414FC2836273041B0C2E46716C45641
2985838517|1|0|2014-07-29T11:56:53|0|NULL|9.5097105|47.158280500000004|0101000020110F00001B446521382730418707BCF612C45641

```
st_astext POINT(1058631.33669389 5967964.07900757)
st_srid 3857
POLYGON((1058631.33669389 5967964.07900757,1058635.02136903 5967938.26176359,1058624.02300334 5967936.69013929,1058622.30868319 5967948.72289507,1058616.13045145 5967947.8552264,1058614.16009646 5967961.62333743,1058631.33669389 5967964.07900757))
```

For instance, taking one point from there should be at https://www.openstreetmap.org/node/2985838396 and the geometry it produces probbly should be `POLYGON((9.5098471 47.1583796,9.5098802 47.1582219,9.5097814 47.1582123,9.509766 47.1582858,9.5097105 47.1582805,9.5096928 47.1583646,9.5098471 47.1583796))` instead of that with the odd coorginates. At least this is how it looks to me when I plug the polygon, say, to http://arthur-e.github.io/Wicket/sandbox-gmaps3.html.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/168/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/168,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjAyNjIwOQ==,incubator-baremaps,776026209,168,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-09T15:32:05Z,2021-02-09T15:32:05Z,"Regarding the first issue, are you referring to the language settings of windows (e.g. english, other language)? Baremaps has not been extensively tested on Windows, so any help to improve the current status and fix issues is welcome. ;)

Regarding the second issue, the default projection used by Baremaps to create geometries is WebMercator (EPSG:3857), hence the different coordinate system. If you want to import the data with another projection (e.g. longitude, latitude), you can add the flag `--srid 4326` to your import command. By doing so, Baremaps with use the [WGS 84](https://spatialreference.org/ref/epsg/wgs-84/) projection when importing the data into Postgis.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjAyNjIwOQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/168,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjA1OTkwMw==,incubator-baremaps,776059903,168,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2021-02-09T16:19:32Z,2021-02-09T16:19:32Z,"@bchapuis I don't recognize the coordinates. It looks to me `1058631.33669389 5967964.07900757` on the polygon is quite a leap from the Node coordinates that look look normal (I have not looked in the code if it does anything to them without that command line). I don't understand how that could happen without a bug somewhere: in Baremaps code or in my brain when I try to think that shouldn't it be basically the same. :)

Sure, I thought about trying this again now that I had a good moment to go again.

I add here, wrongly (but better than not), the Docker image does not work in Windows without mapping the Postgresql data directory to some existing, empty Windows directory. E.g. one needs to do something like `docker run --name baremaps --publish 5432:5432 --volume ""c:\baremapsdata:/var/lib/postgresql"" "" -e POSTGRES_DB=baremaps -e POSTGRES_USER=baremaps -e POSTGRES_PASSWORD=baremaps -d baremaps/postgis:latest`. I don't remember the error now, but Postgresql can't write the transaction log (WAL) and complains about it. That error itself isn't visible unless one attaches (`--attach`) when starting the Docker.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjA1OTkwMw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/168,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjA3Nzk4Mg==,incubator-baremaps,776077982,168,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-09T16:47:24Z,2021-02-09T16:47:24Z,"> @bchapuis I don't recognize the coordinates. It looks to me `1058631.33669389 5967964.07900757` on the polygon is quite a leap from the Node coordinates that have normal looking coordinates (I have not looked in the code if it does anything to them without that command line). I don't understand how that could happen without a bug somewhere: in Baremaps code or in my brain when I try to think that shouldn't it be basically the same. :)

You may get a better understanding of what's happening by looking at the following coordinate transformation. 
https://epsg.io/transform#s_srs=4326&t_srs=3857&x=9.5098472&y=47.1583797

Baremaps reproject the EPSG:4326 (longitude/latitude) coordinates into EPSG:3857 (WebMercator) when importing data. As you can see, the node mentionned is transformed correctly: (9.5098471, 47.1583796) in EPSG:4326 becomes (1058631.33669389, 5967964.07900757) in EPSG:3857.
https://www.openstreetmap.org/node/2985838396
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjA3Nzk4Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/168,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjA4MzQ1MA==,incubator-baremaps,776083450,168,NA,veikkoeeva,5158694,Veikko Eeva,veikko_e@hotmail.com,NA,2021-02-09T16:55:05Z,2021-02-09T16:55:05Z,"@bchapuis I see! I think I should have added `SELECT ST_AsText(geom) FROM public.osm_nodes WHERE id = 2985838396;` to that list I ran and so I would have seen this happen, it just threw be off to see the `lon` and `lat` but not `srid` (which is embedded in `geom`). Thanks!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3NjA4MzQ1MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/173,https://api.github.com/repos/apache/incubator-baremaps/issues/173,incubator-baremaps,809160591,173,Import data from IGN DB Topo in shapefiles format,yhilem,13407261,Youcef HILEM,,CLOSED,2021-02-16T09:58:06Z,2021-02-16T16:57:50Z,"Hi,
Thanks for this very good and interresting project.
I want import data in shapefile format from IGN DB Topo (https://geoservices.ign.fr/documentation/diffusion/telechargement-donnees-libres.html#bd-topo). 
Since 1 January 2021, all public data (vector and ortho-images) from the National Institute of Geographic and Forest Information (IGN) are free and accessible free of charge (https://www.actuia.com/english/the-igns-public-data-relating-to-topography-relief-and-visualization-of-the-territory-are-free-and-open-to-the-public/)

Cdt
Youcef HILEM","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/173/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/173,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3OTkwMzY5NQ==,incubator-baremaps,779903695,173,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-16T15:16:29Z,2021-02-16T15:16:29Z,"Interesting, thank you for the pointer. The ftp server seems momentanely down (I get the following message: There was a problem connecting to the server ""ftp3.ign.fr""). I will try again later.

I guess that the best way to proceed would be to use a tool like `ogr2ogr` to import the shapefiles from IGN into postgis in a webmercator projection (EPSG:3857). I added an exemple to import the shapefiles from naturalearth in postgis in the documentation.

https://github.com/baremaps/baremaps/blob/main/docs/examples/naturalearth/index.md#working-with-shapefiles

Once the data is imported in postgis, it should be possible to write a configuration file for baremaps that query the table containing the imported data. Something like:

```
id: myconfig
layers:
  - id: mylayer
    type: geometry
    queries:
      - minZoom: 0
        maxZoom: 5
        sql: SELECT id, hstore(mytable.*) as tags, geom FROM mytable
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3OTkwMzY5NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/173,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3OTk3MjAzOA==,incubator-baremaps,779972038,173,NA,yhilem,13407261,Youcef HILEM,,NA,2021-02-16T16:57:50Z,2021-02-16T16:57:50Z,Good news. I will not be long in testing all this.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc3OTk3MjAzOA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/174,https://api.github.com/repos/apache/incubator-baremaps/issues/174,incubator-baremaps,811211925,174,WARN: Unable to build the geometry for some relations,nicolas-heigvd,35065252,,,CLOSED,2021-02-18T15:36:53Z,2021-02-19T21:53:28Z,"During some imports, I got many of these warnings: `Unable to build the geometry for relation XXXXXX`

Here's a log dump when such even occurs:    
```
(...)
Import openstreetmap
--2021-02-18 15:18:36--  https://download.geofabrik.de/europe/switzerland-latest.osm.pbf
Resolving download.geofabrik.de (download.geofabrik.de)... 116.202.112.212, 88.99.142.44
Connecting to download.geofabrik.de (download.geofabrik.de)|116.202.112.212|:443... connected.
HTTP request sent, awaiting response... 304 Not Modified
File ‘switzerland-latest.osm.pbf’ not modified on server. Omitting download.

[INFO ] 2021-02-18 15:18:37.186 [main] Execute - 56 processors available
[INFO ] 2021-02-18 15:18:37.205 [main] Execute - ../queries/osm_create_extensions.sql
[INFO ] 2021-02-18 15:18:37.302 [main] Execute - ../queries/osm_drop_views.sql
[INFO ] 2021-02-18 15:18:37.319 [main] Execute - ../queries/osm_drop_tables.sql
[INFO ] 2021-02-18 15:18:37.321 [main] Execute - ../queries/osm_create_tables.sql
[INFO ] 2021-02-18 15:18:40.281 [main] Import - 56 processors available
[INFO ] 2021-02-18 15:18:40.558 [main] ImportTask - Creating cache
[INFO ] 2021-02-18 15:18:45.616 [ForkJoinPool.commonPool-worker-60] ProgressLogger - 3.2%
[INFO ] 2021-02-18 15:18:50.679 [ForkJoinPool.commonPool-worker-52] ProgressLogger - 5.19%
(...)
[INFO ] 2021-02-18 15:22:46.344 [ForkJoinPool.commonPool-worker-63] ProgressLogger - 91.96%
[INFO ] 2021-02-18 15:22:54.597 [main] ImportTask - Importing data
[INFO ] 2021-02-18 15:23:03.576 [ForkJoinPool.commonPool-worker-27] ProgressLogger - 6.52%
[INFO ] 2021-02-18 15:23:10.033 [ForkJoinPool.commonPool-worker-43] ProgressLogger - 10.67%
(...)
[INFO ] 2021-02-18 15:25:31.238 [ForkJoinPool.commonPool-worker-12] ProgressLogger - 94.32%
[INFO ] 2021-02-18 15:25:39.018 [ForkJoinPool.commonPool-worker-38] ProgressLogger - 95.6%
[WARN ] 2021-02-18 15:25:47.889 [ForkJoinPool.commonPool-worker-48] GeometryHandler - Unable to build the geometry for relation 3362179
java.lang.NullPointerException: null
	at org.locationtech.jts.algorithm.locate.IndexedPointInAreaLocator.locate(IndexedPointInAreaLocator.java:88) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.EdgeRing.isInRing(EdgeRing.java:261) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.EdgeRing.findEdgeRingContaining(EdgeRing.java:87) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.HoleAssigner.findShellContaining(HoleAssigner.java:106) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.HoleAssigner.assignHoleToShell(HoleAssigner.java:78) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.HoleAssigner.assignHolesToShells(HoleAssigner.java:72) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.HoleAssigner.assignHolesToShells(HoleAssigner.java:40) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.Polygonizer.polygonize(Polygonizer.java:255) ~[jts-core-1.18.0.jar:?]
	at org.locationtech.jts.operation.polygonize.Polygonizer.getGeometry(Polygonizer.java:188) ~[jts-core-1.18.0.jar:?]
	at com.baremaps.osm.geometry.GeometryHandler.handle(GeometryHandler.java:104) ~[baremaps-osm-0.4.0.jar:?]
	at com.baremaps.osm.domain.Relation.accept(Relation.java:47) ~[baremaps-osm-0.4.0.jar:?]
	at com.baremaps.osm.handler.EntityHandler.accept(EntityHandler.java:20) ~[baremaps-osm-0.4.0.jar:?]
	at com.baremaps.osm.handler.EntityHandler.accept(EntityHandler.java:15) ~[baremaps-osm-0.4.0.jar:?]
	at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:1.8.0_275]
	at java.util.ArrayList.forEach(ArrayList.java:1259) [?:1.8.0_275]
	at com.baremaps.osm.handler.BlockEntityHandler.handle(BlockEntityHandler.java:27) [baremaps-osm-0.4.0.jar:?]
	at com.baremaps.osm.domain.DataBlock.handle(DataBlock.java:39) [baremaps-osm-0.4.0.jar:?]
	at com.baremaps.osm.handler.BlockHandler.accept(BlockHandler.java:15) [baremaps-osm-0.4.0.jar:?]
	at com.baremaps.osm.handler.BlockHandler.accept(BlockHandler.java:9) [baremaps-osm-0.4.0.jar:?]
	at java.util.stream.ReferencePipeline$11$1.accept(ReferencePipeline.java:439) [?:1.8.0_275]
	at java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:901) [?:1.8.0_275]
	at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) [?:1.8.0_275]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482) [?:1.8.0_275]
	at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290) [?:1.8.0_275]
	at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731) [?:1.8.0_275]
	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289) [?:1.8.0_275]
	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056) [?:1.8.0_275]
	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692) [?:1.8.0_275]
	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:175) [?:1.8.0_275]
(...)
```

Not quite sure where to search from here...

Typical examples are:
https://www.openstreetmap.org/relation/2585841    
https://www.openstreetmap.org/relation/11312837    
https://www.openstreetmap.org/relation/10032656    
https://www.openstreetmap.org/relation/11485685     ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/174/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/174,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MTQ0NTg0Nw==,incubator-baremaps,781445847,174,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-18T15:58:09Z,2021-02-18T15:58:09Z,"https://github.com/baremaps/baremaps/issues/161#issuecomment-769434147

The warnings displayed during the import are due to a few complex relations in OpenStreetMap that are not easily translatable into valid geometries with the JTS Polygonizer. The Poligonizer throws a NullPointerException) which does not stop the import procedure, hence the choice of displaying a warning. The affected relations get saved in the database with a geometry set to null and I hope that the log (which contains the ids) will help at fixing these corner cases in the future.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MTQ0NTg0Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/175,https://api.github.com/repos/apache/incubator-baremaps/issues/175,incubator-baremaps,812377876,175,"On the Docker Hub page, configure the link to the github repo hosting the Dockerfile",nicolas-heigvd,35065252,,,CLOSED,2021-02-19T21:51:17Z,2021-04-16T18:42:49Z,"It feels quite empty on the Docker Hub, e.g. here https://hub.docker.com/r/baremaps/baremaps    
compared to, e.g. https://hub.docker.com/r/osgeo/gdal     
where one can spot the github page hosting the Dockerfile which has been used to build''n'push the image to the hub:    

![image](https://user-images.githubusercontent.com/35065252/108564851-0bcd4f00-7304-11eb-968c-d4e1028d0941.png)

it's a ""nice to have"" feature, but an immensely useful one, especially for newcomers _imho_. 
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/175/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/175,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5NjI4OQ==,incubator-baremaps,817196289,175,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-10T20:12:10Z,2021-04-10T20:12:10Z,#189 should be fixed before this issue.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5NjI4OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/175,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyMTQ1MTE3MA==,incubator-baremaps,821451170,175,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-16T18:42:49Z,2021-04-16T18:42:49Z,@nicolas-heigvd I updated the dockerhub page. Let me know if something else is missing.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyMTQ1MTE3MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/176,https://api.github.com/repos/apache/incubator-baremaps/issues/176,incubator-baremaps,812422134,176,Display version number (--version flag),bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-19T23:13:12Z,2021-04-10T20:26:55Z,The CLI should be able to display the version number set in the pom.xml file.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/176/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/178,https://api.github.com/repos/apache/incubator-baremaps/issues/178,incubator-baremaps,812619148,178,Clean and update the docker directory,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-20T13:49:25Z,2021-02-28T18:37:36Z,"- [x] Clean the docker directory form unecessary images (e.g. postgis24, java8)
- [x] Use java 11 instead of java 8in the baremaps image
- [x] Update postgis and ensure that postgres.conf file is taken into account
- [x] Rebuild and push the docker images with github action upon the publication of a new release tag (e.g. v1.0.0)

@nicolas-heigvd do not hesitate to list here all the ideas you may have regarding docker's best practices. For instance, a possibility may be to use the [kubernetes-maven-plugin](https://www.eclipse.org/jkube/docs/kubernetes-maven-plugin#introduction) to create docker images and k8s configurations.

https://github.com/baremaps/openstreetmap-vecto/issues/9","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/178/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/178,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MjcxMTg0Mw==,incubator-baremaps,782711843,178,NA,nicolas-heigvd,35065252,,,NA,2021-02-20T16:37:56Z,2021-02-20T16:37:56Z,Related WIP https://github.com/baremaps/openstreetmap-vecto/pull/19,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MjcxMTg0Mw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/178,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NjAwMjQwNA==,incubator-baremaps,786002404,178,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-25T15:51:21Z,2021-02-25T15:51:21Z,"@nicolas-heigvd Have you found an elegant way to set a custom postgresql.conf file in the postgis docker image while working on openstreetmap-vecto? I noticed that it is possible to mount a volume for `/var/lib/postgresql/data`, but the directory needs to be empty when the container is created. Therefore, it doesn't seem possible to use a custom postgresql.conf file without restarting the container. 

The solution I'm now investigating is the use of a location outside of the data directory, do you think this would make sense?

```
CMD [""postgres"", ""-c"", ""config_file=/var/lib/postgresql/conf/postgresql.conf""]
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NjAwMjQwNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/178,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NjAxMDI0OA==,incubator-baremaps,786010248,178,NA,nicolas-heigvd,35065252,,,NA,2021-02-25T16:02:04Z,2021-02-25T16:02:04Z,"Yes, indeed, you can spin up a PostgreSQL container using a whole bunch of custom queries, they will apply during startup.

After that you would need to connect to the container to tweak it according to your needs. But once you found a nice set of parameters, you normally don't have to touch them anymore in production. Hence the original design.

But I guess you can also run a custom entrypoint.sh which can shutdown the DB, copy your config to the right place, and start the DB again. 

But calling a custom conf file is cleaner, and it's precisely what I'm currently doing: https://github.com/baremaps/openstreetmap-vecto/blob/2cf012b9a1164979729b978d7be3c9346650245b/docker-compose.yml#L26 
;o) ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NjAxMDI0OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/178,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NjE2NTg3NA==,incubator-baremaps,786165874,178,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-25T20:04:22Z,2021-02-25T20:04:22Z,"Thanks, that's exactly what I was looking for. Regarding the postgresql.conf file, have you noticed a difference when indexing the data with different parameters (shared_buffers, work_mem, etc.)?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NjE2NTg3NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/179,https://api.github.com/repos/apache/incubator-baremaps/issues/179,incubator-baremaps,812863107,179,Double quote PostgreSQL table names in the backend,nicolas-heigvd,35065252,,,CLOSED,2021-02-21T14:04:34Z,2021-10-27T13:32:51Z,"I faced this error after starting the server with a custom layer having non standard SQL characters (must be double quoted):

```
[WARN ] 2021-02-21 14:54:26.213 [armeria-common-worker-epoll-2-5] HttpResponseSubscriber - [id: 0x1dea6d9c, L:/172.28.0.3:9000 - R:/10.193.21.89:42482] Unexpected exception from a service or a response publisher: com.baremaps.server.TileService@238a9e9c
java.lang.IllegalArgumentException: The SQL query malformed
	at com.baremaps.tile.postgres.PostgisQueryParser.parse(PostgisQueryParser.java:52) ~[baremaps-tile-postgres-0.4.0.jar:?]
	at com.baremaps.tile.postgres.PostgisTileStore.lambda$null$0(PostgisTileStore.java:137) ~[baremaps-tile-postgres-0.4.0.jar:?]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497) ~[?:?]
	at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[?:?]
	at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]
	at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[?:?]
	at com.baremaps.tile.postgres.PostgisTileStore.query(PostgisTileStore.java:138) ~[baremaps-tile-postgres-0.4.0.jar:?]
	at com.baremaps.tile.postgres.PostgisTileStore.read(PostgisTileStore.java:110) ~[baremaps-tile-postgres-0.4.0.jar:?]
	at com.baremaps.server.TileService.lambda$doGet$0(TileService.java:58) ~[baremaps-server-0.4.0.jar:?]
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700) ~[?:?]
	at com.linecorp.armeria.common.RequestContext.lambda$makeContextAware$3(RequestContext.java:522) ~[armeria-1.4.0.jar:?]
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:44) ~[micrometer-core-1.6.3.jar:1.6.3]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]
	at java.lang.Thread.run(Thread.java:834) [?:?]
```

I suspect the PostgreSQL layer name MUST be escaped in the SQL query defined in the `./config/layer.yaml` file, especially when they contain non standard SQL characters such as capital letters or digits, because when I escape the layer name using double quotes, it doesn't print this error at startup.

```
...
FROM 1_differential_rabbiHousing${zoom}
---
```
-> goes bad...


```
...
FROM ""1_differential_rabbiHousing""${zoom}
...
```
-> goes better...


Would it be possible to quote (/check for) double quote around the PostgreSQL table names in the backend?

Here's the `config.yaml`:    
```
id: OpenStreetMapVecto
server:
  host: localhost
  port: 9000
center:
  lon: 6.5743
  lat: 46.5189
  zoom: 14
bounds:
  minLon: 5.8358
  minLat: 45.6591
  maxLon: 10.9794
  maxLat: 47.8700
  minZoom: 6
  maxZoom: 14 
layers:
  - config/rabbits/1_differential_rabbiHousing/layer.yaml

stylesheets:
  - config/rabbits/1_differential_rabbiHousing/stylesheet.yaml
```

`/config/rabbits/1_differential_rabbiHousing/layer.yaml`:
```
id: 1_differential_rabbiHousing
type: point
queries:
  - minZoom: 13
    maxZoom: 22
    sql: |
      SELECT id, rabbit_id, name, familiy, has_carot, speed, geometry
      FROM ""1_differential_rabbiHousing""${zoom}
      WHERE geometrytype(geometry) LIKE '%POINT%'
```

`/config/rabbits/1_differential_rabbiHousing/stylesheet.yaml`:
```
id: 1_differential_rabbiHousing
styles:
  - id: ogc_fid
    layer: 1_differential_rabbiHousing
    type: fill
    layout:
      visibility: visible
    paint:
      fill-color: rgb(0, 0, 228)
      fill-antialias: true
```

I'm not sure whereas the `layer` and `id` in the stylesheet has to represent the same object and what they do refer to?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/179/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/179,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Mjg2NTc4MQ==,incubator-baremaps,782865781,179,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-21T14:22:19Z,2021-02-21T14:22:19Z,"> Would it be possible to quote (/check for) double quote around the PostgreSQL table names in the backend?

I think so, could you provide me with a greater excerpt of the config in order to reproduce the error?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Mjg2NTc4MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/179,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NDM3NjYwMg==,incubator-baremaps,784376602,179,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-23T17:37:15Z,2021-02-23T17:37:15Z,"> I suspect the PostgreSQL layer name MUST be escaped in the SQL query defined in the `./config/layer.yaml` file, especially when they contain non standard SQL characters such as capital letters or digits, because when I escape the layer name using double quotes, it doesn't print this error at startup.

Yes, it has to be escaped. Also, notice that the zoom level is supposed to be part of the table name. I tried to reproduce your case and I think it is working. Assuming that a table named `1_differential_rabbiHousing_z14` exists in the database, baremaps will be able to create tiles (at zoom level 14) that include the following layer:

```
id: mylayer
type: linestring
queries:
  - minZoom: 14
    maxZoom: 14
    sql: |
      SELECT id, tags, geom
      FROM ""1_differential_rabbiHousing_z${zoom}""
```

The following exerpt (quoted from your comment) is supposed to fail:

```
FROM ""1_differential_rabbiHousing""${zoom}
```

> I'm not sure whereas the layer and id in the stylesheet has to represent the same object and what they do refer to?

Not necessarily, but naming things is hard... ;)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NDM3NjYwMg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/180,https://api.github.com/repos/apache/incubator-baremaps/issues/180,incubator-baremaps,812863352,180,Allow file extensions matching when searching for layers and stylesheets,nicolas-heigvd,35065252,,,CLOSED,2021-02-21T14:05:51Z,2021-04-10T20:26:56Z,"I faced this error after starting the server with a custom layer:

```
[ERROR] 2021-02-21 14:46:02.017 [main] Preview - Unable to read the configuration file.
com.fasterxml.jackson.databind.JsonMappingException: /config/custom/skating_mushrooms/layer.yaml (through reference chain: com.baremaps.config.Config[""layers""]->java.util.ArrayList[0])
...
java.lang.NullPointerException
...
```

but my layer is actually named `skating_mushrooms/layer.yml`, therefore I suspect that the file extension is hard codded.

From here, there are probably two solutions:

1. baremaps should also allow for `.yml` extensions, e.g. within a regexp,
2. or it should get the full filename (including extension) so that files can be named with _any_ extension.





","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/180/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/180,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Mjg2NzIyNQ==,incubator-baremaps,782867225,180,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-21T14:30:44Z,2021-02-21T14:30:44Z,"The extensions are not [hard coded](https://github.com/baremaps/baremaps/blob/3bce31c337df4d2b1a17960094af33bb4b5d12d4/baremaps-config/src/main/java/com/baremaps/config/Loader.java). In your main config.yaml file, is the reference to the layer.yaml file correctly set? If the config is on github I can have a look at it.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Mjg2NzIyNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/180,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MzIzOTU3Ng==,incubator-baremaps,783239576,180,NA,nicolas-heigvd,35065252,,,NA,2021-02-22T09:40:16Z,2021-02-22T09:40:16Z,"Indeed, I forgot to rename it in the main `config.yaml` file. My bad.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4MzIzOTU3Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/181,https://api.github.com/repos/apache/incubator-baremaps/issues/181,incubator-baremaps,812864383,181,Malformed SQL queries should be printed to stdout for debugging purpose,nicolas-heigvd,35065252,,,CLOSED,2021-02-21T14:11:39Z,2021-04-10T20:26:56Z,"As a developer, 
I'd like to be able to see the rendered SQL query on stdout,
so that I can copy-paste it in my pg admin tool to debug it.

For the moment, I'm unable to spot what's wrong from such error messages (printed to stdout on server's side) when browsing the app:

```
[WARN ] 2021-02-21 15:06:32.103 [armeria-common-worker-epoll-2-7] HttpResponseSubscriber - [id: 0x8de6f642, L:/172.28.0.3:9000 - R:/10.193.21.89:42688] Unexpected exception from a service or a response publisher: com.baremaps.server.TileService@258a2a21
java.lang.IllegalArgumentException: The SQL query malformed
	at com.baremaps.tile.postgres.PostgisQueryParser.parse(PostgisQueryParser.java:52) ~[baremaps-tile-postgres-0.4.0.jar:?]
	at com.baremaps.tile.postgres.PostgisTileStore.lambda$null$0(PostgisTileStore.java:137) ~[baremaps-tile-postgres-0.4.0.jar:?]
```

The SQL query is apparently still missing when --log-level=DEBUG is enabled:    
```
[DEBUG] 2021-02-22 11:02:58.713 [pool-2-thread-10] FileBlobStore - Read config-rabbits.yml
[DEBUG] 2021-02-22 11:02:58.713 [pool-2-thread-6] FileBlobStore - Read config-rabbits.yml
[DEBUG] 2021-02-22 11:02:58.718 [pool-2-thread-6] FileBlobStore - Read config/rabbits/1_differential_rabbiHousing/layer.yml
[DEBUG] 2021-02-22 11:02:58.718 [pool-2-thread-10] FileBlobStore - Read config/rabbits/1_differential_rabbiHousing/layer.yml
[DEBUG] 2021-02-22 11:02:58.720 [pool-2-thread-6] FileBlobStore - Read config/rabbits/1_differential_rabbiHousing/stylesheet.yml
[DEBUG] 2021-02-22 11:02:58.720 [pool-2-thread-10] FileBlobStore - Read config/rabbits/1_differential_rabbiHousing/stylesheet.yml
```

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/181/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/181,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Mjg2NzUxMQ==,incubator-baremaps,782867511,181,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-21T14:32:42Z,2021-02-21T14:32:42Z,The queries are logged when the debug mode is activated. Have you tried to add the `--log-level DEBUG` flag to your command?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Mjg2NzUxMQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/181,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NDQzMTQ3MQ==,incubator-baremaps,784431471,181,NA,nicolas-heigvd,35065252,,,NA,2021-02-23T18:53:42Z,2021-02-23T18:53:42Z,"I'll have a look at that PR as soon as possible.

But indeed, I noticed I haven't any layer ""per zoom level"", so you can easily reproduce the error by having a standalone table named `table_name` (which doesn't end by `_z{zoom_value}` and try letting`FROM ""table_name_z${zoom}""` in the `layer.yaml` file. The error will raise, for sure.

The things I personally like in such case are:     
- having a copy-pastable SQL query that I can inject into and DB management tool to see what error SQL is throwing     
- idealy, the same SQL error, directly on stdout in the log messages.


But this raises a new question in my mind; I guess you have automated the creation of the SQL code which generates the views for each zoom level (namely `osm_create_views.sql`). Is is a native `baremaps` command or does it come from an external tool, e.g. a simple bash script?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NDQzMTQ3MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/181,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NDUzMjc3Mg==,incubator-baremaps,784532772,181,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-23T21:42:33Z,2021-02-23T21:42:33Z,"> But this raises a new question in my mind; I guess you have automated the creation of the SQL code which generates the views for each zoom level (namely `osm_create_views.sql`). Is is a native `baremaps` command or does it come from an external tool, e.g. a simple bash script?

Automation was my initially plan and a previous version supported was creating materialized views with simplified geometries. However, as I started developing the style, I realized that each level will eventually come with its own customizations (e.g. some geometries can be excluded from low level zooms, some geometries may be merged, etc.). Therefore I decided to let the user create the views he wants for now. Baremaps only takes the requests of the `osm_create_views.sql` and execute them in parallel.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NDUzMjc3Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/183,https://api.github.com/repos/apache/incubator-baremaps/issues/183,incubator-baremaps,816788459,183,Publish artifacts on maven central with github actions,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-25T20:38:25Z,2021-04-15T22:14:29Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/183/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/183,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyMDc2MjU0MQ==,incubator-baremaps,820762541,183,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-15T22:14:29Z,2021-04-15T22:14:29Z,"The artifacts are now released with github actions. Therefore, preparing a release with maven is sufficient to build and deploy the release.

```
mvn release:prepare -DautoVersionSubmodules=true -DgenerateBackupPoms=false
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyMDc2MjU0MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/184,https://api.github.com/repos/apache/incubator-baremaps/issues/184,incubator-baremaps,816790327,184,Publish SDKMAN release  with github actions,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-25T20:41:20Z,2023-05-13T08:55:56Z,"Investigate the use of curl and of the maven plugin.

https://sdkman.io/vendors
https://github.com/sdkman/sdkman-vendor-maven-plugin","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/184/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/186,incubator-baremaps,817369526,186,Set environment variable in yaml and sql files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-26T13:45:57Z,2021-04-10T19:55:02Z,"The description of this issue comes from openstreetmap-vecto:
https://github.com/baremaps/openstreetmap-vecto/issues/24","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/186/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NzA1ODEwNw==,incubator-baremaps,787058107,186,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-27T11:24:34Z,2021-02-27T11:24:34Z,"I decided to use the `${variable_name}` syntax in yaml files and in sql files. 

I looked at the syntax for variables sql files (`:""variable_name""`) and I'm not convinced about using it. The variables are supposed to be set elsewhere in the file and we won't support this use case.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NzA1ODEwNw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NzQ2ODY4MA==,incubator-baremaps,787468680,186,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-02-28T15:19:04Z,2021-02-28T15:19:04Z,"@nicolas-heigvd with the latest release, you should now be able to use variable interpolation in config and sql files.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NzQ2ODY4MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NzU0OTIyMg==,incubator-baremaps,787549222,186,NA,nicolas-heigvd,35065252,,,NA,2021-02-28T23:53:44Z,2021-02-28T23:53:44Z,"Yes, indeed. Great! Thanks!

But now, even from _inside_ the container, the port `9000` seems to be hard-coded somewhere and it actually takes precedence over the one _I_ specified, giving me the usual CORS errors again and a `[Errno 111] Connection refused` from inside the container when hitting `localhost:${CUSTOM_PORT}` (×_×)⌒☆","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4NzU0OTIyMg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Nzc1OTE3OA==,incubator-baremaps,787759178,186,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-01T08:29:44Z,2021-03-01T08:29:44Z,"The port is not hardcoded (except in tests). I just tried the `development` branch of the openstreetmap-vecto repository with two differeent ports and I have not been able to reproduce the problem.

With port `9000`:

```
CONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS          PORTS                    NAMES
b084e4ecd642   openstreetmap-vecto_app   ""/bin/bash""              20 seconds ago   Up 18 seconds   0.0.0.0:9000->9000/tcp   openstreetmap-vecto_app_1
7a214e2d8110   postgis/postgis:13-3.1    ""docker-entrypoint.s…""   13 minutes ago   Up 19 seconds   0.0.0.0:5433->5432/tcp   openstreetmap-vecto_db_1
```

With port `9001`:

```
CONTAINER ID   IMAGE                     COMMAND                  CREATED          STATUS          PORTS                    NAMES
3daf60ea56bb   openstreetmap-vecto_app   ""/bin/bash""              32 seconds ago   Up 31 seconds   0.0.0.0:9001->9001/tcp   openstreetmap-vecto_app_1
7a214e2d8110   postgis/postgis:13-3.1    ""docker-entrypoint.s…""   16 minutes ago   Up 32 seconds   0.0.0.0:5433->5432/tcp   openstreetmap-vecto_db_1
```

Do you have another container or service which is using the port `9000`?

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Nzc1OTE3OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Nzc2Mjk2Mg==,incubator-baremaps,787762962,186,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-01T08:35:12Z,2021-03-01T08:35:12Z,"When starting the server I get the following log and can load `localhost:9001` in the browser:

```
[INFO ] 2021-03-01 09:33:10.257 [armeria-boss-http-*:9001] Server - Serving HTTP at /0.0.0.0:9001 - http://127.0.0.1:9001/
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4Nzc2Mjk2Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4ODEzMzI5OA==,incubator-baremaps,788133298,186,NA,nicolas-heigvd,35065252,,,NA,2021-03-01T17:35:13Z,2021-03-01T17:35:13Z,"Yes, on 9000 I do have an other app. But this should have strictly no influence if I set up another port for baremaps/osm-vecto.

EDIT:
my bad, again, was on the wrong branch.
The port is correctly taken into account from the env vars.

But... the port number is actually used within the URL for serving the tiles files, and therefore, these tiles URLs are not captured by my reverse-proxy now, hence the CORS. I set up `Access-Control-Allow-Origin *` it doesn't change anything. But as the tiles are dynamically served, I really don't know how I can set up a rule to a local static folder (where the tiles would actually be) in the configuration of the reverse proxy... This is the border of my current knowledge.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4ODEzMzI5OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4ODk5NjExNA==,incubator-baremaps,788996114,186,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-02T15:34:11Z,2021-03-02T15:34:11Z,"Ok, I see. I just published a new version that reintroduce a `serve` command. This version of the `serve`command is more intended as being used behind a proxy. In addition, you can specify a directory containing statics assets. By using this flag you should be able to serve a custom index.html file instead of the one automatically generated by baremaps.

```
baremaps serve  \
  --database 'jdbc:postgresql://localhost:5432/osmvecto?allowMultiQueries=true&user=osmvecto&password=osmvecto' \
  --config 'config.yaml' \
  --assets my_assets/
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc4ODk5NjExNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/186,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5NDM0Ng==,incubator-baremaps,817194346,186,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-10T19:55:01Z,2021-04-10T19:55:01Z,"I rolled back this feature in the latest release (#207) as it is hard to find an elegant and simple way to make it work in JSON and in YAML files with Jackson. Additionally, as Maputnik rewrites the files, it is hard to keep track of the variables after they get interpolated with values before reaching the editor in the browser.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5NDM0Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/188,incubator-baremaps,817450412,188,Check if the query parser could be replaced by the JOOQ or JSqlParser,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-26T15:30:41Z,2021-06-30T22:52:22Z,"https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/

https://www.jooq.org/doc/latest/manual/sql-building/dsl-context/custom-settings/settings-parser/

Set Settings.parseUnknownFunctions to IGNORE","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/188/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2MjMxMTY3OQ==,incubator-baremaps,862311679,188,NA,ebocher,1820572,Bocher Erwan,erwan.bocher@univ-ubs.fr,NA,2021-06-16T11:47:01Z,2021-06-16T11:47:01Z,"Hi @bchapuis ,
Let's share with you this excellent SQL parser : https://github.com/JSQLParser/JSqlParser
Cheers
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2MjMxMTY3OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2MjMzNDE1OQ==,incubator-baremaps,862334159,188,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-06-16T12:23:01Z,2021-06-16T12:23:01Z,"@ebocher Thanks a lot for the pointer and the interesting discussion, this is definitely a solid candidate to replace my poorman's parser, especially if the Postgresql syntax is well supported. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2MjMzNDE1OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2MjMzNzQwNQ==,incubator-baremaps,862337405,188,NA,ebocher,1820572,Bocher Erwan,erwan.bocher@univ-ubs.fr,NA,2021-06-16T12:27:43Z,2021-06-16T12:27:43Z,"It will be a pleasure to share experience, feedback and go ahead with you and the Suisse team ;-)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2MjMzNzQwNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2NzgwMDA2OA==,incubator-baremaps,867800068,188,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-06-24T16:54:57Z,2021-06-24T16:54:57Z,"@ebocher I just gave a try to the parser and one of my use cases involves a feature which will be released in 4.1. Basically, it is not yet possible to parse this kind of queries with JSQLParser. 

```
""SELECT id, hstore(array['tag1', 'tag2'], array[tag1, tag2]), geom FROM table""
```

But so far, the experience with this library is pretty good and it may help at optimizing the queries further.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2NzgwMDA2OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2ODI3NjU3NA==,incubator-baremaps,868276574,188,NA,ebocher,1820572,Bocher Erwan,erwan.bocher@univ-ubs.fr,NA,2021-06-25T07:08:33Z,2021-06-25T07:08:33Z,Nice and it seems there is a release in the pipe https://github.com/JSQLParser/JSqlParser/issues/1231,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2ODI3NjU3NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/188,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2ODQzMDcxMg==,incubator-baremaps,868430712,188,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-06-25T11:25:20Z,2021-06-25T11:25:20Z,"Yes, that's great, I just have to be patient.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2ODQzMDcxMg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/189,https://api.github.com/repos/apache/incubator-baremaps/issues/189,incubator-baremaps,818231930,189,Publish the docker images with github action,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-02-28T15:22:10Z,2021-04-16T15:12:58Z,The docker images are created and published manually. This may be automated with the (jib-maven-plugin)[https://github.com/GoogleContainerTools/jib/tree/master/jib-maven-plugin#quickstart] and with github actions.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/189/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/202,https://api.github.com/repos/apache/incubator-baremaps/issues/202,incubator-baremaps,820400822,202,Assume that the tiles are hosted at the origin,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-03-02T21:21:34Z,2021-03-09T20:49:15Z,"Behind a proxy, the tile source and the html pages may have different origin.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/202/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/203,https://api.github.com/repos/apache/incubator-baremaps/issues/203,incubator-baremaps,825453707,203,Improve the documentation of the export command,nicolas-heigvd,35065252,,,CLOSED,2021-03-09T07:33:46Z,2022-10-16T09:41:26Z,"I'm not sure to fully understand the what the `export` command need as arguments to properly work:

```
# baremaps  export  \
--database 'jdbc:postgresql://'${HOST}':'${PORT}'/'${POSTGRES_DB}'?user='${POSTGRES_USER}'&password='${POSTGRES_PASSWORD} \
--config ""${config_file}"" \
--log-level=DEBUG \
--repository=./data/tiles

[INFO ] 2021-03-09 08:22:58.654 [main] Export - 56 processors available
[INFO ] 2021-03-09 08:22:58.681 [main] Export - Reading configuration
[DEBUG] 2021-03-09 08:22:58.795 [main] FileBlobStore - Read 
java.io.IOException: Is a directory
...
```

Here is the `help`: 
```
Usage: baremaps export [--enable-s3] [--mbtiles] [--batch-array-index=READER]
                       [--batch-array-size=BATCH_ARRAY_SIZE] --config=YAML
                       --database=DATABASE [--log-level=LOG_LEVEL]
                       --repository=URL [--tiles=TILES]
Export vector tiles from the database.
      --batch-array-index=READER   The index of the batch in the array.
      --batch-array-size=BATCH_ARRAY_SIZE
                                   The size of the batch array.
      --config=YAML                The YAML source configuration file.
      --database=DATABASE          The JDBC url of the Postgres database.
      --enable-s3                  Enable Amazon S3 integration.
      --log-level=LOG_LEVEL        The log level.
      --mbtiles                    The repository is in the MBTiles format.
      --repository=URL             The tile repository URL.
      --tiles=TILES                The tiles to export.
```

Why is the `--repository` expecting a URL? Can't we just simply save the tiles to the file system? How do we achieve that then?
And what exactly are the `--tiles` and `--mbtiles` flags doing? Maybe I must use one of those instead, but the `--repository` flag seems mandatory and if I set a path to the `-mbtiles` one I got:
```
Invalid value for option '--mbtiles': './data/tiles' is not a boolean
```
which seems  to suffer a tiny offset in what I understand from the documentation. 

Maybe it could be nice to also print out the expected values for each args, as many bash command help pages are actually doing.

Thanks for having a look!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/203/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/203,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5MzQ5ODU3NQ==,incubator-baremaps,793498575,203,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-09T07:48:44Z,2021-03-09T07:48:44Z,"The command enables you to save tiles in different locally and remotely, hence the URL (s3://..., https://...). 

The `--mbtiles` is a just a flag without parameters (boolean) that tells baremaps to create a mbtiles file instead of a directory structure. 

The clarity of these parameters could be improved. If you have some ideas on how to structure these commands and parameters, let me know. I would like them to be intuitive but struggle at naming things.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5MzQ5ODU3NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/204,https://api.github.com/repos/apache/incubator-baremaps/issues/204,incubator-baremaps,826612450,204,Make configuration readable and writable from the application,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-03-09T20:48:23Z,2021-04-10T19:47:15Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/204/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/204,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5MzM4MQ==,incubator-baremaps,817193381,204,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-10T19:47:15Z,2021-04-10T19:47:15Z,This issue has been addressed with the integration of maputnik (#207),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgxNzE5MzM4MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/205,https://api.github.com/repos/apache/incubator-baremaps/issues/205,incubator-baremaps,829258202,205,baremaps serve -> 404,nicolas-heigvd,35065252,,,CLOSED,2021-03-11T15:26:50Z,2021-04-10T20:26:55Z,"I'm trying to serve generated local tiles in folder `./static/tiles/osm/`.    
I then serve the app using the `baremaps serve` command.    
The server spins up correctly, there is no error.    
But an `http` call returns from inside the app container:
```
root@app-container:/osmvecto# http 0.0.0.0:9000
HTTP/1.1 404 Not Found
content-length: 13
content-type: text/plain; charset=utf-8
date: Thu, 11 Mar 2021 15:17:51 GMT
server: Armeria/1.4.0

404 Not Found
```

Here's the command used to actually serve the app:
```
baremaps serve \
  --assets=./static/tiles/osm/ \
  --database 'jdbc:postgresql://'${HOST}':'${PORT}'/'${POSTGRES_DB}'?user='${POSTGRES_USER}'&password='${POSTGRES_PASSWORD} \
  --config ""config.yml"" \
  --log-level=DEBUG
```

There is absolutely no error on the server side on the `http` call.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/205/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/205,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5NjgxOTIxNA==,incubator-baremaps,796819214,205,NA,nicolas-heigvd,35065252,,,NA,2021-03-11T15:28:21Z,2021-03-11T15:28:21Z,\+ small question; why do we still need the `--database` flag when using `baremaps serve` if the tiles are actually on the file system?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5NjgxOTIxNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/205,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5Njg0ODA5OQ==,incubator-baremaps,796848099,205,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-11T16:07:05Z,2021-03-11T16:07:05Z,The `serve` and `export` command cover two different use cases: The `serve` command aims at serving vector tiles dynamically from postgis along side a directory of static assets (`--asset`); The `export` command aims at creating a directory containing static files (tiles) that will be served by another server (e.g. nginx). The two commands are not intended at being used together. The problem with the port (see #202) will be fixed in the next release. I will create some tickets to improve the documentation and then close this issue.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5Njg0ODA5OQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/206,https://api.github.com/repos/apache/incubator-baremaps/issues/206,incubator-baremaps,831181415,206,Can't find exported tiles on local repository,glacasa,4581370,Guillaume Lacasa,,CLOSED,2021-03-14T15:15:35Z,2021-03-15T10:09:02Z,"I'm following the [OpenStreetMap Example](https://www.baremaps.com/examples/openstreetmap/) to generate vertor tiles from OpenStreetMap data.

I have downloaded data for my region on Geofabrik, and imported it in postgresql using the ‘baremaps import` command, and this seems to be ok (I can see data in postgresql)

Then I try to export using the command : 
    baremaps export \
      --database 'jdbc:postgresql://localhost:5432/baremaps?allowMultiQueries=true&user=xxxx&password=xxxx' \
      --config 'source.yaml' \
      --repository 'tiles/'

The source.yaml contains the data from the [exemple config.yaml](https://github.com/baremaps/baremaps/blob/main/baremaps-examples/openstreetmap/config.yaml)

Everything seems to be ok, but I don't see any file in the ""tiles"" repository.  

    [INFO ] 2021-03-14 16:04:21.258 [main] Export - 8 processors available
    [INFO ] 2021-03-14 16:04:21.290 [main] Export - Reading configuration
    [INFO ] 2021-03-14 16:04:21.568 [main] Export - Initializing the source tile store
    [INFO ] 2021-03-14 16:04:21.631 [main] Export - Initializing the target tile store
    [INFO ] 2021-03-14 16:04:21.632 [main] Export - Generating the tiles
    [INFO ] 2021-03-14 16:04:22.576 [ForkJoinPool.commonPool-worker-3] ProgressLogger - 100.0%


I tried using full directory '/mnt/e/folder/tiles', but I don't see anything either.



I'm using Ubuntu WSL2 in Windows 10.
I also tried calling the baremaps command from powershell, but the result is the same.

I don't know if there's a bug and the file are not generated, or if they are exported in a ""tiles"" reposiory somewhere I can't find","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/206/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/206,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5ODk4MDE0MA==,incubator-baremaps,798980140,206,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-14T21:08:43Z,2021-03-14T21:08:43Z,"Are you generating tiles for France? Given the speed of the execution, you may be generating tiles for Liechtenstein (as in the example). If this location is empty in terms of data, the directory will not be created, which would explain your issue. 

In the `config.yaml`file, you can modify the bounds according to your needs. For France, the following settings should work:

```
bounds:
  minLon: -5.8
  maxLon: 9.6
  minLat: 41.1
  maxLat: 51.2
  minZoom: 12
  maxZoom: 14
```

En esperant que ça fonctionne ;)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5ODk4MDE0MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/206,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5OTIzMzAyMA==,incubator-baremaps,799233020,206,NA,glacasa,4581370,Guillaume Lacasa,,NA,2021-03-15T08:45:56Z,2021-03-15T08:45:56Z,"Oh, I didn't look the config.yaml, I assumed it would export the complete database 
I have started the export, and now I see the files generated

Merci beaucoup 😁","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5OTIzMzAyMA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/206,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5OTI5Mjg1Mw==,incubator-baremaps,799292853,206,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-03-15T10:07:59Z,2021-03-15T10:07:59Z,"Great, regarding the openstreetmap example, it is quite minimalistic and not suitable for low zoom levels. You may want to have a look at our ongoing effort to create a general purpose [stylesheet](https://github.com/baremaps/openstreetmap-vecto) similar to openstreetmap-carto.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDc5OTI5Mjg1Mw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/208,https://api.github.com/repos/apache/incubator-baremaps/issues/208,incubator-baremaps,855153858,208,Enable the edition of the tileset with the editor,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-10T20:54:59Z,2022-10-16T09:40:55Z,"The maputnik editor may be used to edit the sql queries used to generate the tileset. This would enable to edit the whole map (tileset and styles) without leaving the browser.

This backend can already be used to edit the tileset with a [PUT request](https://github.com/baremaps/baremaps/blob/778383a9b9a678140860b3e185ba917a9d6de4bf/baremaps-armeria/src/main/java/com/baremaps/server/EditorService.java#L149). However, some new reactjs components must be developped to extend the maputnik editor.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/208/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/209,https://api.github.com/repos/apache/incubator-baremaps/issues/209,incubator-baremaps,855155010,209,Integrate the maputnik editor with the frontent-maven-plugin,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-10T21:02:09Z,2021-04-14T12:19:59Z,The maputnik editor is currently built in a forked repository of maputnik and the resulting files are copied in baremaps. This is not sustainable and a build of the maputnik editor from within a submodule would be more suitable. The frontent-maven-plugin may help at adressing this issue.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/209/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/212,https://api.github.com/repos/apache/incubator-baremaps/issues/212,incubator-baremaps,863211591,212,Import failure,dodoroc,82866078,,,CLOSED,2021-04-20T20:26:33Z,2021-04-21T19:53:32Z,"Following the directions from https://www.baremaps.com/installation/ every time I try to execute an import java throws an error. 

Configuration:

Centos 7

openjdk version ""11.0.10"" 2021-01-19 LTS
OpenJDK Runtime Environment 18.9 (build 11.0.10+9-LTS)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.10+9-LTS, mixed mode, sharing)

lmdb.x86_64,  lmdb-devel.x86_64,  lmdb-libs.x86_64:  0.9.22-2.el7

baremaps --version
output: Baremaps vnull


Problematic command:
baremaps import --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' --file 'https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf'

Output:
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy (file:/home/.../baremaps/lib/lmdbjava-0.8.1.jar) to field java.nio.Buffer.address
WARNING: Please consider reporting this to the maintainers of org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
Exception in thread ""main"" java.lang.UnsatisfiedLinkError: /tmp/lmdbjava-native-library-5763257190218430362.so: failed to map segment from shared object: Operation not permitted
        at jnr.ffi.provider.jffi.NativeLibrary.loadNativeLibraries(NativeLibrary.java:93)
        at jnr.ffi.provider.jffi.NativeLibrary.getNativeLibraries(NativeLibrary.java:71)
        at jnr.ffi.provider.jffi.NativeLibrary.getSymbolAddress(NativeLibrary.java:50)
        at jnr.ffi.provider.jffi.NativeLibrary.findSymbolAddress(NativeLibrary.java:60)
        at jnr.ffi.provider.jffi.AsmLibraryLoader.generateInterfaceImpl(AsmLibraryLoader.java:138)
        at jnr.ffi.provider.jffi.AsmLibraryLoader.loadLibrary(AsmLibraryLoader.java:86)
        at jnr.ffi.provider.jffi.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:44)
        at jnr.ffi.LibraryLoader.load(LibraryLoader.java:392)
        at jnr.ffi.LibraryLoader.load(LibraryLoader.java:371)
        at org.lmdbjava.Library.<clinit>(Library.java:125)
        at org.lmdbjava.Env$Builder.open(Env.java:486)
        at org.lmdbjava.Env$Builder.open(Env.java:512)
        at com.baremaps.cli.Import.call(Import.java:119)
        at com.baremaps.cli.Import.call(Import.java:48)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
        at picocli.CommandLine.access$1200(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
        at picocli.CommandLine.execute(CommandLine.java:2058)
        at com.baremaps.cli.Baremaps.main(Baremaps.java:53)



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/212/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/212,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyMzYzMDM3MA==,incubator-baremaps,823630370,212,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-20T22:06:33Z,2021-04-20T22:06:33Z,"Thanks a lot for reporting this issue.

The log seems to indicate that Java is not able to access the binary of LMDB. This binary (`lmdbjava-native-library-*.so` with a varying suffix) is extracted by the java application in the /tmp directory. Does this file exist? Does your current user have the permission to write in this directory? 

```
Exception in thread ""main"" java.lang.UnsatisfiedLinkError: /tmp/lmdbjava-native-library-5763257190218430362.so: failed to map segment from shared object: Operation not permitted
```

Unfortunately, I havn't been able to reproduce the error with a centos docker image with the root user. I obtained a bash in centos with the following command:

```
docker run --network=""host"" --rm -it centos bash
```

I then installed the missing dependencies:

```
yum install unzip wget java-11-openjdk-devel
wget https://github.com/baremaps/baremaps/releases/latest/download/baremaps.zip
unzip baremaps.zip
export PATH=$PATH:`pwd`/baremaps/bin
```

And finally, successfully executed the following commands (Notice that postgis is running on my host):

```
baremaps execute \
  --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' \
  --file 'res://osm_create_extensions.sql' \
  --file 'res://osm_drop_tables.sql' \
  --file 'res://osm_create_tables.sql' \
  --file 'res://osm_create_gist_indexes.sql' \
  --file 'res://osm_create_gin_indexes.sql'
baremaps import \
  --database 'jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' \
  --file 'https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf'
```

I get the following log for the last command and the data looks correct:

```
[INFO ] 2021-04-20 21:55:41.670 [main] Import - 6 processors available
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy (file:/baremaps/lib/lmdbjava-0.8.1.jar) to field java.nio.Buffer.address
WARNING: Please consider reporting this to the maintainers of org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
[INFO ] 2021-04-20 21:55:42.065 [main] HttpBlobStore - Read https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf
[INFO ] 2021-04-20 21:55:42.776 [main] ImportTask - Creating cache
[INFO ] 2021-04-20 21:55:44.004 [main] ImportTask - Importing data
```

Hope this helps.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyMzYzMDM3MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/212,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDI5MDczNw==,incubator-baremaps,824290737,212,NA,dodoroc,82866078,,,NA,2021-04-21T19:06:12Z,2021-04-21T19:06:12Z,I think this issue can be closed; cannot confirm if the 'sudo yum install lmdb-devel' had any impact but the cause has been identified. Turns out the way /tmp was configured (too small and fixed size) caused not only the aforementioned problem but another one further upstream. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDI5MDczNw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/212,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDMxNjc4OA==,incubator-baremaps,824316788,212,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-21T19:53:32Z,2021-04-21T19:53:32Z,"Great, glad to know that it helped.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDMxNjc4OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/213,https://api.github.com/repos/apache/incubator-baremaps/issues/213,incubator-baremaps,863562754,213,Add a command to initialize configuration files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-21T08:00:02Z,2021-04-21T13:42:03Z,"As a user, I want to be able to create minimalistic configuration files (tileset, style) from the command line.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/213/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/215,https://api.github.com/repos/apache/incubator-baremaps/issues/215,incubator-baremaps,864605761,215,Move all the configuration files of the examples in the documentation,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-22T06:52:06Z,2021-05-16T20:33:35Z,The current organisation lack clarity for newcomers. It would make sense to move all the example files in the /docs directory and to keep only a copy of the one used by the integration tests in the baremaps-example submodule.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/215/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/215,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDYzMjYyNQ==,incubator-baremaps,824632625,215,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-22T08:05:02Z,2021-04-22T08:05:02Z,@danduk82 you have been reviewing the docs recently. Do you think this makes sense?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDYzMjYyNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/215,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDY1Nzg4Mg==,incubator-baremaps,824657882,215,NA,danduk82,2493436,Andrea Borghi,,NA,2021-04-22T08:43:05Z,2021-04-22T08:43:05Z,@bchapuis I am starting now. It probably makes sense. We can discuss that tomorrow.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDY1Nzg4Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/215,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDY2NjA2Mg==,incubator-baremaps,824666062,215,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-04-22T08:55:39Z,2021-04-22T08:55:39Z,"@danduk82 cool, if you notice some issues or have some ideas to improve the documentation, do not hesitate to change it.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgyNDY2NjA2Mg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/216,https://api.github.com/repos/apache/incubator-baremaps/issues/216,incubator-baremaps,866107166,216,Check amazon s3 upload and the mime type,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-23T13:21:35Z,2021-07-23T10:24:50Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/216/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/217,https://api.github.com/repos/apache/incubator-baremaps/issues/217,incubator-baremaps,866107885,217,Fix the version number printed by the CLI,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-23T13:22:24Z,2021-04-23T15:51:37Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/217/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/218,https://api.github.com/repos/apache/incubator-baremaps/issues/218,incubator-baremaps,866111760,218,The latest release does not display the editor when built with the CI,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-23T13:26:55Z,2021-04-23T15:51:30Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/218/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/219,https://api.github.com/repos/apache/incubator-baremaps/issues/219,incubator-baremaps,866989955,219,Investigate the use of JReleaser to release baremaps,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-04-25T11:44:05Z,2023-05-13T08:56:19Z,"https://jreleaser.org/
https://github.com/jreleaser/jreleaser","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/219/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/231,https://api.github.com/repos/apache/incubator-baremaps/issues/231,incubator-baremaps,875380385,231,Baremaps init with no options show no message,RemiDesgrange,13271765,Rémi Desgrange,,CLOSED,2021-05-04T11:46:02Z,2023-11-20T20:44:28Z,"`baremaps init` with no options return code 0 and no message.

Maybe a message if `style` and `tileset` are null?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/231/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/231,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjAyMjA0Mw==,incubator-baremaps,832022043,231,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-04T15:15:15Z,2021-05-04T15:15:15Z,"Good idea. Telling that the command did nothing is probably sufficient. 

An alternative may be to set default values for the `style` and the `tileset`, but I'm not sure that the user always want to create both files. What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjAyMjA0Mw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/231,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjYxNjEzMA==,incubator-baremaps,832616130,231,NA,RemiDesgrange,13271765,Rémi Desgrange,,NA,2021-05-05T11:32:00Z,2021-05-05T11:32:00Z,Telling the user that the command did nothing seem sufficient to me.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjYxNjEzMA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/231,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5sd5Xy,incubator-baremaps,1819776498,231,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-20T20:44:28Z,2023-11-20T20:44:28Z,Solved in #804 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5sd5Xy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/232,https://api.github.com/repos/apache/incubator-baremaps/issues/232,incubator-baremaps,875440663,232,Absolute path for style and tileset treated as relative path,RemiDesgrange,13271765,Rémi Desgrange,,CLOSED,2021-05-04T13:03:43Z,2021-07-25T19:24:24Z,"Step to reproduce: 

* baremaps in docker 
* latest release, 0.5.7
* `baremaps serve --tileset='/config/tileset.json'` (yet it lacks some mandatory config )

What is the ouput:
```
java.nio.file.NoSuchFileException: /home/'/etc/baremaps/tileset.json'
        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)
        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)
        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:219)
        at java.base/java.nio.file.Files.newByteChannel(Files.java:371)
        at java.base/java.nio.file.Files.newByteChannel(Files.java:422)
        at java.base/java.nio.file.Files.readAllBytes(Files.java:3206)
        at com.baremaps.blob.FileBlobStore.readByteArray(FileBlobStore.java:52)
        at com.baremaps.blob.CompositeBlobStore.readByteArray(CompositeBlobStore.java:71)
        at com.baremaps.config.BlobMapper.read(BlobMapper.java:35)
        at com.baremaps.cli.Serve.call(Serve.java:92)
        at com.baremaps.cli.Serve.call(Serve.java:34)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
        at picocli.CommandLine.access$1200(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
        at picocli.CommandLine.execute(CommandLine.java:2058)
        at com.baremaps.cli.Baremaps.main(Baremaps.java:54)
```

It seems that the culprit came from here : https://github.com/baremaps/baremaps/blob/919c8e63afbd517f7c102a2926a372e61b09d3c2/baremaps-blob/src/main/java/com/baremaps/blob/CompositeBlobStore.java#L38-L40","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/232/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/232,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjAyMjc4Ng==,incubator-baremaps,832022786,232,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-04T15:16:17Z,2021-05-04T15:16:17Z,Thanks for reporting this.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjAyMjc4Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/232,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjI2MjI2Nw==,incubator-baremaps,832262267,232,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-04T21:32:13Z,2021-05-04T21:32:13Z,"@RemiDesgrange I tried the following two commands (osx host) with absolute paths and havn't been able to reproduce the reported error. Are you using a custom docker image?

```
baremaps serve \
  --database='jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' \
  --tileset='/tmp/tileset.json' \
  --style='/tmp/style.json'
```

```
docker run -p 9000:9000 --volume=/tmp:/tmp baremaps/baremaps serve \
  --database='jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps' \
  --tileset='/tmp/tileset.json' \
  --style='/tmp/style.json'
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjI2MjI2Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/232,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjYwMjI4Ng==,incubator-baremaps,832602286,232,NA,RemiDesgrange,13271765,Rémi Desgrange,,NA,2021-05-05T11:06:06Z,2021-05-05T11:06:06Z,"Ok, interesting. With the latest command you posted, no error but with this docker-compose file (located in the baremaps repo in the docker folder) I have the error. So more of a docker-compose issue!

```yaml
version: '3.8'
volumes:
  baremaps_config:
  pgdata:
  objectdata:

services:
  baremaps:
    image: baremaps/baremaps
    build:
      context: baremaps
    ports:
      - 9000:9000
    command:
      - ""--log-level=DEBUG""
      - ""--enable-s3""
      - ""serve""
      - ""--database=jdbc:postgresql://localhost:5432/baremaps?allowMultiQueries=true&user=baremaps&password=baremaps'""
      - ""--tileset='/etc/baremaps/tileset.json'""
      - ""--style='/etc/baremaps/style.json'""
    volumes:
      - baremaps_config:/etc/baremaps

  database:
    image: baremaps/postgis
    environment:
      - POSTGRES_USER=baremaps
      - POSTGRES_PASSWORD=baremaps
    build:
      context: postgis
    command:
      - ""-c""
      - ""fsync=off""
    volumes:
      - ""pgdata:/var/lib/postgresql/data/""
    ports:
      - ""5432:5432""

  object_storage:
    image: minio/minio
    environment:
      MINIO_ROOT_USER: minio
      MINIO_ROOT_PASSWORD: minio
    command: server /data
    volumes:
      - objectdata:/data

```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjYwMjI4Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/232,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjYzMjEyOQ==,incubator-baremaps,832632129,232,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-05T12:01:51Z,2021-05-05T12:01:51Z,"The /docker/baremaps/Dockerfile is a leftover. I recently automated the release of the docker image with the jib-maven-plugin and github actions. Sorry for missing this. Here is the maven command used to build and publish the image:

https://github.com/baremaps/baremaps/blob/919c8e63afbd517f7c102a2926a372e61b09d3c2/.github/workflows/release.yml#L87

By the way, it looks like a good idea to have a minio service to store the vector tiles. I havn't tested baremaps with S3 like object store yet, but I'm really interested in the result. Some changes may be necessary to make it work, so let me know how it goes.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDgzMjYzMjEyOQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/232,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s400wyD,incubator-baremaps,886246531,232,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-25T19:24:24Z,2021-07-25T19:24:24Z,I removed all the old Dockerfiles from the repository.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s400wyD/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/233,https://api.github.com/repos/apache/incubator-baremaps/issues/233,incubator-baremaps,875785072,233,Monitor progress of index creation,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-05-04T19:56:20Z,2024-02-29T08:44:53Z,"Creating indexes can take up to several hours. It would be nice to report on the progress. The following query may help at doing this.

```
SELECT
  a.query,
  p.phase,
  p.blocks_done,
  p.blocks_total
FROM pg_stat_progress_create_index p
JOIN pg_stat_activity a ON p.pid = a.pid
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/233/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/233,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s51dgYW,incubator-baremaps,1970669078,233,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-02-29T08:44:52Z,2024-02-29T08:44:52Z,Won't fix for now.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s51dgYW/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/249,https://api.github.com/repos/apache/incubator-baremaps/issues/249,incubator-baremaps,880777080,249,Release of a world map,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-05-08T12:44:35Z,2023-03-05T10:05:03Z,"I recently got a dedicated server aimed at producing a world map. I still encounter some issues with the geometries of some relations in planet.osm.pbf, hence the small fixes here and there and the increase in the number of releases.

The preliminary results are very encouraging. A planet database import take about 24hours and the time taken to index the data is about the same. More details will be posted here soon.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/249/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/249,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MSlKy,incubator-baremaps,1279939250,249,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-16T10:20:07Z,2022-10-16T10:20:07Z,"Better late than never, here is the url of the demo. https://demo.baremaps.com/
I still have a couple of problems at low zoom levels (the vector tiles are too big), but overall it looks great.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MSlKy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/257,https://api.github.com/repos/apache/incubator-baremaps/issues/257,incubator-baremaps,891555966,257,adding custom data layer,mapsgeek,10188264,Ibrahim Mohammed,ibrahimmohammed1002@gmail.com,CLOSED,2021-05-14T03:11:17Z,2021-05-14T14:09:18Z,"I need an example on adding my own data layer from PostgreSQL table to be merged with the OSM data into the tiles being served live or pre-generated
i believe i can do that by the configuration file?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/257/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/257,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTEyMjg1Nw==,incubator-baremaps,841122857,257,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-14T09:16:33Z,2021-05-14T09:16:33Z,"Yes, you need to edit the `tileset.json` file and add a custom SQL query corresponding to a layer.

https://github.com/baremaps/baremaps/blob/b90e990fd4e9cf69de49981c5142657a0e839784/baremaps-examples/openstreetmap/tileset.json#L19

```json
{
  ""id"": ""my_custom_layer"",
  ""queries"": [
    {
      ""minZoom"": 12,
      ""maxZoom"": 20,
      ""sql"": ""SELECT id, tags, geom FROM my_custom_table""
    }
  ]
},
```

The queries can include geometries from any table stored in postgis. However, the query MUST be in the form `SELECT id, tags, geometry FROM my_table`, where `tags` is of type [hstore](https://www.postgresql.org/docs/13/hstore.html) and `geometry` is of type [geometry](https://postgis.net/docs/geometry.html). 

Then you should be able to preview and edit the style of this new layer with the edit command which starts maputnik (inspect the data and edit the style). Notice that the `--log-level DEBUG` flag is usually of help when debbugging queries and that the changes (in the tileset.json and style.json files) should be automatically reloaded and previewed in the browser.

From a performance standpoint, notice that the provided example does not contain generalized tables for low resolution zoom level and that it is recommended to store and index the data in the right projection. We are working on a full featured map of the world [here](https://github.com/baremaps/openstreetmap-vecto), but it's an ongoing effort.


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTEyMjg1Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/257,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTIwNTQxNA==,incubator-baremaps,841205414,257,NA,mapsgeek,10188264,Ibrahim Mohammed,ibrahimmohammed1002@gmail.com,NA,2021-05-14T12:13:20Z,2021-05-14T12:13:20Z,"great, thank you i totally missed the examples folder","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTIwNTQxNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/257,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTI0MDI1MQ==,incubator-baremaps,841240251,257,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-14T13:21:36Z,2021-05-14T13:21:36Z,"Let me know if you encounter other issues or if you have some ideas to improve the documentation. I'm not fully satisfied with the current directory structure and plan to move the examples in the docs folder.

https://github.com/baremaps/baremaps/issues/215

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTI0MDI1MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/257,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTI2NTM2NQ==,incubator-baremaps,841265365,257,NA,mapsgeek,10188264,Ibrahim Mohammed,ibrahimmohammed1002@gmail.com,NA,2021-05-14T14:04:59Z,2021-05-14T14:04:59Z,"sure, what i'm trying to do is to serve my own OSM which i can just do by serving prebuilt mbtiles straight but also i do need to have my own data overlay which changes a lot so the fetched tile has to have all data in one pbf tile and i think this project is more simpler than openmaptiles to achieve that.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0MTI2NTM2NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/261,https://api.github.com/repos/apache/incubator-baremaps/issues/261,incubator-baremaps,901957003,261,Prevent the editor from recentering the map after a refresh,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-05-26T08:06:32Z,2021-07-20T18:56:38Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/261/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/262,https://api.github.com/repos/apache/incubator-baremaps/issues/262,incubator-baremaps,903311352,262,Create a custom polygonizer for handling relations,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-05-27T07:12:34Z,2021-05-29T09:13:24Z,"The current approach uses JTS's poligonizer. Unfortunatly, performences issues are encountered when dealing with very complex relations. The goal is to create a new polygonizer that will perform the linework.

https://wiki.openstreetmap.org/wiki/Talk:Relation:multipolygon","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/262/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/263,incubator-baremaps,903758529,263,Draft a openapi document for future development,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-05-27T13:32:17Z,2021-06-21T12:56:16Z,"To make baremaps viable for use cases at Camptocamp we would like to improve the service capabilities to handle multiple styles, datasets, tile-sets, etc. As a first step we would like to draft an openapi definition as a discussion basis for further development efforts.

@bchapuis is it ok to work this on a branch here and of yes do you have any preferred location to place the spec?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/263/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0OTc4MTE4MA==,incubator-baremaps,849781180,263,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-27T16:42:11Z,2021-05-27T16:42:11Z,"We can create a branch or a dedicated repository for an OpenAPI/Swagger integration. In my understanding the goal would be to generate services based on the OGC-API, right? As they have some existing openapi definitions, we could automate the generation of the jax-rs code from these files with Swagger, and then focus on the implementation of the services. What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg0OTc4MTE4MA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDI2NjkyMQ==,incubator-baremaps,850266921,263,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-05-28T08:59:40Z,2021-05-28T08:59:40Z,"Yes i guess the goal would be to generate clients and stuff from the spec. I think the spec should live in this repository, maybe at the root of the server resources but honestly i am not familiar with the tooling and java project structure.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDI2NjkyMQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDMyNDc2Mw==,incubator-baremaps,850324763,263,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-28T10:35:47Z,2021-05-28T10:35:47Z,"There is very good support for OpenAPI in the java ecosystem, so I would definitly generate the client and server stubs from the specs. The current server module is based on armeria, which is primarily grpc and grpc-web oriented. There is a [good article](https://cloud.google.com/blog/products/api-management/understanding-grpc-openapi-and-rest-and-when-to-use-them) on google cloud explaining the upsides and downsides of this choice. That being said, armeria can also serve resteasy/jax-rs services but I havn't experimented with it yet.

Given the number of specs described by ogcapi, I would create a repository or at several dedicated modules for each specifications. For instance, we may have something like:

```
baremaps-ogcapi
baremaps-ogcapi-features
baremaps-ogcapi-maps
baremaps-ogcapi-tiles
```

Do you already have established a list of priorities regarding the specs you want to implement first?




","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDMyNDc2Mw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDMyOTA1Ng==,incubator-baremaps,850329056,263,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-05-28T10:44:04Z,2021-05-28T10:44:04Z,"In terms of tooling a good starting point would be to configure the maven openapi-generator plugin to produce generate the the server stub.

https://openapi-generator.tech/docs/generators/jaxrs-resteasy","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDMyOTA1Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDM3NjE5Ng==,incubator-baremaps,850376196,263,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-05-28T12:15:03Z,2021-05-28T12:15:03Z,"The initial scope we have in mind is a transactional api for styles, tilesets* and collections. The goal is to have an interface for a client to create and edit these.
It is not yet clear to which amount we will adhere to ogcapi specs, just for the module names. Personally I am very much in favor of this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MDM3NjE5Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/263,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MzY4NzUwNg==,incubator-baremaps,853687506,263,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-06-03T08:28:11Z,2021-06-03T08:28:11Z,cc @danduk82 @RemiDesgrange @fgravin ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg1MzY4NzUwNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/271,https://api.github.com/repos/apache/incubator-baremaps/issues/271,incubator-baremaps,911242920,271,Export throws NPE when bounds are missing in tileset.json,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-06-04T08:02:49Z,2021-07-20T13:50:27Z,"```
 ./bin/baremaps export  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' --tileset 'tileset.json'  --repository 'tiles/'
[INFO ] 2021-06-04 07:11:11.560 [main] Export - 8 processors available
[INFO ] 2021-06-04 07:11:11.580 [main] Export - Reading configuration
[INFO ] 2021-06-04 07:11:11.716 [main] Export - Initializing the source tile store
[INFO ] 2021-06-04 07:11:11.765 [main] Export - Initializing the target tile store
[INFO ] 2021-06-04 07:11:11.765 [main] Export - Generating the tiles
java.lang.NullPointerException
        at com.baremaps.cli.Export.call(Export.java:135)
        at com.baremaps.cli.Export.call(Export.java:55)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
        at picocli.CommandLine.access$1200(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
        at picocli.CommandLine.execute(CommandLine.java:2058)
        at com.baremaps.cli.Baremaps.main(Baremaps.java:54)
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/271/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/273,https://api.github.com/repos/apache/incubator-baremaps/issues/273,incubator-baremaps,925604668,273,NullPointerException on Update,britiger,2057760,Christopher,github@1011.link,CLOSED,2021-06-20T13:53:52Z,2022-10-16T10:18:39Z,"I get an NullPointerException when I try to Update the data without any useful information. I used the extract of brandenburg for 2021-06-20 and tried to apply the shown update.


```
$ ./baremaps update --database 'jdbc:postgresql://localhost:5435/baremaps?&user=osm&password=osm'

[INFO ] 2021-06-20 15:47:32.455 [main] Update - 4 processors available.
[INFO ] 2021-06-20 15:47:32.954 [main] HttpBlobStore - Read http://download.geofabrik.de/europe/germany/brandenburg-updates/000/003/003.osc.gz
[INFO ] 2021-06-20 15:47:38.861 [main] HttpBlobStore - Read http://download.geofabrik.de/europe/germany/brandenburg-updates/000/003/003.state.txt
[INFO ] 2021-06-20 15:47:38.925 [main] UpdateTask - Importing changes and state in database
com.baremaps.stream.StreamException: java.lang.NullPointerException
	at com.baremaps.osm.handler.ChangeHandler.accept(ChangeHandler.java:16)
	at com.baremaps.osm.handler.ChangeHandler.accept(ChangeHandler.java:7)
	at java.base/java.util.stream.ReferencePipeline$11$1.accept(ReferencePipeline.java:441)
	at java.base/java.util.stream.ReferencePipeline$11$1.accept(ReferencePipeline.java:442)
	at java.base/java.util.stream.ReferencePipeline$11$1.accept(ReferencePipeline.java:442)
	at com.baremaps.osm.xml.XmlChangeSpliterator.tryAdvance(XmlChangeSpliterator.java:111)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:326)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)
	at com.baremaps.osm.UpdateTask.execute(UpdateTask.java:91)
	at com.baremaps.cli.Update.call(Update.java:103)
	at com.baremaps.cli.Update.call(Update.java:46)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
	at picocli.CommandLine.access$1200(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
	at picocli.CommandLine.execute(CommandLine.java:2058)
	at com.baremaps.cli.Baremaps.main(Baremaps.java:54)
Caused by: java.lang.NullPointerException
	at com.baremaps.osm.database.ChangeTiler$1.handle(ChangeTiler.java:68)
	at com.baremaps.osm.domain.Node.accept(Node.java:54)
	at com.baremaps.osm.database.ChangeTiler.handleLastVersion(ChangeTiler.java:64)
	at com.baremaps.osm.database.ChangeTiler.handle(ChangeTiler.java:53)
	at com.baremaps.osm.handler.ChangeHandler.accept(ChangeHandler.java:12)
	... 23 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/273/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/273,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2NDk3NTA2NQ==,incubator-baremaps,864975065,273,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-06-21T11:59:07Z,2021-06-21T11:59:07Z,"Thanks a lot for reporting this issue. The update command is quite experimental and has not been extensively tested nor documented yet. 

I have been able to download all the files required to reproduce the issue locally. It seems that, when dealing with extracts, the change sets can contain delete operation for entities (nodes, ways or relations) which are not present in the database. This causes a NullPointerException and I will try to come back with a fix.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg2NDk3NTA2NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/281,https://api.github.com/repos/apache/incubator-baremaps/issues/281,incubator-baremaps,930672078,281,Experiment with testcontainers,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-06-26T11:00:24Z,2021-07-18T19:47:00Z,"The current setup requires to install a docker image to run the integration tests. We migh be able to skip this step with testcontainers.

https://www.testcontainers.org/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/281/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/286,https://api.github.com/repos/apache/incubator-baremaps/issues/286,incubator-baremaps,939228692,286,Running baremaps editor using public IP,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,CLOSED,2021-07-07T20:16:36Z,2022-10-16T10:18:15Z,"Hi,

Thank you for this brilliant tool. I have been exploring baremaps and successfully configured a local mvt tiles server but now i am trying to run the editor with a public IP with the command below;

`bin/baremaps edit --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=pass' --tileset 'tiles.json' --style 'style.json' --host 'publicip' --log-level=DEBUG --port 9001`

but i see in the network tab that it is always making request to `http://localhost:9001/style.json`.  I changed the url in configuration file with IP instead of localhost but it is still the same.

Can you guide if i am doing any thing wrong?

Thanks","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/286/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/286,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NTkwNjY0NQ==,incubator-baremaps,875906645,286,NA,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,NA,2021-07-07T20:22:43Z,2021-07-07T20:22:43Z,"with serve command its requesting to the right url but with edit always pointing to localhost.

`bin/baremaps serve --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=pass' --tileset 'tiles.json' --style 'style.json' --host 'publicip' --log-level=DEBUG --port 9001`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NTkwNjY0NQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/286,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NTk2NjE0Ng==,incubator-baremaps,875966146,286,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-07T22:07:16Z,2021-07-07T22:07:16Z,"Yes, this is clearly an issue that must be fixed, thanks for reporting it. 

Notice that Maputnik allows to set a custom IP or host for the style.json file with a GET parameter. Here is an example:

```
http://my.domain.com:9000/?localhost=my.domain.com
```

Hope this helps until the next release.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NTk2NjE0Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/286,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MSlHI,incubator-baremaps,1279939016,286,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-16T10:18:14Z,2022-10-16T10:18:14Z,"The edit command has been deprecated for now. It works well for minor style modifications but it is limited when it comes to complex data driven style. Therefore, it we introduced javascript as an alternate configuration language. Maputnik can still be setup in an adhoc fashion.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MSlHI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/288,https://api.github.com/repos/apache/incubator-baremaps/issues/288,incubator-baremaps,941109758,288,Export command creates pbf tiles instead of mvt,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,CLOSED,2021-07-09T22:58:43Z,2021-07-11T19:07:33Z,"Hi @bchapuis,

I am using the below command to generate static tiles for a specific bounding box;

`bin/baremaps export --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=pass' --tileset 'tiles.json' --repository 'tiles/'` 

1. The tiles generated are in pbf format, which should be mvt according to tiles.json
2. Mapbox GL is unable to render the tiles and gives me the following erorrs;

![image](https://user-images.githubusercontent.com/16791779/125142760-efef0c00-e131-11eb-82da-bf8df97445fd.png)

BTW with `serve` command its working fine with the same mapbox style file and serves MVT tiles.

Can you help please?

Thanks","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/288/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/288,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzUwMTAyNQ==,incubator-baremaps,877501025,288,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-09T23:06:08Z,2021-07-09T23:06:08Z,"@shahzadbacha Regardless of the extension (pbf or mvt), mapbox vector tiles should be served with the following headers. 

```
content-encoding: gzip
content-type: application/vnd.mapbox-vector-tile
```

Are you using apache or nginx to serve the vector tiles generated with the export command? ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzUwMTAyNQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/288,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzU5MDg5Nw==,incubator-baremaps,877590897,288,NA,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,NA,2021-07-10T07:54:45Z,2021-07-10T07:54:45Z,"Well later i am planning to use nginx but right now i am using python built-in webserver

`python -m http.server 9001` ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzU5MDg5Nw==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/288,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzYyMTkwOA==,incubator-baremaps,877621908,288,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-10T11:26:15Z,2021-07-10T11:26:15Z,"@nicolas-heigvd recently created a similar configuration for nginx. Maybe he can add a sample configuration file in this discussion or in the example directory of baremaps. 

I don't know how to configure python's http.server to achieve this, but a working example would also be a nice addition to the documentation.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzYyMTkwOA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/288,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzYzOTQzNA==,incubator-baremaps,877639434,288,NA,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,NA,2021-07-10T13:38:29Z,2021-07-10T13:38:29Z,"> 
> 
> @shahzadbacha Regardless of the extension (pbf or mvt), mapbox vector tiles should be served with the following headers.
> 
> ```
> content-encoding: gzip
> content-type: application/vnd.mapbox-vector-tile
> ```
> 
> Are you using apache or nginx to serve the vector tiles generated with the export command?

Thanks for the hint @bchapuis 

I did configured it with python and nginx both. This solve my problem with python;

```
try:
    from http import server # Python 3
except ImportError:
    import SimpleHTTPServer as server # Python 2

class MyHTTPRequestHandler(server.SimpleHTTPRequestHandler):
    def end_headers(self):
        self.send_my_headers()

        server.SimpleHTTPRequestHandler.end_headers(self)

    def send_my_headers(self):
        self.send_header(""Access-Control-Allow-Origin"", ""*"")
        self.send_header(""content-encoding"", ""gzip"")
        self.send_header(""content-type"", ""application/vnd.mapbox-vector-tile"")


if __name__ == '__main__':
    server.test(HandlerClass=MyHTTPRequestHandler, port=9001)
```

and to make it work with nginx , add the following lines to the nginx configuration file;

```
location ~* \.pbf$ {
        include proxy_params;
        add_header Access-Control-Allow-Origin *;
        add_header Content-Encoding gzip;
        add_header Content-Type application/vnd.mapbox-vector-tile;
    }
```

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzYzOTQzNA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/288,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzY0MzgyMQ==,incubator-baremaps,877643821,288,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-10T14:08:06Z,2021-07-10T14:08:06Z,"Great, thank you for providing these two examples. We still have many nuts and bolts to tighten and documentation is really important, so do not hesitate to add a markdown file in the docs directory (e.g., docs/examples/serving-vector-tiles.md). These markdown files are then automatically  published on the project's website with github pages (i.e., https://www.baremaps.com/examples/).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3NzY0MzgyMQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/290,incubator-baremaps,941509510,290,Mapbox GL JS version issue,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,CLOSED,2021-07-11T18:31:45Z,2021-07-20T18:56:09Z,"text-variable-anchor: unknown property ""text-variable-anchor""

![image](https://user-images.githubusercontent.com/16791779/125206273-e08dd100-e29f-11eb-8697-11474ef871ac.png)

Mapbox GL JS version seems to be old.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/290/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg0NTU2Ng==,incubator-baremaps,877845566,290,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-11T18:55:06Z,2021-07-11T18:55:06Z,"Yes, Mapbox closed its source in late 2020. A good idea would be to switch to MapLibre (a fork that remains open source).

https://maplibre.org/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg0NTU2Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg0OTk0NA==,incubator-baremaps,877849944,290,NA,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,NA,2021-07-11T19:34:06Z,2021-07-11T19:34:06Z,Does MapLibre GL supports mapbox style specifications?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg0OTk0NA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg1NzI0Ng==,incubator-baremaps,877857246,290,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-11T20:35:18Z,2021-07-11T20:35:18Z,"I just checked the text-variable-anchor property displayed in your screenshot and it seems to be part of the style specification supported by both mapbox v1 and maplibre. So my initial guess was probably false. Do you see this error when running the editor or the server? Have you tried to serve a custom map with the latest version of mapbox v1 (static html/js file)? 

https://maplibre.org/maplibre-gl-js-docs/example/variable-label-placement/
https://docs.mapbox.com/mapbox-gl-js/example/variable-label-placement/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg1NzI0Ng==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg1ODI1OA==,incubator-baremaps,877858258,290,NA,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,NA,2021-07-11T20:41:45Z,2021-07-11T20:41:45Z,This error appears when i run the serve command. And yes i did test the tiles with a custom map using mapbox gl v2 and it works fine. Let me test with mapbox gl v1 as well.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg1ODI1OA==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg1ODkwNg==,incubator-baremaps,877858906,290,NA,shahzadbacha,16791779,Shahzad Bacha,shahzadbacha.gis@gmail.com,NA,2021-07-11T20:47:00Z,2021-07-11T20:47:00Z,"yep, working with mapbox gl js v1 as well.

https://api.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.js","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg1ODkwNg==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg2MjY3MQ==,incubator-baremaps,877862671,290,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-11T21:14:17Z,2021-07-11T21:14:17Z,"Thanks for taking the time to verify. The mapbox version used by the server was shockingly [old](https://github.com/baremaps/baremaps/blob/5e8a257fc63fa23034528d856613c4976da8fd5e/baremaps-server/src/main/resources/server/index.html#L4), I probably copy pasted an old snippet from one of my maps. 

I just replaced mapbox with maplibre for the server so this issue will be fixed in the next release.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/MDEyOklzc3VlQ29tbWVudDg3Nzg2MjY3MQ==/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/290,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s40qvfP,incubator-baremaps,883619791,290,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-20T18:55:35Z,2021-07-20T18:55:35Z,This has been fixed in the v0.5.14.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s40qvfP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/291,https://api.github.com/repos/apache/incubator-baremaps/issues/291,incubator-baremaps,941516430,291,Filter junit 4 integration tests in the baremaps-openapi module,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-07-11T19:16:14Z,2021-10-27T13:42:25Z,"The baremaps-openapi module depends on jersey and junit 4. Integration tests should be filtered with the Category annotation instead of the Tag annotation.

https://www.baeldung.com/junit-filtering-tests","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/291/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/294,https://api.github.com/repos/apache/incubator-baremaps/issues/294,incubator-baremaps,948414009,294,Features' id retrieved from layers are undefined ,thibaud-c,32901151,Thibaud Chassin,,CLOSED,2021-07-20T08:16:27Z,2021-07-25T19:22:08Z,"While I was trying to retrieve a specific feature from a layer, I noted that the ID of all features is empty. 

Here is an example of a feature from the building layer: 
```js
{
   id: undefined, // undefined id
   _vectorTileFeature: Object { extent: 4096, type: 3, _geometry: 135034, … }, 
    layer: {
        id: ""building"",
        paint: Object { ""fill-color"": {…}, ""fill-antialias"": true, ""fill-outline-color"": {…} }
        ​​​source: ""baremaps""
        ​​​""source-layer"": ""building""
        ​​​type: ""fill""
    }
    properties: { 
        id: 46785385​​​, // id from osm
        ""addr:city"": ""Lausanne""​​​,
        ""addr:housenumber"": 6​​​,
        ""addr:postcode"": 1006​​​,
        ""addr:street"": ""Avenue Juste-Olivier""​​​,
        building: ""yes""​​​,
        geometry: ""polygon""​​​,
        source: ""Orthophoto Ville de Lausanne 2008""​​​​,
    }
    source: ""baremaps""​​,
    sourceLayer: ""building""​​​,
    type: ""Feature"",
​​} 
```

There is an ID in the properties of the feature, is it possible to use this ID to fill the missing ID? ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/294/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/294,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s40pV7w,incubator-baremaps,883252976,294,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-20T09:41:05Z,2021-07-20T09:41:05Z,"Thank you for reporting this issue. This probably comes from the fact that the current version is not specifying the feature_id_name and geom_name parameters when calling the ST_AsMVT function. 

https://postgis.net/docs/ST_AsMVT.html","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s40pV7w/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/297,https://api.github.com/repos/apache/incubator-baremaps/issues/297,incubator-baremaps,951387126,297,Test the PartitionedSpliterator,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-07-23T09:00:54Z,2021-07-25T19:21:41Z,@LeonardBesseau do not hesitate to create a pull request for the modifications and tests you made to the PartitionedSpliterator.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/297/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/297,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s40x9cC,incubator-baremaps,885511938,297,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2021-07-23T09:21:43Z,2021-07-23T09:21:43Z,Done. Should be in #298 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s40x9cC/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/300,https://api.github.com/repos/apache/incubator-baremaps/issues/300,incubator-baremaps,952788802,300,Configure maven to reformat code,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-07-26T11:12:50Z,2021-08-18T15:38:52Z,"The CI should fail when the contribution does not respect the code style.

https://maven.apache.org/plugins/maven-checkstyle-plugin/index.html
https://github.com/baremaps/baremaps/blob/main/codestyle.xml
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/300/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/300,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41rts5,incubator-baremaps,900651833,300,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-17T21:44:08Z,2021-08-17T21:44:08Z,#325  uses spotless to reformat code with google-java-format.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41rts5/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/301,https://api.github.com/repos/apache/incubator-baremaps/issues/301,incubator-baremaps,955063189,301,Add postgresql introspection capabilities,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-07-28T17:09:18Z,2021-08-17T19:41:22Z,"The aim is to serve vector tiles without configuration files, simply by introspecting the database through jdbc.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/301/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/302,https://api.github.com/repos/apache/incubator-baremaps/issues/302,incubator-baremaps,955932973,302,OSM example throws error on edit,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-07-29T14:59:45Z,2021-07-30T07:16:58Z,"While following up on the example, there was an error upon the `baremaps edit ...` comand:

`io.netty.channel.unix.Errors$NativeIoException: bind(..) failed: Address already in use`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/302/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/302,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41AR7n,incubator-baremaps,889265895,302,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-29T15:56:30Z,2021-07-29T15:56:30Z,"Can you try to run the command with a different port? E.g.:

`baremaps edit --port 9091 ...`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41AR7n/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/302,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41B4TY,incubator-baremaps,889685208,302,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-07-30T07:16:58Z,2021-07-30T07:16:58Z,"Closing this as after a restart it works again, opposed to impot from `https`. Opening an issue for the latter instead.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41B4TY/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/303,https://api.github.com/repos/apache/incubator-baremaps/issues/303,incubator-baremaps,956476647,303,Import from https://... fails,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-07-30T07:18:50Z,2021-07-30T10:58:10Z,Importing a file from the web fails with: `com.baremaps.blob.BlobStoreException: Unsupported scheme: https`,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/303/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/303,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41B5J-,incubator-baremaps,889688702,303,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-07-30T07:23:21Z,2021-07-30T07:23:21Z,"The http protocol is now desabled by default and you should add the flag `--enable-http` to enable it. The same goes for `--enable-s3`. The motivation behind this change is related to the ability to edit the tileset.json that contains SQL queries, hence enabling SQL injection. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41B5J-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/305,https://api.github.com/repos/apache/incubator-baremaps/issues/305,incubator-baremaps,956662013,305,CI crash if pull request coming from Dependabot because of Sonarcloud token,swerky,10920115,James Smith,,CLOSED,2021-07-30T11:29:27Z,2023-03-05T10:06:20Z,"Dependabot pull request will trigger the CI but won't be able to generate the report for Sonarcloud because he doesn't have access to the SONAR_TOKEN anymore.

The quick fix is to add a condition on the step if the pull request comes from Dependabot.
```
if: ${{ github.actor != 'dependabot[bot]' }}
```

>Starting March 1st, 2021 workflow runs that are triggered by Dependabot […] will be treated as if they were opened from a repository fork.

Sources:
- https://community.sonarsource.com/t/youre-not-authorized-to-run-analysis-and-github-bots/41994/4
- https://github.blog/changelog/2021-02-19-github-actions-workflows-triggered-by-dependabot-prs-will-run-with-read-only-permissions/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/305/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/306,https://api.github.com/repos/apache/incubator-baremaps/issues/306,incubator-baremaps,956688716,306,Create a new Subcommand for the OpenAPI module,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-07-30T12:10:21Z,2021-08-18T08:42:41Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/306/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/307,https://api.github.com/repos/apache/incubator-baremaps/issues/307,incubator-baremaps,956694418,307,Add RocksDB as an alternative to LMDB,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-07-30T12:17:51Z,2021-08-18T15:17:06Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/307/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/311,https://api.github.com/repos/apache/incubator-baremaps/issues/311,incubator-baremaps,961896364,311,Add connection poller with JDBI,RemiDesgrange,13271765,Rémi Desgrange,,CLOSED,2021-08-05T14:38:13Z,2021-08-31T06:47:26Z,"I just read some parts of the jdbi docs, and here: https://jdbi.org/#_jdbi it clearly says that it does not provide any connection poller capabilities. So we should add one. I think the most used one nowadays is `HikariCP` but anything could do the trick.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/311/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/311,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41Rihs,incubator-baremaps,893790316,311,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-05T20:58:13Z,2021-08-05T20:58:13Z,"DBCP2 is currently used when importing the openstreetmap. HikariCP looks lighter, more active and has an apache licence, so we may try to use it everywhere.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41Rihs/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/313,incubator-baremaps,964933160,313,"Rename vector_layers, maxZoom and minZoom in tilesets",b4l,16224327,Balthasar Teuscher,,CLOSED,2021-08-10T12:31:56Z,2021-08-18T08:42:41Z,"The `vector_layers` key is already handled as `layers` internally. Also using lowercase `minZoom` and `maxZoom` would align it with how Mapbox is handling these attributes in styles.

@bchapuis are there any reasons for the current naming?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/313/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aMkB,incubator-baremaps,896059649,313,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-10T14:07:40Z,2021-08-10T14:07:40Z,"I would use camel case everywhere (e.g. `minZoom` and `maxZoom`) for properties and methods as it is part of the naming convention in java. If the serialiazation format uses a different naming convention (e.g. lowercase or underscore), I would handle this with annotations. E.g.:

```
@JsonProperty(""minzoom"")
double minZoom
```

I may not have been consistent everywhere, so if you spot places where we should adapt the code, please, go ahead. 

In the context of the tileset, we may call the property `vectorLayers` in the java code to match more closely with the [TileJSON specification](https://github.com/mapbox/tilejson-spec/tree/master/2.2.0).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aMkB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aScg,incubator-baremaps,896083744,313,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-10T14:35:27Z,2021-08-10T14:35:27Z,"It is more about aligning with the Mapbox specs where they use lowercas `minzoom` and `maxzoom` (in the json representation of styles and tilesets). Further the model/attributes are generated from the openapi spec and we may can not annotate it easily. Also the openapi generator converts to java naming convention already (minzoom is just more than a different case ;) ).

As for the `vector_layer` attribute in tilesets, this is not part of the Mapbox spec so we might choose whatever we want here. Again we could follow the Mapbox styles spec and just name it `layers`.

I would suggest to align with the Mabbox style spec and let openapi do the conversion/annotation. I can open a pr here and in the openstreetmap_vecto repository to keep it in sync. 
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aScg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aUbS,incubator-baremaps,896091858,313,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-10T14:45:49Z,2021-08-10T14:45:49Z,"ah, I see, if the code comes from the openapi generator, we should simply use what it generates. 

The `vector_layer` property is defined by maputnik as an extension to the spec, so we cannot change this name without modifying the editor accordingly.

More generally, is your intention to replace the classes in the baremaps-config module by the code generated with openapi? ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aUbS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aZgr,incubator-baremaps,896112683,313,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-10T15:10:02Z,2021-08-10T15:10:02Z,"Ok, so we probably want to keep `vector_layers` in the tileset json. And probably `minzoom` and `maxzoom` in order to adhere to the spec.

Potentially we could use the `tileset` and `mbstyle` classes/models generate by the openapi generator throughout baremaps and remove most of the config in the process. also realized that the current `tilesetService` implementation is actually kind of equivalent to `baremaps-postgres-tile`.

First thing though i like to discuss with you whether you want to continue this path and if so what and how to refactor. And probably first land #287 inlcuding a fix for the serialization issue https://github.com/baremaps/baremaps/pull/287#issuecomment-892757755, resolve this one and let the frontend devs play with it.

What do you think?



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41aZgr/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41bGC5,incubator-baremaps,896295097,313,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-10T20:26:40Z,2021-08-10T20:26:40Z,"

> Ok, so we probably want to keep `vector_layers` in the tileset json. And probably `minzoom` and `maxzoom` in order to adhere to the spec.

Sounds good to me.

> Potentially we could use the `tileset` and `mbstyle` classes/models generate by the openapi generator throughout baremaps and remove most of the config in the process. also realized that the current `tilesetService` implementation is actually kind of equivalent to `baremaps-postgres-tile`.

Yes, but this should be adressed in another PR and we should discuss the implications of this change further.

Regarding the baremaps-postgres-tile module, why did you copied the TilesetQueryParser in the baremaps-openapi module? Is there a limitation that prevent you from using the PostgresqlTileStore?

> First thing though i like to discuss with you whether you want to continue this path and if so what and how to refactor. And probably first land #287 inlcuding a fix for the serialization issue [#287 (comment)](https://github.com/baremaps/baremaps/pull/287#issuecomment-892757755), resolve this one and let the frontend devs play with it.
> 
> What do you think?

Yes, I think it is good to proceed step by step. 

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41bGC5/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41cIhu,incubator-baremaps,896567406,313,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-11T07:24:13Z,2021-08-11T07:24:13Z,"> Regarding the baremaps-postgres-tile module, why did you copied the TilesetQueryParser in the baremaps-openapi module? Is there a limitation that prevent you from using the PostgresqlTileStore?

I used `PostgresTileStore` in the beginning. Changes to the tileset model and its integration will result in a circular dependency.
Also i did not want #287 to be intrusive and break things outside the openapi module.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41cIhu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41deCa,incubator-baremaps,896917658,313,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-11T15:19:33Z,2021-08-11T15:19:33Z,Have you been able to identify where the circular dependency is located?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41deCa/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41dfGI,incubator-baremaps,896921992,313,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-11T15:24:53Z,2021-08-11T15:24:53Z,Between `PostgresTileStore` and the openapi models since the config `Tileset` would have to be replaced by the openapi `TileSet` model.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41dfGI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/313,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41eCBu,incubator-baremaps,897065070,313,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-11T18:46:16Z,2021-08-11T18:46:16Z,Thanks for the clarification it helps a lot. I tried to summarize some points in #316 and propose to continue the discussion there as it is related to the overall architecture.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41eCBu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/314,https://api.github.com/repos/apache/incubator-baremaps/issues/314,incubator-baremaps,965355636,314,Move the sonarcloud analysis in a separate workflow,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-08-10T20:30:32Z,2021-08-18T14:11:31Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/314/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/314,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41feB-,incubator-baremaps,897441918,314,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-12T08:18:53Z,2021-08-12T08:18:53Z,"@b4l this may be the reason why you experience problem with the CI. The sonarcloud analysis is currently nested in the ubuntu build. When the sonarcloud identifies codesmells, the github actions indicates a failure.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41feB-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/316,https://api.github.com/repos/apache/incubator-baremaps/issues/316,incubator-baremaps,967241764,316,Differentiate domain and transfer objects in the architecture,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-08-11T18:44:49Z,2022-08-03T09:55:17Z,"The following list sumarizes some issues and considerations regarding the current architecture:
- The baremaps-config module contains both domain objects (e.g. tileset with queries) and tranfer objects (e.g. mapbox style).
- The domain objects are used by components that implement business logic (e.g. creation of CTE by the PostresqlTileStore). In some cases, they domain objects may even implement business logic themselves.
- The transfer objects are used to serialize and deserialize objects and to exchange data. Transfer objects should not implement business logic. 
- The code generated by openapi correspond to data transfer objects (e.g. Tileset) and services (e.g. TilesetsService). Components that implement business logic should not be dependent on services and transfer objects.

In my opinion, we should not use the transfer objects as domain objects (OpenAPI comes with many dependencies). Keeping a clear separation between domain objects, transfer objects and services will enable to use the same domain objects across different services. For instance, GRPC services aimed at mobile applications could reuse the same domain.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/316/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/316,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41wQZ_,incubator-baremaps,901842559,316,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-19T11:38:20Z,2021-08-19T11:38:20Z,@bchapuis I would like to discuss this and the internal structure/architecture of baremaps in general with you before proceeding with what we have planned for the next iteration.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41wQZ_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/320,https://api.github.com/repos/apache/incubator-baremaps/issues/320,incubator-baremaps,970235530,320,Use the same Jackson ObjectMapper in ServiceTalk and JDBI,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-08-13T09:37:07Z,2021-08-23T13:17:47Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/320/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/328,https://api.github.com/repos/apache/incubator-baremaps/issues/328,incubator-baremaps,974326437,328,"Add ""Geography"" column type support",RemiDesgrange,13271765,Rémi Desgrange,,OPEN,2021-08-19T06:41:35Z,2022-10-16T10:08:26Z,"Right now, baremaps only supports ""geometry"" postgis type. Could be great to support ""geography"" type of postgis too.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/328/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/330,https://api.github.com/repos/apache/incubator-baremaps/issues/330,incubator-baremaps,974385273,330,Explore the API with swagger-ui and redoc ,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-08-19T08:01:14Z,2021-08-26T15:25:19Z,Would be nice to enable the user to explore the API with swagger-ui and redoc ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/330/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/333,incubator-baremaps,974682203,333,Re-architecture openapi/server ,RemiDesgrange,13271765,Rémi Desgrange,,CLOSED,2021-08-19T13:46:43Z,2021-09-07T14:03:20Z,"Right now we have service in the `baremaps-openapi` serving everything (including tiles) and a `baremaps-server` serving tiles, without the same api. It can be quite confusing right now.

WDYT?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/333/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41wp5Y,incubator-baremaps,901946968,333,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-19T14:08:13Z,2021-08-19T14:08:13Z,"Yes, I wonder if we should rename the module baremaps-ogcapi and split yaml definitions in several files:

```
collections.yaml
tiles.yaml
styles.yaml
capabilities.yaml
...
```

Ideally, we should be able to clearly identify what comes from ogc api and what is part of our customizations.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41wp5Y/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41yvTJ,incubator-baremaps,902493385,333,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-20T07:27:46Z,2021-08-20T07:27:46Z,"Some more issues i see is that we currently implement the service interfaces generated by openapi inside the module. More it is an implementation specific to a postgres instance. We might want to move this somewhere else and also introduce an abstraction for the backend/db to call something like `db.getTileset(id)` instead of having raw sql in the service implementation.

This would prevent circular dependencies and ease the integration of other back-ends like s3 or filesystem.

Another issue is that interfaces of baremaps were targeted at a single style & tileset. Reworking them to comply more with the openapi interfaces could make it easier to write reusable components.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41yvTJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41ywuI,incubator-baremaps,902499208,333,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-20T07:38:58Z,2021-08-20T07:38:58Z,"Yes, to me we should probably have a resource layer and a service layer. Something like:

```
TilesetsResource (jax-rs web service) -> TilesetsService (business logic)
```

By doing so, we could reuse the service in a different context such as the CLI:

```
TilesetsCommand (picocli command) -> TilesetsService (business logic)
```

The decoupling from the database may come from defining a TilesetsService interface and providing multiple injectable implementations (PostgresTilesetsService, MysqlTilesetsService, etc). But I would prefere if we just implement a TilesetsService tied to Postgres for now.

To further clarify, here is an exemple using DI:

```java
public class TilesetsResource implements TilesetsApi {

  private final TilesetService tilesetService;

  @Inject
  public TilesetsResource(TilesetService tilesetService) {
    this.tilesetService = tilesetService;
  }

  ...
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41ywuI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s413oJX,incubator-baremaps,903774807,333,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-23T13:34:55Z,2021-08-23T13:34:55Z,"We should also thing about caching and prevent requests from hitting the database and the blob store for every requests. Caching should probably be handled at the level of the resource.

https://github.com/ben-manes/caffeine","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s413oJX/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42ISZw,incubator-baremaps,908142192,333,NA,RemiDesgrange,13271765,Rémi Desgrange,,NA,2021-08-30T08:16:10Z,2021-08-30T08:16:10Z,How does caffeine integrate with rocksdb/lmdb ?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42ISZw/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42JP4G,incubator-baremaps,908393990,333,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-30T14:32:15Z,2021-08-30T14:32:15Z,"It does not integrate with rocksdb/lmdb ;)

Rocksdb/lmdb is used to cache (persist) a large quantity of osm nodes and ways to recreate geometries.

Calcite is used to cache the most frequent tiles in memory.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42JP4G/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/333,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42fEVr,incubator-baremaps,914113899,333,NA,RemiDesgrange,13271765,Rémi Desgrange,,NA,2021-09-07T08:47:52Z,2021-09-07T08:47:52Z,Can we close this  since you create an `ogcapi` package?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42fEVr/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/334,https://api.github.com/repos/apache/incubator-baremaps/issues/334,incubator-baremaps,974684435,334,Implement a multi-tiers tile serving,RemiDesgrange,13271765,Rémi Desgrange,,OPEN,2021-08-19T13:49:08Z,2023-03-05T10:06:49Z,A nice goal could to have url like this `/api/<tier_id>/tilesets/<tileset_id>/{z}/{y}/{x}.mvt` (for example). It would require tiers management API though.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/334/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/335,https://api.github.com/repos/apache/incubator-baremaps/issues/335,incubator-baremaps,974685582,335,Implement Authentication for the Web Part,RemiDesgrange,13271765,Rémi Desgrange,,OPEN,2021-08-19T13:50:20Z,2023-03-05T10:07:01Z,"Service Talk and JAX-RS have some primitive to handle security : https://apple.github.io/servicetalk//servicetalk-http-security-jersey/SNAPSHOT/index.html Using this to limit access to some tilesets, and admin API.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/335/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/335,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41wrqy,incubator-baremaps,901954226,335,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-19T14:16:58Z,2021-08-19T14:16:58Z,"We should adapt the openapi definition accordingly. I wonder if the code generator will produce code related to authentification or if this is left to the developer.

https://swagger.io/docs/specification/authentication/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41wrqy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/337,https://api.github.com/repos/apache/incubator-baremaps/issues/337,incubator-baremaps,975353700,337,TileJSON 3.0.0,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-08-20T07:42:03Z,2021-11-26T18:40:29Z,"Switch to the TileJSON 3.0.0 version, which better fits our use cases.

https://github.com/mapbox/tilejson-spec/tree/master/3.0.0","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/337/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/337,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41yxvd,incubator-baremaps,902503389,337,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-08-20T07:46:58Z,2021-08-20T07:46:58Z,Pretty cool to see that the vector_layer property is now part of the standard.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41yxvd/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/337,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41yx5U,incubator-baremaps,902504020,337,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-20T07:48:06Z,2021-08-20T07:48:06Z,Yes and the `fields` property is also interesting for the studio,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s41yx5U/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/339,https://api.github.com/repos/apache/incubator-baremaps/issues/339,incubator-baremaps,975425520,339,Extract api components into file based resources,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-08-20T09:16:15Z,2021-08-30T16:44:46Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/339/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/341,https://api.github.com/repos/apache/incubator-baremaps/issues/341,incubator-baremaps,976399690,341,Experiment with off heap cache implementations,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-08-22T15:10:58Z,2022-10-16T09:42:57Z,"This may accelerate the creation of geometries when a lot of RAM is available.

https://github.com/yahoo/Oak
https://github.com/OpenHFT/Chronicle-Map","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/341/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/346,https://api.github.com/repos/apache/incubator-baremaps/issues/346,incubator-baremaps,977391231,346,Improve Javadoc,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-08-23T20:11:35Z,2022-09-20T19:37:26Z,"The state of the javadoc can be improved. This issue is used to track progress.

Current status:
- [x] baremaps-blob
- [x] baremaps-blob-s3
- [x] baremaps-cli
- [x] baremaps-osm
- [x] baremaps-osm-lmdb
- [x] baremaps-osm-postgres
- [x] baremaps-osm-rocksdb
- [x] baremaps-postgres
- [x] baremaps-server-common
- [x] baremaps-server-editor
- [x] baremaps-server-studio
- [x] baremaps-server-viewer
- [x] baremaps-server-ogcapi
- [x] baremaps-stream
- [x] baremaps-tile
- [x] baremaps-tile-mbtiles
- [x] baremaps-tile-postgres

Continuous integration:
- [x] Make build fail when the javadoc contains errors
- [ ] Make build fail when the javadoc contains warnings
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/346/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/349,https://api.github.com/repos/apache/incubator-baremaps/issues/349,incubator-baremaps,979207152,349,Import custom datasets,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2021-08-25T14:20:48Z,2022-10-16T09:44:32Z,"While Baremaps is performant to import OSM data, it should also provide a way to import custom dataset

- from local files (SHP, GeoJSON, CSV, etc...)
- from remote services

The dataset should be uploaded to Baremaps, transformed and stored into the Postgis database to be available for any tileset and published as MVT.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/349/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/350,https://api.github.com/repos/apache/incubator-baremaps/issues/350,incubator-baremaps,979211973,350,Add Dataset entity,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2021-08-25T14:25:14Z,2021-09-01T12:20:46Z,"Baremaps should have the knowledge of the raw data it contains in its Postgis database.
We should add a new entity `Dataset` (name can be discussed - `dataset, layer, collection`) to reference the raw data in Postgis.
This entity will contain information about the raw data + metadatas like

- id
- title
- description
- creation date
- size
- amount of elements
- type of geometry","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/350/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/350,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42A6eI,incubator-baremaps,906209160,350,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-08-26T08:36:29Z,2021-08-26T08:36:29Z,"@fgravin some questions for clarification:
- what do you mean by `size`?
- what would be the use of `amount of elements` in the studio?
- for the `type of geometry` to be useful, we have to restrict&enforce heterogeneous collections, do we need this?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42A6eI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/350,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42A67n,incubator-baremaps,906211047,350,NA,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,NA,2021-08-26T08:39:16Z,2021-08-26T08:39:16Z,"All these informations are usefull metadata to better qualify and understand your dataset, when you'll have a big collection of dataset in your data storage.
I mean, it's usefull to know what is the size (mb) of the original data source, how many features it contains etc...
I think it's good for now to only accept points line and polygons (multi ones as well).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42A67n/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/350,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42QQZU,incubator-baremaps,910231124,350,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-09-01T12:20:46Z,2021-09-01T12:20:46Z,Addressed in #348 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42QQZU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/351,https://api.github.com/repos/apache/incubator-baremaps/issues/351,incubator-baremaps,979217295,351,Import Dataset API,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2021-08-25T14:30:08Z,2022-10-16T10:07:10Z,"Add entrypoints to push dataset to baremaps.
It will be asynchronous jobs:

```
/import
/import/:id/status

/importRemote
/importRemote/:id/status

```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/351/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/359,https://api.github.com/repos/apache/incubator-baremaps/issues/359,incubator-baremaps,989746033,359,Get rid of the old java caching system,RemiDesgrange,13271765,Rémi Desgrange,,CLOSED,2021-09-07T08:48:27Z,2021-09-07T14:15:50Z,See: https://github.blog/changelog/2021-08-30-github-actions-setup-java-now-supports-dependency-caching/,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/359/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/361,https://api.github.com/repos/apache/incubator-baremaps/issues/361,incubator-baremaps,990881807,361,Response serialization not adhering to object mapper config,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-09-08T08:45:03Z,2021-09-13T20:32:38Z,There seems to be a problem with how we initialize and/or bind the object mapper as the settings are not applied on the responses. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/361/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/361,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42lk5X,incubator-baremaps,915820119,361,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-09-09T07:04:34Z,2021-09-09T07:04:34Z,"@b4l  could you elaborate a bit on how to reproduce the problem? There is one place where the object mapper is different. The JsonBlobMapper has some pretty printing options because the files are persisted and must readable. May this be the origin of the issue? To keep things simple, we may decide to remove the JsonBlobMapper and pretty print everything.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42lk5X/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/361,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42l1oF,incubator-baremaps,915888645,361,NA,b4l,16224327,Balthasar Teuscher,,NA,2021-09-09T08:47:06Z,2021-09-09T08:47:06Z,@bchapuis easiest is to start the studio `baremaps studio --database ... --port ....` and open the landing page. There should be no attributes with `null`,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42l1oF/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/361,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42nzMh,incubator-baremaps,916402977,361,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-09-09T20:11:42Z,2021-09-09T20:11:42Z,"@b4l Sorry, but I havn't been able to reproduce the issue. I don't see attributes with `null` in the following landing page:

```
{""title"":""Baremaps"",""description"":""Baremaps OGC API Landing Page"",""links"":[{""href"":""http://localhost:9000/"",""rel"":""self"",""type"":""application/json"",""title"":""This document (landing page)""},{""href"":""http://localhost:9000/conformance"",""rel"":""conformance"",""type"":""application/json"",""title"":""Conformance declaration""},{""href"":""http://localhost:9000/api"",""rel"":""service-desc"",""type"":""application/json"",""title"":""API description""},{""href"":""http://localhost:9000/api"",""rel"":""service-desc"",""type"":""application/yaml"",""title"":""API description""},{""href"":""http://localhost:9000/swagger"",""rel"":""service-doc"",""type"":""text/html"",""title"":""API documentation""}]}
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s42nzMh/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/362,https://api.github.com/repos/apache/incubator-baremaps/issues/362,incubator-baremaps,991974162,362,Import does not work when running in docker,b4l,16224327,Balthasar Teuscher,,CLOSED,2021-09-09T09:00:02Z,2021-09-17T12:57:05Z,"When running `baremaps sudio` in a docker environment it responds with a server error using the `/studio/import` endpoint.

It seems to be an issue with the database connection of geotools.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/362/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/367,https://api.github.com/repos/apache/incubator-baremaps/issues/367,incubator-baremaps,999158628,367,Replace hstore by jsonb when importing data for tiles,LeonardBesseau,52856615,Besseau Léonard,,CLOSED,2021-09-17T09:43:44Z,2021-10-11T06:45:06Z,"The data is imported as hstore but is transformed as jsonb when creating the tiles so we could directly import it as jsonb.
This would necessitate to modify the [CopyWriter] (https://github.com/baremaps/baremaps/blob/main/baremaps-postgres/src/main/java/com/baremaps/postgres/jdbc/CopyWriter.java) to use jsonb","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/367/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/367,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s44Ayo9,incubator-baremaps,939731517,367,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-10-11T06:45:06Z,2021-10-11T06:45:06Z,"Well done, this is a great contribution!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s44Ayo9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/372,https://api.github.com/repos/apache/incubator-baremaps/issues/372,incubator-baremaps,1005355207,372,using a WHERE statement on a numeric column results in `org.postgresql.util.PSQLException`,danduk82,2493436,Andrea Borghi,,CLOSED,2021-09-23T12:11:29Z,2021-09-27T10:12:31Z,"I have tried to use the contour example, and inserting a `WHERE MOD(elevation, 50)` statement to fetch only the 50m elevation contour lines. This results in the following error (see below).

To reproduce, in https://github.com/baremaps/baremaps/blob/main/docs/examples/contour/tileset.json#L24 replace
 ```json
""sql"": ""SELECT ogc_fid, hstore('elevation', elevation::text), wkb_geometry FROM aster_dem""
```
with the following:
 ```json
""sql"": ""SELECT ogc_fid, hstore('elevation', elevation::text) as tags, wkb_geometry FROM aster_dem WHERE MOD(elevation, 50) = 0""
```

I have tested the request directly in postgresql and it work. Apparently the problem is the compilation of the ""super sql request"" that does not take a trace of the `elevation` column.

the error dump:
```
baremaps edit --log-level DEBUG \                                                             130 ↵
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset-2.json' \
  --style 'style-2.json'
[INFO ] 2021-09-23 13:49:59.656 [main] HikariDataSource - BaremapsDataSource - Starting...
[INFO ] 2021-09-23 13:49:59.820 [main] HikariPool - BaremapsDataSource - Added connection org.postgresql.jdbc.PgConnection@4fce136b
[INFO ] 2021-09-23 13:49:59.823 [main] HikariDataSource - BaremapsDataSource - Start completed.
[INFO ] 2021-09-23 13:50:01.431 [main] Edit - Listening on /0:0:0:0:0:0:0:0%0:9000
[ERROR] 2021-09-23 13:50:05.517 [servicetalk-global-executor-1-2] EditorResources - Tile error
com.baremaps.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:114) ~[baremaps-tile-postgres-0.6.0.jar:?]
	at com.baremaps.server.editor.EditorResources.getTile(EditorResources.java:177) ~[baremaps-server-editor-0.6.0.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680) ~[jersey-server-2.32.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:259) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:78) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:191) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:45) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$3(Completable.java:2203) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:80) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2202) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1695) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1680) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:129) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle.handleSubscribe(OnErrorResumeSingle.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher.handleSubscribe(SingleFlatMapPublisher.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.PublisherSubscribeShareContext.handleSubscribe(PublisherSubscribeShareContext.java:34) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.lambda$subscribeWithContext$16(Publisher.java:3659) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:68) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeWithContext(Publisher.java:3658) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeInternal(Publisher.java:3345) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher$SubscriberImpl.onSuccess(SingleFlatMapPublisher.java:95) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle$ResumeSubscriber.onSuccess(OnErrorResumeSingle.java:78) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:75) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:43) [servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:236) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.0.jar:?]
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:100) ~[baremaps-tile-postgres-0.6.0.jar:?]
	... 58 more
[ERROR] 2021-09-23 13:50:05.517 [servicetalk-global-executor-1-6] EditorResources - Tile error
com.baremaps.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:114) ~[baremaps-tile-postgres-0.6.0.jar:?]
	at com.baremaps.server.editor.EditorResources.getTile(EditorResources.java:177) ~[baremaps-server-editor-0.6.0.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680) ~[jersey-server-2.32.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:259) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:78) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:191) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:45) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$3(Completable.java:2203) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:80) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2202) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1695) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1680) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:129) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle.handleSubscribe(OnErrorResumeSingle.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher.handleSubscribe(SingleFlatMapPublisher.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.PublisherSubscribeShareContext.handleSubscribe(PublisherSubscribeShareContext.java:34) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.lambda$subscribeWithContext$16(Publisher.java:3659) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:68) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeWithContext(Publisher.java:3658) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeInternal(Publisher.java:3345) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher$SubscriberImpl.onSuccess(SingleFlatMapPublisher.java:95) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle$ResumeSubscriber.onSuccess(OnErrorResumeSingle.java:78) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:75) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:43) [servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:236) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.0.jar:?]
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:100) ~[baremaps-tile-postgres-0.6.0.jar:?]
	... 58 more
[ERROR] 2021-09-23 13:50:05.500 [servicetalk-global-executor-1-3] EditorResources - Tile error
com.baremaps.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:114) ~[baremaps-tile-postgres-0.6.0.jar:?]
	at com.baremaps.server.editor.EditorResources.getTile(EditorResources.java:177) ~[baremaps-server-editor-0.6.0.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680) ~[jersey-server-2.32.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:259) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:78) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:191) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:45) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$3(Completable.java:2203) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:80) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2202) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1695) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1680) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:129) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle.handleSubscribe(OnErrorResumeSingle.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher.handleSubscribe(SingleFlatMapPublisher.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.PublisherSubscribeShareContext.handleSubscribe(PublisherSubscribeShareContext.java:34) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.lambda$subscribeWithContext$16(Publisher.java:3659) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:68) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeWithContext(Publisher.java:3658) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeInternal(Publisher.java:3345) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher$SubscriberImpl.onSuccess(SingleFlatMapPublisher.java:95) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle$ResumeSubscriber.onSuccess(OnErrorResumeSingle.java:78) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:75) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:43) [servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:236) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.0.jar:?]
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:100) ~[baremaps-tile-postgres-0.6.0.jar:?]
	... 58 more
[ERROR] 2021-09-23 13:50:05.505 [servicetalk-global-executor-1-1] EditorResources - Tile error
com.baremaps.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:114) ~[baremaps-tile-postgres-0.6.0.jar:?]
	at com.baremaps.server.editor.EditorResources.getTile(EditorResources.java:177) ~[baremaps-server-editor-0.6.0.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680) ~[jersey-server-2.32.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:259) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:78) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:191) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:45) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$3(Completable.java:2203) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:80) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2202) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1695) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1680) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:129) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle.handleSubscribe(OnErrorResumeSingle.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher.handleSubscribe(SingleFlatMapPublisher.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.PublisherSubscribeShareContext.handleSubscribe(PublisherSubscribeShareContext.java:34) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.lambda$subscribeWithContext$16(Publisher.java:3659) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:68) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeWithContext(Publisher.java:3658) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeInternal(Publisher.java:3345) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher$SubscriberImpl.onSuccess(SingleFlatMapPublisher.java:95) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle$ResumeSubscriber.onSuccess(OnErrorResumeSingle.java:78) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:75) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:43) [servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:236) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.0.jar:?]
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:100) ~[baremaps-tile-postgres-0.6.0.jar:?]
	... 58 more
[ERROR] 2021-09-23 13:50:05.504 [servicetalk-global-executor-1-5] EditorResources - Tile error
com.baremaps.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:114) ~[baremaps-tile-postgres-0.6.0.jar:?]
	at com.baremaps.server.editor.EditorResources.getTile(EditorResources.java:177) ~[baremaps-server-editor-0.6.0.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680) ~[jersey-server-2.32.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:259) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:78) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:191) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:45) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$3(Completable.java:2203) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:80) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2202) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1695) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1680) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:129) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle.handleSubscribe(OnErrorResumeSingle.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher.handleSubscribe(SingleFlatMapPublisher.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.PublisherSubscribeShareContext.handleSubscribe(PublisherSubscribeShareContext.java:34) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.lambda$subscribeWithContext$16(Publisher.java:3659) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:68) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeWithContext(Publisher.java:3658) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeInternal(Publisher.java:3345) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher$SubscriberImpl.onSuccess(SingleFlatMapPublisher.java:95) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle$ResumeSubscriber.onSuccess(OnErrorResumeSingle.java:78) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:75) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:43) [servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:236) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.0.jar:?]
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:100) ~[baremaps-tile-postgres-0.6.0.jar:?]
	... 58 more
[ERROR] 2021-09-23 13:50:05.598 [servicetalk-global-executor-1-6] EditorResources - Tile error
com.baremaps.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:114) ~[baremaps-tile-postgres-0.6.0.jar:?]
	at com.baremaps.server.editor.EditorResources.getTile(EditorResources.java:177) ~[baremaps-server-editor-0.6.0.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.32.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.32.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:680) ~[jersey-server-2.32.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:259) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:78) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:191) ~[servicetalk-http-router-jersey-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:45) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$3(Completable.java:2203) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:80) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2202) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1695) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1680) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:129) ~[servicetalk-http-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2582) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle.handleSubscribe(OnErrorResumeSingle.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2538) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher.handleSubscribe(SingleFlatMapPublisher.java:44) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.PublisherSubscribeShareContext.handleSubscribe(PublisherSubscribeShareContext.java:34) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.lambda$subscribeWithContext$16(Publisher.java:3659) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingConsumer.accept(ContextPreservingConsumer.java:40) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.NoopOffloader.offloadSubscribe(NoopOffloader.java:68) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeWithContext(Publisher.java:3658) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.Publisher.subscribeInternal(Publisher.java:3345) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.SingleFlatMapPublisher$SubscriberImpl.onSuccess(SingleFlatMapPublisher.java:95) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.OnErrorResumeSingle$ResumeSubscriber.onSuccess(OnErrorResumeSingle.java:78) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:75) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:43) [servicetalk-concurrent-api-0.40.1.jar:0.40.1]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: column ""elevation"" does not exist
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:236) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.0.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.0.jar:?]
	at com.baremaps.tile.postgres.PostgresTileStore.read(PostgresTileStore.java:100) ~[baremaps-tile-postgres-0.6.0.jar:?]
	... 58 more


```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/372/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/372,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s43Q-gW,incubator-baremaps,927197206,372,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2021-09-25T23:19:19Z,2021-09-25T23:19:19Z,"@danduk82 Thanks for reporting this issue. There was an issue with columns other than id, tags and geom. The PR fixes it but I will test it with osmvecto and the other examples before merging.

Also, I don't think the MOD function exists in postgres, here is the query that worked for me:

```sql
SELECT ogc_fid, hstore('elevation', elevation::text) as tags, wkb_geometry FROM aster_dem WHERE elevation::int % 500 = 0
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s43Q-gW/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/372,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s43S-8o,incubator-baremaps,927723304,372,NA,danduk82,2493436,Andrea Borghi,,NA,2021-09-27T10:12:31Z,2021-09-27T10:12:31Z,"@bchapuis fyi MOD exists in postgres yes:
https://www.postgresqltutorial.com/postgresql-mod/
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s43S-8o/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/375,https://api.github.com/repos/apache/incubator-baremaps/issues/375,incubator-baremaps,1009656857,375,"Save an index.html, style.json and tileset.json files when exporting tiles",bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-09-28T11:59:52Z,2024-02-29T08:43:33Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/375/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/375,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h5zOz,incubator-baremaps,1642542003,375,NA,polastre,2539570,Joe Polastre,,NA,2023-07-19T18:16:09Z,2023-07-19T18:16:09Z,"It would be really helpful for `export` to have an option to take a `js` files instead of a tilejson file, or to generate/export the `tileset.json` file for use with the `export` command.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h5zOz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/375,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h51UN,incubator-baremaps,1642550541,375,NA,polastre,2539570,Joe Polastre,,NA,2023-07-19T18:21:07Z,2023-07-19T18:21:07Z,"Accepting `js` files in the `export` command appears to be fixed in #600, however there hasn't been a new release of baremaps that includes this change yet.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h51UN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/375,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s51df3M,incubator-baremaps,1970666956,375,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-02-29T08:43:30Z,2024-02-29T08:43:30Z,Solved in #837 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s51df3M/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/376,https://api.github.com/repos/apache/incubator-baremaps/issues/376,incubator-baremaps,1012051786,376,Properly attribute external source code,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-09-30T11:19:40Z,2021-10-11T21:24:15Z,Some attribution have been removed by spotless and this should be fixed.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/376/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/378,https://api.github.com/repos/apache/incubator-baremaps/issues/378,incubator-baremaps,1021681390,378,Fix logger to take debug level into account,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-10-09T11:12:05Z,2021-10-18T14:58:16Z,The `--log-level DEBUG` flag is working in the IDE but not in the zip distribution.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/378/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/385,https://api.github.com/repos/apache/incubator-baremaps/issues/385,incubator-baremaps,1046532647,385,Fix issue with file watcher,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-11-06T15:25:31Z,2021-11-25T21:32:38Z,"```
[ERROR] 2021-11-06 15:24:20.527 [Thread-341] EditorResources - User limit of inotify instances reached or too many open files
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/385/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/387,https://api.github.com/repos/apache/incubator-baremaps/issues/387,incubator-baremaps,1064690550,387,Use Blob in TileStore,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-11-26T16:50:24Z,2021-12-02T08:53:57Z,The TileStore interface is returning byte arrays. The Blob class allows to store additional data such as the encoding and the mime type. The idea is to make the TileStore return blobs instead of byte arrays.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/387/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/393,https://api.github.com/repos/apache/incubator-baremaps/issues/393,incubator-baremaps,1073818448,393,Use rocksdb column families,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2021-12-07T22:53:20Z,2021-12-08T00:03:37Z,Use rocksdb column families for storing coordinates and references instead of using separate databases.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/393/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/397,https://api.github.com/repos/apache/incubator-baremaps/issues/397,incubator-baremaps,1082138591,397,Create geometries for boundaries,Yahia1018,91720525,Yanis Ouadahi,,CLOSED,2021-12-16T12:26:25Z,2023-11-20T15:38:15Z,"The boundaries miss a geometry. For instance the geometry column for the following relation is _null_.

```
SELECT * FROM osm_relations WHERE id = 365551;
```

As displayed hereafter, these boundaries are rendered on openstreetmap.

<img width=""930"" alt=""Capture d’écran 2021-12-16 à 13 22 55"" src=""https://user-images.githubusercontent.com/91720525/146371707-d5b5f42b-185f-4829-abeb-33220399f4f8.png"">

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/397/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/397,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scF8w,incubator-baremaps,1819303728,397,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-20T15:38:14Z,2023-11-20T15:38:14Z,Baremaps is now able to include the admin dataset published by daylight ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scF8w/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/399,https://api.github.com/repos/apache/incubator-baremaps/issues/399,incubator-baremaps,1100219430,399,GeoJSON Import does not support the CRS property,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2022-01-12T11:20:39Z,2023-11-20T15:37:02Z,"If the GeoJSON has a crs property in the featureCollection, baremaps triggers an error

eg :
```json
""crs"":{""type"":""name"",""properties"":{""name"":""urn:ogc:def:crs:EPSG::4326""}}
```

The error is
```
app_1  | java.lang.RuntimeException: java.io.IOException: Error parsing urn:ogc:def:crs:EPSG::4326 as crs id
app_1  | 	at org.geotools.geojson.feature.FeatureJSON$FeatureCollectionIterator.readNext(FeatureJSON.java:718) ~[gt-geojson-25.2.jar:?]
app_1  | 	at org.geotools.geojson.feature.FeatureJSON$FeatureCollectionIterator.hasNext(FeatureJSON.java:703) ~[gt-geojson-25.2.jar:?]
app_1  | 	at org.geotools.geojson.feature.FeatureJSON.readFeatureCollection(FeatureJSON.java:357) ~[gt-geojson-25.2.jar:?]
app_1  | 	at org.geotools.geojson.feature.FeatureJSON.readFeatureCollection(FeatureJSON.java:389) ~[gt-geojson-25.2.jar:?]
app_1  | Caused by: java.io.IOException: Error parsing urn:ogc:def:crs:EPSG::4326 as crs id
app_1  | 	at org.geotools.geojson.feature.CRSHandler.primitive(CRSHandler.java:58) ~[gt-geojson-25.2.jar:?]
app_1  | 	at org.geotools.geojson.DelegatingHandler.primitive(DelegatingHandler.java:106) ~[gt-geojson-25.2.jar:?]
app_1  | 	at org.json.simple.parser.JSONParser.parse(JSONParser.java:428) ~[json-simple-1.1.1.jar:?]
app_1  | 	at org.geotools.geojson.feature.FeatureJSON$FeatureCollectionIterator.readNext(FeatureJSON.java:715) ~[gt-geojson-25.2.jar:?]
app_1  | 	... 61 more
app_1  | Caused by: org.opengis.referencing.NoSuchAuthorityCodeException: No code ""EPSG:4326"" from authority ""EPSG"" found for object of type ""EngineeringCRS"".
app_1  | 	at org.geotools.referencing.factory.epsg.CartesianAuthorityFactory.noSuchAuthorityException(CartesianAuthorityFactory.java:136) ~[gt-referencing-25.2.jar:?]
app_1  | 	at org.geotools.referencing.factory.epsg.CartesianAuthorityFactory.createEngineeringCRS(CartesianAuthorityFactory.java:128) ~[gt-referencing-25.2.jar:?]
app_1  | 	at org.geotools.referencing.factory.epsg.CartesianAuthorityFactory.createCoordinateReferenceSystem(CartesianAuthorityFactory.java:119) ~[gt-referencing-25.2.jar:?]
app_1  | 	at org.geotools.referencing.factory.AuthorityFactoryAdapter.createCoordinateReferenceSystem(AuthorityFactoryAdapter.java:809) ~[gt-referencing-25.2.jar:?]
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/399/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/400,https://api.github.com/repos/apache/incubator-baremaps/issues/400,incubator-baremaps,1100225944,400,GeoJSON upload rises a CORS issue when an error occurs,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,CLOSED,2022-01-12T11:25:39Z,2023-11-20T15:36:40Z,"When doing a POST to http://localhost:8080/studio/import, if an error occurs, it dispatches also a CORS issue.

```
Access to fetch at 'http://localhost:8080/studio/import' from origin 'http://localhost:3000' has been 
blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. 
If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch t
he resource with CORS disabled.

VM6656:1 POST http://localhost:8080/studio/import net::ERR_FAILED 500
```

If the request works (Status 200), there is no CORS issue, the CORS response header seems only added on success.

On 500 error, the response has no content and no header.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/400/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/400,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scFRG,incubator-baremaps,1819300934,400,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-20T15:36:40Z,2023-11-20T15:36:40Z,These features have been disabled for now as we focus on the basemap ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scFRG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/401,https://api.github.com/repos/apache/incubator-baremaps/issues/401,incubator-baremaps,1101579254,401,Can't import data on Windows 10 : java.lang.IllegalArgumentException: Unknown result code 112,yhilem,13407261,Youcef HILEM,,CLOSED,2022-01-13T11:29:27Z,2022-01-13T18:38:28Z,"Hi,
On my Windows 10 machine, the import commande raises this error :

```
[INFO ] 2022-01-13 11:58:56.050 [main] HikariDataSource - BaremapsDataSource - Starting...
[INFO ] 2022-01-13 11:58:56.164 [main] HikariPool - BaremapsDataSource - Added connection org.postgresql.jdbc.PgConnection@5d25e6bb
[INFO ] 2022-01-13 11:58:56.166 [main] HikariDataSource - BaremapsDataSource - Start completed.
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy (file:/C:/Platform/GIS/Baremaps/v0.6.5/baremaps/lib/lmdbjava-0.8.1.jar) to field java.nio.Buffer.address
WARNING: Please consider reporting this to the maintainers of org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
java.lang.IllegalArgumentException: Unknown result code 112
        at org.lmdbjava.ResultCodeMapper.checkRc(ResultCodeMapper.java:111)
        at org.lmdbjava.Env$Builder.open(Env.java:495)
        at org.lmdbjava.Env$Builder.open(Env.java:512)
        at com.baremaps.cli.Import.call(Import.java:118)
        at com.baremaps.cli.Import.call(Import.java:51)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
        at picocli.CommandLine.access$1300(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
        at picocli.CommandLine.execute(CommandLine.java:2078)
        at com.baremaps.cli.Baremaps.main(Baremaps.java:85)
```
Thanks

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/401/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/401,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s48WBVu,incubator-baremaps,1012405614,401,NA,yhilem,13407261,Youcef HILEM,,NA,2022-01-13T18:38:28Z,2022-01-13T18:38:28Z,"No prb with option :  --cache-type ""MEMORY""","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s48WBVu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/402,https://api.github.com/repos/apache/incubator-baremaps/issues/402,incubator-baremaps,1105041431,402,Inotify instances reached or too many open files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-01-16T12:40:06Z,2022-03-12T16:00:46Z,"The following error occurs when baremaps is looking for changes in files.

```
app_1  | [ERROR] 2022-01-16 12:37:53.521 [Thread-3277] EditorResources - User limit of inotify instances reached or too many open files
app_1  | [ERROR] 2022-01-16 12:37:53.521 [Thread-3276] EditorResources - User limit of inotify instances reached or too many open files
app_1  | [ERROR] 2022-01-16 12:37:53.524 [Thread-3278] EditorResources - User limit of inotify instances reached or too many open files
app_1  | [ERROR] 2022-01-16 12:37:53.525 [Thread-3279] EditorResources - User limit of inotify instances reached or too many open files
app_1  | [ERROR] 2022-01-16 12:37:53.561 [Thread-3280] EditorResources - User limit of inotify instances reached or too many open files
app_1  | [ERROR] 2022-01-16 12:37:53.564 [Thread-3281] EditorResources - User limit of inotify instances reached or too many open files
app_1  | [ERROR] 2022-01-16 12:37:53.721 [Thread-3283] EditorResources - User limit of inotify instances reached or too many open files
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/402/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/402,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s4_iHcE,incubator-baremaps,1065907972,402,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-03-12T16:00:46Z,2022-03-12T16:00:46Z,The service lacked the stateless annotation and new file watchers were created for each requests resulting in this error. #414 contains a fix for this issue.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s4_iHcE/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/404,https://api.github.com/repos/apache/incubator-baremaps/issues/404,incubator-baremaps,1114824917,404,Check Java 17 builds,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-01-26T09:50:51Z,2022-03-04T13:28:19Z,"Some problems were reported with Java 17 builds. For instance, the dependency to lmdb-java may cause problems.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/404/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/404,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s486xkH,incubator-baremaps,1022040327,404,NA,halset,445229,Tore Halset,,NA,2022-01-26T09:57:16Z,2022-01-26T09:57:16Z,"This is the exception I got with OpenJDK 17.
```
Exception in thread ""main"" java.lang.ExceptionInInitializerError
	at org.lmdbjava.ByteBufferProxy.<clinit>(ByteBufferProxy.java:71)
	at org.lmdbjava.Env.create(Env.java:92)
	at com.baremaps.cli.Import.call(Import.java:118)
	at com.baremaps.cli.Import.call(Import.java:51)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
	at picocli.CommandLine.access$1300(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
	at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
	at picocli.CommandLine.execute(CommandLine.java:2078)
	at com.baremaps.cli.Baremaps.main(Baremaps.java:85)
Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field long java.nio.Buffer.address accessible: module java.base does not ""opens java.nio"" to unnamed module @1f508f09
	at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)
	at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)
	at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)
	at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)
	at org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy.findField(ByteBufferProxy.java:163)
	at org.lmdbjava.ByteBufferProxy$ReflectiveProxy.<clinit>(ByteBufferProxy.java:222)
	... 13 more
```

This might be related to https://github.com/lmdbjava/lmdbjava/issues/42","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s486xkH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/404,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s486zRv,incubator-baremaps,1022047343,404,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-01-26T10:05:29Z,2022-01-26T10:05:29Z,Thank you. I recently added support for rocksdb to replace lmdb (#326). I hope it will be sufficient to address this problem.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s486zRv/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/406,https://api.github.com/repos/apache/incubator-baremaps/issues/406,incubator-baremaps,1141191139,406,Add nic parsers,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-02-17T11:04:22Z,2022-03-26T16:57:54Z,"The following ISP databases are available online. It would be interesting to dig in these data and to include them in our database.

https://ftp.ripe.net/ripe/dbase/ripe.db.gz
https://ftp.afrinic.net/pub/dbase/afrinic.db.gz
https://ftp.apnic.net/pub/apnic/whois/apnic.db.inetnum.gz
https://ftp.apnic.net/pub/apnic/whois/apnic.db.inet6num.gz
ftp://ftp.arin.net/pub/rr/arin.db.gz
ftp://ftp.arin.net/pub/rr/arin-nonauth.db.gz
ftp://ftp.lacnic.net/pub/stats/lacnic/delegated-lacnic-extended-latest","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/406/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/407,https://api.github.com/repos/apache/incubator-baremaps/issues/407,incubator-baremaps,1141192026,407,Add geonames parser,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-02-17T11:05:12Z,2022-03-26T16:57:46Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/407/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/419,https://api.github.com/repos/apache/incubator-baremaps/issues/419,incubator-baremaps,1174207506,419,Use Apache SIS to read shapefiles and geojson,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-03-19T08:15:23Z,2022-10-16T09:29:14Z,Apache SIS has a shapefile reader that may be used to replace geotools.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/419/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/419,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5BCXFu,incubator-baremaps,1091137902,419,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-04-07T06:42:57Z,2022-04-07T06:42:57Z,"Apache SIS contains some classes to parse shapefiles, but the `ShapefileStore` class implementing the `FeatureSet` interface is yet to be implemented. Apparently, Geotoolkit (LGPL) provides several stores for common file formats, including shapefiles, geojson files, gml, etc. 

https://github.com/Geomatys/geotoolkit/issues/22","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5BCXFu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/420,https://api.github.com/repos/apache/incubator-baremaps/issues/420,incubator-baremaps,1177389666,420,Move blob store in submodule,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-03-22T22:55:14Z,2022-03-31T15:27:04Z,The geocoder may eventually use the blobstore to download data. It makes sense to move the blob store in a separate submodule.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/420/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/421,https://api.github.com/repos/apache/incubator-baremaps/issues/421,incubator-baremaps,1177391144,421,Rename core into pipeline,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-03-22T22:57:53Z,2022-10-16T09:27:26Z,"The name of the core submodule is too generic. It is currently responible for maintaining data pipeline: importing data in the database, creating simplification tables, producing vector tiles, etc.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/421/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/422,https://api.github.com/repos/apache/incubator-baremaps/issues/422,incubator-baremaps,1179668242,422,Provide search services to the geocoder index through gRPC,swerky,10920115,James Smith,,CLOSED,2022-03-24T15:20:46Z,2022-10-16T10:05:45Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/422/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/423,https://api.github.com/repos/apache/incubator-baremaps/issues/423,incubator-baremaps,1179675590,423,Create a SQLite database of Network Information Center objects improved with geolocation,swerky,10920115,James Smith,,CLOSED,2022-03-24T15:26:22Z,2022-10-16T09:29:39Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/423/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/424,https://api.github.com/repos/apache/incubator-baremaps/issues/424,incubator-baremaps,1179677841,424,Add all fields from Geonames to the geocoder Lucene index,swerky,10920115,James Smith,,CLOSED,2022-03-24T15:28:04Z,2022-10-16T09:29:52Z,"Add fields like alternates names, zip code, etc.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/424/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/425,https://api.github.com/repos/apache/incubator-baremaps/issues/425,incubator-baremaps,1179680881,425,Provide search services to the augmented NIC SQLite database,swerky,10920115,James Smith,,CLOSED,2022-03-24T15:30:19Z,2022-10-16T10:05:32Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/425/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/426,https://api.github.com/repos/apache/incubator-baremaps/issues/426,incubator-baremaps,1179683143,426,Deploy the grpc service on Kubernetes,swerky,10920115,James Smith,,CLOSED,2022-03-24T15:32:02Z,2022-10-16T09:33:26Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/426/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/433,https://api.github.com/repos/apache/incubator-baremaps/issues/433,incubator-baremaps,1188039262,433,Extending the Geocoder interface to allow additional fields in the request,Drabble,3996615,Antoine Drabble,,CLOSED,2022-03-31T12:56:53Z,2022-10-16T09:29:36Z,"In order to make a query on the [Geocoder](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Geocoder.java) interface, we pass in a [Request](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Request.java) object. The [Request](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Request.java) class has a limit integer and a query string. 

If I wanted to make my queries in a specific country code, my only option is to pass the country code into the query string. This is not accurate as the country code will be analyzed and searched on all of the fields. The country code should be inside a MUST boolean query, which is specific to the country code column of the Lucene index.

I would propose adding a second method with a different signature in the search method of the [Geocoder](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Geocoder.java) interface. It would be as follow :

```java
public Response search(org.apache.lucene.search.Query query);
```

This way we can either pass in a [Request](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Request.java) object with a simple query, or pass in a custom Query object with a custom Analyzer for advanced queries. 

The only issue I see is that we will no longer have an abstraction on top of Lucene and it will be harder in the future to change to another search engine e.g. Elastic Search.

Otherwise we could change the [Request](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Request.java) class to support advanced queries on multiple fields. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/433/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/433,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ApVK9,incubator-baremaps,1084576445,433,NA,swerky,10920115,James Smith,,NA,2022-03-31T13:27:28Z,2022-03-31T13:27:28Z,"Hi @Drabble,

Good remark.

Another solution can be to have multiple abstract *query* methods in [Geocoder](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Geocoder.java) that will need to be implemented in children Geocoders. These functions will return the Lucene Query depending on the Geocoder (Geonames or another) with different filters or properties.

Ex:
We currently have for GeonamesGeocoder this query
```java
@Override
protected Query query(Analyzer analyzer, Request request) throws ParseException {
  BooleanQuery.Builder builder = new Builder();
  builder.add(new QueryParser(""name"", analyzer).parse(request.query()), Occur.SHOULD);
  builder.add(new QueryParser(""country"", analyzer).parse(request.query()), Occur.SHOULD);
  builder.add(new QueryParser(""countryCode"", analyzer).parse(request.query()), Occur.SHOULD);
  return builder.build();
}
```

You can add a new method:
```java
@Override
protected Query queryWithCountryFiltering(Analyzer analyzer, Request request) throws ParseException {
  BooleanQuery.Builder builder = new Builder();
  builder.add(new QueryParser(""name"", analyzer).parse(request.query()), Occur.SHOULD);
  builder.add(new QueryParser(""country"", analyzer).parse(request.query()), Occur.SHOULD);
  builder.add(new QueryParser(""countryCode"", analyzer).parse(request.country()), Occur.MUST);
  return builder.build();
}
```

With my proposition, you will need to improve the [Request](https://github.com/baremaps/baremaps/blob/main/baremaps-geocoder/src/main/java/com/baremaps/geocoder/Request.java) object to add more properties.

What do you think about this?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ApVK9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/433,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ApaNN,incubator-baremaps,1084597069,433,NA,Drabble,3996615,Antoine Drabble,,NA,2022-03-31T13:44:07Z,2022-03-31T13:44:07Z,"@swerky I fear that adding multiple abstract methods, such as queryWithCountryFiltering, to the Geocoder interface will be problematic. We will have to add new methods each time we want a different kind of filtering, we will not be able to make filters on multiple columns at once, unless we once again add more methods. Having different implementations such as OSM, Geonames, etc. will require a lot of time to implement those new methods. FInally, not all implementations will necessarily have a country code.

What I propose is to have an advanced Request object that has a list of queries which can be customised to target columns that are specific to the current implementation of Geocoder that is being used.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ApaNN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/433,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ap6EH,incubator-baremaps,1084727559,433,NA,Drabble,3996615,Antoine Drabble,,NA,2022-03-31T15:10:37Z,2022-03-31T15:10:37Z,"As discussed, we will extend the Request class to support additional filters such as country code which would add a MUST boolean query on the country_code field in the implementation of the geocoder.

We may add additional fields in the future such as Region, Bbox, Language, Proximity, FuzzyMatch...

We want to provide a simple interface to the user so that he doesn't need to know about the actual implementation he is using. 

We may add an AdvancedRequest class in the future with generic search fields if we really need to. But for now we will keep it simple.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ap6EH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/436,https://api.github.com/repos/apache/incubator-baremaps/issues/436,incubator-baremaps,1195811964,436,Filter the geocoder query with the country code,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-07T09:59:08Z,2022-10-16T09:29:34Z,"We want to filter all the queries to the geocoder using the country code that is almost always available in the NIC attributes.

Prerequisite : #433 ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/436/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/437,https://api.github.com/repos/apache/incubator-baremaps/issues/437,incubator-baremaps,1195816381,437,Move all of the stream utils from baremaps-osm to baremaps-stream,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-07T10:02:50Z,2022-10-16T09:27:12Z,"Currently the stream utils are in the package /baremaps-osm/src/main/java/com/baremaps/osm)/stream/.
We would like to move it to another module called baremaps-stream because it will be used in other modules than baremaps-osm.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/437/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/438,https://api.github.com/repos/apache/incubator-baremaps/issues/438,incubator-baremaps,1195820682,438,Batch inserts into the SQLite database for the creation of the augmented NIC database,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-07T10:06:16Z,2022-10-16T09:29:31Z,"We want to batch the inserts from the stream of NIC objects using a PartitionedSpliterator.

Here is an example of how to use a PartitionedSpliterator:

```java
Stream<Integer> stream = IntStream.range(0, 1000).boxed();
Stream<Stream<Integer>> partitionnedStream = StreamSupport.stream(new PartitionedSpliterator<>(stream.spliterator(), 10), true);
partitionnedStream.map(partition -> partition.collect(Collectors.toList())).forEachOrdered(System.out::println);
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/438/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/439,https://api.github.com/repos/apache/incubator-baremaps/issues/439,incubator-baremaps,1195839605,439,Implement the pipeline of the CLI to generate the augmented IP location database,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-07T10:22:58Z,2022-10-16T09:29:29Z,"The implementation process needs to be refined. We will try using CompletableFutures to make a pipeline that can : 

- Step 1 (can be parallelised)
  - Fetch the NIC objects from different sources
  - Load the geocoder index
  - Init the IP location database
- Step 2
  - Insert the NIC objects in the IP location database","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/439/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/440,https://api.github.com/repos/apache/incubator-baremaps/issues/440,incubator-baremaps,1195841128,440,Use SQLiteDatasource to get the connection to the SQLite database,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-07T10:24:19Z,2022-10-16T09:29:27Z,"SQLiteDatasource is optimised for SQLite, it should not allow concurrent writes, which are not supported by SQLite.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/440/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/441,https://api.github.com/repos/apache/incubator-baremaps/issues/441,incubator-baremaps,1196018922,441,Add Apache SIS as a dependency to the project,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:04:28Z,2022-10-16T09:29:09Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/441/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/442,https://api.github.com/repos/apache/incubator-baremaps/issues/442,incubator-baremaps,1196019107,442,Create a FeatureSet for the shapefile format,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:04:39Z,2022-10-16T09:29:43Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/442/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/443,https://api.github.com/repos/apache/incubator-baremaps/issues/443,incubator-baremaps,1196019511,443,Create a FeatureSet for the the geopackage format,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:04:56Z,2022-10-16T09:29:48Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/443/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/444,https://api.github.com/repos/apache/incubator-baremaps/issues/444,incubator-baremaps,1196019672,444,Create a FeatureSet for the geojson format,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:05:04Z,2023-11-20T15:35:28Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/444/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/445,https://api.github.com/repos/apache/incubator-baremaps/issues/445,incubator-baremaps,1196019783,445,Create a WritableFeatureSet for postgresql,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:05:10Z,2022-10-16T09:29:20Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/445/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/446,https://api.github.com/repos/apache/incubator-baremaps/issues/446,incubator-baremaps,1196019870,446,Create a FeatureSet for the osm pbf format,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:05:14Z,2023-03-05T10:07:34Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/446/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/447,https://api.github.com/repos/apache/incubator-baremaps/issues/447,incubator-baremaps,1196019960,447,Create a pipeline that uses apache sis to download and import datasets in postgresql,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:05:19Z,2022-10-16T09:29:16Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/447/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/449,https://api.github.com/repos/apache/incubator-baremaps/issues/449,incubator-baremaps,1196038810,449,Document the data formats,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-07T13:19:38Z,2022-10-16T09:29:50Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/449/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/452,https://api.github.com/repos/apache/incubator-baremaps/issues/452,incubator-baremaps,1198617392,452,Drop support for Java 11,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-09T13:55:47Z,2022-10-16T09:29:12Z,"Geotoolkit does not support java 11 anymore. If we extensively rely on it to import data, we should rely on java 17 as well.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/452/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/453,https://api.github.com/repos/apache/incubator-baremaps/issues/453,incubator-baremaps,1199907182,453,Replace google java format by eclipse format,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-04-11T12:34:17Z,2022-10-16T09:28:56Z,"Google java format does not support java 17 very well. For instance, the new syntax for pattern matching with if is not supported. Furthermore, nested lambdas results in unreadable code. We should configure spotless to use an eclipse style.

```java
if (a instanceof B b) {  } 
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/453/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/458,https://api.github.com/repos/apache/incubator-baremaps/issues/458,incubator-baremaps,1204548881,458,Searching for alternate names in Geonames,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-14T13:43:56Z,2023-11-20T20:48:47Z,"### Discussed in https://github.com/baremaps/baremaps/discussions/457

<div type='discussions-op-text'>

<sup>Originally posted by **Drabble** April 14, 2022</sup>
When we retrieve elements from Geonames, the only searchable fields are name, country and country code. Maybe we should also be able to search for alternate names as well (with a lower weight), so that we get more matches.

An example is the Switzerland country entry doesn't match for helvetia, suisse, schweiz, confederatio helvetica... 

![Geonames switzerland entry](https://user-images.githubusercontent.com/3996615/163362171-c4cf238e-6fed-44b0-8404-34240a4f5ca7.png)

Some of these alternate names shouldn't be indexed because they are specific to a language. For example japanese, swedish, etc. But some of these alternate names are not specific to a language, as you can see in the code/lang columns.
</div>","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/458/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/459,https://api.github.com/repos/apache/incubator-baremaps/issues/459,incubator-baremaps,1208040195,459,Implement the CLI of the geocoder,Drabble,3996615,Antoine Drabble,,CLOSED,2022-04-19T09:14:17Z,2022-10-16T09:31:01Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/459/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/460,https://api.github.com/repos/apache/incubator-baremaps/issues/460,incubator-baremaps,1252846636,460,Use UUID as sql query for ID instead of of int,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2022-05-30T14:52:54Z,2022-05-31T06:35:42Z,"Hello
Is it possible to use uuid as a column type for the id.

The following statement in the tileset:
`SELECT id::uuid, hstore(ARRAY['text', text::text]) as tags, geom FROM schema.table`
will fail => 
`PSQLException: ERROR: mvt_agg_transfn: Could not find column 'id' of integer type`

Is there a config somewhere to use UUID or should we juste create an extra column to have an int Id

thanks 
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/460/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/460,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ECYC9,incubator-baremaps,1141473469,460,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-05-30T20:59:15Z,2022-05-30T20:59:15Z,"Unfortunately, according to the vector tile specification the feature id must be an unsigned 64-bit integer, which isn't sufficient to encode a 128-bit uuid. You can either create an extra column or hash the uuid (with uuid_hash in postgresql).

https://github.com/mapbox/vector-tile-spec/blob/5330dfc6ba2d5f8c8278c2c4f56fff2c7dee1dbd/2.1/vector_tile.proto#L32

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ECYC9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/460,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5EDJdK,incubator-baremaps,1141675850,460,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2022-05-31T05:16:11Z,2022-05-31T05:16:11Z,That's what i thought. Thanks,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5EDJdK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/463,https://api.github.com/repos/apache/incubator-baremaps/issues/463,incubator-baremaps,1301668818,463,the package not found and the host parameter is invalid,cddofficial,37577674,,,CLOSED,2022-07-12T07:40:38Z,2023-08-10T06:51:33Z,"Hi sir,

While I am using 'baremaps' ,i have got some problems. The details are as follow：

(By the way, the running environment is: jdk11, baremaps-0.6.5)

The first one is：the module ‘**baremaps-server-ogcapi**’ cannot found the package **‘com.baremaps.api**’ and ‘**com.baremaps.model**’ when i was compiling the source code of the baremaps-0.6.5.

The second one is: the parameter ‘host’ is invalid when i was running `baremaps edit --host 192.168.28.130 --database 'jdbc:postgresql://192.168.28.1:5432/baremaps?user=baremaps&amp;password=baremaps' --tileset 'tileset.json' --style 'style.json' `command, the host of this server is still **localhost**.

what should i do next?

Thanks","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/463/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/463,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5G8K5k,incubator-baremaps,1190178404,463,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-07-20T11:51:10Z,2022-07-20T11:51:10Z,Thanks for reporting this issue. What is your operating system? Are you using the zip distribution?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5G8K5k/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/463,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5G_qNG,incubator-baremaps,1191093062,463,NA,cddofficial,37577674,,,NA,2022-07-21T06:29:42Z,2022-07-21T06:29:42Z,"@bchapuis hello !  the first error is window，the second error is ubtuntu，yes, I use the zip package。    
There is most importmant thing is :  I want to export the result to pbf format what should i do next? 
thank!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5G_qNG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/463,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jsrVQ,incubator-baremaps,1672656208,463,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-10T06:51:33Z,2023-08-10T06:51:33Z,I'm not sure if this has been fixed. We can reopen this issue later if needed.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jsrVQ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/479,https://api.github.com/repos/apache/incubator-baremaps/issues/479,incubator-baremaps,1371031024,479,Add Option to hide SQL from response,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2022-09-13T08:03:57Z,2022-09-15T08:43:58Z,"As discussed, it would be great to be able to hide the SQL content situated in the tileset.json
```
""vector_layers"": [
    {
      ""id"": ""acces"",
      ""queries"": [
        {
          ""minzoom"": 0,
          ""maxzoom"": 20,
          ""sql"": ""SELECT  whatever FROM wherever""
        }
      ]
    },
``` 
Thanks ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/479/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/479,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KWBGr,incubator-baremaps,1247285675,479,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-09-14T20:47:25Z,2022-09-14T20:47:25Z,I think we can resonably say that these queries should never be displayed in production. I made a little change that hides all the queries when using the serve command. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KWBGr/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/482,https://api.github.com/repos/apache/incubator-baremaps/issues/482,incubator-baremaps,1374237185,482,Baremaps seems to require Java 17,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2022-09-15T09:41:02Z,2022-10-16T09:30:55Z,"After trying to mvn clean install, baremaps requires java 17
The documentations says > =11","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/482/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/482,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KY_6E,incubator-baremaps,1248067204,482,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-09-15T12:58:19Z,2022-09-15T12:58:19Z,"Yes, I made a lot of changes in main that have not yet been released, hence some inconsitencies in the documentation. I will close this issue once the documentation is up to date.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KY_6E/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/482,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KZA7I,incubator-baremaps,1248071368,482,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2022-09-15T13:01:56Z,2022-09-15T13:01:56Z,thanks :),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KZA7I/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/483,https://api.github.com/repos/apache/incubator-baremaps/issues/483,incubator-baremaps,1374507438,483,Relative path in tileset.json,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2022-09-15T13:10:08Z,2022-09-16T13:43:13Z,"Me again... (sorry)
In tileset.json
this relative path used to work
` ""tiles"": [""tiles/{z}/{x}/{y}.mvt""]`
But now I get a JS error =>  Uncaught TypeError: Failed to construct 'Request': Failed to parse URL from tiles/10/519/352.mvt
However 
` ""tiles"": [""http://localhost:9000/tiles/{z}/{x}/{y}.mvt""],` will work

=> is it still possible to use a relative path?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/483/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/483,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KcrK-,incubator-baremaps,1249030846,483,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2022-09-16T07:43:36Z,2022-09-16T07:43:36Z,"ok so maplibre issue, works with ol, nevermind","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KcrK-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/483,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KeBGJ,incubator-baremaps,1249382793,483,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-09-16T13:43:13Z,2022-09-16T13:43:13Z,"At some point we were overriding the host to make it match with the address of the server. However, we never covered all the corner cases. As the configuration files can now be written with javascript, the dynamic injection of variables in the style can be handled by the user. Let me know if you want to discuss these novelties.

https://github.com/baremaps/baremaps/blob/main/map/style.js","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5KeBGJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/489,https://api.github.com/repos/apache/incubator-baremaps/issues/489,incubator-baremaps,1410534621,489,Revise the content of the website,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2022-10-16T16:06:28Z,2025-02-01T10:55:35Z,"According to the [Podling Site](https://incubator.apache.org/guides/sites.html) page, we should revise the structure of the web site to include:

- [x] Project Home Page: the primary entry point to the site; contains project description, news, invitation to join the project.
- [x] License Page: link to the Apache License 2.0.
- [x] Downloads: many projects in incubation release code, and this page describes the releases and has links to the download pages that redirect to Apache Mirror sites.
- [ ] Documentation: this page presents the project documentation, including javadoc for Java projects, guides and tutorials, and links to external documentation.
- [x] #722
- [x] Mailing Lists: there are several mailing lists that the site visitors might be interested in, and this page contains mailto: links that allow easy subscription (and unsubscription) to any of them.
- [ ] FAQ: answers to frequently asked questions.
- [x] Source Code: links to the browsable source repository and git or svn commands to check out the source code.
- [x] #723
- [ ] Dependencies: other projects that this project depends on.
- [x] favicon: the project’s icon in a format suitable for a browser’s address bar. If the favicon is absent, an Apache Feather displays.
- [x] Fix broken links to the examples that have moved to the website repository.

The current web site is generated from the `docs` directory with jekyll and published on github pages. I suggest we start by revising these markdown web pages.


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/489/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/490,https://api.github.com/repos/apache/incubator-baremaps/issues/490,incubator-baremaps,1410537982,490,Decide which static site generator to use and configure it,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-16T16:17:36Z,2022-11-16T22:51:35Z,"Jekyll is currently used by baremaps and is one of the recommended static stie generator in the [Podling Websites](https://incubator.apache.org/guides/sites.html) page. 

Do we keep jekyll or do we switch to another tool, such as a combination of [next.js](https://nextjs.org/) and [markdoc](https://markdoc.dev/)? Having a stack based on react may allow us to create a more interactive documentation with maps and demonstrations.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/490/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/490,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MTA2z,incubator-baremaps,1280052659,490,NA,julianhyde,1130553,Julian Hyde,jhyde@apache.org,NA,2022-10-16T20:38:15Z,2022-10-16T20:38:15Z,"FWIW, [Calcite's site](https://calcite.apache.org) is based on Jekyll and we're happy with it. We've rigged up some nice scripts so that it publishes automatically. But we're database people, not Web or JavaScript people, so a static generated site is about all we can get our heads around. With Docker the messy Ruby stuff doesn't get out of hand.

Jeykll's support for news works well with Twitter.

If I were you, I'd move over the current site, get the Apache branding sorted (downloads page, required links, incubation notice, community), create a logo, and only then shift to another generation platform.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MTA2z/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/490,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MeO1C,incubator-baremaps,1282993474,490,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-18T20:55:22Z,2022-10-18T20:55:22Z,"Yes, I also think the priority is to migrate the existing Jekyll web site and to adapt the content according to the guidelines.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MeO1C/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/491,https://api.github.com/repos/apache/incubator-baremaps/issues/491,incubator-baremaps,1410545321,491,Create a website repository and publish it ,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-16T16:42:52Z,2022-11-15T11:53:26Z,We should get familiar with the apache infrastructure for [websites](https://infra.apache.org/project-site.html) and better understand the build process.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/491/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/492,incubator-baremaps,1410568857,492,Make the release process compatible with the Apache guidelines,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-16T18:03:14Z,2024-11-09T13:08:27Z,"We should use the apache infrastructure to publish a first incubating release.

The releases are currently being published automatically on maven central (jar files), docker hub (image generated with jib) and github (zip distribution) and we should adapt the workflow. The issues #219 and #184 may also be relevant here. [JReleaser](https://jreleaser.org/) looks really nice and may help at simplifying the release work.

The following checklists aims at listing the changes that must be performed in the workflow:

## Maven

- [x] publish artifacts to the maven central repository
- [x] artifacts should be under the groupId of org.apache.baremaps
- [x] The POM file should set the ALv2 license as its license, Apache Baremaps as its developer name, and proper source control information.
- [x] the project description should include the incubator disclaimer
- [x] Release candidates, nightlys or snapshots need to be clearly marked by adding suffix in its version, like org.apache.baremaps.<component>:0.1-SNAPSHOT
- [x] #719
- [x] #844 

## Github
- [x] publish binary release github (baremaps/baremaps)
- [x] publish binary release github (apache/incubator-baremaps)
- [x] any releases need to include the text of the incubation disclaimer.
- [x] the release page must not contain release candidates, nightly or snapshots releases that have not been tagged as prereleases (Ignoring that GitHub also displays tags on the release page)
- [x] Any releases that exist before coming into incubation need to be clearly described on the release page and tagged as such on [https://github.com/apache/incubator-baremaps/tags](https://github.com/apache/incubator-baremaps/tags)
- [x] release candidates, nightlys or snapshots releases can be tagged and appear on [https://github.com/apache/incubator-baremaps/tags](https://github.com/apache/incubator-baremaps/tags).

## Legal

- [x] Verify the copyright and attribution of external code included in the project
- [x] Verify the licenses of the dependencies
- [x] #720
- [x] #731

## Misc

- [x] include the word incubating in the release file name
- [x] automate the creation of a changelog file
- [x] ensure that the copyrights is present in the binary distribution
- [x] include a NOTICE file in the binary distribution
- [x] include a LICENSE file in the binary distribution
- [x] have valid checksums
- [x] have valid signatures
- [x] the official release artifacts should not contain unapproved code
- [x] have a KEYS file to validate the release
- [x] #721
- [x] Check any generated files in the source code? maplibre-gl-inspect.js and schema.db
- [x] Add headers to every text file that supports it, e.g. pom.xml, README.md, baremaps.bat (#598)
- [x] #603
- [x] #603
- [x] #604
- [x] #605
- [x] #606
- [x] #607
- [x] #608

## Sources

- https://incubator.apache.org/guides/releasemanagement.html
- https://incubator.apache.org/guides/distribution.html
- https://apache.org/legal/resolved.html
- https://infra.apache.org/licensing-howto.html#bundle-asf-product
- https://infra.apache.org/publishing-maven-artifacts.html
- https://infra.apache.org/licensing-howto.html#binary
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/492/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NwRMC,incubator-baremaps,1304498946,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-05T11:06:14Z,2022-11-05T11:06:14Z,"**After playing with jreleaser, I think we should keep the maven release plugin for now. It looks like the plugin is not able to release sources.**

#531 configures JReleaser. The `release.sh` script give an overview of the process. An [early-access](https://github.com/baremaps/baremaps/releases/tag/early-access) tag is automatically created and allows to preview the release.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NwRMC/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OQF7O,incubator-baremaps,1312841422,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-13T22:43:07Z,2022-11-13T22:43:07Z,"@CalvinKirs @julianhyde @LeonardBesseau I'm progressing on the various tasks associated with the first release, and would like to have your opinion on PGP signatures. 

Right now, we do have an action that signs the jar files published on maven central. A PGP key dedicated to the project is stored as a secret on github. Do you think it fine to use a similar approach to sign the source and binary distributions published on github? We may ask the committers to sign the project's key, but I'm not totally sure about the implications of this. 

This approach would make the release process very simple. In order to release, one of the committer would have to execute the following:

```
mvn release:prepare -DautoVersionSubmodules=true -DgenerateBackupPoms=false
```

As the release plugin creates a tag for the release (vX.Y.Z), the creation of the assets can be automated with an action. Furthermore, the release can remain a [draft](https://github.com/apache/incubator-baremaps/blob/9c746129246f9e38cc6a6b2367ae5e53783aac88/.github/workflows/release.yml#L31) until the vote passes on the mailing list.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OQF7O/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OSv8m,incubator-baremaps,1313537830,492,NA,CalvinKirs,16631152,Calvin Kirs,kirs@apache.org,NA,2022-11-14T11:30:24Z,2022-11-14T11:30:24Z,"> @CalvinKirs @julianhyde @LeonardBesseau I'm progressing on the various tasks associated with the first release, and would like to have your opinion on PGP signatures.
> 
> Right now, we do have an action that signs the jar files published on maven central. A PGP key dedicated to the project is stored as a secret on github. Do you think it fine to use a similar approach to sign the source and binary distributions published on github? We may ask the committers to sign the project's key, but I'm not totally sure about the implications of this.
> 
> This approach would make the release process very simple. In order to release, one of the committer would have to execute the following:
> 
> ```
> mvn release:prepare -DautoVersionSubmodules=true -DgenerateBackupPoms=false
> ```
> 
> As the release plugin creates a tag for the release (vX.Y.Z), the creation of the assets can be automated with an action. Furthermore, the release can remain a [draft](https://github.com/apache/incubator-baremaps/blob/9c746129246f9e38cc6a6b2367ae5e53783aac88/.github/workflows/release.yml#L31) until the vote passes on the mailing list.


TBH, I haven't done that.

We usually do this when we package the source code for a release, because the source code package also needs to sign.

At the same time, the release is more done on the computer of the Release Manager, because there is some information such as security key.  we can't all share a key.

Usually most projects will have corresponding release scripts, which can help release versions quickly,
https://github.com/apache/skywalking/blob/master/tools/releasing/create_source_release.sh

I'm guessing you missed this documentation
https://infra.apache.org/publishing-maven-artifacts.html","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OSv8m/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OSxcK,incubator-baremaps,1313543946,492,NA,CalvinKirs,16631152,Calvin Kirs,kirs@apache.org,NA,2022-11-14T11:36:11Z,2022-11-14T11:36:11Z,"This is all the process of general release:
https://skywalking.apache.org/docs/main/v9.2.0/en/guides/how-to-release/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OSxcK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OS0OY,incubator-baremaps,1313555352,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-14T11:46:17Z,2022-11-14T11:46:17Z,"Thank you for the pointers.

I'd love the source and binary releases to be generated by the CI to prevent issues such as differences in newline encoding. A possibility may be to have an addhoc script to sign the releases produced by the CI on the computer of the release manager. I will look at your links and try to figure this out.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OS0OY/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5UKMYl,incubator-baremaps,1411958309,492,NA,aalmiray,13969,Andres Almiray,aalmiray@gmail.com,NA,2023-02-01T12:11:18Z,2023-02-01T12:11:18Z,"> **After playing with jreleaser, I think we should keep the maven release plugin for now. It looks like the plugin is not able to release sources.**

Hello there! I'm the JReleaser author. The tool can post any files as release assets, not just binaries. If your goal is to post source archives then they may be added as artifacts under the `<files>` (https://jreleaser.org/guide/latest/reference/files.html) section, not `<distributions>`.

FWIW the [mvnd](https://github.com/apache/maven-mvnd) project accepted a [PR](https://github.com/apache/maven-mvnd/pull/574) to use JReleaser in such a way that it would be compatible with the ASF's rules. However, it was deactivated after merging because the project requires explicit permission to use an external GH action -> https://issues.apache.org/jira/browse/INFRA-23128 Your case may be different if you only use the `jreleaser-maven-plugin`.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5UKMYl/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Vq9-9,incubator-baremaps,1437327293,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-20T17:07:33Z,2023-02-20T17:07:33Z,"@aalmiray Thanks a lot for reaching out and for your work on jreleaser. I'm getting familiar with the Apache guidelines and from what I understand the most important part of a release is the source code. The binaries, artifacts, etc. are provided as a convenient way to install the project, but they are not really considered as being part of the release. 

Regarding your comment, from what I understand, I should use the maven assembly plugin to generate an archive containing the source code, and then use JReleaser and the `<files>` section to upload this artifact. Is that correct? What I was originally looking for was a way to do this with JReleaser.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Vq9-9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VrFoI,incubator-baremaps,1437358600,492,NA,aalmiray,13969,Andres Almiray,aalmiray@gmail.com,NA,2023-02-20T17:37:09Z,2023-02-20T17:37:09Z,"> Regarding your comment, from what I understand, I should use the maven assembly plugin to generate an archive containing the source code, and then use JReleaser and the `<files>` section to upload this artifact. Is that correct? What I was originally looking for was a way to do this with JReleaser.

That is correct. The maven assembly plugin would be my first recommendation if you're familiar with it. JReleaser can also create archives via its [archive](https://jreleaser.org/guide/latest/reference/assemble/archive.html) assembler. `v1.5.0` which comes out at the end of February 2023 (in just a few days) adds [finer control](https://jreleaser.org/guide/early-access/reference/assemble/archive.html#_additional_files) to define which files get added to an archive.

If this assembler is used I'd recommend setting its `exported` property to `false` otherwise you'll get a matching distribution of type `BINARY` which could inadvertently be used in combination with package managers. If you do not configure any package managers (brew, docker, etc) then this shouldn't be a problem. Setting `exported` to `false` and using the `files` section would be the way to go for the time being until JReleaser adds proper support for distributions of type `SOURCE` (see related [discussion](https://github.com/jreleaser/jreleaser/discussions/1154) topic).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VrFoI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VrQ5C,incubator-baremaps,1437404738,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-20T18:21:58Z,2023-02-20T18:21:58Z,"This clarifies things a lot. In the context of baremaps, we really need to provide a binary distribution and a docker image in addition to maven artifacts. This issue is regularly reported by users who don't want to build from sources. I will have take some time to investigate the use of JReleaser again.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VrQ5C/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VrRTK,incubator-baremaps,1437406410,492,NA,aalmiray,13969,Andres Almiray,aalmiray@gmail.com,NA,2023-02-20T18:23:57Z,2023-02-20T18:23:57Z,Great! Let me know if you have any questions 😄 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VrRTK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V3-1s,incubator-baremaps,1440738668,492,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-02-22T20:13:26Z,2023-02-22T20:13:26Z,"Hi,

Do we have any of the work accounted for in terms of listing out Baremaps' dependency licenses?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V3-1s/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4S2-,incubator-baremaps,1440820670,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-22T21:26:28Z,2023-02-22T21:26:28Z,"Hi @joshfischer1108, the java dependencies have been carefully reviewed. The remaining issues are related to: a dataset located in proj4j-epsg (an upstream contribution is possible and needed); some datasets used in the tests; minified javascript libraries and fonts included in the resources directory (not sure if including these resources from a CDN would be sufficient). Regarding the listing are we supposed to include something in the release? 

Here is the list of third-party licenses (`mvn license:add-third-party`). Notice that JSQLParser uses a [dual licence](https://github.com/JSQLParser/JSqlParser) (APACHEV2 and LGPLV21).

```
Lists of 81 third-party dependencies.
     (The Apache Software License, Version 2.0) Jackson-annotations (com.fasterxml.jackson.core:jackson-annotations:2.13.0 - http://github.com/FasterXML/jackson)
     (The Apache Software License, Version 2.0) Jackson-core (com.fasterxml.jackson.core:jackson-core:2.13.0 - https://github.com/FasterXML/jackson-core)
     (The Apache Software License, Version 2.0) jackson-databind (com.fasterxml.jackson.core:jackson-databind:2.13.0 - http://github.com/FasterXML/jackson)
     (The Apache Software License, Version 2.0) Jackson-dataformat-CSV (com.fasterxml.jackson.dataformat:jackson-dataformat-csv:2.13.0 - https://github.com/FasterXML/jackson-dataformats-text)
     (The Apache Software License, Version 2.0) Jackson-dataformat-YAML (com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.13.0 - https://github.com/FasterXML/jackson-dataformats-text)
     (The Apache Software License, Version 2.0) Jackson datatype: jdk8 (com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.13.0 - https://github.com/FasterXML/jackson-modules-java8/jackson-datatype-jdk8)
     (Apache License, Version 2.0) Caffeine cache (com.github.ben-manes.caffeine:caffeine:3.1.1 - https://github.com/ben-manes/caffeine)
     (The Apache Software License, Version 2.0) docker-java-api (com.github.docker-java:docker-java-api:3.2.13 - https://github.com/docker-java/docker-java)
     (The Apache Software License, Version 2.0) docker-java-transport (com.github.docker-java:docker-java-transport:3.2.13 - https://github.com/docker-java/docker-java)
     (The Apache Software License, Version 2.0) docker-java-transport-zerodep (com.github.docker-java:docker-java-transport-zerodep:3.2.13 - https://github.com/docker-java/docker-java)
     (GNU Library or Lesser General Public License (LGPL) V2.1) (The Apache Software License, Version 2.0) JSQLParser library (com.github.jsqlparser:jsqlparser:4.2 - https://github.com/JSQLParser/JSqlParser)
     (The Apache Software License, Version 2.0) FindBugs-jsr305 (com.google.code.findbugs:jsr305:3.0.2 - http://findbugs.sourceforge.net/)
     (Apache 2.0) error-prone annotations (com.google.errorprone:error_prone_annotations:2.14.0 - https://errorprone.info/error_prone_annotations)
     (Apache License V2.0) FlatBuffers Java API (com.google.flatbuffers:flatbuffers-java:22.10.26 - https://github.com/google/flatbuffers)
     (The Apache Software License, Version 2.0) Guava InternalFutureFailureAccess and InternalFutures (com.google.guava:failureaccess:1.0.1 - https://github.com/google/guava/failureaccess)
     (Apache License, Version 2.0) Guava: Google Core Libraries for Java (com.google.guava:guava:31.1-jre - https://github.com/google/guava)
     (The Apache Software License, Version 2.0) Guava ListenableFuture only (com.google.guava:listenablefuture:9999.0-empty-to-avoid-conflict-with-guava - https://github.com/google/guava/listenablefuture)
     (The Apache Software License, Version 2.0) J2ObjC Annotations (com.google.j2objc:j2objc-annotations:1.3 - https://github.com/google/j2objc/)
     (BSD-3-Clause) Protocol Buffers [Core] (com.google.protobuf:protobuf-java:3.21.6 - https://developers.google.com/protocol-buffers/protobuf-java/)
     (ISC License) ORMLite JDBC (com.j256.ormlite:ormlite-jdbc:6.1 - https://ormlite.com/)
     (The Apache Software License, Version 2.0) HikariCP (com.zaxxer:HikariCP:5.0.1 - https://github.com/brettwooldridge/HikariCP)
     (MIT License) pgbulkinsert (de.bytefish:pgbulkinsert:8.1.0 - http://www.github.com/bytefish/PgBulkInsert)
     (The Apache Software License, Version 2.0) Google S2 geometry library (io.sgr:s2-geometry-library-java:1.0.0 - https://github.com/sgr-io/s2-geometry-library-java)
     (Apache License, Version 2.0) fastutil (it.unimi.dsi:fastutil:8.5.9 - http://fastutil.di.unimi.it/)
     (Eclipse Public License 1.0) JUnit (junit:junit:4.13.2 - http://junit.org)
     (The MIT License (MIT)) Color (mil.nga:color:1.0.0 - https://github.com/ngageoint/color-java)
     (The MIT License (MIT)) Coordinate Reference Systems (mil.nga:crs:1.1.4 - https://github.com/ngageoint/coordinate-reference-systems-java)
     (The MIT License (MIT)) Projections (mil.nga:proj:1.1.2 - https://github.com/ngageoint/projections-java)
     (The MIT License (MIT)) Simple Features (mil.nga:sf:2.2.0 - https://github.com/ngageoint/simple-features-java)
     (The MIT License (MIT)) Tagged Image File Format (mil.nga:tiff:3.0.0 - https://github.com/ngageoint/tiff-java)
     (The MIT License (MIT)) GeoPackage (mil.nga.geopackage:geopackage:6.5.0 - https://github.com/ngageoint/geopackage-java)
     (The MIT License (MIT)) GeoPackage Core (mil.nga.geopackage:geopackage-core:6.5.0 - https://github.com/ngageoint/geopackage-core-java)
     (The MIT License (MIT)) OGC API Features JSON (mil.nga.oapi.features:oapi-features-json:2.2.0 - https://github.com/ngageoint/ogc-api-features-json-java)
     (The MIT License (MIT)) Simple Features GeoJSON (mil.nga.sf:sf-geojson:3.2.0 - https://github.com/ngageoint/simple-features-geojson-java)
     (The MIT License (MIT)) Simple Features Projection (mil.nga.sf:sf-proj:4.3.0 - https://github.com/ngageoint/simple-features-proj-java)
     (The MIT License (MIT)) Simple Features Well-Known Binary (mil.nga.sf:sf-wkb:2.2.0 - https://github.com/ngageoint/simple-features-wkb-java)
     (The MIT License (MIT)) Simple Features Well-Known Text (mil.nga.sf:sf-wkt:1.2.0 - https://github.com/ngageoint/simple-features-wkt-java)
     (Apache License v2.0) (LGPL, version 2.1) Java Native Access (net.java.dev.jna:jna:5.8.0 - https://github.com/java-native-access/jna)
     (The BSD License) RIPE NCC - IP Resource (net.ripe.ipresource:ipresource:1.49 - https://github.com/RIPE-NCC/ipresource)
     (Apache License, Version 2.0) Apache Commons Compress (org.apache.commons:commons-compress:1.21 - https://commons.apache.org/proper/commons-compress/)
     (The Apache Software License, Version 2.0) Commons Lang (org.apache.commons:commons-lang3:3.1 - http://commons.apache.org/lang/)
     (Apache License, Version 2.0) Apache Log4j API (org.apache.logging.log4j:log4j-api:2.19.0 - https://logging.apache.org/log4j/2.x/log4j-api/)
     (Apache License, Version 2.0) Apache Log4j Core (org.apache.logging.log4j:log4j-core:2.19.0 - https://logging.apache.org/log4j/2.x/log4j-core/)
     (Apache License, Version 2.0) Apache Log4j SLF4J 2.0 Binding (org.apache.logging.log4j:log4j-slf4j2-impl:2.19.0 - https://logging.apache.org/log4j/2.x/log4j-slf4j2-impl/)
     (Apache 2) Apache Lucene (module: core) (org.apache.lucene:lucene-core:9.4.2 - https://lucene.apache.org/)
     (Apache 2) Apache Lucene (module: queries) (org.apache.lucene:lucene-queries:9.4.2 - https://lucene.apache.org/)
     (Apache 2) Apache Lucene (module: queryparser) (org.apache.lucene:lucene-queryparser:9.4.2 - https://lucene.apache.org/)
     (Apache 2) Apache Lucene (module: sandbox) (org.apache.lucene:lucene-sandbox:9.4.2 - https://lucene.apache.org/)
     (Apache 2) Apache Lucene (module: spatial-extras) (org.apache.lucene:lucene-spatial-extras:9.4.2 - https://lucene.apache.org/)
     (Apache 2) Apache Lucene (module: spatial3d) (org.apache.lucene:lucene-spatial3d:9.4.2 - https://lucene.apache.org/)
     (The Apache License, Version 2.0) org.apiguardian:apiguardian-api (org.apiguardian:apiguardian-api:1.1.0 - https://github.com/apiguardian-team/apiguardian)
     (Apache 2.0) Awaitility (org.awaitility:awaitility:3.0.0 - http://awaitility.org)
     (The MIT License) Checker Qual (org.checkerframework:checker-qual:3.22.0 - https://checkerframework.org)
     (New BSD License) Hamcrest Core (org.hamcrest:hamcrest-core:1.3 - https://github.com/hamcrest/JavaHamcrest/hamcrest-core)
     (New BSD License) Hamcrest library (org.hamcrest:hamcrest-library:1.3 - https://github.com/hamcrest/JavaHamcrest/hamcrest-library)
     (The Apache Software License, Version 2.0) JetBrains Java Annotations (org.jetbrains:annotations:17.0.0 - https://github.com/JetBrains/java-annotations)
     (Eclipse Public License v2.0) JUnit Jupiter API (org.junit.jupiter:junit-jupiter-api:5.7.1 - https://junit.org/junit5/)
     (Eclipse Public License v2.0) JUnit Jupiter Engine (org.junit.jupiter:junit-jupiter-engine:5.7.1 - https://junit.org/junit5/)
     (Eclipse Public License v2.0) JUnit Jupiter Params (org.junit.jupiter:junit-jupiter-params:5.7.1 - https://junit.org/junit5/)
     (Eclipse Public License v2.0) JUnit Platform Commons (org.junit.platform:junit-platform-commons:1.7.1 - https://junit.org/junit5/)
     (Eclipse Public License v2.0) JUnit Platform Engine API (org.junit.platform:junit-platform-engine:1.7.1 - https://junit.org/junit5/)
     (Eclipse Distribution License - v 1.0) (Eclipse Public License, Version 2.0) org.locationtech.jts:jts-core (org.locationtech.jts:jts-core:1.19.0 - https://www.locationtech.org/projects/technology.jts/jts-modules/jts-core)
     (Apache License, Version 2.0) Proj4J (org.locationtech.proj4j:proj4j:1.1.5 - https://github.com/locationtech/proj4j)
     (The Apache Software License, Version 2.0) Spatial4J (org.locationtech.spatial4j:spatial4j:0.8 - https://projects.eclipse.org/projects/locationtech.spatial4j)
     (Apache 2) Objenesis (org.objenesis:objenesis:2.5.1 - http://objenesis.org)
     (The Apache License, Version 2.0) org.opentest4j:opentest4j (org.opentest4j:opentest4j:1.2.0 - https://github.com/ota4j-team/opentest4j)
     (BSD-2-Clause) PostgreSQL JDBC Driver (org.postgresql:postgresql:42.5.0 - https://jdbc.postgresql.org)
     (MIT) Duct Tape (org.rnorth.duct-tape:duct-tape:1.0.8 - https://github.com/rnorth/duct-tape)
     (Apache 2) org.roaringbitmap:RoaringBitmap (org.roaringbitmap:RoaringBitmap:0.9.38 - https://github.com/RoaringBitmap/RoaringBitmap)
     (Apache 2) org.roaringbitmap:shims (org.roaringbitmap:shims:0.9.38 - https://github.com/RoaringBitmap/RoaringBitmap)
     (MIT License) JUL to SLF4J bridge (org.slf4j:jul-to-slf4j:2.0.3 - http://www.slf4j.org)
     (MIT License) SLF4J API Module (org.slf4j:slf4j-api:2.0.3 - http://www.slf4j.org)
     (MIT) Testcontainers :: Database-Commons (org.testcontainers:database-commons:1.17.3 - https://testcontainers.org)
     (MIT) Testcontainers :: JDBC (org.testcontainers:jdbc:1.17.3 - https://testcontainers.org)
     (MIT) Testcontainers :: JUnit Jupiter Extension (org.testcontainers:junit-jupiter:1.17.3 - https://testcontainers.org)
     (MIT) Testcontainers :: JDBC :: PostgreSQL (org.testcontainers:postgresql:1.17.3 - https://testcontainers.org)
     (MIT) Testcontainers Core (org.testcontainers:testcontainers:1.17.3 - https://testcontainers.org)
     (ISC License) flatgeobuf (org.wololo:flatgeobuf:3.24.0 - https://github.com/flatgeobuf/flatgeobuf)
     (The Apache Software License, Version 2.0) SQLite JDBC (org.xerial:sqlite-jdbc:3.39.3.0 - https://github.com/xerial/sqlite-jdbc)
     (The Apache Software License, Version 2.0) nestedvm (org.xerial.thirdparty:nestedvm:1.0 - http://www.xerial.org/maven/repository/site/xerial/nestedvm)
     (Apache License, Version 2.0) SnakeYAML (org.yaml:snakeyaml:1.28 - http://www.snakeyaml.org)
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4S2-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4Whw,incubator-baremaps,1440835696,492,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-02-22T21:37:59Z,2023-02-22T21:37:59Z,"Sorry, I've been out of the loop for awhile.   I'm trying to catch up, I""ll probably ask a few not so smart questions along the way.  😄 .  

I'll have to check my notes (if I can still find them) on why we did this with Heron.  But we had a list of all licenses for dependencies that were not ALV2.   

Some examples are: 
* https://github.com/apache/airflow/tree/main/licenses
* https://github.com/apache/kafka/tree/trunk/licenses","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4Whw/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4Y-q,incubator-baremaps,1440845738,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-22T21:45:43Z,2023-02-22T21:45:43Z,"As a total newbie to licencing myself, your questions really help me make sanity checks 😂 

In my current understanding of the process, we must list the licenses of third-parties that have been integrated in the source code (this has been done in the LICENSE and DISCLAIMER files). I'm not sure if the Licenses of the dependencies must be listed.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4Y-q/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4a47,incubator-baremaps,1440853563,492,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-02-22T21:53:17Z,2023-02-22T21:53:17Z,"Ahh.  I see now.  I was looking at the `main` branch of the repo and not the `492-release` branch.  Total. Facepalm. Moment. I guess we can say this falls in the category of ""not so smart questions"" 😂 ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4a47/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4fWS,incubator-baremaps,1440871826,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-22T22:06:43Z,2023-02-22T22:06:43Z,"This is also the reason why I'd like to merge this branch. In terms of collaboration and work distribution, it is probably preferable if the remaining issues are addressed separately in small pull requests.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4fWS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4gWz,incubator-baremaps,1440875955,492,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-02-22T22:10:08Z,2023-02-22T22:10:08Z,"I like small commits, but I'll leave that up to you and the others to decide..   I have a lot of catching up to do.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4gWz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4i1k,incubator-baremaps,1440886116,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-22T22:17:55Z,2023-02-22T22:17:55Z,"I also think small commits are the right approach. Do not hesitate to share your thoughts on how we could improve our organisation as an open source project. Few of us have experience in this area and it is critical for us to improve if we want to attract more contributors.

I will merge `492-release`. I guess we should keep this issue open to track the overall advancement and convert the bullet points into separate issues labelled with ""help needed"" and ""good first issue"" when appropriate.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5V4i1k/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1GqI,incubator-baremaps,1473538696,492,NA,swerky,10920115,James Smith,,NA,2023-03-17T09:42:42Z,2023-03-17T09:42:42Z,"Hi,
I created a few issues from the discussion on the mailing list and the remarks from @julianhyde.
I'm not allowed to edit this issue to add them in the `Misc` category.

Here are the list of the issues:
- #603
- #604
- #605
- #606
- #607
- #608

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1GqI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/492,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1QPt,incubator-baremaps,1473577965,492,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-03-17T10:01:57Z,2023-03-17T10:01:57Z,"Thanks, I added them to the list.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1QPt/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/493,https://api.github.com/repos/apache/incubator-baremaps/issues/493,incubator-baremaps,1413510812,493,Change the codestyle and the package names,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-18T16:24:37Z,2022-10-19T17:14:14Z,"The current codestyle has a few customizations that prevent it from being imported and used in IntelliJ. I suggest we switch to the google style but this time with the eclipse format which works with java 17 (the google formatter has some issues).

As we will have to change rename the packages, it is a good time to apply this kind of changes.

https://github.com/google/styleguide/blob/gh-pages/eclipse-java-google-style.xml","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/493/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/494,https://api.github.com/repos/apache/incubator-baremaps/issues/494,incubator-baremaps,1413513131,494,Remove the todo list in the iploc module and create the corresponding issues,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-18T16:26:32Z,2022-12-19T10:07:46Z,@Drabble I guess that some of the todos have a low priority and some other a required to demonstrate the usage of the ip to location data we generate. Can you log them all in the issue tracker?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/494/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/495,https://api.github.com/repos/apache/incubator-baremaps/issues/495,incubator-baremaps,1413519296,495,Rename the root package,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-18T16:31:03Z,2022-10-19T17:14:14Z,We should move from com.baremaps to org.apache.baremaps.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/495/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/498,incubator-baremaps,1414889161,498,Reduce the size of vector tiles at low zoom levels,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-19T12:31:03Z,2022-12-06T23:54:08Z,"From zoom level 5 to zoom level 10 the vector tiles are too heavy (i.e. > 1-3MB). Apparently, this comes from the natural[1] and landuse[2] layers. We should find a way to simplify these geometries at these levels in a way that preserves the visual quality of the map, but reduces the size of the tiles (i.e. < 250KB).

I recently found the following reference[3] that describes many of the optimizations that can be made in a base map. We already use ST_SimplifyPreserveTopology to *simplify* the geometries, however, we don't use ST_Union to **merge** the geometries. It may be interesting to make some experiments with this technique at the level of a small geofabrik dataset (e.g. Liechtenstein, Monaco, Switzerland) in order  to improve the materialized views [2,3]. The *subdivide* technique will probably have less impact.

![Screenshot 2022-10-19 at 14 30 07](https://user-images.githubusercontent.com/238747/196691165-a4d05497-cde5-4195-9c70-42a6ce2c1dad.png)

[1] https://github.com/baremaps/baremaps/blob/main/map/queries/osm_landuse.sql
[2] https://github.com/baremaps/baremaps/blob/main/map/queries/osm_natural.sql
[3] https://observablehq.com/@geodan/how-to-make-a-vectortile-basemap","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/498/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mh9mT,incubator-baremaps,1283971475,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-19T12:55:25Z,2022-10-19T12:55:25Z,"By the way, I think is one of the last steps remaining to address #249 and release a first version of our world map.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mh9mT/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mww-B,incubator-baremaps,1287851905,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-22T16:44:22Z,2022-10-22T16:44:22Z,"I did a test with the Switzerland and Liechtenstein datasets from the openstreetmap workflow and the Union technique seems promising.

The numbers here are for the landuse layer only at 46.8349/8.9256 wih a zoom level of 9.

Tile size for union method :
179.mvt =  786 + 535 + 385 = 1706 kB
180.mvt =  326 + 486 + 306 = 1118 kB
181.mvt =  209 +  91 + 128 = 428  kB

Tile size for current method :
179.mvt =  1400 + 508 + 1200 = 3108 kB  + 1402 kB
180.mvt =   400 + 390 +  688 = 1478 kB  + 360  kB
181.mvt =   280 + 106 +  162 = 548 kB   + 120  kB

The visual fidelity of the map is also preserved (there is a few artifacts but minimal):
Current Method
![Current Method](https://user-images.githubusercontent.com/52856615/197350840-dcf27631-6c45-4130-8c3e-a0d09c028210.png)
Union Method
![union Method](https://user-images.githubusercontent.com/52856615/197350831-f96a8d16-dd9f-4108-bc02-2ce448293d61.png)

A few caveats to be noted:
For now, I'm merging all geometry together ignoring their tags, so geometry tagged 'industrial' is merged with geometry tagged 'forest'. I'll look into merging geometry with the same tags but we should expect in an increase in size for this.

Another consequence of the merging is that we are losing the reference to the individual ids of the different geometries merged. This is to be expected but do we want to find a way to recover this information  ?

The geometry to be merged have to be valid geometry (No self intersection, ect). Fortunately we can use ST_MakeValid to correct invalid geometry




","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mww-B/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxFJc,incubator-baremaps,1287934556,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-22T22:27:35Z,2022-10-22T22:27:35Z,"This looks great (to me the screenshots look the same)! I don't think we need a lot of information at low zoom level and a row number is probably sufficient to act as an identifier. 

I guess that if we combine ST_UNION, a more aggressive tolerance (ST_SimplifyPreserveTopology), and filter out small features, we can reduce the size of the tiles by a lot. An additional possibility to further shave them may be to merge the green areas of the natural and landuse layers.

Do not hesitate to commit your experiments in a branch, so we can evaluate several alternatives. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxFJc/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxFu0,incubator-baremaps,1287936948,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-22T22:33:07Z,2022-10-22T22:33:07Z,"Just in case, it is possible to display the size of the tiles directly on the map as shown in b05499cb and illustrated below.

![Screenshot 2022-10-23 at 00 22 11](https://user-images.githubusercontent.com/238747/197364615-a17e9a60-bc78-41ed-b3dd-50d4e03e2432.png)


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxFu0/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxGgi,incubator-baremaps,1287940130,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-22T22:57:59Z,2022-10-22T22:57:59Z,"> Do not hesitate to commit your experiments in a branch, so we can evaluate several alternatives.

Good point, I forgot to push it. Corrected now #505 

 > Just in case, it is possible to display the size of the tiles directly on the map as shown in https://github.com/baremaps/baremaps/commit/b05499cb173047608feba2f6dc6578fb469bde52 and illustrated below.

Oh, this will simply the testing a lot. thanks
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxGgi/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxIzR,incubator-baremaps,1287949521,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-22T23:41:40Z,2022-10-22T23:41:40Z," > I guess that if we combine ST_UNION, a more aggressive tolerance (ST_SimplifyPreserveTopology), and filter out small features, we can reduce the size of the tiles by a lot. 

Applying the ST simplfy does help a lot with the size:

Simplified
![simplified](https://user-images.githubusercontent.com/52856615/197366296-ee7c61cb-7a34-4ec4-97f5-1b2f02a9e0b7.png)
Union
![Union](https://user-images.githubusercontent.com/52856615/197366297-2b0de338-72a1-4884-88ad-11b7a6f086ae.png)

I think my simplification might be a bit too aggressive but this is encouraging

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MxIzR/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx1DQ,incubator-baremaps,1288130768,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T14:52:57Z,2022-10-23T14:52:57Z,"I've added the separation by landusage for the landuse layer. The size reduction is still pretty good (50% to 75%) and the visual quality is globally preserved.
I've added a tileset with some of category with the most element to test and here are the results:
Tested at 46.4513/7.6332 with zoom level 9. Layers: forest, meadow, farmland, residential, railway, industrial, vineyard, commercial
Current version
![Layers_all_old](https://user-images.githubusercontent.com/52856615/197398773-2c74a9ce-6e0d-4324-bfb2-af91c3540506.png)
Union + simplification
![Layers_all_new](https://user-images.githubusercontent.com/52856615/197398967-0aa6fb7b-2cad-47f4-9618-b9f41eba55b3.png)

The method still works at a larger scale
Current
![Swiss_old](https://user-images.githubusercontent.com/52856615/197399020-6f78a831-0aed-4985-9c84-9964aad21bb0.png)
Union + simplification
![Swiss_new](https://user-images.githubusercontent.com/52856615/197399038-8efff52c-ef9b-4c6b-87d7-80188a2b6ec8.png)


If you want to verify the available tags associated:
```sql
Select keys, count(keys)  FROM (SELECT jsonb_object_keys(tags) as keys FROM osm_ways WHERE tags ? 'landuse') as data GROUP by keys;

Select keys, count(keys)  FROM (SELECT jsonb_object_keys(tags) as keys FROM osm_relations WHERE tags ? 'landuse') as data GROUP by keys;
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx1DQ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx1ON,incubator-baremaps,1288131469,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T14:56:18Z,2022-10-23T14:56:18Z,"As we are still far from our objective of 250 kB, we can still play more with the simplification as there is a lot of details that are not needed at low zoom level.

TODO
- [ ] Give correct name to views
- [ ] Improve view generation + generates index for views
- [ ] Increase size optimisation","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx1ON/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx1h4,incubator-baremaps,1288132728,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T15:02:07Z,2022-10-23T15:02:07Z,"Ressources to check :

https://trac.osgeo.org/postgis/wiki/UsersWikiSimplifyPreserveTopology
https://trac.osgeo.org/postgis/wiki/UsersWikiSimplifyWithTopologyExt","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx1h4/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx_2Q,incubator-baremaps,1288174992,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-23T18:52:07Z,2022-10-23T18:52:07Z,"Thanks this is a really interesting work. Out of curiosity, while experimenting, are you regenerating the materialized views every time or are you testing the queries in the tileset.json configuration file?

At low zoom levels, Google Maps and Apple Maps don't try to be precise, they give you a general idea of the vegetation below. If we filter out small geometries we loose this. Maybe as solution would be to buffer all the geometries before merging. What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mx_2Q/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyBV3,incubator-baremaps,1288181111,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T19:24:02Z,2022-10-23T19:24:02Z,"> Thanks this is a really interesting work. Out of curiosity, while experimenting, are you regenerating the materialized views every time or are you testing the queries in the tileset.json configuration file?

For the display It's a mix of both but for the optimisation I have to regenerate the view most of the times. I  generate a materialized view which store the modified geometry and then I use the tileset to create a layer for each category I want to see. I use a materialized view because the union computation is quite performance intensive (3-4 minutes for quite a small dataset) and it allows me to compare between multiple views rapidly once they are created.

> At low zoom levels, Google Maps and Apple Maps don't try to be precise, they give you a general idea of the vegetation below. If we filter out small geometries we loose this. Maybe as solution would be to buffer all the geometries before merging. What do you think?


I think it could be interesting if we were able to offer  a better level of details at low zoom level. But I'm not sure to understand what you mean about the buffering of the geometry.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyBV3/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyBl8,incubator-baremaps,1288182140,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-23T19:29:28Z,2022-10-23T19:29:28Z,"Thanks, is the small dataset Switzerland or something smaller? One part of the difficulty is to scale the simplifications to the whole world.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyBl8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyB_7,incubator-baremaps,1288183803,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T19:38:20Z,2022-10-23T19:38:20Z,"I think something we need to do is define the level of fidelity we want to achieve. 

But for now I'll look into other way to simplify the geometry than st_simplifypreservetopology because the results are not satisfactory
![Screenshot 2022-10-23 at 21 28 55](https://user-images.githubusercontent.com/52856615/197413297-ff78fc4f-b013-4ac5-b605-fa8600223e03.png)

st_simplifypreservetopology
![Screenshot 2022-10-23 at 21 36 16](https://user-images.githubusercontent.com/52856615/197414321-6d393bd5-1611-4762-965b-aaad3c6751f7.png)



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyB_7/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyCSA,incubator-baremaps,1288184960,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T19:42:09Z,2022-10-23T19:42:09Z,"> Thanks, is the small dataset Switzerland or something smaller? One part of the difficulty is to scale the simplifications to the whole world.

Switzerland + Liechtenstein. For initial testing this felt like a good first step and it allows to  test idea quickly. But I want try to scale up by maybe adding France or Germany  for future tests. (Or maybe take one of my underutilised ssd to to test on  Europe as a whole). ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyCSA/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyCtm,incubator-baremaps,1288186726,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-23T19:52:34Z,2022-10-23T19:52:34Z,"One interesting idea could be to use ST_DumpRings, ST_BuildArea and ST_Union to simplify the geometry.

For example, this allow us to simplify this geometry of 11 KB

![Screenshot 2022-10-23 at 21 28 55](https://user-images.githubusercontent.com/52856615/197414823-1f699d6a-dcd4-4a1f-90b7-5739d5bd03c7.png)

to a geometry of 2Kb
![Screenshot 2022-10-23 at 21 49 30](https://user-images.githubusercontent.com/52856615/197414787-04104664-e6fc-4af1-b732-195203cf54b9.png)

Personally I think it is still quite similar to the original. @bchapuis What do you think ?

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyCtm/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyEmC,incubator-baremaps,1288194434,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-23T20:28:17Z,2022-10-23T20:28:17Z,"> Personally I think it is still quite similar to the original. @bchapuis What do you think ?

This looks great. ST_DumpRings is a really good idea as what matters is the enclosing area. Performence wise, it is probably a gain as removing whole easier than simplifying them.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyEmC/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyFCb,incubator-baremaps,1288196251,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-23T20:38:00Z,2022-10-23T20:38:00Z,"> I think something we need to do is define the level of fidelity we want to achieve.

Yes, I found this particularly difficult as this is almost more related to art than engineering.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MyFCb/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5M2rzq,incubator-baremaps,1289403626,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-24T18:09:13Z,2022-10-24T18:09:13Z,"Small teaser for the ST_DumpRings at a larger scale
From
<img width=""1015"" alt=""Screenshot 2022-10-24 at 20 06 30"" src=""https://user-images.githubusercontent.com/52856615/197595526-d213de48-3c4a-42be-9fc8-2a148a966303.png"">
To
<img width=""1017"" alt=""Screenshot 2022-10-24 at 20 07 09"" src=""https://user-images.githubusercontent.com/52856615/197595538-b1f1988f-fec9-450b-ba5d-4b6454162c77.png"">

On a side note, we can use ST_ExteriorRing to speed up the process as we only care about the outer shell of the geometry. The results is exactly the same but the processing is considerably speedup
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5M2rzq/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Nw5j9,incubator-baremaps,1304664317,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-05T23:23:48Z,2022-11-05T23:23:48Z,"Just tried this technique at zoom level 8 and the results are pretty good (~200kb).
![Screenshot 2022-11-06 at 00 22 01](https://user-images.githubusercontent.com/238747/200146319-d7958f53-b1b4-44a9-8b41-56efd2700b3e.png)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Nw5j9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NxY9G,incubator-baremaps,1304792902,498,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-11-06T12:41:12Z,2022-11-06T12:41:12Z,"> Just tried this technique at zoom level 8 and the results are pretty good (~200kb).

It does look pretty good. I think for zoom level 8 to 10 the technique will sufficient for our needs.

I am setting up my environnement to test with a bigger [dataset](https://download.geofabrik.de/europe/dach.html) which will allow to really test the scalability of this technique for zoom level 5-8.



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NxY9G/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Nzujm,incubator-baremaps,1305405670,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-07T10:32:38Z,2022-11-07T10:32:38Z,I still have a machine on which we can generate a world map. Let me know if you want to access it. #532 applies your suggestions to the opentstreetmap tileset.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Nzujm/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/498,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OOwmI,incubator-baremaps,1312491912,498,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-12T14:22:16Z,2022-11-12T14:22:16Z,I just started the workflow for a the planet and I will keep you informed. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OOwmI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/499,https://api.github.com/repos/apache/incubator-baremaps/issues/499,incubator-baremaps,1416036443,499,Extract backend related calls to barenetworksApi abstraction,swerky,10920115,James Smith,,CLOSED,2022-10-20T06:23:42Z,2022-10-20T06:27:52Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/499/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/501,https://api.github.com/repos/apache/incubator-baremaps/issues/501,incubator-baremaps,1416872630,501,Secure credentials information in workflow files,LeonardBesseau,52856615,Besseau Léonard,,CLOSED,2022-10-20T15:52:07Z,2023-05-22T16:48:53Z,"The workflow files contains urls to the database with the database credentials in cleartext.
Removing them from the file would also enable the possibility to share a workflow without exposing credentials or substantial reviewing. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/501/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/501,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mo67v,incubator-baremaps,1285795567,501,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-20T15:54:27Z,2022-10-20T15:54:27Z,I think storing the credentials in a keystore is overkill for our purpose but we could reference a credential file in the workflow or in the command that would contains them,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Mo67v/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/501,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MpCyt,incubator-baremaps,1285827757,501,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-20T16:19:16Z,2022-10-20T16:19:16Z,"At some point, baremaps supported variable interpolation in the configuration files. It was not easy to get this right and we removed it to focus on the main problem: generating vector tiles and map data. The reasoning behind this choice was that, if needed, we could put the whole configuration file in a vault. Regarding postgis, personnally I usually set it up a ssh tunnel.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MpCyt/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/501,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MpUiE,incubator-baremaps,1285900420,501,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-20T17:21:36Z,2022-10-20T17:21:36Z,"Oh, I forgot to mention that, in addition to json, we now support javascript as a configuration format. When using javascript, we should be able to access environement variables as described in the graaljs [documentation](https://github.com/oracle/graaljs/blob/master/graal-nodejs/doc/api/process.md#processenv). 

Do you think we should document these options or provide more options to secure the configuration files? I would be in favor of solutions where the responsibility to inject the secrets in the configuration files is left to another tool (e.g. [jq](https://stedolan.github.io/jq/))","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MpUiE/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/501,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MwfVF,incubator-baremaps,1287779653,501,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-22T12:42:05Z,2022-10-22T12:42:05Z,"> Oh, I forgot to mention that, in addition to json, we now support javascript as a configuration format. When using javascript, we should be able to access environement variables as described in the graaljs [documentation](https://github.com/oracle/graaljs/blob/master/graal-nodejs/doc/api/process.md#processenv).


Oh Nice, this would solve the problem nicely

> Do you think we should document these options or provide more options to secure the configuration files? I would be in favor of solutions where the responsibility to inject the secrets in the configuration files is left to another tool (e.g. [jq](https://stedolan.github.io/jq/))


I think that as you said we should focus on the main problem of this project. Since there is the possibility to use javascript to recover the secret from the environment, just documenting that it exists (and maybe with an exemple) is enough for me.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MwfVF/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/501,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MwjJl,incubator-baremaps,1287795301,501,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-22T13:33:34Z,2022-10-22T13:33:34Z,Let's keep this issue open util we have a good documentation to demonstrate this.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MwjJl/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/502,https://api.github.com/repos/apache/incubator-baremaps/issues/502,incubator-baremaps,1417938058,502,Address Licensing issues and IP clearence,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-21T08:09:49Z,2023-03-05T12:25:55Z,This issue will be used to address licensing issues and IP clearence while incubating.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/502/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/503,https://api.github.com/repos/apache/incubator-baremaps/issues/503,incubator-baremaps,1418495441,503,Use the MIT licensed version of osm pbf,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-21T15:14:36Z,2022-10-23T08:59:23Z,"The original version of osm pbf had an LGPL license. In 2019, the original authors adopted the [MIT license](https://github.com/openstreetmap/OSM-binary/blob/master/osmpbf/fileformat.proto).

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/503/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/503,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MuAK-,incubator-baremaps,1287127742,503,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-21T15:32:42Z,2022-10-21T15:32:42Z,Linked to #502.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5MuAK-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/506,https://api.github.com/repos/apache/incubator-baremaps/issues/506,incubator-baremaps,1422734238,506,Add the maplibre inspect plugin to the dev mode,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-25T16:14:12Z,2022-10-26T14:57:52Z,https://github.com/acalcutt/maplibre-gl-inspect,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/506/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/507,https://api.github.com/repos/apache/incubator-baremaps/issues/507,incubator-baremaps,1422988584,507,Improve the ImportOpenStreetMap WorkflowTask to allow multiple import,LeonardBesseau,52856615,Besseau Léonard,,CLOSED,2022-10-25T19:50:34Z,2023-11-20T20:50:50Z,"Currently when specifying a workflow, we can specify multiple importOpenStreetMap task but only the last task will have an effect as all tables are dropped at the start of an import task.

It would be interesting to add an additional input to specify if we want to reset the tables or not.

```json
{
          ""type"": ""com.baremaps.workflow.tasks.ImportOpenStreetMap"",
          ""file"": """",
          ""database"": """",
          ""databaseSrid"": 3857,
         ""ResetTable"": true
 }
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/507/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/507,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5M9E9s,incubator-baremaps,1291079532,507,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-25T20:09:43Z,2022-10-25T20:09:43Z,Are you trying to import several geofabrik files? I havn't thought about this use case.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5M9E9s/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/507,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NB0CS,incubator-baremaps,1292320914,507,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-26T16:43:24Z,2022-10-26T16:43:24Z,"> Are you trying to import several geofabrik files? I havn't thought about this use case.

Yes. I wanted to add another country to my already existing dataset","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NB0CS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/507,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NHko9,incubator-baremaps,1293830717,507,NA,LeonardBesseau,52856615,Besseau Léonard,,NA,2022-10-27T17:12:48Z,2022-10-27T17:12:48Z,We are using the copy Operation on postgres which stop on the first error encountered and if we import OSM from two neighbours country they will have duplicates nodes which is not allowed by the table definition.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NHko9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/507,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NHmDU,incubator-baremaps,1293836500,507,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-10-27T17:18:16Z,2022-10-27T17:18:16Z,"True, I guess some nodes (e.g. boundaries) are shared between neighbbours countries. I would consider this a known limitation for now.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5NHmDU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/507,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5sd7VL,incubator-baremaps,1819784523,507,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-20T20:50:50Z,2023-11-20T20:50:50Z,I think this has been addressed in the PR related to the daylight workflow. We now have an option to import a file and keep the existing rows.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5sd7VL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/511,https://api.github.com/repos/apache/incubator-baremaps/issues/511,incubator-baremaps,1427461107,511,Merge the submodules,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-10-28T15:56:27Z,2022-11-12T14:39:58Z,"- baremaps-benchmarks
- baremaps-cli
- baremaps-core
  - org.apache.baremaps.collection
  - org.apache.baremaps.geocoder
  - org.apache.baremaps.iploc
  - org.apache.baremaps.osm
  - org.apache.baremaps.postgres
  - org.apache.baremaps.storage
  - org.apache.baremaps.stream
  - org.apache.baremaps.workflow
- baremaps-server
- baremaps-testing","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/511/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/513,https://api.github.com/repos/apache/incubator-baremaps/issues/513,incubator-baremaps,1428950430,513,DownloadUrl workflow doesn't work when the file doesn't exist,Drabble,3996615,Antoine Drabble,,CLOSED,2022-10-30T18:26:18Z,2022-11-01T15:06:33Z,"The changes in Baremaps Workflow have affected the download of files when trying to replace a file that doesn't exist yet.

When validating whether a file has changed since the last download we have to check that this file actually exists otherwise we want to download it anyway.

The fix should happen in `DownloadUrl.java` where the head request takes place.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/513/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/515,https://api.github.com/repos/apache/incubator-baremaps/issues/515,incubator-baremaps,1432958811,515,Storing additional metadata in the SQLite database,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:11:14Z,2023-07-30T18:03:00Z,"For now we store the following fields in the database:

 - The address used for our query (which can be wrong sometimes)
 - The country code
 - The IPv4 range
 - The location (lat/lon)
 - The network name if present

In the case of the RIPE and other NIC providers, there are some additional fields that could be stored. The problem is that the fields are not always consistent. Maybe we should store the entire entry of the RIPE with all of its metadata (key-value pairs)?

We could also store the entry of Geonames that matched our query so that we have the proper Geonames name. This could be used to manually fix false positives.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/515/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/515,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMb0T,incubator-baremaps,1630649619,515,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-11T11:26:20Z,2023-07-11T11:26:20Z,We will add some additional field in the next release and additional tickets will be created for specific needs in the future.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMb0T/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/516,https://api.github.com/repos/apache/incubator-baremaps/issues/516,incubator-baremaps,1432960062,516,Computing precision level for ip to location,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:12:11Z,2023-07-30T18:02:59Z,"We query the Geonames index using one of the fields (key-value pairs) from the NIC Object (parsed network information centre entry), we will use one of the available fields from the NIC Object such as address, desc, name or country as last resort.

Firstly, based on the field that we use we could define a radius of uncertainty. For example the address field is probably much more precise than the country field. 

Secondly, based on the result of the geonames query, we could also define a radius depending on the item that resulted from the query. If we found a city it will be a bigger radius than the address of a road or the address of a house.

The radius could also be stored as a bounding box (bbox).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/516/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/516,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMbdz,incubator-baremaps,1630648179,516,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-11T11:25:12Z,2023-07-11T11:25:12Z,"We will fix this issue with precision information (e.g. world, country, city, etc.).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMbdz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/517,https://api.github.com/repos/apache/incubator-baremaps/issues/517,incubator-baremaps,1432960570,517,Proxy detection,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:12:34Z,2023-07-11T11:21:48Z,"In the case of a company that uses the IP Location service to detect and store the location of its users. It would be interesting to propose, in addition to the latitude, longitude and radius, a flag that is true if the user is probably using a VPN service.

Proxy IPs database are quite expensive https://www.ip2location.com/database/ip2proxy.

There are some free lists available such as this one https://github.com/mertguvencli/http-proxy-list. 

Maybe we can even implement a small scraper for proxy IPs.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/517/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/517,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMaUn,incubator-baremaps,1630643495,517,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-11T11:21:48Z,2023-07-11T11:21:48Z,The scope of this task is large and not actionnable yet. Let's close this issue for now and reopen it later if necessary. The tag idea will help find this kind of issues in the future.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMaUn/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/518,https://api.github.com/repos/apache/incubator-baremaps/issues/518,incubator-baremaps,1432961621,518,Using the continent as a filtering tool and as last resort,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:13:19Z,2023-11-20T15:35:07Z,"We use NIC databases from different providers from each continent. For example the Network Information Centre for Europe is the RIPE, the NIC for Africa is AFRINIC.

When we generate the IPLoc objects for each of these databases, we should store the information about the continent. This could be used as a last resort when no information is available.

Additionally we should also filter our geonames queries by continent using that information. This would fix the issue when we have the same city in England and in the USA.

Using the continent to locate the IP address also means that there will no longer be any IP address that is not indexed in the database. Currently, there are some cases where there is zero information about location in the NIC files (not even the country field).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/518/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/519,https://api.github.com/repos/apache/incubator-baremaps/issues/519,incubator-baremaps,1432962671,519,Using the network name in the search,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:14:08Z,2023-07-30T18:02:59Z,"When generating the IPLoc database, we use many different fields (depending on what is available in the NIC Entry).

In Africa and in other places, some entries don't contain any country or address fields. The only useful information is written within the network name field. E.g. ""Telecom Congo"".

For now we don’t make use of this field but we probably should. It could increase the amount of successful Geonames queries.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/519/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/520,https://api.github.com/repos/apache/incubator-baremaps/issues/520,incubator-baremaps,1432963213,520,Using the organisation field ,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:14:32Z,2023-07-11T11:20:54Z,"Many entries in the NIC files reference an organisation. The organisation is a separate entry that can appear later in the file. It is referenced using an ID. Sometimes the only geographic information available concerning an entry is the address of the organisation. 

As the organisation entry can appear later in the NIC file, we would have to parse it entirely first to index the organisations so that they can be referenced when parsing the IPv4 NIC entries.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/520/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/520,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMaD8,incubator-baremaps,1630642428,520,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-11T11:20:54Z,2023-07-11T11:20:54Z,The scope of this task is large and not actionnable yet. Let's close this issue for now and reopen it later if necessary. The tag idea will help find this kind of issues in the future.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hMaD8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/521,https://api.github.com/repos/apache/incubator-baremaps/issues/521,incubator-baremaps,1432963661,521,Defining what Lucene score is the minimum viable score,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:14:52Z,2023-11-20T20:51:03Z,"When we are trying to locate an IP address, we will use one of the available fields in the NIC (Network Information Centre) entry. The NIC entry can contain many fields (it is not standardised). Thus we don’t really know what we will get. 
Our solution is to use the available fields (sorted by relevance, e.g. address, desc, country…).

Sometimes when we use a field such as the address field, we might have an address that doesn’t match anything in the Geonames index. When this happens, we might get a match in the Geonames Lucene index with a very low score. For this reason we have defined a minimum score in the `IpLoc.java` file called `SCORE_THRESHOLD`.

We should make tests to find the best value for the score threshold at which we assume that the match is good enough to use for the latitude longitude values.

The current value of 0.1 was chosen arbitrarily.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/521/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/522,https://api.github.com/repos/apache/incubator-baremaps/issues/522,incubator-baremaps,1432964050,522,Including the Iploc service in an example HTTP service,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:15:11Z,2022-12-12T14:29:13Z,"For now we only propose the `baremaps iploc init` command. This will generate a SQLite database that contains all the location - ip range pairs.

We should create a simple HTTP service, the same way as it is currently done with the server http service. The service would be started with `baremaps iploc serve` and serve two purposes.

A REST endpoint that can query an IP address and return a location.

A HTML web page that can query the endpoint to demo the service.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/522/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/523,https://api.github.com/repos/apache/incubator-baremaps/issues/523,incubator-baremaps,1432964599,523,Support single IPv4 address,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:15:36Z,2022-11-16T10:36:44Z,"Currently we have a class Ipv4Range that handles ranges of IPv4 as well as the parsing. For testing and queries, it would be useful to have an IPv4 class that handles single IPs. It would help to keep the code cleaner.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/523/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/524,https://api.github.com/repos/apache/incubator-baremaps/issues/524,incubator-baremaps,1432965228,524,Replace NIC FETCHER with a workflow,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:16:07Z,2022-12-12T14:29:14Z,"We currently have a class called `NicFetcher`. This should be replaced with the new Workflow pipelines inside the `baremaps-workflow` package.

Additionally, we can configure it not to re-download the files as long as they have not changed on the remote.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/524/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/525,https://api.github.com/repos/apache/incubator-baremaps/issues/525,incubator-baremaps,1432965539,525,Support for IPV6,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:16:24Z,2023-05-13T12:37:08Z,"We currently only support IPv4. There are IPv6 entries in the NIC files which we should probably also index in our database (or in a separate SQLite database). 

Side note: our IPv4 parser actually parses IPv6 addresses but it consider them as IPv4 (4 bytes) and the data is wrong.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/525/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/526,https://api.github.com/repos/apache/incubator-baremaps/issues/526,incubator-baremaps,1432966839,526,Refactor the IPLoc package to propose two separate services for generating the database and for serving the database,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T11:17:27Z,2023-05-15T09:00:43Z,"We currently use the `IpLoc` class for generating the database and the `InetnumLocationDaoSqliteImpl` to query the database. 

This is not very clean and we should make nice interfaces to interact with the IpLoc services.

I am not sure yet how I would do it. Any advice would be appreciated. 
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/526/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/530,https://api.github.com/repos/apache/incubator-baremaps/issues/530,incubator-baremaps,1433150113,530,Order by size of IP range in the HTTP IpLoc server,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-02T13:28:43Z,2022-12-01T09:47:20Z,"When we query an IP on the HTTP IpLoc server #522, we want to order the IP ranges that matched by size of range. There are entries in the NIC files that englobe smaller IP ranges. The smaller the range is, the more precise it is.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/530/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/538,incubator-baremaps,1450144606,538,baremaps map export fails,Weltstaat,19773073,,,CLOSED,2022-11-15T17:35:05Z,2022-11-17T14:31:50Z,"Hi,

I'm trying to export vector tiles from a Postgres DB using baremaps map export. 

I followed the tutorial https://www.baremaps.com/examples/openstreetmap/ and created a custom tileset.json file:

```
  ""tilejson"": ""2.2.0"",
  ""center"": [
    15.9234124,
    28.6031286,
    8.0
  ],
  ""bounds"": [
    18.3840463,
    29.9738913,
    13.2001493,
    27.0776233
  ],
  ""minzoom"": 8.0,
  ""maxzoom"": 22.0,
  ""tiles"": [
    ""http://localhost:9000/tiles/{z}/{x}/{y}.mvt""
  ],
  ""vector_layers"": [
    {
      ""id"": ""roads"",
      ""queries"": [
        {
          ""minzoom"": 8,
          ""maxzoom"": 22,
          ""sql"": ""SELECT tags, geom FROM Z16_route_l""
        },
        {
          ""minzoom"": 16,
          ""maxzoom"": 22,
          ""sql"": ""SELECT tags, geom FROM Z16_roads_l""
        },
        {
          ""minzoom"": 15,
          ""maxzoom"": 16,
          ""sql"": ""SELECT tags, geom FROM Z15_roads_l""
        },
        {
          ""minzoom"": 14,
          ""maxzoom"": 15,
          ""sql"": ""SELECT tags, geom FROM Z14_roads_l""
        },
        {
          ""minzoom"": 13,
          ""maxzoom"": 14,
          ""sql"": ""SELECT tags, geom FROM Z13_roads_l""
        },
        {
          ""minzoom"": 12,
          ""maxzoom"": 13,
          ""sql"": ""SELECT tags, geom FROM Z12_roads_l""
        },
        {
          ""minzoom"": 11,
          ""maxzoom"": 12,
          ""sql"": ""SELECT tags, geom FROM Z11_roads_l""
        },
        {
          ""minzoom"": 10,
          ""maxzoom"": 11,
          ""sql"": ""SELECT tags, geom FROM Z10_roads_l""
        },
        {
          ""minzoom"": 9,
          ""maxzoom"": 10,
          ""sql"": ""SELECT tags, geom FROM Z9_roads_l""
        },
        {
          ""minzoom"": 8,
          ""maxzoom"": 9,
          ""sql"": ""SELECT tags, geom FROM Z8_roads_l""
        }
      ]
    }
  ]
}
```

The error message I'm receiving is:

```
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `com.baremaps.model.TileJSON` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('tilejson')
 at [Source: (byte[])""
  ""tilejson"": ""2.2.0"",
  ""center"": [
    15.9234124,
    28.6031286,
    8.0
  ],
  ""bounds"": [
    18.3840463,
    29.9738913,
    13.2001493,
    27.0776233
  ],
  ""minzoom"": 8.0,
  ""maxzoom"": 22.0,
  ""tiles"": [
    ""http://localhost:9000/tiles/{z}/{x}/{y}.mvt""
  ],
  ""vector_layers"": [
    {
      ""id"": ""roads"",
      ""queries"": [
        {
          ""minzoom"": 8,
          ""maxzoom"": 22,
          ""sql"": ""SELECT geom FROM Z16_route_l""
        },
        {
       ""[truncated 1505 bytes]; line: 2, column: 3]
```

I'm kind of stuck here and don't know where the problem lies. Does somebody have an idea?

Thanks!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/538/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OgJ8r,incubator-baremaps,1317052203,538,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-16T13:48:31Z,2022-11-16T13:48:31Z,"Sorry @Weltstaat, I was a bit slow to respond. Have you been able to solve the issue? I tried to reproduce the error and I think your tileset.json file is missing the opening `{`. When removing it from the example, I get the same error:

```
com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `org.apache.baremaps.tileset.Tileset` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('tilejson')
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OgJ8r/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ogi42,incubator-baremaps,1317154358,538,NA,Weltstaat,19773073,,,NA,2022-11-16T14:57:43Z,2022-11-16T14:57:43Z,"Hi bchapuis,

thanks for the reply. Yes, it was a stupid syntax error. 

However now, I'm getting a different error message. I simplified the tileset.json as much as possible:

```
{
  ""tilejson"": ""2.2.0"",
  ""center"": [
    15.9234124,
    28.6031286,
    8.0
  ],
  ""bounds"": [
    18.3840463,
    29.9738913,
    13.2001493,
    27.0776233
  ],
  ""minzoom"": 8.0,
  ""maxzoom"": 22.0,
  ""vector_layers"": [
    {
      ""id"": ""roads"",
      ""queries"": [
        {
          ""minzoom"": 9,
          ""maxzoom"": 10,
          ""sql"": ""SELECT roadcode::text, shape::geometry FROM Z9_roads_l WHERE tags ? 'roadcode'""
        },
        {
          ""minzoom"": 8,
          ""maxzoom"": 9,
          ""sql"": ""SELECT roadcode::text, shape::geometry FROM Z8_roads_l WHERE tags ? 'roadcode'""
        }
      ]
    }
  ]
}
```

This gives me the errors:

```
com.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.lang.RuntimeException: An error occurred while creating the tiles
&
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: An error occurred while creating the tiles
&
Caused by: java.lang.RuntimeException: An error occurred while creating the tiles
&
Caused by: com.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: FEHLER: Syntaxfehler am Ende der Eingabe
  Position: 7
&
Caused by: org.postgresql.util.PSQLException: FEHLER: Syntaxfehler am Ende der Eingabe
  Position: 7
```
Any idea?

Thank you for helping!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ogi42/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ogp50,incubator-baremaps,1317183092,538,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-16T15:17:16Z,2022-11-16T15:17:16Z,"The queries are expected to return three columns: id, tags, geom (in that order).

Here is an exemple that should work (I added the WITH to test the query with data, it should not be added to the tileset.json file):

```sql
WITH Z9_roads_l AS (
    SELECT 1 as roadcode, '{""roadcode"": ""code""}'::jsonb as tags, st_point(1,1) as shape
)
SELECT roadcode::text as id, tags as tags, shape::geometry as geom FROM Z9_roads_l WHERE tags ? 'roadcode' 
```

You could also get additional information by adding `--log-level DEBUG` to the command.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ogp50/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OlEXU,incubator-baremaps,1318340052,538,NA,Weltstaat,19773073,,,NA,2022-11-17T09:29:26Z,2022-11-17T09:29:26Z,"Unfortunately not.

Baremaps is running in WSL2 and the DB lies locally on Windows. I can connect to the DB and I was also able to run a SQL script creating a materialized view of Z9_roads_l via baremaps execute.

However the queries in tileset.json won't run, giving me different error messages which hint to a problem with the SQL syntax. If I run the same queries (from tileset.json and also the extended queries which I can inspect in DEBUG mode) locally in pgAdmin they run successfully. 

I find this quite confusing and guess it has to do with the WSL-Windows interface or maybe the setup of Postgres.

Anyhow, thanks for your help!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OlEXU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OlG-d,incubator-baremaps,1318350749,538,NA,Weltstaat,19773073,,,NA,2022-11-17T09:37:39Z,2022-11-17T09:37:39Z,"If I wrap the extended query from debug mode into a sql script and run it via baremaps execute it too runs sucessfully. 
```
WITH H597232234 AS (SELECT id, (tags || hstore('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, ST_AsMvtGeom(geom, ST_MakeEnvelope(1878516.4071364915, 3287403.712488861, 2035059.4410645326, 3443946.7464168984, 3857), 4096, 256, true) AS geom FROM (SELECT id as id, tags as tags, geom as geom FROM Z8_RD) AS q WHERE ST_Intersects(geom, ST_MakeEnvelope(1878516.4071364915, 3287403.712488861, 2035059.4410645326, 3443946.7464168984, 3857))) SELECT ST_AsMVT(mvt_geom, 'roads', 4096) FROM (SELECT id, hstore_to_jsonb_loose(tags), geom FROM H597232234) as mvt_geom
```
I also tried different versions of baremaps: latest, 0.6.5, 0.6.0, 0.5.3","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OlG-d/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ol8if,incubator-baremaps,1318570143,538,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-17T12:32:25Z,2022-11-17T12:32:25Z,"Strange, was the openstreetmap example working with WSL? The log suggest an error in the SQL query and we may have an encoding problem. We still need to test baremaps more extensively on Windows and these insights are interesting.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Ol8if/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OmIVO,incubator-baremaps,1318618446,538,NA,Weltstaat,19773073,,,NA,2022-11-17T13:14:59Z,2022-11-17T13:14:59Z,"I was skipping the OSM import step in the Openstreetmap example, because I already had my data. 

But today I tried to do the full tutorial and it already fails, when I try to do the liechtenstein-latest.osm.pbf import

```
[INFO ] 2022-11-17 14:12:44.671 [main] Import - 8 processors available
Exception in thread ""main"" java.lang.ExceptionInInitializerError
        at org.lmdbjava.ByteBufferProxy.<clinit>(ByteBufferProxy.java:71)
        at org.lmdbjava.Env.create(Env.java:92)
        at com.baremaps.cli.Import.call(Import.java:116)
        at com.baremaps.cli.Import.call(Import.java:48)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1933)
        at picocli.CommandLine.access$1200(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)
        at picocli.CommandLine.execute(CommandLine.java:2058)
        at com.baremaps.cli.Baremaps.main(Baremaps.java:53)
Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field long java.nio.Buffer.address accessible: module java.base does not ""opens java.nio"" to unnamed module @1c0dc10
        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)
        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)
        at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)
        at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)
        at org.lmdbjava.ByteBufferProxy$AbstractByteBufferProxy.findField(ByteBufferProxy.java:163)
        at org.lmdbjava.ByteBufferProxy$ReflectiveProxy.<clinit>(ByteBufferProxy.java:222)
        ... 12 more
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OmIVO/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OmKKk,incubator-baremaps,1318625956,538,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-17T13:20:12Z,2022-11-17T13:20:12Z,"This is an old version of baremaps with LMDB, a key value store developped in c++. Since baremaps v0.7.0, we use java 17 and replaced lmdb with a java alternative. 

Would you mind giving it a try with baremaps v0.7.0 and java 17? Sorry for the inconvenience. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OmKKk/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/538,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OmfFG,incubator-baremaps,1318711622,538,NA,Weltstaat,19773073,,,NA,2022-11-17T14:21:45Z,2022-11-17T14:21:45Z,"I started with v0.7.0 and gave it a second try now. It's the same problem.

If you're interested in the full log - here it is:
```
[INFO ] 2022-11-17 15:18:56.878 [main] ExportVectorTiles - Exporting vector tiles from jdbc:postgresql://winhost:5432/planet?user=sde&password=zzjhlsq to /home/weltstaat/baremaps/tiles
[DEBUG] 2022-11-17 15:18:56.885 [main] HikariConfig - HikariPool-1 - configuration:
[DEBUG] 2022-11-17 15:18:56.890 [main] HikariConfig - allowPoolSuspension.............false
[DEBUG] 2022-11-17 15:18:56.890 [main] HikariConfig - autoCommit......................true
[DEBUG] 2022-11-17 15:18:56.891 [main] HikariConfig - catalog.........................none
[DEBUG] 2022-11-17 15:18:56.891 [main] HikariConfig - connectionInitSql...............none
[DEBUG] 2022-11-17 15:18:56.891 [main] HikariConfig - connectionTestQuery.............none
[DEBUG] 2022-11-17 15:18:56.891 [main] HikariConfig - connectionTimeout...............30000
[DEBUG] 2022-11-17 15:18:56.892 [main] HikariConfig - dataSource......................none
[DEBUG] 2022-11-17 15:18:56.892 [main] HikariConfig - dataSourceClassName.............none
[DEBUG] 2022-11-17 15:18:56.892 [main] HikariConfig - dataSourceJNDI..................none
[DEBUG] 2022-11-17 15:18:56.893 [main] HikariConfig - dataSourceProperties............{password=<masked>}
[DEBUG] 2022-11-17 15:18:56.893 [main] HikariConfig - driverClassName.................none
[DEBUG] 2022-11-17 15:18:56.894 [main] HikariConfig - exceptionOverrideClassName......none
[DEBUG] 2022-11-17 15:18:56.894 [main] HikariConfig - healthCheckProperties...........{}
[DEBUG] 2022-11-17 15:18:56.894 [main] HikariConfig - healthCheckRegistry.............none
[DEBUG] 2022-11-17 15:18:56.894 [main] HikariConfig - idleTimeout.....................600000
[DEBUG] 2022-11-17 15:18:56.894 [main] HikariConfig - initializationFailTimeout.......1
[DEBUG] 2022-11-17 15:18:56.895 [main] HikariConfig - isolateInternalQueries..........false
[DEBUG] 2022-11-17 15:18:56.895 [main] HikariConfig - jdbcUrl.........................jdbc:postgresql://winhost:5432/planet?user=sde&password=<masked>
[DEBUG] 2022-11-17 15:18:56.895 [main] HikariConfig - keepaliveTime...................0
[DEBUG] 2022-11-17 15:18:56.895 [main] HikariConfig - leakDetectionThreshold..........0
[DEBUG] 2022-11-17 15:18:56.895 [main] HikariConfig - maxLifetime.....................1800000
[DEBUG] 2022-11-17 15:18:56.895 [main] HikariConfig - maximumPoolSize.................8
[DEBUG] 2022-11-17 15:18:56.896 [main] HikariConfig - metricRegistry..................none
[DEBUG] 2022-11-17 15:18:56.896 [main] HikariConfig - metricsTrackerFactory...........none
[DEBUG] 2022-11-17 15:18:56.896 [main] HikariConfig - minimumIdle.....................8
[DEBUG] 2022-11-17 15:18:56.896 [main] HikariConfig - password........................<masked>
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - poolName........................""HikariPool-1""
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - readOnly........................false
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - registerMbeans..................false
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - scheduledExecutor...............none
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - schema..........................none
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - threadFactory...................internal
[DEBUG] 2022-11-17 15:18:56.897 [main] HikariConfig - transactionIsolation............default
[DEBUG] 2022-11-17 15:18:56.898 [main] HikariConfig - username........................none
[DEBUG] 2022-11-17 15:18:56.898 [main] HikariConfig - validationTimeout...............5000
[INFO ] 2022-11-17 15:18:56.899 [main] HikariDataSource - HikariPool-1 - Starting...
[DEBUG] 2022-11-17 15:18:56.916 [main] DriverDataSource - Loaded driver with class name org.postgresql.Driver for jdbcUrl=jdbc:postgresql://winhost:5432/planet?user=sde&password=<masked>
[INFO ] 2022-11-17 15:18:57.111 [main] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@306851c7
[INFO ] 2022-11-17 15:18:57.113 [main] HikariDataSource - HikariPool-1 - Start completed.
[DEBUG] 2022-11-17 15:18:57.213 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=1, active=0, idle=1, waiting=0)
[DEBUG] 2022-11-17 15:18:57.263 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2392c6c
[DEBUG] 2022-11-17 15:18:57.316 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4dc3c860
[DEBUG] 2022-11-17 15:18:57.367 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7e3f6040
[DEBUG] 2022-11-17 15:18:57.393 [ForkJoinPool.commonPool-worker-2] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.394 [ForkJoinPool.commonPool-worker-3] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.415 [ForkJoinPool.commonPool-worker-4] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.416 [ForkJoinPool.commonPool-worker-5] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.418 [ForkJoinPool.commonPool-worker-7] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.418 [ForkJoinPool.commonPool-worker-6] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.436 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2dec372f
[DEBUG] 2022-11-17 15:18:57.453 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 137, 105))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 137, 105), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.460 [main] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 137, 107))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 137, 107), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.484 [main] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 138, 107))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 138, 107), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.484 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 138, 105))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 138, 105), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.492 [main] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 139, 107))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 139, 107), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.492 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 139, 105))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 139, 105), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.496 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3d11587d
[DEBUG] 2022-11-17 15:18:57.500 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 140, 105))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 140, 105), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.500 [main] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 140, 107))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 140, 107), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.507 [main] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 141, 107))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 141, 107), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.507 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 141, 105))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 141, 105), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.513 [main] PostgresTileStore - Executing query: with
[DEBUG] 2022-11-17 15:18:57.515 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 137, 106))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 137, 106), 4096, 256, true) as geom from h1b3f00ed ) as target
[INFO ] 2022-11-17 15:18:57.520 [main] HikariDataSource - HikariPool-1 - Shutdown initiated...
[DEBUG] 2022-11-17 15:18:57.520 [main] HikariPool - HikariPool-1 - Before shutdown stats (total=6, active=1, idle=5, waiting=0)
[DEBUG] 2022-11-17 15:18:57.523 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@306851c7: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.523 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@4dc3c860: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.523 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@7e3f6040: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.524 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@2dec372f: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.524 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@3d11587d: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.532 [ForkJoinPool.commonPool-worker-1] PostgresTileStore - Executing query: with h1b3f00ed as (select * from planet.sde.Z8_roads_l where ((true)) and st_intersects(shape::geometry, st_tileenvelope(8, 138, 106))) select st_asmvt(target, 'roads', 4096, 'geom', 'id') from (select objectid::int as id, (roadcode::jsonb ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(shape::geometry), 'ST_', '')))) as tags, st_asmvtgeom(shape::geometry, st_tileenvelope(8, 138, 106), 4096, 256, true) as geom from h1b3f00ed ) as target
[DEBUG] 2022-11-17 15:18:57.545 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6003a985
[DEBUG] 2022-11-17 15:18:57.555 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - After adding stats (total=2, active=0, idle=2, waiting=0)
[DEBUG] 2022-11-17 15:18:57.557 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@2392c6c: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.558 [HikariPool-1 connection closer] PoolBase - HikariPool-1 - Closing connection org.postgresql.jdbc.PgConnection@6003a985: (connection evicted)
[DEBUG] 2022-11-17 15:18:57.558 [main] HikariPool - HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)
[INFO ] 2022-11-17 15:18:57.558 [main] HikariDataSource - HikariPool-1 - Shutdown completed.
[ERROR] 2022-11-17 15:18:57.558 [main] ExportVectorTiles - Failed exporting vector tiles from jdbc:postgresql://winhost:5432/planet?user=sde&password=zzjhlsq to /home/weltstaat/baremaps/tiles
com.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.lang.RuntimeException: An error occurred while creating the tiles
        at com.baremaps.workflow.tasks.ExportVectorTiles.run(ExportVectorTiles.java:94)
        at com.baremaps.cli.map.Export.call(Export.java:88)
        at com.baremaps.cli.map.Export.call(Export.java:26)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
        at picocli.CommandLine.access$1300(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
        at picocli.CommandLine.execute(CommandLine.java:2078)
        at com.baremaps.cli.Baremaps.main(Baremaps.java:95)
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: An error occurred while creating the tiles
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)
        at java.base/java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:562)
        at java.base/java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:591)
        at java.base/java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:689)
        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:159)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:173)
        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)
        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:765)
        at com.baremaps.workflow.tasks.ExportVectorTiles.run(ExportVectorTiles.java:89)
        ... 11 more
Caused by: java.lang.RuntimeException: An error occurred while creating the tiles
        at com.baremaps.database.tile.TileChannel.accept(TileChannel.java:61)
        at com.baremaps.database.tile.TileChannel.accept(TileChannel.java:19)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
        at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1003)
        at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)
        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
        at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290)
        at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754)
        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: com.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: FEHLER: Syntaxfehler am Ende der Eingabe
  Position: 7
        at com.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:116)
        at com.baremaps.database.tile.TileChannel.accept(TileChannel.java:54)
        ... 12 more
Caused by: org.postgresql.util.PSQLException: FEHLER: Syntaxfehler am Ende der Eingabe
  Position: 7
        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366)
        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356)
        at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496)
        at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413)
        at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333)
        at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319)
        at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295)
        at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244)
        at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110)
        at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java)
        at com.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:101)
        ... 13 more
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5OmfFG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/541,https://api.github.com/repos/apache/incubator-baremaps/issues/541,incubator-baremaps,1458326638,541,Examples have been removed from the main repository,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-21T17:34:20Z,2022-12-08T13:48:17Z,"#540  removed all of the docs and examples. This causes two issues: 

1. The files referenced from the website produce a 404. e.g. in the [openstreetmap example](https://baremaps.apache.org/examples/openstreetmap/) there is a reference to  [this file](https://raw.githubusercontent.com/baremaps/baremaps/main/docs/examples/openstreetmap/workflow.json). 

2. The example files are only available on the website repository. In my opinion the examples should be available directly on the main repository.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/541/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/541,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5O1xtk,incubator-baremaps,1322720100,541,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-11-21T22:14:26Z,2022-11-21T22:14:26Z,"Thanks for spotting these issues with the examples, we should fix the links. Regarding the location of the exemples, having the exemple in the main repository was practical, but also limiting. Having the files elsewhere may enable us to include larger files in the examples without poluting the main repository.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5O1xtk/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/544,https://api.github.com/repos/apache/incubator-baremaps/issues/544,incubator-baremaps,1469615735,544,Optimize the index to search by ip_start and ip_end,Drabble,3996615,Antoine Drabble,,CLOSED,2022-11-30T13:10:45Z,2022-12-01T09:49:54Z,"Currently we have only two indexes in Iploc, one for ip_start and one for ip_end. As our IP query searches for ranges, it uses both variables in the where clause. 

We should create an index that includes both fields ip_start and ip_end to optimize the following query:

```sql
SELECT id,
       address,
       ip_start,
       ip_end,
       latitude,
       longitude,
       network,
       country
FROM inetnum_locations
WHERE ip_start >= 0
  AND ip_end <= 0
ORDER BY ip_start DESC, ip_end ASC;
```

Using `EXPLAIN QUERY PLAN` we can see that the only index used is ip_start_index : `SEARCH inetnum_locations USING INDEX ip_start_index (ip_start>?)`.

The query takes around 6 seconds which is suboptimal.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/544/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/546,https://api.github.com/repos/apache/incubator-baremaps/issues/546,incubator-baremaps,1471383430,546,Leverage Java 17 features,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-12-01T14:08:07Z,2022-12-02T22:04:33Z,"- [x] Use sealed interfaces in the openstreetmap model
- [x] Replace the visitor pattern with instanceof ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/546/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/548,https://api.github.com/repos/apache/incubator-baremaps/issues/548,incubator-baremaps,1479627998,548,Add the inspect buttons to the server,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-12-06T16:59:11Z,2022-12-11T17:08:31Z,The inspect buttons are only available in the dev mode. It would be nice to include them in the server mode. This would enable the user to inspect the tiles and see their size. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/548/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/549,https://api.github.com/repos/apache/incubator-baremaps/issues/549,incubator-baremaps,1479919010,549,Improve the README,Drabble,3996615,Antoine Drabble,,CLOSED,2022-12-06T19:01:17Z,2022-12-08T13:48:04Z,The README needs to be improved. It should allow users to easily find guides on how to execute the Baremaps CLI and developers to easily start coding. It should also put forward the demo website as well as the documentation on the website.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/549/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/553,https://api.github.com/repos/apache/incubator-baremaps/issues/553,incubator-baremaps,1484869907,553,Including the Geocoder in an example web application,Drabble,3996615,Antoine Drabble,,CLOSED,2022-12-08T15:22:29Z,2022-12-12T13:58:12Z,"For now we can only use the Geocoder as a library or query it through the CLI. It would be nice for an example to have a simple web application to demo it and maybe to include it with a map.

It should consist of two parts:

- A REST endpoint that can query an address and return a location.
- A HTML web page that can query the endpoint to demo the service.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/553/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/556,https://api.github.com/repos/apache/incubator-baremaps/issues/556,incubator-baremaps,1491891577,556,"Reporting after executing a workflow (time taken, number of actions...)",Drabble,3996615,Antoine Drabble,,CLOSED,2022-12-12T13:26:47Z,2023-03-28T09:52:34Z,"We may want to generalize reporting for all the workflow tasks. Including the time taken, number of items inserted, etc.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/556/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/557,https://api.github.com/repos/apache/incubator-baremaps/issues/557,incubator-baremaps,1496562737,557,Fix the IntelliJ configurations inside .run/,Drabble,3996615,Antoine Drabble,,CLOSED,2022-12-14T12:46:52Z,2022-12-19T10:01:53Z,Most of the configurations are broken since modules have been renamed/moved. We should update the configurations to use the baremaps-cli module. We should also create new configurations in relation to the examples.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/557/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/559,https://api.github.com/repos/apache/incubator-baremaps/issues/559,incubator-baremaps,1499591558,559,An error occurred when importing openstreetmap data into postgresql,wojiwo03,45283606,Jeff1125,,CLOSED,2022-12-16T04:58:29Z,2023-03-05T12:24:22Z,"An error occurred when I was about to import China's data into the database.Data files are downloaded from Geofabrik，<code>https://download.geofabrik.de/asia/china-latest.osm.pbf</code>
The stack information is as follows：
```
[WARN ] 2022-12-16 04:37:53.336 [ForkJoinPool.commonPool-worker-1] CreateGeometryConsumer - Unable to build the geometry for relation #13494795
org.locationtech.jts.geom.TopologyException: side location conflict [ (116.6532569937408, 40.13792208395898, NaN) ]
        at org.locationtech.jts.geomgraph.EdgeEndStar.propagateSideLabels(EdgeEndStar.java:289) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.geomgraph.EdgeEndStar.computeLabelling(EdgeEndStar.java:125) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.operation.relate.RelateComputer.labelNodeEdges(RelateComputer.java:325) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.operation.relate.RelateComputer.computeIM(RelateComputer.java:125) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.operation.relate.RelateOp.getIntersectionMatrix(RelateOp.java:109) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.operation.relate.RelateOp.relate(RelateOp.java:54) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.geom.Geometry.relate(Geometry.java:1035) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.geom.Geometry.equalsTopo(Geometry.java:1089) ~[jts-core-1.19.0.jar:?]
        at org.locationtech.jts.geom.Geometry.equals(Geometry.java:1057) ~[jts-core-1.19.0.jar:?]
        at com.baremaps.osm.function.CreateGeometryConsumer.mergeInnerPolygons(CreateGeometryConsumer.java:163) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.function.CreateGeometryConsumer.match(CreateGeometryConsumer.java:115) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.model.Relation.visit(Relation.java:68) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.function.EntityConsumer.accept(EntityConsumer.java:31) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.function.EntityConsumer.accept(EntityConsumer.java:25) ~[baremaps-osm-0.7.0.jar:?]
        at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
        at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
        at com.baremaps.osm.function.BlockEntityConsumer.match(BlockEntityConsumer.java:47) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.model.DataBlock.visit(DataBlock.java:88) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.function.BlockConsumer.accept(BlockConsumer.java:28) ~[baremaps-osm-0.7.0.jar:?]
        at com.baremaps.osm.function.BlockConsumer.accept(BlockConsumer.java:22) ~[baremaps-osm-0.7.0.jar:?]
        at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
        at com.baremaps.stream.ConsumerUtils.lambda$consumeThenReturn$0(ConsumerUtils.java:32) ~[baremaps-stream-0.7.0.jar:?]
        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
        at com.baremaps.stream.BufferedSpliterator.tryAdvance(BufferedSpliterator.java:73) ~[baremaps-stream-0.7.0.jar:?]
        at java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:292) ~[?:?]
        at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206) ~[?:?]
        at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:169) ~[?:?]
        at java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:298) ~[?:?]
        at com.baremaps.stream.BatchedSpliterator.tryAdvance(BatchedSpliterator.java:45) ~[baremaps-stream-0.7.0.jar:?]
        at com.baremaps.stream.BatchedSpliterator.trySplit(BatchedSpliterator.java:56) ~[baremaps-stream-0.7.0.jar:?]
        at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:289) ~[?:?]
        at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754) ~[?:?]
        at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[?:?]
        at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[?:?]
        at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[?:?]
        at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[?:?]
        at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[?:?]
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/559/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/559,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Quh2A,incubator-baremaps,1354374528,559,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2022-12-16T08:21:47Z,2022-12-16T08:21:47Z,"Hello @wojiwo03, a few geometries in openstreetmap are invalid and we log the exception so they can be inspected manually. This does not stop the import, it only affects the geom column of the imported relation.

In this case geometry [#13494795](https://www.openstreetmap.org/relation/13494795) is a relation labelled as a multi-polygon. 

![Screenshot 2022-12-16 at 09 19 02](https://user-images.githubusercontent.com/238747/208054504-b89614b8-3700-401a-9676-c4f6f1304a35.png)

I suspect that the line between the two polygons should be removed to make the multipolygon valid.

As the number of invalid geometries is relatively small, we tend to ignore them until they get fixed.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Quh2A/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/559,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Q04Su,incubator-baremaps,1356039342,559,NA,wojiwo03,45283606,Jeff1125,,NA,2022-12-17T05:03:29Z,2022-12-17T05:03:29Z,"Got it, thanks for your answer.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Q04Su/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/560,https://api.github.com/repos/apache/incubator-baremaps/issues/560,incubator-baremaps,1501399431,560,Reintroduce the maputnik command,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-12-17T13:51:03Z,2023-11-20T15:34:51Z,"After look at the maputnik dependency tree, it looks like all the dependencies have an Apache compatible license. Therefore we could reintroduce the maputnik command.

```
license-checker --summary
├─ MIT: 1433
├─ ISC: 139
├─ BSD-2-Clause: 44
├─ Apache-2.0: 34
├─ BSD-3-Clause: 33
├─ MIT*: 5
├─ CC0-1.0: 5
├─ (MIT OR CC0-1.0): 5
├─ Unlicense: 3
├─ BSD: 2
├─ (MIT AND Zlib): 2
├─ Custom: https://github.com/tmcw/jsonlint: 1
├─ FreeBSD: 1
├─ BSD-3-Clause OR MIT: 1
├─ Python-2.0: 1
├─ (MIT OR Apache-2.0): 1
├─ MPL-2.0: 1
├─ CC-BY-4.0: 1
├─ BSD*: 1
├─ Custom: https://img.shields.io/badge/stability-unstable-yellow.svg: 1
├─ (BSD-3-Clause OR GPL-2.0): 1
├─ (WTFPL OR MIT): 1
├─ (MIT AND BSD-3-Clause): 1
├─ CC-BY-3.0: 1
├─ (MIT OR GPL-3.0): 1
└─ 0BSD: 1
```

Here is an updated and simpler version of the integration that does not listen for changes on the server:
https://github.com/baremaps/editor/tree/baremaps-integration
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/560/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/560,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scEWI,incubator-baremaps,1819297160,560,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-20T15:34:49Z,2023-11-20T15:34:49Z,This should be done outside of Baremaps ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scEWI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/562,https://api.github.com/repos/apache/incubator-baremaps/issues/562,incubator-baremaps,1508204929,562,Simplify the geocoder,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2022-12-22T16:48:11Z,2023-03-05T10:02:28Z,"The current design uses inheritence. The idea is to simplify this design, work with lucene abstrations, and introduce helper methods to index and query geospatial datasets.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/562/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/566,https://api.github.com/repos/apache/incubator-baremaps/issues/566,incubator-baremaps,1519183386,566,Add the extrusion example,Drabble,3996615,Antoine Drabble,,CLOSED,2023-01-04T15:38:33Z,2023-01-06T14:32:58Z,"During the creation of the website repository, the extrusion example got lost. It would be nice to put it back along with the documentation on the website.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/566/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/568,https://api.github.com/repos/apache/incubator-baremaps/issues/568,incubator-baremaps,1519208637,568,Experiment with 3d tiles,Drabble,3996615,Antoine Drabble,,OPEN,2023-01-04T15:55:57Z,2023-03-05T12:23:02Z,"We have mostly been working on the generation of Mapbox Vector Tiles from OSM data. It would be interesting to try the new 3d tiles specification.

We can use JTS to create tessellations [Delaunay Triangulation](https://locationtech.github.io/jts/javadoc/org/locationtech/jts/triangulate/DelaunayTriangulationBuilder.html).

We can use [Jgltf](https://github.com/javagl/JglTF) to generate GLTF data.

Finally we can render the 3d tiles directly with Cesium.

For anyone interested in getting started with 3d tiles and GLTF, I recommend the following links:

- Read all the 6 resources listed on this page [https://cesium.com/why-cesium/3d-tiles/](https://cesium.com/why-cesium/3d-tiles/)
- Read the reference card for GLTF here [https://github.com/KhronosGroup/glTF](https://github.com/KhronosGroup/glTF)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/568/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/571,incubator-baremaps,1534896715,571,How to use multi database,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2023-01-16T13:00:53Z,2024-04-10T11:29:52Z,"Hello. 
How would you proceed to use multiple Postgis databases? In our setup, we can have up to 3dbs.

- can baremaps studio be the solution ? 
- load multiple instances of baremaps?
- or can that be a feature // evolution ?

Thanks","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/571/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5SgYoy,incubator-baremaps,1384221234,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-16T15:33:54Z,2023-01-16T15:33:54Z,"I would say that it depends on the use case. I think you could already use baremaps with several databases when importing data (see the workflows). Given a few minor modifications, it should be possible to configure the Hikari connection pool to connect to replicas of the same database (this would be a great addition to the project). Finally, given more important modifications, it may be possible to generate vector tile layers coming from different databases. Could you provide more information about what you want to achieve?

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5SgYoy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5SjQsY,incubator-baremaps,1384975128,571,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2023-01-17T07:54:06Z,2023-01-17T07:54:06Z,"We would like to serve one or more vector tiles that can be from one or more databases

ATM we are using  :
`pathtobaremaps/baremaps/bin/baremaps map serve --database ""${JDBC_URL}"" --tileset ""${TILESET_PATH}"" --style ""${STYLE_PATH}""`

What we would like is to have one instance of baremaps severing n vector tiles from n databases.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5SjQsY/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5TR16m,incubator-baremaps,1397186214,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-19T15:44:10Z,2023-01-19T15:44:10Z,"I see, this is an interesting use case. The current architecture revolves around the cli and the idea was to start one process per service. We could evolve toward an architecture where all the services are managed by a process, but I guess that this would require to develop an admin interface to register and configure tilesets (e.g. geoserver). Do not hesitate to further describe your idea or to add exemples. I guess this is something which is difficult to get right.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5TR16m/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5TSQXI,incubator-baremaps,1397294536,571,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2023-01-19T16:51:20Z,2023-01-19T16:51:20Z,"@bchapuis 
Thanks for the feedback
I will try and send you a short document with examples, workflows and such.
Have a great evening","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5TSQXI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scDCB,incubator-baremaps,1819291777,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-20T15:31:52Z,2023-11-20T15:31:52Z,"The current configuration format for workflows allows to use databases. What is missing is the ability to create vector tiles from several databases. @julsbreakdown if this is something you need, I suggest to log another issue That describes this use case.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5scDCB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55lPxY,incubator-baremaps,2039807064,571,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2024-04-05T13:27:48Z,2024-04-05T13:27:48Z,"@bchapuis
Sorry, did not see your response..
So is it possible to have multiple tilesets on one instance?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55lPxY/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55tkpe,incubator-baremaps,2041989726,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-08T06:53:13Z,2024-04-08T06:53:13Z,"@julsbreakdown It is not possible to have multiple tilesets or multiple databases on a single instance yet. It should be straightforward to implemnet, but I'm a bit worried about having multiple connection pools in the same JVM. Have you concidered starting several processes?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55tkpe/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55tm2y,incubator-baremaps,2041998770,571,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2024-04-08T06:59:48Z,2024-04-08T06:59:48Z,"Yes we have considered it, but starting several instances of Baremaps seemed kinda of overkill. But if you think it is better of, we will probably go this way","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55tm2y/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s555IQ5,incubator-baremaps,2045019193,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-09T12:14:31Z,2024-04-09T12:14:31Z,I think we can open a new issue and discuss the feature and its implementation.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s555IQ5/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s557B-r,incubator-baremaps,2045517739,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-09T15:43:41Z,2024-04-09T15:43:41Z,"Not sure how to interpret the laugh emoji ;)

The discussion has spanned over a long period of time, and I have a limited understanding of your use case. My current impression is that you'd like to serve several tilesets, each of which may involve one or more databases and may potentially be associated with one or more stylesheets. This scenario is not as simple as it sounds, and things could go sideways. I'd love to break things down and, for instance, start by implementing multi-database support with a single tileset or multi-tileset with a single database. Does this make sense? What would be your priority.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s557B-r/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55_lak,incubator-baremaps,2046711460,571,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2024-04-10T07:25:16Z,2024-04-10T07:25:16Z,It was meant to be 'joy' !,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55_lak/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55_mdB,incubator-baremaps,2046715713,571,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2024-04-10T07:26:48Z,2024-04-10T07:26:48Z,"And yes you are correct.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s55_mdB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/571,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56BxY8,incubator-baremaps,2047284796,571,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-10T11:29:48Z,2024-04-10T11:29:48Z,"Cool, I created #845 to discuss the single tileset with multiple databases case and #846 for the ability to serve multiple tilesets.

BTW, the voting process to release apache baremaps 0.7.3-rc1 just started and you are welcome to check the release artifacts and add you vote.

https://lists.apache.org/thread/cvz3y3rqsnv37zqx8b7vo65f6lpbtjm6","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56BxY8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/572,https://api.github.com/repos/apache/incubator-baremaps/issues/572,incubator-baremaps,1558144632,572,Could not resolve type id 'DownloadUrl' as a subtype of `com.baremaps.workflow.Task`,tyrauber,109972,Ty Rauber,tyrauber@mac.com,CLOSED,2023-01-26T13:29:19Z,2023-01-26T19:17:07Z,"Hello, I am attempting to evaluate Baremaps locally on OSX. 

I installed Apache Baremaps to pwd, set the path and updated java to openjdk@17 via brew. I can build the postgis docker container and run the baremaps cli, but all the workflows fail with the same error.

> Could not resolve type id 'DownloadUrl' as a subtype of `com.baremaps.workflow.Task`

Any suggestions?  Thank you for Baremaps!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/572/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/572,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Tvzyp,incubator-baremaps,1405041833,572,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-26T13:56:36Z,2023-01-26T13:56:36Z,"Thought it might be an issue with the Java installed via brew so installed via sdkman.
```
$ which java
/Users/[username]/.sdkman/candidates/java/current/bin/java
$ java --version
openjdk 17.0.6 2023-01-17
OpenJDK Runtime Environment Temurin-17.0.6+10 (build 17.0.6+10)
OpenJDK 64-Bit Server VM Temurin-17.0.6+10 (build 17.0.6+10, mixed mode)
```

Same issue unfortunately. Here's the full trace:
```
$ baremaps workflow execute --file examples/naturalearth/workflow.json
[INFO ] 2023-01-26 09:55:40.141 [main] Execute - Executing the workflow examples/naturalearth/workflow.json
com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve type id 'DownloadUrl' as a subtype of `com.baremaps.workflow.Task`: no such class found
 at [Source: (String)""{
  ""steps"": [
    {
      ""id"": ""natural_earth_vector"",
      ""needs"": [],
      ""tasks"": [
        {
          ""type"": ""DownloadUrl"",
          ""url"": ""https://naciscdn.org/naturalearth/packages/natural_earth_vector.gpkg.zip"",
          ""path"": ""natural_earth_vector.gpkg.zip""
        },
        {
          ""type"": ""UnzipFile"",
          ""file"": ""natural_earth_vector.gpkg.zip"",
          ""directory"": ""natural_earth_vector""
        },
        {
          ""type"": ""ImportGeoPackage"",
          ""fi""[truncated 438 chars]; line: 8, column: 19] (through reference chain: com.baremaps.workflow.Workflow[""steps""]->java.util.ArrayList[0]->com.baremaps.workflow.Step[""tasks""]->java.util.ArrayList[0])
	at com.fasterxml.jackson.databind.exc.InvalidTypeIdException.from(InvalidTypeIdException.java:43)
	at com.fasterxml.jackson.databind.DeserializationContext.invalidTypeIdException(DeserializationContext.java:2073)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnknownTypeId(DeserializationContext.java:1564)
	at com.fasterxml.jackson.databind.jsontype.impl.ClassNameIdResolver._typeFromId(ClassNameIdResolver.java:76)
	at com.fasterxml.jackson.databind.jsontype.impl.ClassNameIdResolver.typeFromId(ClassNameIdResolver.java:66)
	at com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:159)
	at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:125)
	at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:110)
	at com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserializeWithType(AbstractDeserializer.java:263)
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:357)
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:542)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeWithErrorWrapping(BeanDeserializer.java:563)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:438)
	at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1405)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:351)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:184)
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:355)
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)
	at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:542)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeWithErrorWrapping(BeanDeserializer.java:563)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:438)
	at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1405)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:351)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:184)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4675)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3630)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3598)
	at com.baremaps.cli.workflow.Execute.call(Execute.java:48)
	at com.baremaps.cli.workflow.Execute.call(Execute.java:28)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
	at picocli.CommandLine.access$1300(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
	at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
	at picocli.CommandLine.execute(CommandLine.java:2078)
	at com.baremaps.cli.Baremaps.main(Baremaps.java:95)
```

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Tvzyp/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/572,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Tv02c,incubator-baremaps,1405046172,572,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-26T14:00:20Z,2023-01-26T14:00:20Z,"Hello, thank you for reporting this issue. Have you built baremaps from source or are you using the latest zip distribution? The documentation and the examples are usually tested against the main branch of Baremaps and it is possible that the name of the task (i.e DownloadUrl) changed.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Tv02c/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/572,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Tv5Rr,incubator-baremaps,1405064299,572,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-26T14:13:41Z,2023-01-26T14:13:41Z,"Hello! I downloaded and installed the cli from the latest release:
```
wget https://github.com/apache/incubator-baremaps/releases/latest/download/baremaps.zip
unzip baremaps.zip
export PATH=$PATH:`pwd`/baremaps/bin
```
And cloned the main repo for the examples. 

Is that perhaps the issue? The examples in main have diverged from the latest release?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Tv5Rr/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/572,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5TxLRy,incubator-baremaps,1405400178,572,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-26T18:09:06Z,2023-01-26T18:09:06Z,"Yes, there is probably a mismatch between the main branch and the latest release. We recently join the Apache software foundation and we are currently migrating our release process, therefore it make take some time to drop a new release.

In the mean time, you can run the following command at the root of the project to build it:

```
./mvnw clean install -DskipTests
```

You can run the following command to unzip the distribution:

```
unzip ./baremaps-cli/target/baremaps.zip
```

I hope this helps.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5TxLRy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/572,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Txf_-,incubator-baremaps,1405485054,572,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-26T19:17:07Z,2023-01-26T19:17:07Z,"That's the ticket. Thank you very much, @bchapuis. Congratulations on joining the Apache software foundation!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Txf_-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/573,incubator-baremaps,1561066860,573,OpenStreetMap example produces `syntax error`,tyrauber,109972,Ty Rauber,tyrauber@mac.com,CLOSED,2023-01-29T00:34:31Z,2023-04-25T11:59:50Z,"Hello, Using the baremaps postgis docker container and importing the openstreet map example workflow, I am getting the following error from the tile server when running serving tiles.

```
[ERROR] 2023-01-28 20:29:21.942 [servicetalk-global-executor-1-6] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244) ~[postgresql-42.5.0.jar:42.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:108) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	... 50 more
[ERROR] 2023-01-28 20:29:21.942 [servicetalk-global-executor-1-5] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244) ~[postgresql-42.5.0.jar:42.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:108) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	... 50 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/573/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5tRH,incubator-baremaps,1407636551,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T11:25:41Z,2023-01-29T11:25:41Z,"Could you tell me which example you are trying to run and if you are referring to the baremaps/baremaps image on docker hub? I will try to reproduce the error.

As our release process is being migrated, I guess that for now the best approach is to build baremaps from sources. The next docker image will probably be published in the apache/baremaps docker hub, but we are not yet familiar with the process.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5tRH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5vj1,incubator-baremaps,1407645941,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T12:09:46Z,2023-01-29T12:09:46Z,"Hi @bchapuis, yeah, no problem. So as suggested, I cloned the repo, `apache/incubator-baremaps` and [built from source as detailed in this comment](https://github.com/apache/incubator-baremaps/issues/572#issuecomment-1405400178).  I tried using both my local postgres instance with a db configured with the [various extensions](https://github.com/baremaps/docker-postgis/blob/master/initdb-postgis.sh#L17-L21), and the baremaps/baremaps image on docker.  I was able to run through the various workflows - naturalearth, openstreetmap, contour - and was able to serve the naturalearth and contour examples, but the openstreetmap example threw the above mentioned error.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5vj1/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5xBq,incubator-baremaps,1407651946,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T12:35:08Z,2023-01-29T12:35:08Z,"Thanks you for the clarification. I tried the following to reproduce the error (main branch built from source):

```
cd examples/openstreetmap
```

Started a postgis docker image (this image is optimized for the new macOS processors):

```
docker run \
  --name baremaps \
  --publish 5432:5432 \
  -e POSTGRES_DB=baremaps \
  -e POSTGRES_USER=baremaps \
  -e POSTGRES_PASSWORD=baremaps \
  -d ghcr.io/baosystems/postgis:latest
```

Executed the workflow:

```
baremaps workflow execute --file workflow.json

[INFO ] 2023-01-29 13:20:18.465 [main] Execute - Executing the workflow workflow.json
[INFO ] 2023-01-29 13:20:18.599 [pool-2-thread-1] DownloadUrl - Downloading https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf to liechtenstein-latest.osm.pbf
[INFO ] 2023-01-29 13:20:18.942 [pool-2-thread-1] DownloadUrl - Skipping download of https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf to liechtenstein-latest.osm.pbf
[INFO ] 2023-01-29 13:20:18.942 [pool-2-thread-2] ImportOpenStreetMap - Importing liechtenstein-latest.osm.pbf into jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps
[INFO ] 2023-01-29 13:20:18.947 [pool-2-thread-2] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-01-29 13:20:19.052 [pool-2-thread-2] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@27e129cf
[INFO ] 2023-01-29 13:20:19.052 [pool-2-thread-2] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-01-29 13:20:21.563 [pool-2-thread-2] ImportOpenStreetMap - Finished importing liechtenstein-latest.osm.pbf into jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps
[INFO ] 2023-01-29 13:20:21.563 [pool-2-thread-3] ExecuteSql - Executing indexes.sql
[INFO ] 2023-01-29 13:20:22.424 [pool-2-thread-3] ExecuteSql - Finished executing indexes.sql
[INFO ] 2023-01-29 13:20:22.425 [main] Execute - Finished executing the workflow workflow.json
```

Started the server:

```
baremaps map dev \
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --style 'style.json'
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --style 'style.json'

[INFO ] 2023-01-29 13:20:28.178 [main] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-01-29 13:20:28.319 [main] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@615f972
[INFO ] 2023-01-29 13:20:28.320 [main] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-01-29 13:20:29.015 [main] Dev - Listening on /[0:0:0:0:0:0:0:0%0]:9000
```

Displayed the result in the browser: 

![Screenshot 2023-01-29 at 13 22 39](https://user-images.githubusercontent.com/238747/215326418-f88f4af0-b9cd-4da6-afb1-4f08489efb81.png)

![Screenshot 2023-01-29 at 13 22 32](https://user-images.githubusercontent.com/238747/215326407-d44efd72-5777-4675-9a00-46d47a8c74a7.png)


I guess we must have some issues in the documentation, but I havn't been able to spot them. Could you check these steps and let me know I they are reproducible! It would also be great if take this as an opportunity to improve the documentation.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5xBq/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T53MV,incubator-baremaps,1407677205,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T14:22:40Z,2023-01-29T14:22:40Z,"@bchapuis, thank you, `baosystems/postgis` does seem to perform better on my m1 macbook air, and I am now rendering map tiles! 


I am still seeing the errors in the console logs.
```
[ERROR] 2023-01-29 10:15:20.101 [servicetalk-global-executor-1-3] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
```
And in the postgres logs:

```
2023-01-29 14:15:20.094 UTC [89] ERROR:  syntax error at end of input at character 7
2023-01-29 14:15:20.094 UTC [89] STATEMENT:  with  
2023-01-29 14:15:20.094 UTC [87] ERROR:  syntax error at end of input at character 7
2023-01-29 14:15:20.094 UTC [87] STATEMENT:  with  
2023-01-29 14:15:20.094 UTC [86] ERROR:  syntax error at end of input at character 7
2023-01-29 14:15:20.094 UTC [86] STATEMENT:  with  
2023-01-29 14:19:06.779 UTC [69] LOG:  checkpoint starting: time
```
But I am scrolling outside the import zone. Perhaps the errors are related to trying to render tiles that haven't been imported?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T53MV/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T53yN,incubator-baremaps,1407679629,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T14:32:24Z,2023-01-29T14:32:24Z,"The log indicates clearly that there is an error in the SQL generated by baremaps. Unfortunately, I tried to display areas without data, but the `syntax error` does not show up, I'm not sure where the problem comes from and how to reproduce it.

Could you try to add the `--log-level DEBUG` flag to the command? This will print the SQL queries generated by baremaps in the console. 

```
baremaps map dev --log-level DEBUG \
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --style 'style.json'
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --style 'style.json'
```

If you could share the query printed immediately before the exception, it would be of great help to spot and debug the issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T53yN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T54j3,incubator-baremaps,1407682807,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T14:44:53Z,2023-01-29T14:44:53Z,"Absolutely! Happy to help. (Although, I suspect this is just a resource issue on my m1 laptop.)

Here is the full trace (in parts). I start the server, open localhost:9000, and allow it to render the initial map. I then toggle on the tile boundaries, and then the map style. I then zoom out a few times and the screen goes white.

```
$ baremaps map dev --log-level DEBUG   --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps'   --tileset 'tileset.json'   --style 'style.json'
[DEBUG] 2023-01-29 10:38:36.282 [main] HikariConfig - HikariPool-1 - configuration:
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - allowPoolSuspension.............false
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - autoCommit......................true
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - catalog.........................none
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - connectionInitSql...............none
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - connectionTestQuery.............none
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - connectionTimeout...............30000
[DEBUG] 2023-01-29 10:38:36.285 [main] HikariConfig - dataSource......................none
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - dataSourceClassName.............none
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - dataSourceJNDI..................none
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - dataSourceProperties............{password=<masked>}
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - driverClassName.................none
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - exceptionOverrideClassName......none
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - healthCheckProperties...........{}
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - healthCheckRegistry.............none
[DEBUG] 2023-01-29 10:38:36.286 [main] HikariConfig - idleTimeout.....................600000
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - initializationFailTimeout.......1
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - isolateInternalQueries..........false
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - jdbcUrl.........................jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=<masked>
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - keepaliveTime...................0
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - leakDetectionThreshold..........0
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - maxLifetime.....................1800000
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - maximumPoolSize.................8
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - metricRegistry..................none
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - metricsTrackerFactory...........none
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - minimumIdle.....................8
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - password........................<masked>
[DEBUG] 2023-01-29 10:38:36.287 [main] HikariConfig - poolName........................""HikariPool-1""
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - readOnly........................false
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - registerMbeans..................false
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - scheduledExecutor...............none
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - schema..........................none
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - threadFactory...................internal
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - transactionIsolation............default
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - username........................none
[DEBUG] 2023-01-29 10:38:36.288 [main] HikariConfig - validationTimeout...............5000
[INFO ] 2023-01-29 10:38:36.288 [main] HikariDataSource - HikariPool-1 - Starting...
[DEBUG] 2023-01-29 10:38:36.296 [main] DriverDataSource - Loaded driver with class name org.postgresql.Driver for jdbcUrl=jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=<masked>
[INFO ] 2023-01-29 10:38:36.408 [main] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6cc0bcf6
[INFO ] 2023-01-29 10:38:36.409 [main] HikariDataSource - HikariPool-1 - Start completed.
[DEBUG] 2023-01-29 10:38:36.514 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=1, active=0, idle=1, waiting=0)
[DEBUG] 2023-01-29 10:38:36.540 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2095e335
[DEBUG] 2023-01-29 10:38:36.573 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6f6f036c
[DEBUG] 2023-01-29 10:38:36.602 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1823f828
[DEBUG] 2023-01-29 10:38:36.635 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@f40fc23
[DEBUG] 2023-01-29 10:38:36.664 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@9e57f05
[DEBUG] 2023-01-29 10:38:36.698 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4420871
[DEBUG] 2023-01-29 10:38:36.727 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3275269
[DEBUG] 2023-01-29 10:38:36.740 [HikariPool-1 connection adder] HikariPool - HikariPool-1 - After adding stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:38:36.744 [main] HttpServers - Registered 0 HttpServerBuilderProvider(s): []
[DEBUG] 2023-01-29 10:38:36.751 [main] DefaultHttpServerBuilder - BlockingStreamingHttpService 'io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService@75b6dd5b' requires OFFLOAD_RECEIVE_META_STRATEGY strategy.
[DEBUG] 2023-01-29 10:38:36.764 [main] InternalLoggerFactory - Using SLF4J as the default logging framework
[DEBUG] 2023-01-29 10:38:36.765 [main] PlatformDependent0 - -Dio.netty.noUnsafe: false
[DEBUG] 2023-01-29 10:38:36.765 [main] PlatformDependent0 - Java version: 17
[DEBUG] 2023-01-29 10:38:36.766 [main] PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available
[DEBUG] 2023-01-29 10:38:36.766 [main] PlatformDependent0 - sun.misc.Unsafe.copyMemory: available
[DEBUG] 2023-01-29 10:38:36.766 [main] PlatformDependent0 - sun.misc.Unsafe.storeFence: available
[DEBUG] 2023-01-29 10:38:36.766 [main] PlatformDependent0 - java.nio.Buffer.address: available
[DEBUG] 2023-01-29 10:38:36.767 [main] PlatformDependent0 - direct buffer constructor: unavailable: Reflective setAccessible(true) disabled
[DEBUG] 2023-01-29 10:38:36.767 [main] PlatformDependent0 - java.nio.Bits.unaligned: available, true
[DEBUG] 2023-01-29 10:38:36.767 [main] PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable: class io.netty.util.internal.PlatformDependent0$7 cannot access class jdk.internal.misc.Unsafe (in module java.base) because module java.base does not export jdk.internal.misc to unnamed module @2e1d27ba
[DEBUG] 2023-01-29 10:38:36.768 [main] PlatformDependent0 - java.nio.DirectByteBuffer.<init>(long, int): unavailable
[DEBUG] 2023-01-29 10:38:36.768 [main] PlatformDependent - sun.misc.Unsafe: available
[DEBUG] 2023-01-29 10:38:36.768 [main] PlatformDependent - maxDirectMemory: 4294967296 bytes (maybe)
[DEBUG] 2023-01-29 10:38:36.768 [main] PlatformDependent - -Dio.netty.tmpdir: /var/folders/8f/fkvj5sln16sf4k_hzlm8r9400000gn/T (java.io.tmpdir)
[DEBUG] 2023-01-29 10:38:36.768 [main] PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)
[DEBUG] 2023-01-29 10:38:36.768 [main] PlatformDependent - Platform: MacOS
[DEBUG] 2023-01-29 10:38:36.769 [main] PlatformDependent - -Dio.netty.maxDirectMemory: -1 bytes
[DEBUG] 2023-01-29 10:38:36.769 [main] PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1
[DEBUG] 2023-01-29 10:38:36.769 [main] CleanerJava9 - java.nio.ByteBuffer.cleaner(): available
[DEBUG] 2023-01-29 10:38:36.769 [main] PlatformDependent - -Dio.netty.noPreferDirect: false
[DEBUG] 2023-01-29 10:38:36.772 [main] NativeLibraryLoader - -Dio.netty.native.workdir: /var/folders/8f/fkvj5sln16sf4k_hzlm8r9400000gn/T (io.netty.tmpdir)
[DEBUG] 2023-01-29 10:38:36.772 [main] NativeLibraryLoader - -Dio.netty.native.deleteLibAfterLoading: true
[DEBUG] 2023-01-29 10:38:36.772 [main] NativeLibraryLoader - -Dio.netty.native.tryPatchShadedId: true
[DEBUG] 2023-01-29 10:38:36.772 [main] NativeLibraryLoader - -Dio.netty.native.detectNativeLibraryDuplicates: true
[DEBUG] 2023-01-29 10:38:37.019 [main] NativeLibraryLoader - Successfully loaded the library /var/folders/8f/fkvj5sln16sf4k_hzlm8r9400000gn/T/libnetty_transport_native_kqueue_aarch_6410623207264196400333.dylib
[DEBUG] 2023-01-29 10:38:37.025 [main] NetUtil - -Djava.net.preferIPv4Stack: false
[DEBUG] 2023-01-29 10:38:37.025 [main] NetUtil - -Djava.net.preferIPv6Addresses: false
[DEBUG] 2023-01-29 10:38:37.034 [main] NetUtilInitializations - Loopback interface: lo0 (lo0, 0:0:0:0:0:0:0:1%lo0)
[DEBUG] 2023-01-29 10:38:37.035 [main] NetUtil - Failed to get SOMAXCONN from sysctl and file /proc/sys/net/core/somaxconn. Default: 128
[DEBUG] 2023-01-29 10:38:37.039 [main] MultithreadEventLoopGroup - -Dio.netty.eventLoopThreads: 16
[DEBUG] 2023-01-29 10:38:37.050 [main] InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024
[DEBUG] 2023-01-29 10:38:37.050 [main] InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096
[DEBUG] 2023-01-29 10:38:37.065 [main] PlatformDependent - org.jctools-core.MpscChunkedArrayQueue: available
[DEBUG] 2023-01-29 10:38:37.077 [main] ResourceLeakDetector - -Dio.netty.leakDetection.level: simple
[DEBUG] 2023-01-29 10:38:37.078 [main] ResourceLeakDetector - -Dio.netty.leakDetection.targetRecords: 4
[DEBUG] 2023-01-29 10:38:37.081 [main] AbstractByteBuf - -Dio.netty.buffer.checkAccessible: true
[DEBUG] 2023-01-29 10:38:37.081 [main] AbstractByteBuf - -Dio.netty.buffer.checkBounds: true
[DEBUG] 2023-01-29 10:38:37.082 [main] ResourceLeakDetectorFactory - Loaded default ResourceLeakDetector: io.netty.util.ResourceLeakDetector@53d2d002
[DEBUG] 2023-01-29 10:38:37.084 [main] NettyIoExecutors - Created KQueueEventLoopGroup for 16 threads using NettyIoThreadFactory{namePrefix='servicetalk-global-io-executor-1-', daemon=true, threadGroup=java.lang.ThreadGroup[name=main,maxpri=10], threadCount=0}.
[DEBUG] 2023-01-29 10:38:37.087 [main] AsyncContext - Enabled.
[DEBUG] 2023-01-29 10:38:37.092 [main] ReflectionUtils - Java version: 17
[DEBUG] 2023-01-29 10:38:37.092 [main] PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available
[DEBUG] 2023-01-29 10:38:37.093 [main] PlatformDependent0 - sun.misc.Unsafe#throwException(Throwable): available
[DEBUG] 2023-01-29 10:38:37.093 [main] PlatformDependent0 - sun.misc.Unsafe#allocateMemory(long): available
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - sun.misc.Unsafe#freeMemory(long): available
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - sun.misc.Unsafe: available
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - java.nio.DirectByteBuffer.<init>(int, long, FileDescriptor, Runnable): unavailable
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - java.nio.DirectByteBuffer$Deallocator.<init>(long, long, int): unavailable
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - java.nio.Bits.reserveMemory(long, int): unavailable
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - java.nio.Bits.unreserveMemory(long, int): unavailable
[DEBUG] 2023-01-29 10:38:37.094 [main] PlatformDependent0 - Allocation of DirectByteBuffer without zeroing memory: unavailable
[DEBUG] 2023-01-29 10:38:37.095 [main] GlobalExecutionContext - Initialized GlobalExecutionContext
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.numHeapArenas: 16
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.numDirectArenas: 16
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.pageSize: 8192
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.maxOrder: 9
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.chunkSize: 4194304
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.smallCacheSize: 256
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.normalCacheSize: 64
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.maxCachedBufferCapacity: 32768
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.cacheTrimInterval: 8192
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.cacheTrimIntervalMillis: 0
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.useCacheForAllThreads: false
[DEBUG] 2023-01-29 10:38:37.108 [main] PooledByteBufAllocator - -Dio.netty.allocator.maxCachedByteBuffersPerChunk: 1023
[DEBUG] 2023-01-29 10:38:37.123 [main] DefaultChannelId - -Dio.netty.processId: 19814 (auto-detected)
[DEBUG] 2023-01-29 10:38:37.125 [main] DefaultChannelId - -Dio.netty.machineId: 3c:a6:f6:ff:fe:3c:66:7c (auto-detected)
[DEBUG] 2023-01-29 10:38:37.132 [main] ByteBufUtil - -Dio.netty.allocator.type: pooled
[DEBUG] 2023-01-29 10:38:37.132 [main] ByteBufUtil - -Dio.netty.threadLocalDirectBufferSize: 0
[DEBUG] 2023-01-29 10:38:37.132 [main] ByteBufUtil - -Dio.netty.maxThreadLocalCharBufferSize: 16384
[DEBUG] 2023-01-29 10:38:37.140 [servicetalk-global-io-executor-1-1] NettyHttpServer - Started HTTP/1.1 server for address /[0:0:0:0:0:0:0:0%0]:9000.
[DEBUG] 2023-01-29 10:38:37.141 [servicetalk-global-io-executor-1-1] DefaultHttpServerBuilder - Server for address /[0:0:0:0:0:0:0:0%0]:9000 created with the builder strategy DEFAULT_HTTP_EXECUTION_STRATEGY, resulting computed strategy is OFFLOAD_RECEIVE_META_STRATEGY.
[INFO ] 2023-01-29 10:38:37.141 [main] Dev - Listening on /[0:0:0:0:0:0:0:0%0]:9000
[DEBUG] 2023-01-29 10:38:38.733 [servicetalk-global-io-executor-1-2] CloseHandler - io.servicetalk.transport.netty.internal.CloseHandler.LogLevel=null
[DEBUG] 2023-01-29 10:38:38.777 [servicetalk-global-io-executor-1-2] HttpDebugUtils - [id: 0xfc5b86ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50435] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:38.786 [servicetalk-global-io-executor-1-2] Recycler - -Dio.netty.recycler.maxCapacityPerThread: 4096
[DEBUG] 2023-01-29 10:38:38.787 [servicetalk-global-io-executor-1-2] Recycler - -Dio.netty.recycler.ratio: 8
[DEBUG] 2023-01-29 10:38:38.787 [servicetalk-global-io-executor-1-2] Recycler - -Dio.netty.recycler.chunkSize: 32
[DEBUG] 2023-01-29 10:38:38.787 [servicetalk-global-io-executor-1-2] Recycler - -Dio.netty.recycler.blocking: false
[DEBUG] 2023-01-29 10:38:38.808 [servicetalk-global-io-executor-1-2] DefaultNettyConnection - [id: 0xfc5b86ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50435] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.006 [servicetalk-global-io-executor-1-3] HttpDebugUtils - [id: 0x6e7feac4, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50449] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:41.010 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0x6e7feac4, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50449] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.027 [servicetalk-global-io-executor-1-2] DefaultNettyConnection - [id: 0xfc5b86ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50435] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:38:41.030 [servicetalk-global-io-executor-1-2] DefaultNettyConnection - [id: 0xfc5b86ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50435] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:38:41.030 [servicetalk-global-io-executor-1-2] DefaultNettyConnection - [id: 0xfc5b86ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50435] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:38:41.046 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0x6e7feac4, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50449] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.048 [servicetalk-global-io-executor-1-4] HttpDebugUtils - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:41.050 [servicetalk-global-io-executor-1-5] HttpDebugUtils - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:41.053 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.053 [servicetalk-global-io-executor-1-6] HttpDebugUtils - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:41.053 [servicetalk-global-io-executor-1-4] DefaultNettyConnection - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.055 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.084 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.106 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0x6e7feac4, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50449] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.155 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.175 [servicetalk-global-io-executor-1-4] DefaultNettyConnection - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.174 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.175 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.176 [servicetalk-global-io-executor-1-7] HttpDebugUtils - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:41.176 [servicetalk-global-io-executor-1-8] HttpDebugUtils - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:41.178 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:41.178 [servicetalk-global-io-executor-1-8] DefaultNettyConnection - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
```

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T54j3/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T54yB,incubator-baremaps,1407683713,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T14:49:10Z,2023-01-29T14:49:10Z,"And a series of huge queries.
```
[DEBUG] 2023-01-29 10:38:41.434 [servicetalk-global-executor-1-4] PostgresTileStore - Executing query: with hfabbbbce as (select * from osm_nodes where ((tags ? 'aeroway') OR (tags ? 'waterway') OR (tags ? 'landuse') OR (tags ? 'railway') OR (tags ? 'highway') OR (tags ? 'public_transport') OR (tags ? 'aerialway') OR (tags ? 'geological') OR (tags ? 'building') OR (tags ? 'amenity') OR (tags ? 'craft') OR (tags ? 'emergency') OR (tags ? 'historic') OR (tags ? 'leisure') OR (tags ? 'man_made') OR (tags ? 'military') OR (tags ? 'natural') OR (tags ? 'office') OR (tags ? 'place') OR (tags ? 'power') OR (tags ? 'route') OR (tags ? 'shop') OR (tags ? 'sport') OR (tags ? 'telecom') OR (tags ? 'tourism')) and st_intersects(geom, st_tileenvelope(14, 8626, 5752))), hf88736cf as (select * from osm_ways where ((tags ? 'aeroway') OR (tags ? 'waterway') OR (tags ? 'landuse') OR (tags ? 'railway') OR (tags ? 'highway') OR (tags ? 'public_transport') OR (tags ? 'aerialway') OR (tags ? 'geological') OR (tags ? 'building') OR (tags ? 'amenity') OR (tags ? 'craft') OR (tags ? 'emergency') OR (tags ? 'historic') OR (tags ? 'leisure') OR (tags ? 'man_made') OR (tags ? 'military') OR (tags ? 'natural') OR (tags ? 'office') OR (tags ? 'place') OR (tags ? 'power') OR (tags ? 'route') OR (tags ? 'shop') OR (tags ? 'sport') OR (tags ? 'telecom') OR (tags ? 'tourism')) and st_intersects(geom, st_tileenvelope(14, 8626, 5752))), h633b0648 as (select * from osm_relations where ((tags ? 'aeroway' AND tags->>'type' = 'multipolygon') OR (tags ? 'waterway' AND tags->>'type' = 'multipolygon') OR (tags ? 'landuse' AND tags->>'type' = 'multipolygon') OR (tags ? 'railway' AND tags->>'type' = 'multipolygon') OR (tags ? 'highway' AND tags->>'type' = 'multipolygon') OR (tags ? 'public_transport' AND tags->>'type' = 'multipolygon') OR (tags ? 'aerialway' AND tags->>'type' = 'multipolygon') OR (tags ? 'geological' AND tags->>'type' = 'multipolygon') OR (tags ? 'building' AND tags->>'type' = 'multipolygon') OR (tags ? 'amenity' AND tags->>'type' = 'multipolygon') OR (tags ? 'craft' AND tags->>'type' = 'multipolygon') OR (tags ? 'emergency' AND tags->>'type' = 'multipolygon') OR (tags ? 'historic' AND tags->>'type' = 'multipolygon') OR (tags ? 'leisure' AND tags->>'type' = 'multipolygon') OR (tags ? 'man_made' AND tags->>'type' = 'multipolygon') OR (tags ? 'military' AND tags->>'type' = 'multipolygon') OR (tags ? 'natural' AND tags->>'type' = 'multipolygon') OR (tags ? 'office' AND tags->>'type' = 'multipolygon') OR (tags ? 'place' AND tags->>'type' = 'multipolygon') OR (tags ? 'power' AND tags->>'type' = 'multipolygon') OR (tags ? 'route' AND tags->>'type' = 'multipolygon') OR (tags ? 'shop' AND tags->>'type' = 'multipolygon') OR (tags ? 'sport' AND tags->>'type' = 'multipolygon') OR (tags ? 'telecom' AND tags->>'type' = 'multipolygon') OR (tags ? 'tourism' AND tags->>'type' = 'multipolygon')) and st_intersects(geom, st_tileenvelope(14, 8626, 5752))) select st_asmvt(target, 'aeroway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'aeroway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'aeroway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'aeroway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'waterway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'waterway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'waterway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'waterway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'landuse', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'landuse' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'landuse' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'landuse' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'railway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'railway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'railway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'railway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'highway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'highway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'highway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'highway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'public_transport', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'public_transport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'public_transport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'public_transport' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'aerialway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'aerialway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'aerialway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'aerialway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'geological', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'geological' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'geological' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'geological' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'building', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'building' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'building' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'building' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'amenity', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'amenity' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'amenity' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'amenity' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'craft', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'craft' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'craft' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'craft' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'emergency', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'emergency' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'emergency' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'emergency' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'historic', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'historic' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'historic' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'historic' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'leisure', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'leisure' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'leisure' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'leisure' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'man_made', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'man_made' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'man_made' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'man_made' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'military', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'military' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'military' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'military' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'natural', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'natural' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'natural' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'natural' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'office', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'office' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'office' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'office' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'place', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'place' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'place' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'place' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'power', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'power' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'power' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'power' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'route', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'route' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'route' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'route' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'shop', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'shop' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'shop' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'shop' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'sport', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'sport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'sport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'sport' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'telecom', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'telecom' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'telecom' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'telecom' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'tourism', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hfabbbbce where tags ? 'tourism' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from hf88736cf where tags ? 'tourism' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5752), 4096, 256, true) as geom from h633b0648 where tags ? 'tourism' AND tags->>'type' = 'multipolygon') as target
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T54yB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T54zl,incubator-baremaps,1407683813,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T14:49:45Z,2023-01-29T14:49:45Z,"Many queries to osm_nodes, like so:
```
[DEBUG] 2023-01-29 10:38:41.438 [servicetalk-global-executor-1-2] PostgresTileStore - Executing query: with hfabbbbce as (select * from osm_nodes where ((tags ? 'aeroway') OR (tags ? 'waterway') OR (tags ? 'landuse') OR (tags ? 'railway') OR (tags ? 'highway') OR (tags ? 'public_transport') OR (tags ? 'aerialway') OR (tags ? 'geological') OR (tags ? 'building') OR (tags ? 'amenity') OR (tags ? 'craft') OR (tags ? 'emergency') OR (tags ? 'historic') OR (tags ? 'leisure') OR (tags ? 'man_made') OR (tags ? 'military') OR (tags ? 'natural') OR (tags ? 'office') OR (tags ? 'place') OR (tags ? 'power') OR (tags ? 'route') OR (tags ? 'shop') OR (tags ? 'sport') OR (tags ? 'telecom') OR (tags ? 'tourism')) and st_intersects(geom, st_tileenvelope(14, 8626, 5751))), hf88736cf as (select * from osm_ways where ((tags ? 'aeroway') OR (tags ? 'waterway') OR (tags ? 'landuse') OR (tags ? 'railway') OR (tags ? 'highway') OR (tags ? 'public_transport') OR (tags ? 'aerialway') OR (tags ? 'geological') OR (tags ? 'building') OR (tags ? 'amenity') OR (tags ? 'craft') OR (tags ? 'emergency') OR (tags ? 'historic') OR (tags ? 'leisure') OR (tags ? 'man_made') OR (tags ? 'military') OR (tags ? 'natural') OR (tags ? 'office') OR (tags ? 'place') OR (tags ? 'power') OR (tags ? 'route') OR (tags ? 'shop') OR (tags ? 'sport') OR (tags ? 'telecom') OR (tags ? 'tourism')) and st_intersects(geom, st_tileenvelope(14, 8626, 5751))), h633b0648 as (select * from osm_relations where ((tags ? 'aeroway' AND tags->>'type' = 'multipolygon') OR (tags ? 'waterway' AND tags->>'type' = 'multipolygon') OR (tags ? 'landuse' AND tags->>'type' = 'multipolygon') OR (tags ? 'railway' AND tags->>'type' = 'multipolygon') OR (tags ? 'highway' AND tags->>'type' = 'multipolygon') OR (tags ? 'public_transport' AND tags->>'type' = 'multipolygon') OR (tags ? 'aerialway' AND tags->>'type' = 'multipolygon') OR (tags ? 'geological' AND tags->>'type' = 'multipolygon') OR (tags ? 'building' AND tags->>'type' = 'multipolygon') OR (tags ? 'amenity' AND tags->>'type' = 'multipolygon') OR (tags ? 'craft' AND tags->>'type' = 'multipolygon') OR (tags ? 'emergency' AND tags->>'type' = 'multipolygon') OR (tags ? 'historic' AND tags->>'type' = 'multipolygon') OR (tags ? 'leisure' AND tags->>'type' = 'multipolygon') OR (tags ? 'man_made' AND tags->>'type' = 'multipolygon') OR (tags ? 'military' AND tags->>'type' = 'multipolygon') OR (tags ? 'natural' AND tags->>'type' = 'multipolygon') OR (tags ? 'office' AND tags->>'type' = 'multipolygon') OR (tags ? 'place' AND tags->>'type' = 'multipolygon') OR (tags ? 'power' AND tags->>'type' = 'multipolygon') OR (tags ? 'route' AND tags->>'type' = 'multipolygon') OR (tags ? 'shop' AND tags->>'type' = 'multipolygon') OR (tags ? 'sport' AND tags->>'type' = 'multipolygon') OR (tags ? 'telecom' AND tags->>'type' = 'multipolygon') OR (tags ? 'tourism' AND tags->>'type' = 'multipolygon')) and st_intersects(geom, st_tileenvelope(14, 8626, 5751))) select st_asmvt(target, 'aeroway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'aeroway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'aeroway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'aeroway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'waterway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'waterway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'waterway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'waterway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'landuse', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'landuse' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'landuse' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'landuse' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'railway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'railway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'railway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'railway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'highway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'highway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'highway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'highway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'public_transport', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'public_transport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'public_transport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'public_transport' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'aerialway', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'aerialway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'aerialway' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'aerialway' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'geological', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'geological' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'geological' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'geological' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'building', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'building' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'building' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'building' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'amenity', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'amenity' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'amenity' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'amenity' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'craft', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'craft' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'craft' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'craft' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'emergency', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'emergency' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'emergency' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'emergency' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'historic', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'historic' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'historic' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'historic' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'leisure', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'leisure' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'leisure' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'leisure' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'man_made', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'man_made' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'man_made' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'man_made' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'military', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'military' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'military' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'military' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'natural', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'natural' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'natural' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'natural' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'office', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'office' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'office' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'office' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'place', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'place' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'place' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'place' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'power', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'power' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'power' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'power' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'route', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'route' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'route' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'route' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'shop', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'shop' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'shop' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'shop' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'sport', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'sport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'sport' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'sport' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'telecom', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'telecom' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'telecom' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'telecom' AND tags->>'type' = 'multipolygon') as target union all select st_asmvt(target, 'tourism', 4096, 'geom', 'id') from (select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hfabbbbce where tags ? 'tourism' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from hf88736cf where tags ? 'tourism' union all select id as id, (tags ||  jsonb_build_object('geometry', lower(replace(st_geometrytype(geom), 'ST_', '')))) as tags, st_asmvtgeom(geom, st_tileenvelope(14, 8626, 5751), 4096, 256, true) as geom from h633b0648 where tags ? 'tourism' AND tags->>'type' = 'multipolygon') as target
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T54zl/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5434,incubator-baremaps,1407684088,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T14:50:58Z,2023-01-29T14:50:58Z,"And then crash:
```
[DEBUG] 2023-01-29 10:38:54.864 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:38:54.864 [servicetalk-global-io-executor-1-4] DefaultNettyConnection - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:38:54.864 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:38:54.864 [servicetalk-global-io-executor-1-4] DefaultNettyConnection - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:38:54.865 [servicetalk-global-io-executor-1-4] DefaultNettyConnection - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:38:54.865 [servicetalk-global-io-executor-1-8] DefaultNettyConnection - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:54.864 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:38:54.865 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:54.864 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:54.869 [servicetalk-global-io-executor-1-9] HttpDebugUtils - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50513] HTTP/1.1 pipeline initialized: TcpServerBinder$2#0, CopyByteBufHandlerChannelInitializer$CopyByteBufHandler#0, HttpRequestDecoder#0, HttpResponseEncoder#0, DefaultNettyConnection$NettyToStChannelInboundHandler#0, DefaultChannelPipeline$TailContext#0
[DEBUG] 2023-01-29 10:38:54.871 [servicetalk-global-executor-1-7] PostgresTileStore - Executing query: with  
[DEBUG] 2023-01-29 10:38:54.871 [servicetalk-global-executor-1-4] PostgresTileStore - Executing query: with  
[DEBUG] 2023-01-29 10:38:54.871 [servicetalk-global-executor-1-6] PostgresTileStore - Executing query: with  
[DEBUG] 2023-01-29 10:38:54.873 [servicetalk-global-io-executor-1-9] DefaultNettyConnection - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50513] Received a user event: io.servicetalk.transport.netty.internal.CloseHandler$InboundDataEndEvent
[DEBUG] 2023-01-29 10:38:54.876 [servicetalk-global-executor-1-8] PostgresTileStore - Executing query: with  
[ERROR] 2023-01-29 10:38:54.876 [servicetalk-global-executor-1-4] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
	at jdk.internal.reflect.GeneratedMethodAccessor23.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244) ~[postgresql-42.5.0.jar:42.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:108) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	... 49 more
[ERROR] 2023-01-29 10:38:54.877 [servicetalk-global-executor-1-8] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
	at jdk.internal.reflect.GeneratedMethodAccessor23.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244) ~[postgresql-42.5.0.jar:42.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:108) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	... 49 more
[ERROR] 2023-01-29 10:38:54.876 [servicetalk-global-executor-1-7] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
	at jdk.internal.reflect.GeneratedMethodAccessor23.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244) ~[postgresql-42.5.0.jar:42.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:108) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	... 49 more
[ERROR] 2023-01-29 10:38:54.876 [servicetalk-global-executor-1-6] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.1-SNAPSHOT.jar:?]
	at jdk.internal.reflect.GeneratedMethodAccessor23.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:333) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:319) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:295) ~[postgresql-42.5.0.jar:42.5.0]
	at org.postgresql.jdbc.PgStatement.executeQuery(PgStatement.java:244) ~[postgresql-42.5.0.jar:42.5.0]
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:108) ~[baremaps-core-0.7.1-SNAPSHOT.jar:?]
	... 49 more
[DEBUG] 2023-01-29 10:38:56.537 [servicetalk-global-io-executor-1-6] DefaultNettyConnection - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Received a user event: io.netty.channel.socket.ChannelOutputShutdownEvent@5b46e327
[DEBUG] 2023-01-29 10:38:56.537 [servicetalk-global-io-executor-1-6] RequestResponseCloseHandler - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50452] Closing channel – evt: CHANNEL_CLOSED_OUTBOUND
[DEBUG] 2023-01-29 10:38:56.538 [servicetalk-global-io-executor-1-6] WriteStreamSubscriber - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50452] Terminate subscriber with an error, state: 1100
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-01-29 10:38:56.540 [servicetalk-global-io-executor-1-6] NettyHttpServer$ErrorLoggingHttpSubscriber - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50452] Unexpected error received, closing HTTP/1.1 connection due to:
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-01-29 10:38:56.542 [servicetalk-global-io-executor-1-6] NettyChannelPublisher - [id: 0xad47ef18, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50452] Cancelling subscription
[DEBUG] 2023-01-29 10:38:56.552 [servicetalk-global-io-executor-1-4] DefaultNettyConnection - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Received a user event: io.netty.channel.socket.ChannelOutputShutdownEvent@5b46e327
[DEBUG] 2023-01-29 10:38:56.552 [servicetalk-global-io-executor-1-4] RequestResponseCloseHandler - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50450] Closing channel – evt: CHANNEL_CLOSED_OUTBOUND
[DEBUG] 2023-01-29 10:38:56.552 [servicetalk-global-io-executor-1-4] WriteStreamSubscriber - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50450] Terminate subscriber with an error, state: 1100
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-01-29 10:38:56.553 [servicetalk-global-io-executor-1-4] NettyHttpServer$ErrorLoggingHttpSubscriber - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50450] Unexpected error received, closing HTTP/1.1 connection due to:
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-01-29 10:38:56.554 [servicetalk-global-io-executor-1-4] NettyChannelPublisher - [id: 0xf0a745ed, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50450] Cancelling subscription
[DEBUG] 2023-01-29 10:39:06.520 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:39:06.520 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:39:36.521 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:39:36.522 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:40:06.527 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:40:06.527 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:40:36.532 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:40:36.532 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:41:06.537 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:41:06.537 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:41:36.542 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:41:36.542 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:42:06.547 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:42:06.547 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:42:36.552 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:42:36.552 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:43:06.552 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:43:06.552 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:43:36.557 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-01-29 10:43:36.558 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-01-29 10:43:57.859 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:43:57.859 [servicetalk-global-io-executor-1-9] DefaultNettyConnection - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50513] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:43:57.859 [servicetalk-global-io-executor-1-8] DefaultNettyConnection - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:43:57.859 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@7cda71ac
[DEBUG] 2023-01-29 10:43:57.859 [servicetalk-global-io-executor-1-9] DefaultNettyConnection - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50513] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:43:57.859 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-9] DefaultNettyConnection - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50513] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-8] DefaultNettyConnection - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-9] RequestResponseCloseHandler - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50513] Closing channel – evt: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-8] DefaultNettyConnection - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@485bd8dc
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-7] RequestResponseCloseHandler - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50453] Closing channel – evt: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-8] RequestResponseCloseHandler - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50454] Closing channel – evt: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.860 [servicetalk-global-io-executor-1-5] RequestResponseCloseHandler - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:50451] Closing channel – evt: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-01-29 10:43:57.861 [servicetalk-global-io-executor-1-7] WriteStreamSubscriber - [id: 0x669b919c, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50453] Terminate subscriber with an error, state: 1010
io.servicetalk.transport.netty.internal.StacklessClosedChannelException: null
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection.channelInactive(...)(Unknown Source) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
[DEBUG] 2023-01-29 10:43:57.861 [servicetalk-global-io-executor-1-9] WriteStreamSubscriber - [id: 0xc57a4821, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50513] Terminate subscriber with an error, state: 1010
io.servicetalk.transport.netty.internal.StacklessClosedChannelException: null
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection.channelInactive(...)(Unknown Source) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
[DEBUG] 2023-01-29 10:43:57.861 [servicetalk-global-io-executor-1-8] WriteStreamSubscriber - [id: 0xce443dee, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50454] Terminate subscriber with an error, state: 1010
io.servicetalk.transport.netty.internal.StacklessClosedChannelException: null
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection.channelInactive(...)(Unknown Source) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
[DEBUG] 2023-01-29 10:43:57.861 [servicetalk-global-io-executor-1-5] WriteStreamSubscriber - [id: 0xbbab16c0, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:50451] Terminate subscriber with an error, state: 1010
io.servicetalk.transport.netty.internal.StacklessClosedChannelException: null
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T5434/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T55Ia,incubator-baremaps,1407685146,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T14:55:41Z,2023-01-29T14:55:41Z,"thanks a lot for taking the time to report this issue. 

The netty errors can be ignored, they occur when the browser cancels a tile request. 

The long queries generated by baremaps create the vector tiles on the fly directly from the database. Here, there is indeed a bug related to the syntax of the query (`org.postgresql.util.PSQLException: ERROR: syntax error at end of input`) and we will have to find a way to address this issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T55Ia/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T550v,incubator-baremaps,1407687983,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T15:06:44Z,2023-01-29T15:06:44Z,"Happy to help. It's a really nice project. Very clean code and project structure, wide variety of functionality, and the documentation and examples are very simple to follow.   If there is anything I can do to assist, please don't hesitate to drop a note.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T550v/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T564L,incubator-baremaps,1407692299,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T15:23:22Z,2023-01-29T15:23:22Z,"Thanks, I think I found the origin of the bug. The tileset.json file used in the openstreetmap exemple only describes layers for low zoom levels (12 to 20). Therefore, when zooming out the `PostgresTileStore` tries to generate a query with an empty list of layers.

https://github.com/apache/incubator-baremaps/blob/48b1ce7a85a1701c37433a3bbac5044244261788/baremaps-core/src/main/java/org/apache/baremaps/database/tile/PostgresTileStore.java#L132

As a result, the generated query that only contains `WITH `, which throws the `ERROR: syntax error at end of input` exception when hitting the database.

Help is always welcome. It can take many forms: reporting bugs and issues, fixing bugs as this one (let me know if you want to tackle it), adding new features, improving the documentation, describing your needs and use cases, etc. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T564L/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T58Dm,incubator-baremaps,1407697126,573,NA,tyrauber,109972,Ty Rauber,tyrauber@mac.com,NA,2023-01-29T15:42:24Z,2023-01-29T15:42:24Z,"Ah, that's definitely it!  Let me see if I can chase this down. Seems like a good first issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T58Dm/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T583e,incubator-baremaps,1407700446,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T15:56:22Z,2023-01-29T15:56:22Z,"Cool, do not hesitate to ask for help.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T583e/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5WzHi4,incubator-baremaps,1456240824,573,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-03-06T14:28:35Z,2023-03-06T14:28:35Z,"I am having trouble trying to reproduce this issue on an M1.  Here are the steps I followed:
1. start postgres
```
docker run   --name baremaps  \
 --publish 5432:5432 \
  -e POSTGRES_DB=baremaps \
  -e POSTGRES_USER=baremaps \
 -e POSTGRES_PASSWORD=baremaps  \
 -d ghcr.io/baosystems/postgis:latest
```
2. build from source
```
 $ baremaps --version
Baremaps v0.7.1-SNAPSHOT
```
3.
```
$ cd examples/openstreetmap
```
4. Execute workflow
```
$ baremaps workflow execute --file workflow.json
```
5. Run
```
$  baremaps map dev \
   --log-level DEBUG  \
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --style 'style.json'
````
6. try to reproduce
  a. View localhost:9000 in browser
  b. Turn on styles
  c. Turn on boundaries
  d. zoom out 3 - 4 times
  e.  Screen goes white
  f. But no exception gets thrown similar to `ERROR: syntax error at end of input`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5WzHi4/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5WzJeG,incubator-baremaps,1456248710,573,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-03-06T14:33:12Z,2023-03-06T14:33:12Z,"The only exceptions I see are Netty related. 
```
[DEBUG] 2023-03-06 08:29:37.888 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62798] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@1b1eda1
[DEBUG] 2023-03-06 08:29:37.888 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62803] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@1b1eda1
[DEBUG] 2023-03-06 08:29:37.888 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62801] Received a user event: io.netty.channel.socket.ChannelInputShutdownEvent@1b1eda1
[DEBUG] 2023-03-06 08:29:37.890 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62803] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@79b19a50
[DEBUG] 2023-03-06 08:29:37.891 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62801] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@79b19a50
[DEBUG] 2023-03-06 08:29:37.891 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62798] Received a user event: io.netty.channel.socket.ChannelInputShutdownReadComplete@79b19a50
[DEBUG] 2023-03-06 08:29:37.891 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62803] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-03-06 08:29:37.891 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62801] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-03-06 08:29:37.892 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62798] Emitted CloseEvent: CHANNEL_CLOSED_INBOUND
[DEBUG] 2023-03-06 08:29:41.789 [servicetalk-global-io-executor-1-7] DefaultNettyConnection - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62803] Received a user event: io.netty.channel.socket.ChannelOutputShutdownEvent@6745b6cc
[DEBUG] 2023-03-06 08:29:41.792 [servicetalk-global-io-executor-1-7] RequestResponseCloseHandler - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62803] Closing channel – evt: CHANNEL_CLOSED_OUTBOUND
[DEBUG] 2023-03-06 08:29:41.830 [servicetalk-global-io-executor-1-3] DefaultNettyConnection - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62798] Received a user event: io.netty.channel.socket.ChannelOutputShutdownEvent@6745b6cc
[DEBUG] 2023-03-06 08:29:41.830 [servicetalk-global-io-executor-1-5] DefaultNettyConnection - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62801] Received a user event: io.netty.channel.socket.ChannelOutputShutdownEvent@6745b6cc
[DEBUG] 2023-03-06 08:29:41.835 [servicetalk-global-io-executor-1-5] RequestResponseCloseHandler - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62801] Closing channel – evt: CHANNEL_CLOSED_OUTBOUND
[DEBUG] 2023-03-06 08:29:41.833 [servicetalk-global-io-executor-1-3] RequestResponseCloseHandler - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:62798] Closing channel – evt: CHANNEL_CLOSED_OUTBOUND
[DEBUG] 2023-03-06 08:29:41.837 [servicetalk-global-io-executor-1-3] WriteStreamSubscriber - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62798] Terminate subscriber with an error, state: 1100
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-03-06 08:29:41.837 [servicetalk-global-io-executor-1-5] WriteStreamSubscriber - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62801] Terminate subscriber with an error, state: 1100
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-03-06 08:29:41.800 [servicetalk-global-io-executor-1-7] WriteStreamSubscriber - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62803] Terminate subscriber with an error, state: 1100
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-03-06 08:29:41.850 [servicetalk-global-io-executor-1-3] NettyHttpServer$ErrorLoggingHttpSubscriber - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62798] Unexpected error received, closing HTTP/1.1 connection due to:
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-03-06 08:29:41.850 [servicetalk-global-io-executor-1-7] NettyHttpServer$ErrorLoggingHttpSubscriber - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62803] Unexpected error received, closing HTTP/1.1 connection due to:
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-03-06 08:29:41.850 [servicetalk-global-io-executor-1-5] NettyHttpServer$ErrorLoggingHttpSubscriber - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62801] Unexpected error received, closing HTTP/1.1 connection due to:
io.netty.channel.socket.ChannelOutputShutdownException: Channel output shutdown
	at io.netty.channel.AbstractChannel$AbstractUnsafe.shutdownOutput(AbstractChannel.java:650) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.handleWriteError(AbstractChannel.java:953) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:933) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.AbstractKQueueChannel$AbstractKQueueUnsafe.flush0(AbstractKQueueChannel.java:507) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.flush(AbstractChannel.java:895) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.flush(DefaultChannelPipeline.java:1372) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush0(AbstractChannelHandlerContext.java:750) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeFlush(AbstractChannelHandlerContext.java:742) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.flush(AbstractChannelHandlerContext.java:728) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.DefaultNettyConnection$NettyToStChannelInboundHandler.channelWritabilityChanged(DefaultNettyConnection.java:815) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelWritabilityChanged(AbstractChannelHandlerContext.java:421) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelWritabilityChanged(DefaultChannelPipeline.java:1433) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:441) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelWritabilityChanged(AbstractChannelHandlerContext.java:428) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.fireChannelWritabilityChanged(DefaultChannelPipeline.java:931) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.fireChannelWritabilityChanged(ChannelOutboundBuffer.java:628) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.setUnwritable(ChannelOutboundBuffer.java:607) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.incrementPendingOutboundBytes(ChannelOutboundBuffer.java:177) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.ChannelOutboundBuffer.addMessage(ChannelOutboundBuffer.java:129) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(AbstractChannel.java:882) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline$HeadContext.write(DefaultChannelPipeline.java:1367) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:697) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.http.netty.HttpObjectEncoder.encodeChunkedContent(HttpObjectEncoder.java:402) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.servicetalk.http.netty.HttpObjectEncoder.write(HttpObjectEncoder.java:206) ~[servicetalk-http-netty-0.42.18.jar:0.42.18]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:717) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.invokeWrite(AbstractChannelHandlerContext.java:709) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:792) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:702) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.DefaultChannelPipeline.write(DefaultChannelPipeline.java:1015) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.AbstractChannel.write(AbstractChannel.java:301) ~[netty-transport-4.1.82.Final.jar:4.1.82.Final]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber$AllWritesPromise.writeNext(WriteStreamSubscriber.java:413) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.doWrite(WriteStreamSubscriber.java:174) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.servicetalk.transport.netty.internal.WriteStreamSubscriber.lambda$onNext$2(WriteStreamSubscriber.java:164) ~[servicetalk-transport-netty-internal-0.42.18.jar:0.42.18]
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.channel.kqueue.KQueueEventLoop.run(KQueueEventLoop.java:295) ~[netty-transport-classes-kqueue-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.82.Final.jar:4.1.82.Final]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
Caused by: io.netty.channel.unix.Errors$NativeIoException: writevAddresses(..) failed: Broken pipe
[DEBUG] 2023-03-06 08:29:41.853 [servicetalk-global-io-executor-1-3] NettyChannelPublisher - [id: 0xb4c156ba, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62798] Cancelling subscription
[DEBUG] 2023-03-06 08:29:41.853 [servicetalk-global-io-executor-1-5] NettyChannelPublisher - [id: 0xff27e109, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62801] Cancelling subscription
[DEBUG] 2023-03-06 08:29:41.853 [servicetalk-global-io-executor-1-7] NettyChannelPublisher - [id: 0xbe516ca7, L:/[0:0:0:0:0:0:0:1%0]:9000 ! R:/[0:0:0:0:0:0:0:1%0]:62803] Cancelling subscription
[DEBUG] 2023-03-06 08:30:04.825 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-03-06 08:30:04.826 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-03-06 08:30:34.825 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-03-06 08:30:34.825 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-03-06 08:31:04.829 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-03-06 08:31:04.829 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).
[DEBUG] 2023-03-06 08:31:34.833 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Pool stats (total=8, active=0, idle=8, waiting=0)
[DEBUG] 2023-03-06 08:31:34.834 [HikariPool-1 housekeeper] HikariPool - HikariPool-1 - Fill pool skipped, pool has sufficient level or currently being filled (queueDepth=0).

```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5WzJeG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Wzprv,incubator-baremaps,1456380655,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-03-06T15:46:40Z,2023-03-06T15:46:40Z,"If I recall correctly, the error reported by @tyrauber occurs when zooming to a level not covered by the tileset. The openstreetmap example covers levels 12 to 20, but does not include data for low zoom levels (0 to 12).

The netty errors are related to the cancelation of http requests by MapLibre when the user pans or zoom very fast on the map.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Wzprv/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5XTLLE,incubator-baremaps,1464644292,573,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-03-10T23:37:27Z,2023-03-10T23:37:27Z,"I've tried to reproduce this with no success. I'd be happy to get on a call with someone to learn more about how it's being recreated, how to solve it, etc.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5XTLLE/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Xi_4X,incubator-baremaps,1468792343,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-03-14T20:27:54Z,2023-03-14T20:27:54Z,"I am available on Friday to discuss this issue, let's synchronize by email.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Xi_4X/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/573,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ZdrR_,incubator-baremaps,1500951679,573,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-08T18:32:32Z,2023-04-08T18:32:32Z,"I've eventually been able to reproduce the error with the following commands:

```
baremaps map dev \
   --log-level DEBUG  \
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --style 'style.json'
```

Then, executing the following http request prints an error in the console:

```
curl http://localhost:9000/tiles/10/539/359.mvt
```

```
[ERROR] 2023-04-08 20:29:13.755 [servicetalk-global-executor-1-3] DevResources - Tile error
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: syntax error at end of input
  Position: 7
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.2-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.2-SNAPSHOT.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ZdrR_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/574,https://api.github.com/repos/apache/incubator-baremaps/issues/574,incubator-baremaps,1561326761,574,Update OSM documentation,tyrauber,109972,Ty Rauber,tyrauber@mac.com,OPEN,2023-01-29T15:03:28Z,2023-05-22T16:49:11Z,"Very nice project!  I was hoping to get some more details about the openstreetmaps implementation. Specifically:

* importer: Is the importer custom to this package, or using an existing library?  What is the performance of that import process for the world pbf, compared to `Osm2pgsql`, `Osmium`, `Osmosis` and `Imposm`.
* data structure:  It sounds like this is a full import?  That it maintains all  nodes, ways and relations?
* normalization: `In order to save denormalized geometries in PostGIS (e.g. linestring, polygon, multi-polygon, etc.), Baremaps creates a cache for nodes, ways and relations. [LMDB](https://symas.com/lmdb/) is used under the hood to achieve great performance.`  It sounds like this normalization is happening in the server and not in postgres.  What is the performance impact of this normalization? Is there a `cache warming` period on server restart?
* updating:  Any plans on supporting periodic updates from OSM changesets from something like `osmupdate`?
* caching: It appears to me like the server is caching tiles. It would be helpful to know how that caching is happening, what are the space requirements, and how one would purge tiles from cache (especially after a changeset has been imported).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/574/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/574,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T58uK,incubator-baremaps,1407699850,574,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-01-29T15:53:40Z,2023-01-29T15:53:40Z,"Good questions.

> * importer: Is the importer custom to this package, or using an existing library?  What is the performance of that import process for the world pbf, compared to `Osm2pgsql`, `Osmium`, `Osmosis` and `Imposm`.

The pbf parser and database importer are custom to this project. The parser use the Java Stream api to deserialise the pbf in parallel. The importer uses the postgres COPY api to achieve great performance. They should be in par with what other projects are doing.

Our current performance bottleneck is related to geometry simplification (merging highways, creating simplified polygons for landuse, etc.). This currently occurs once the data has been imported in the database. For the planet, this part of the process takes about two days and we are currently trying to optimise [this part of the workflow](https://github.com/apache/incubator-baremaps/pull/570).

> * data structure:  It sounds like this is a full import?  That it maintains all  nodes, ways and relations?

Yes, we import all node, ways, relations and tags. 

> * normalization: `In order to save denormalized geometries in PostGIS (e.g. linestring, polygon, multi-polygon, etc.), Baremaps creates a cache for nodes, ways and relations. [LMDB](https://symas.com/lmdb/) is used under the hood to achieve great performance.`  It sounds like this normalization is happening in the server and not in postgres.  What is the performance impact of this normalization? Is there a `cache warming` period on server restart?

This part of the documentation is outdated. We removed LMDB and now rely on memory mapped files to cache the nodes and references. As the pbf files are ordered, we are creating these caches on the fly and read the pbf files only once.

> * updating:  Any plans on supporting periodic updates from OSM changesets from something like `osmupdate`?

Yes, we do have preliminary support for [osm updates](https://github.com/apache/incubator-baremaps/blob/main/baremaps-core/src/main/java/org/apache/baremaps/workflow/tasks/UpdateOpenStreetMap.java) but it is experimental and not extensively tested.

> * caching: It appears to me like the server is caching tiles. It would be helpful to know how that caching is happening, what are the space requirements, and how one would purge tiles from cache (especially after a changeset has been imported).

Yes, the server uses [Caffeine](https://github.com/ben-manes/caffeine) to cache tiles in the RAM

The configuration of the cache can be tweaked with the [`--cache` flag](https://github.com/apache/incubator-baremaps/blob/48b1ce7a85a1701c37433a3bbac5044244261788/baremaps-cli/src/main/java/org/apache/baremaps/cli/map/Serve.java#LL53
) of the map serve command. It  takes a [caffeine specification](https://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.2.2/com/github/benmanes/caffeine/cache/CaffeineSpec.html) as an argument.


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5T58uK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/575,https://api.github.com/repos/apache/incubator-baremaps/issues/575,incubator-baremaps,1570338562,575,Add a style directive to render bridges,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-03T19:30:06Z,2023-02-06T07:32:26Z,"![Screenshot 2023-02-03 at 20 27 59](https://user-images.githubusercontent.com/238747/216690736-85f64eeb-c441-4ec4-b9a5-a102f1902f88.png)

https://demo.baremaps.com/#19/46.19319/6.13961
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/575/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/577,https://api.github.com/repos/apache/incubator-baremaps/issues/577,incubator-baremaps,1572071976,577,Disable GitHub pages,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-06T07:37:08Z,2023-02-17T16:07:52Z,The website has been migrated and we should disable GitHub pages. This can probably be done through the asf.yaml file.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/577/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/578,https://api.github.com/repos/apache/incubator-baremaps/issues/578,incubator-baremaps,1573297209,578,Fix styling issues,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-06T21:14:44Z,2023-02-07T07:39:44Z,"- footway and path can be briges
- water must be moved to the background
- trees must be fixed to the map when the pitch changes","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/578/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/580,https://api.github.com/repos/apache/incubator-baremaps/issues/580,incubator-baremaps,1573832059,580,Improve layer ordering in the basemap,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-07T07:40:58Z,2023-02-11T20:31:08Z,"Layer ordering has some issues in the basemap. In particular, polygons of the same layer rendered using data driven directive render strangely when they don't include a `fill-sort-key`.

![Screenshot 2023-02-07 at 08 44 01](https://user-images.githubusercontent.com/238747/217182695-68051a79-3912-49f6-9a2b-1118592cc2bd.png)

https://demo.baremaps.com/#15.04/46.5891/6.68159

Here, the farmland polygon should overlap the forest polygon, however, we only get its outline.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/580/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/582,https://api.github.com/repos/apache/incubator-baremaps/issues/582,incubator-baremaps,1576412385,582,Live reload does not work in dev mode,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-08T16:13:34Z,2023-02-11T20:38:25Z,The change made on the file system should be reloaded by the map when baremaps is started in dev mode. We should check why this feature is currently broken.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/582/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/582,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VDFbN,incubator-baremaps,1426872013,582,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-11T20:38:19Z,2023-02-11T20:38:19Z,False alert,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VDFbN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/583,https://api.github.com/repos/apache/incubator-baremaps/issues/583,incubator-baremaps,1581037469,583,Add geoBoundaries to basemap,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-11T22:30:07Z,2023-02-19T15:43:47Z,"geoBoundaries provides high quality bounderies.

https://www.geoboundaries.org/
https://github.com/wmgeolab/geoBoundaries

They also have a comprehensive global administrative zones dataset.

https://www.geoboundaries.org/downloadCGAZ.html
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/583/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/585,incubator-baremaps,1584806801,585,Zürich not shown in Swiss map,wipfli,53421382,Oliver Wipfli,oliver.wipfli@leichteralsluft.ch,CLOSED,2023-02-14T20:49:11Z,2023-02-27T23:53:05Z,"Zürich is the second-most important city in Switzerland according to QRank. It should be shown on the map but does not:

![image](https://user-images.githubusercontent.com/53421382/218859588-0de4d451-ad17-4002-8157-41282627c465.png)

https://demo.baremaps.com/#5.51/46.028/9.203

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/585/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVTII,incubator-baremaps,1431646728,585,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-15T16:31:09Z,2023-02-15T16:31:09Z,Thanks a lot for reporting this issue. We will probably have to add a filter at the level of the tileset or of the style.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVTII/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVUiS,incubator-baremaps,1431652498,585,NA,wipfli,53421382,Oliver Wipfli,oliver.wipfli@leichteralsluft.ch,NA,2023-02-15T16:35:14Z,2023-02-15T16:35:14Z,"I recommend both, because if you use ""text-sort-key"" in MapLibre GL JS with too many point labels in the tiles, the labels bubble on zoom. I.e. when zooming in, they appear and disappear again because one label eats the other and gets eaten by a third such that the other appears again... Anyway, limit what goes into the tiles. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVUiS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVY9o,incubator-baremaps,1431670632,585,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-15T16:48:09Z,2023-02-15T16:48:09Z,"I haven't found the ""text-sort-key"" in the Maplibre style specification, do you know if symbol-sort-key has the same effect?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVY9o/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVcnC,incubator-baremaps,1431685570,585,NA,wipfli,53421382,Oliver Wipfli,oliver.wipfli@leichteralsluft.ch,NA,2023-02-15T16:58:30Z,2023-02-15T16:58:30Z,Sorry I just misremembered. It is `symbol-sort-key` https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#layout-symbol-symbol-sort-key,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VVcnC/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Vrwdc,incubator-baremaps,1437534044,585,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-20T20:55:14Z,2023-02-20T20:55:14Z,"I slightly improved ordering in the label layer, but I'm still not sure if it is possible to differenciate Zürich and Sankt Gallen solely based on OpenStreetMap data. Here are the two nodes in question.

Zurich: https://www.openstreetmap.org/node/240025182
Sankt Gallen: https://www.openstreetmap.org/node/240062840

As we have the Wikidata ids in the database, I will see if we can import the [qrank data](https://qrank.wmcloud.org) as well and and integrate it in the vector tiles.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Vrwdc/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VvkIB,incubator-baremaps,1438532097,585,NA,wipfli,53421382,Oliver Wipfli,oliver.wipfli@leichteralsluft.ch,NA,2023-02-21T13:52:20Z,2023-02-21T13:52:20Z,QRank works well. Osm population is what is traditionally used.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VvkIB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/585,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5WQ3ly,incubator-baremaps,1447262578,585,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-27T23:14:24Z,2023-02-27T23:14:24Z,"I ended up using the population. 

Interestingly, I noticed that [`symbol-sort-key`](https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#layout-symbol-symbol-sort-key) is prioritizing features with a low sort key whereas [`fill-sort-key`](https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#layout-fill-fill-sort-key) and [`line-sort-key`](https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#layout-line-line-sort-key) are drawing features with high sort keys on top of features with low sort keys. The spec and the documentation are both clear regarding these behaviors, so it is not really an issue. However, as I expected `symbol-sort-key` to work the opposite way, I wondererd if there were any good reason for this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5WQ3ly/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/586,https://api.github.com/repos/apache/incubator-baremaps/issues/586,incubator-baremaps,1586169008,586,Improve layer ordering for airports,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-15T16:29:26Z,2023-05-13T08:37:21Z,"<img width=""778"" alt=""Screenshot 2023-02-15 at 17 28 30"" src=""https://user-images.githubusercontent.com/238747/219090646-728c4a66-f4c3-4e35-a95d-f2521e11b2f9.png"">

https://demo.baremaps.com/#13.22/46.23594/6.11308","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/586/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/587,https://api.github.com/repos/apache/incubator-baremaps/issues/587,incubator-baremaps,1587863810,587,Question HikariConfig Connection pools,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2023-02-16T15:15:20Z,2023-02-17T16:10:03Z,"Hello,
is it possible to set the number of connections  for a pg database
It seems that default value from Hikari is 10?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/587/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/587,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VdMeY,incubator-baremaps,1433716632,587,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-16T21:08:34Z,2023-02-16T21:08:34Z,"The pool size is currently set on the basis of the number of core available. I think it is a sound default value, but we may also expose this parameter to the user.

https://github.com/apache/incubator-baremaps/blob/c2c4ea8b47e58a563b6c1562b6e2f742733620c9/baremaps-core/src/main/java/org/apache/baremaps/database/PostgresUtils.java#L46

Have you encountered issues related to the pool size?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VdMeY/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/587,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VfVnI,incubator-baremaps,1434278344,587,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2023-02-17T08:13:57Z,2023-02-17T08:13:57Z,"Thanks for the feedback.
No issues just yet, we were just wondering about how could this param be configured in the future. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VfVnI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/587,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VhjiP,incubator-baremaps,1434859663,587,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-02-17T16:10:03Z,2023-02-17T16:10:03Z,"Great, do not hesitate to reopen this issue once you feel it is time to implement this feature.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5VhjiP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/590,https://api.github.com/repos/apache/incubator-baremaps/issues/590,incubator-baremaps,1592501114,590,Implement a flatgeobuf reader and writer,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-02-20T22:10:02Z,2023-04-05T14:18:48Z,FlatGeoBuf is becoming a popular exchange format for vector data. Would be nice to be able to read and write data in this format.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/590/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/594,https://api.github.com/repos/apache/incubator-baremaps/issues/594,incubator-baremaps,1610327007,594,Implement name search with postgres,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-03-05T19:20:30Z,2024-02-29T08:45:42Z,Postgres has good full text search capabilities. It would be nice to have a web service for searching openstreetmap entities.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/594/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/594,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s51dgsU,incubator-baremaps,1970670356,594,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-02-29T08:45:42Z,2024-02-29T08:45:42Z,The name search service has been added to the server.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s51dgsU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/600,https://api.github.com/repos/apache/incubator-baremaps/issues/600,incubator-baremaps,1628512341,600,support js file in baremaps map export ---tileset=tileset.js,zvikara,278087,Zvika Rap,,CLOSED,2023-03-17T00:46:38Z,2023-04-24T13:18:00Z,"I don't know how to export the basemap tiles:
It seems that ""baremaps map export"" only accepts --tileset=tileset.json
But the basemap is using a js file (tileset.js).
Can we please support using a js file with ""baremaps map export ---tileset=tileset.js""","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/600/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/600,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ZdlBJ,incubator-baremaps,1500926025,600,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-08T16:23:55Z,2023-04-08T16:23:55Z,"Thank you for your patience, I missed the notification. The json and javascript format can be used interchangeably (you just need to change the extension as in the basemap directory). In both case the tileset describes how the tiles are built from the database. In general, we use the javascript format when the configuration files become big and complex.

The export command takes a second parameter for the tile repository as follow:

```
baremaps map export \
  --database 'jdbc:postgresql://localhost:5432/baremaps?user=baremaps&password=baremaps' \
  --tileset 'tileset.json' \
  --repository 'tiles/'
```

This will generate a directory called tiles in which you will have the actual vector tiles.

```
ls -R tiles
12 13 14

tiles/12:
2155 2156 2157

tiles/12/2155:
1437.mvt 1438.mvt 1439.mvt

tiles/12/2156:
1436.mvt 1437.mvt 1438.mvt 1439.mvt

tiles/12/2157:
1436.mvt 1437.mvt 1438.mvt 1439.mvt
```

Here is the documentation for this examples:
https://baremaps.apache.org/documentation/examples/serve-and-export-vector-tiles","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ZdlBJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/600,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5am2m9,incubator-baremaps,1520134589,600,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-24T13:11:10Z,2023-04-24T13:11:10Z,"Sorry, I missunderstood your original description of the problem. JS files were not supported by the export command.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5am2m9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/603,https://api.github.com/repos/apache/incubator-baremaps/issues/603,incubator-baremaps,1628929855,603,Check the licenses with the maven rat plugin,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-03-17T08:49:32Z,2023-05-25T14:26:29Z,"> I ran RAT and it failed with ’Too many unapproved licenses: 3’. But I don’t agree with the issues it found, one of which was DISCLAIMER-WIP (how ironic). So RAT is ok for now, but please see if you can get RAT to pass next release.

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f

We should check and address the issues detected by rat and add a step in the build workflow on GitHub.

```
mvn rat:check
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/603/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/603,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c5liZ,incubator-baremaps,1558599833,603,NA,Perdjesk,1125783,,,NA,2023-05-23T06:18:48Z,2023-05-23T06:18:48Z,"A bit of TIL information regarding the following example that caused me some confusion.
```
mvn rat:check
```

By default the maven settings provides a search list of groups for plugins. https://maven.apache.org/settings.html#plugin-groups
> The list is searched when a plugin is used and the groupId is not provided in the command line. This list automatically contains org.apache.maven.plugins and org.codehaus.mojo.

The above command will thus resolves to `org.codehaus.mojo:rat-maven-plugin:1.0-alpha-3:check` published in 2007. https://central.sonatype.com/artifact/org.codehaus.mojo/rat-maven-plugin/1.0-alpha-3

The current releases of Apache Rat are located at `org.apache.rat:apache-rat-plugin`





","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c5liZ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/604,https://api.github.com/repos/apache/incubator-baremaps/issues/604,incubator-baremaps,1628981461,604,Missing files in src release,swerky,10920115,James Smith,,CLOSED,2023-03-17T09:27:20Z,2023-03-31T08:32:06Z,">  A few surprising differences between the tar and git:
> 
> File in the tar not in git:
> baremaps-cli/src/test
> baremaps-ogcapi/target
> baremaps-server/src/main/resources/maputnik
> 
> File in git that I would expect to be in the tar:
> .asf.yaml
> basemap
> CODE_OF_CONDUCT.md
> CONTRIBUTING.md
> examples
> .github
> .gitignore
> logo.svg
> README.md
> RELEASE.md
> .run
> scripts
> 
> (I note that you correctly excluded .git, .mvn, mvnw, mvnw.bat from the tar.)
> 
> Julian

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f

We need to have matching files between git and the src release. 
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/604/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/604,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X2qUE,incubator-baremaps,1473946884,604,NA,swerky,10920115,James Smith,,NA,2023-03-17T14:40:14Z,2023-03-17T14:40:14Z,"@julianhyde @bchapuis Hi,

I don't see the scripts file or folder. Is it at the root of the applications or in a specific module?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X2qUE/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/604,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X2sXd,incubator-baremaps,1473955293,604,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-03-17T14:46:16Z,2023-03-17T14:46:16Z,@swerky The scripts directory is part of #597 and has not yet been merged in main. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X2sXd/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/605,https://api.github.com/repos/apache/incubator-baremaps/issues/605,incubator-baremaps,1628987824,605,Add prefix `apache-` on the tar file names and on the directory inside the tar,swerky,10920115,James Smith,,CLOSED,2023-03-17T09:31:47Z,2023-03-31T08:30:43Z,"> An ‘apache-‘ prefix on the tar file names, and on the directory inside the tars, would be preferable.
> Julian

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/605/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/605,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X3FnJ,incubator-baremaps,1474058697,605,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-03-17T16:01:06Z,2023-03-17T16:01:06Z,"It's great to have the apache- prefix on the tar file, but I would prefer if we remove the baremaps- prefix within the directory. This is a breaking change that necessitate coordination.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X3FnJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/606,https://api.github.com/repos/apache/incubator-baremaps/issues/606,incubator-baremaps,1628989091,606,Add version number in README in the release,swerky,10920115,James Smith,,CLOSED,2023-03-17T09:32:38Z,2023-05-06T13:02:10Z,"> Version number in README would be nice.
> Julian

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/606/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/606,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5YXPBA,incubator-baremaps,1482485824,606,NA,swerky,10920115,James Smith,,NA,2023-03-24T09:16:44Z,2023-03-24T09:16:44Z,"After a discussion with Bertil here is a possible solution:
https://maven.apache.org/plugins/maven-assembly-plugin/examples/single/filtering-some-distribution-files.html","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5YXPBA/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/607,https://api.github.com/repos/apache/incubator-baremaps/issues/607,incubator-baremaps,1628994474,607,Verify the projects necessary in the NOTICE file,swerky,10920115,James Smith,,CLOSED,2023-03-17T09:36:08Z,2023-11-17T12:27:54Z,"> I am not an expert, but the NOTICE file possibly includes more projects than necessary. (Remember: Per the AL, any downstream project MUST carry your NOTICE file. So you should only include an upstream project in your NOTICE file if they require it.)
> Julian

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/607/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/608,https://api.github.com/repos/apache/incubator-baremaps/issues/608,incubator-baremaps,1628997677,608,Verify and correct the LICENSE file for the -bin.tar release,swerky,10920115,James Smith,,CLOSED,2023-03-17T09:38:38Z,2023-05-06T12:53:56Z,">  The LICENSE file in the -bin.tar should probably have extra entries because you are distributing not just baremaps but all its dependencies.
> Julian

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/608/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/609,https://api.github.com/repos/apache/incubator-baremaps/issues/609,incubator-baremaps,1629112311,609,Test `IpLocTest findAll` failed,swerky,10920115,James Smith,,CLOSED,2023-03-17T10:59:54Z,2023-03-17T11:21:48Z,">  I have a failed test `IpLocTest.findAll:94 expected: <7> but was: <6>` with maven 3.8.1, java 17.0.2-oracle will running a `mvn clean install`. I have not looked why this test failed for the moment.
> James

https://lists.apache.org/thread/mo9y0nmf9fvnc4n91hyw1z0p08hl6j8f

With:
- macOS 13.2
- maven 3.8.1
- java 17.0.2-oracle","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/609/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/609,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1k4f,incubator-baremaps,1473662495,609,NA,swerky,10920115,James Smith,,NA,2023-03-17T11:01:47Z,2023-03-17T11:01:47Z,"I tried to change the JVM to see if it was the oracle version problem.
I tried with `17.0.6-tem` and still the same problem.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1k4f/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/609,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1ov0,incubator-baremaps,1473678324,609,NA,swerky,10920115,James Smith,,NA,2023-03-17T11:15:06Z,2023-03-17T11:15:06Z,"I found what the problem is:

It's this test value that is not correctly mapped to a `InetnumLocation`:

```
inetnum: 0.0.0.11 - 0.0.0.20
netname: Suisse
country: CH
note: Test with country code only
```

In [the IpLoc.java](./baremaps-core/src/main/java/org/apache/baremaps/iploc/IpLoc.java) we use `IsoCountriesUtils.getCountry` and on my machine, it returns `Suisse` and not `Switzerland` this is due to my operating system being in french.

@bchapuis Should we have this information somewhere in the README? Futur users won't be able to build the app if their system is not in English.
Or should we change this test?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5X1ov0/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/614,https://api.github.com/repos/apache/incubator-baremaps/issues/614,incubator-baremaps,1639567723,614,Fix links in README files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-03-24T15:06:28Z,2023-03-27T12:13:37Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/614/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/616,https://api.github.com/repos/apache/incubator-baremaps/issues/616,incubator-baremaps,1645787047,616,Add Java implementation of the vector tile specification,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-03-29T13:12:33Z,2023-03-31T16:12:59Z,"We currently generate vector tiles with postgis. We may soon generate vector tiles from other sources (e.g. calcite) and we shall add support for this format.

https://github.com/mapbox/vector-tile-spec/tree/master/2.1","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/616/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/618,https://api.github.com/repos/apache/incubator-baremaps/issues/618,incubator-baremaps,1658248877,618,IP to location error (missing database),joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,CLOSED,2023-04-07T01:57:00Z,2023-04-24T13:03:20Z,"I'm trying to run the ip to location example for `0.7.1-incubating` and ran into some issues. 

Steps to reproduce are below:

## set up postgres (I'm using a M1)
```
$  docker run  \
 --name baremaps  \
 --publish 5432:5432  \
 -e POSTGRES_DB=baremaps \
  -e POSTGRES_USER=baremaps  \
 -e POSTGRES_PASSWORD=baremaps   \
-d ghcr.io/baosystems/postgis:latest
```

## execute the workflow
```
$  baremaps workflow execute --file examples/geocoding/workflow.js
```

## serve the data
```
$ baremaps iploc serve --database iploc.db --port 9000
```

## perform a search in the UI at at `localhost:9000` to cause the error
```
baremaps iploc serve --database iploc.db --port 9000
[INFO ] 2023-04-06 20:46:08.896 [main] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-04-06 20:46:09.140 [main] HikariPool - HikariPool-1 - Added connection org.sqlite.jdbc4.JDBC4Connection@3212a8d7
[INFO ] 2023-04-06 20:46:09.142 [main] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-04-06 20:46:10.185 [main] Serve - Listening on /[0:0:0:0:0:0:0:0%0]:9000
[ERROR] 2023-04-06 20:46:36.055 [servicetalk-global-executor-1-1] InetnumLocationDaoSqliteImpl - Unable to select inetnum locations
org.sqlite.SQLiteException: [SQLITE_ERROR] SQL error or missing database (no such table: inetnum_locations)
	at org.sqlite.core.DB.newSQLException(DB.java:1135) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.core.DB.newSQLException(DB.java:1146) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.core.DB.throwex(DB.java:1106) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.core.NativeDB.prepare_utf8(Native Method) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.core.NativeDB.prepare(NativeDB.java:122) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.core.DB.prepare(DB.java:264) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.core.CorePreparedStatement.<init>(CorePreparedStatement.java:46) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.jdbc3.JDBC3PreparedStatement.<init>(JDBC3PreparedStatement.java:31) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.jdbc4.JDBC4PreparedStatement.<init>(JDBC4PreparedStatement.java:25) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.jdbc4.JDBC4Connection.prepareStatement(JDBC4Connection.java:34) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.jdbc3.JDBC3Connection.prepareStatement(JDBC3Connection.java:226) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at org.sqlite.jdbc3.JDBC3Connection.prepareStatement(JDBC3Connection.java:206) ~[sqlite-jdbc-3.39.3.0.jar:?]
	at com.zaxxer.hikari.pool.ProxyConnection.prepareStatement(ProxyConnection.java:327) ~[HikariCP-5.0.1.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyConnection.prepareStatement(HikariProxyConnection.java) ~[HikariCP-5.0.1.jar:?]
	at org.apache.baremaps.iploc.database.InetnumLocationDaoSqliteImpl.findByIp(InetnumLocationDaoSqliteImpl.java:133) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.server.IplocResources.getIpToLocation(IplocResources.java:49) ~[baremaps-server-0.7.1.jar:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:176) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:475) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:397) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:255) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-2.35.jar:?]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:234) ~[jersey-server-2.35.jar:?]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-2.35.jar:?]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.handle0(DefaultJerseyStreamingHttpRouter.java:273) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter.access$100(DefaultJerseyStreamingHttpRouter.java:79) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.http.router.jersey.DefaultJerseyStreamingHttpRouter$3.handleSubscribe(DefaultJerseyStreamingHttpRouter.java:204) ~[servicetalk-http-router-jersey-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.delegateSubscribe(Single.java:2620) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapCompletable.handleSubscribe(SingleFlatMapCompletable.java:43) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.lambda$subscribeWithContext$5(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeWithContext(Completable.java:2242) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.subscribeInternal(Completable.java:1732) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SourceToFuture$CompletableToFuture.createAndSubscribe(SourceToFuture.java:162) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Completable.toFuture(Completable.java:1705) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.StreamingHttpServiceToBlockingStreamingHttpService.handle(StreamingHttpServiceToBlockingStreamingHttpService.java:57) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.http.api.BlockingStreamingToStreamingService$1.handleSubscribe(BlockingStreamingToStreamingService.java:130) ~[servicetalk-http-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.handleSubscribe(Single.java:2649) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleShareContextOnSubscribe.handleSubscribe(SingleShareContextOnSubscribe.java:38) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeWithContext(Single.java:2629) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeAndReturnContext(Single.java:2607) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.Single.subscribeInternal(Single.java:1816) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.SingleFlatMapSingle$SubscriberImpl.onSuccess(SingleFlatMapSingle.java:80) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingSingleSubscriber.onSuccess(ContextPreservingSingleSubscriber.java:77) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.AbstractSubmitSingle.lambda$handleSubscribe$0(AbstractSubmitSingle.java:49) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at io.servicetalk.concurrent.api.ContextPreservingRunnable.run(ContextPreservingRunnable.java:46) ~[servicetalk-concurrent-api-0.42.18.jar:0.42.18]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539) ~[?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]
	at java.lang.Thread.run(Thread.java:833) ~[?:?]
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/618/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/618,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ZZc5R,incubator-baremaps,1499844177,618,NA,joshfischer1108,5785700,Josh Fischer,josh@joshfischer.io,NA,2023-04-07T02:01:32Z,2023-04-07T02:01:32Z,I'd be happy to help where I can to try and help resolve the issue with a little guidance. ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ZZc5R/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/618,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Zai8r,incubator-baremaps,1500131115,618,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-07T09:50:05Z,2023-04-07T09:50:05Z,"May the issue be located in the documentation? It looks like we are calling the `geocoding` workflow instead of the `ip-to-location` workflow. I don't think the geocoding example is creating an`iploc.db` file, hence the error.

```
baremaps workflow execute --file examples/geocoding/workflow.js
```

should probably be replaced by:

```
baremaps workflow execute --file examples/ip-to-location/workflow.js
```

@Drabble any thoughts on this issue?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5Zai8r/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/618,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5amzWM,incubator-baremaps,1520121228,618,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-24T13:03:19Z,2023-04-24T13:03:19Z,I fixed the documentation and have been able to reproduce the steps.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5amzWM/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/619,https://api.github.com/repos/apache/incubator-baremaps/issues/619,incubator-baremaps,1659232695,619,Improve the openstreetmap transformation workflow,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-04-07T21:44:33Z,2023-04-09T19:46:34Z,"- Fix the Index out of bounds exception occuring when parsing planet osm (see below)
-  Improve serialization and deserialization of geometries in the collection package
- Fix minor issues related to flatgeobuf serialization

```
java.lang.IndexOutOfBoundsException: Range [1073741729, 1073741729 + 97) out of bounds for length 1073741824
        at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromIndexSize(Preconditions.java:82)
        at java.base/jdk.internal.util.Preconditions.checkFromIndexSize(Preconditions.java:361)
        at java.base/java.util.Objects.checkFromIndexSize(Objects.java:411)
        at java.base/java.nio.ByteBuffer.put(ByteBuffer.java:1261)
        at java.base/java.nio.ByteBuffer.put(ByteBuffer.java:1299)
        at org.apache.baremaps.collection.type.GeometryDataType.write(GeometryDataType.java:42)
        at org.apache.baremaps.workflow.tasks.EntityDataType.write(EntityDataType.java:51)
        at org.apache.baremaps.workflow.tasks.EntityDataType.write(EntityDataType.java:20)
        at org.apache.baremaps.collection.AppendOnlyBuffer.addPositioned(AppendOnlyBuffer.java:94)
        at org.apache.baremaps.collection.AppendOnlyBuffer.add(AppendOnlyBuffer.java:104)
        at java.base/java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)
        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
        at java.base/java.util.stream.SpinedBuffer$1Splitr.forEachRemaining(SpinedBuffer.java:364)
        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
        at org.apache.baremaps.stream.BufferedSpliterator.tryAdvance(BufferedSpliterator.java:74)
        at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
        at org.apache.baremaps.workflow.tasks.CreateEntityCollection.execute(CreateEntityCollection.java:86)
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:150)
        at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
        at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:833)
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/619/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/621,https://api.github.com/repos/apache/incubator-baremaps/issues/621,incubator-baremaps,1669446555,621,Improve simplifications in basemap,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-04-15T15:02:30Z,2023-04-23T21:07:31Z,"Geometries are currently simplified with slow sql queries. This could be improved by using the new TransformEntityCollection task.

- [ ] Set the SRID in the TransformEntityCollection task ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/621/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/622,https://api.github.com/repos/apache/incubator-baremaps/issues/622,incubator-baremaps,1674670411,622,How 同,Tzuhany,122426901,,,CLOSED,2023-04-19T10:59:45Z,2023-04-19T10:59:50Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/622/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/623,https://api.github.com/repos/apache/incubator-baremaps/issues/623,incubator-baremaps,1674672197,623,How to deal the error about org.apache.baremaps.stream.StreamException,Tzuhany,122426901,,,CLOSED,2023-04-19T11:00:54Z,2023-04-23T21:07:30Z,"When I use the example provided by the document to import osm data, the console reports an error: org.apache.baremaps.stream.StreamException: java.lang.NullPointerException: Cannot invoke ""java.util.List.stream()"" because ""refs "" is null","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/623/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/623,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aYC34,incubator-baremaps,1516252664,623,NA,Perdjesk,1125783,,,NA,2023-04-20T12:36:00Z,2023-04-20T12:36:00Z,"Hi @Tzuhany,

I had a similar experience. The issue seems to be related to the import of partial OSM data when a `relation` element references members which are not part of the OSM source file (which appears to be likely to happen with Geofabrik region files as used in the example).
However even with a lengthy error trace in the logs the OSM import is not fully aborted and it should be possible to start the server as described in tutorial to serve the successfully data imported in Postgres.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aYC34/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/623,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aZTM8,incubator-baremaps,1516581692,623,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-20T15:59:32Z,2023-04-20T15:59:32Z,"@Perdjesk @Tzuhany The decision to log warnings (rather than errors) was made to allow the user to fix invalid openstreetmap objects by their id. In planet osm we encounter a couple of similar exceptions and it helps fixing the dataset upstream. 

Do you think we should reconsider this behavior? For instance, we could log a message instead of an error or a warning. The warning/error could be too alarming at a first glance. If so, I suggest we change the title of the issue and use it to improve the behavior.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aZTM8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/623,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aZYOs,incubator-baremaps,1516602284,623,NA,Tzuhany,122426901,,,NA,2023-04-20T16:12:47Z,2023-04-20T16:12:47Z,"@bchapuis Sorry, I was confused when I first saw this error and thought that the import process was terminated due to the error, so I did not check the database.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aZYOs/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/623,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aZ5cS,incubator-baremaps,1516738322,623,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-20T18:03:51Z,2023-04-20T18:03:51Z,"No problem, thank you for reporting this. I guess other people get the same impression without reporting it. Let's fix this in the next release.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5aZ5cS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/624,https://api.github.com/repos/apache/incubator-baremaps/issues/624,incubator-baremaps,1678340502,624,Set the srid of geometries in the geoBoundaries dataset,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-04-21T11:09:10Z,2023-04-24T23:05:56Z,"The srid of some geometries in the geoBoundaries dataset are not correctly set resulting in the following error when displaying the basemap.

```
org.apache.baremaps.database.tile.TileStoreException: org.postgresql.util.PSQLException: ERROR: ST_Intersects: Operation on mixed SRID geometries (MultiPolygon, 0) != (Polygon, 3857)
	at org.apache.baremaps.database.tile.PostgresTileStore.read(PostgresTileStore.java:122) ~[baremaps-core-0.7.2-SNAPSHOT.jar:?]
	at org.apache.baremaps.server.DevResources.getTile(DevResources.java:137) ~[baremaps-server-0.7.2-SNAPSHOT.jar:?]
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/624/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/629,https://api.github.com/repos/apache/incubator-baremaps/issues/629,incubator-baremaps,1683171731,629,Update the OGC API specification files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-04-25T13:24:04Z,2023-04-25T14:11:16Z,The OCG API specification files havn't been updated in a long time and some of the APIs have been stabilized.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/629/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/632,https://api.github.com/repos/apache/incubator-baremaps/issues/632,incubator-baremaps,1684426933,632,Add support for OGC-API feature,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-04-26T07:20:37Z,2023-11-20T15:27:23Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/632/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/634,https://api.github.com/repos/apache/incubator-baremaps/issues/634,incubator-baremaps,1684728869,634,Unknown WKB type,leonardcser,73912641,Leonard,,CLOSED,2023-04-26T10:16:25Z,2023-05-23T14:56:30Z,"## Description
When using the Berlin map (http://download.geofabrik.de/europe/germany/berlin-latest.osm.pbf) in the basemap, I get an well-known-binary error at `ne_10m_admin_0_countries` from PostgreSQL. 

## Reproduce
- Modify the `basemap/config.js` `osmPbfUrl` key to the url above.
- Execute the workflow with `baremaps workflow execute --file workflow.js`

## Stacktrace
```bash
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
	at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:48)
	at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:29)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
	at picocli.CommandLine.access$1300(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
	at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
	at picocli.CommandLine.execute(CommandLine.java:2078)
	at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:83)
Caused by: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:162)
	at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
	at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at org.apache.baremaps.workflow.tasks.ImportGeoPackage.execute(ImportGeoPackage.java:45)
	at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:157)
	... 5 more
Caused by: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at org.apache.baremaps.storage.postgres.PostgresStore.add(PostgresStore.java:177)
	at org.apache.baremaps.workflow.tasks.ImportGeoPackage.execute(ImportGeoPackage.java:42)
	... 6 more
Caused by: java.io.IOException: Ending write to copy failed.
	at org.postgresql.copy.PGCopyOutputStream.close(PGCopyOutputStream.java:115)
	at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)
	at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)
	at org.apache.baremaps.database.copy.CopyWriter.close(CopyWriter.java:344)
	at org.apache.baremaps.storage.postgres.PostgresStore.add(PostgresStore.java:175)
	... 7 more
Caused by: org.postgresql.util.PSQLException: ERROR: Unknown WKB type (233756260)!
  Where: COPY ne_10m_admin_0_countries, line 3, column geom
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
	at org.postgresql.core.v3.QueryExecutorImpl.processCopyResults(QueryExecutorImpl.java:1264)
	at org.postgresql.core.v3.QueryExecutorImpl.endCopy(QueryExecutorImpl.java:1069)
	at org.postgresql.core.v3.CopyInImpl.endCopy(CopyInImpl.java:49)
	at org.postgresql.copy.PGCopyOutputStream.endCopy(PGCopyOutputStream.java:183)
	at org.postgresql.copy.PGCopyOutputStream.close(PGCopyOutputStream.java:113)
	... 11 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/634/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/634,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c3M65,incubator-baremaps,1557974713,634,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-22T20:52:45Z,2023-05-22T20:52:45Z,I think this issue is related to #656,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c3M65/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/635,https://api.github.com/repos/apache/incubator-baremaps/issues/635,incubator-baremaps,1684945166,635,Polygon must have closed rings,leonardcser,73912641,Leonard,,CLOSED,2023-04-26T12:35:19Z,2023-05-23T14:56:19Z,"## Description
When using the Berlin map (http://download.geofabrik.de/europe/germany/berlin-latest.osm.pbf) in the basemap, I get an error from PostgreSQL.

## Reproduce
- Modify the `basemap/config.js` `osmPbfUrl` key to the url above.
- Modify the `basemap/workflow.js` by commenting out the first step of id `natural-earth`
- Execute the workflow with `baremaps workflow execute --file workflow.js`

## Stacktrace
```bash
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
	at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:48)
	at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:29)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
	at picocli.CommandLine.access$1300(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
	at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
	at picocli.CommandLine.execute(CommandLine.java:2078)
	at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:83)
Caused by: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:162)
	at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
	at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at org.apache.baremaps.workflow.tasks.ImportShapefile.execute(ImportShapefile.java:42)
	at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:157)
	... 5 more
Caused by: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
	at org.apache.baremaps.storage.postgres.PostgresStore.add(PostgresStore.java:177)
	at org.apache.baremaps.workflow.tasks.ImportShapefile.execute(ImportShapefile.java:39)
	... 6 more
Caused by: java.io.IOException: Ending write to copy failed.
	at org.postgresql.copy.PGCopyOutputStream.close(PGCopyOutputStream.java:115)
	at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)
	at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)
	at org.apache.baremaps.database.copy.CopyWriter.close(CopyWriter.java:344)
	at org.apache.baremaps.storage.postgres.PostgresStore.add(PostgresStore.java:175)
	... 7 more
Caused by: org.postgresql.util.PSQLException: ERROR: Polygon must have closed rings
  Where: COPY water_polygons_shp, line 6, column geometry
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
	at org.postgresql.core.v3.QueryExecutorImpl.processCopyResults(QueryExecutorImpl.java:1264)
	at org.postgresql.core.v3.QueryExecutorImpl.endCopy(QueryExecutorImpl.java:1069)
	at org.postgresql.core.v3.CopyInImpl.endCopy(CopyInImpl.java:49)
	at org.postgresql.copy.PGCopyOutputStream.endCopy(PGCopyOutputStream.java:183)
	at org.postgresql.copy.PGCopyOutputStream.close(PGCopyOutputStream.java:113)
	... 11 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/635/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/635,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c3Mmh,incubator-baremaps,1557973409,635,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-22T20:51:48Z,2023-05-22T20:51:48Z,"Sorry, I havn't been able to reproduce this error with the version in the main branch. As the issue arize in the water_polygons_shp table, I ran the workflow with the ""water-polygons"" and ""simplified-water-polygons"" steps. Here is the output I get:

```
baremaps workflow execute --file workflow.js
[INFO ] 2023-05-22 22:40:20.595 [main] Execute - Executing the workflow workflow.js
[INFO ] 2023-05-22 22:40:21.133 [main] WorkflowExecutor - Workflow graph: isDirected: true, allowsSelfLoops: false, nodes: [water-polygons, simplified-water-polygons], edges: []
[INFO ] 2023-05-22 22:40:21.140 [pool-2-thread-1] WorkflowExecutor - Executing task DownloadUrl[url=https://osmdata.openstreetmap.de/download/water-polygons-split-3857.zip, path=data/water-polygons-split-3857.zip, replaceExisting=false] of step water-polygons
[INFO ] 2023-05-22 22:40:21.140 [pool-2-thread-2] WorkflowExecutor - Executing task DownloadUrl[url=https://osmdata.openstreetmap.de/download/simplified-water-polygons-split-3857.zip, path=data/simplified-water-polygons-split-3857.zip, replaceExisting=false] of step simplified-water-polygons
[INFO ] 2023-05-22 22:40:23.057 [pool-2-thread-3] WorkflowExecutor - Executing task UnzipFile[file=data/simplified-water-polygons-split-3857.zip, directory=data] of step simplified-water-polygons
[INFO ] 2023-05-22 22:40:23.206 [pool-2-thread-4] WorkflowExecutor - Executing task ImportShapefile[file=data/simplified-water-polygons-split-3857/simplified_water_polygons.shp, database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, sourceSRID=3857, targetSRID=3857] of step simplified-water-polygons
[INFO ] 2023-05-22 22:40:23.211 [pool-2-thread-4] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-05-22 22:40:23.319 [pool-2-thread-4] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59d0e035
[INFO ] 2023-05-22 22:40:23.320 [pool-2-thread-4] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-05-22 22:41:04.222 [pool-2-thread-5] WorkflowExecutor - Executing task UnzipFile[file=data/water-polygons-split-3857.zip, directory=data] of step water-polygons
[INFO ] 2023-05-22 22:41:09.360 [pool-2-thread-6] WorkflowExecutor - Executing task ImportShapefile[file=data/water-polygons-split-3857/water_polygons.shp, database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, sourceSRID=3857, targetSRID=3857] of step water-polygons
[INFO ] 2023-05-22 22:47:02.948 [pool-2-thread-6] WorkflowExecutor - ----------------------------------------
[INFO ] 2023-05-22 22:47:02.954 [pool-2-thread-6] WorkflowExecutor - Workflow graph: isDirected: true, allowsSelfLoops: false, nodes: [water-polygons, simplified-water-polygons], edges: []
[INFO ] 2023-05-22 22:47:02.954 [pool-2-thread-6] WorkflowExecutor -   Duration: 6 min 41 s 807 ms
[INFO ] 2023-05-22 22:47:02.955 [pool-2-thread-6] WorkflowExecutor - Step: water-polygons, Duration: 6 min 41 s 807 ms  ms
[INFO ] 2023-05-22 22:47:02.955 [pool-2-thread-6] WorkflowExecutor -   Task: DownloadUrl[url=https://osmdata.openstreetmap.de/download/water-polygons-split-3857.zip, path=data/water-polygons-split-3857.zip, replaceExisting=false]
[INFO ] 2023-05-22 22:47:02.955 [pool-2-thread-6] WorkflowExecutor -     Duration: 43 s 82 ms
[INFO ] 2023-05-22 22:47:02.955 [pool-2-thread-6] WorkflowExecutor -   Task: UnzipFile[file=data/water-polygons-split-3857.zip, directory=data]
[INFO ] 2023-05-22 22:47:02.955 [pool-2-thread-6] WorkflowExecutor -     Duration: 5 s 137 ms
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -   Task: ImportShapefile[file=data/water-polygons-split-3857/water_polygons.shp, database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, sourceSRID=3857, targetSRID=3857]
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -     Duration: 5 min 53 s 587 ms
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor - Step: simplified-water-polygons, Duration: 9 s 194 ms  ms
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -   Task: DownloadUrl[url=https://osmdata.openstreetmap.de/download/simplified-water-polygons-split-3857.zip, path=data/simplified-water-polygons-split-3857.zip, replaceExisting=false]
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -     Duration: 1 s 912 ms
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -   Task: UnzipFile[file=data/simplified-water-polygons-split-3857.zip, directory=data]
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -     Duration: 146 ms
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -   Task: ImportShapefile[file=data/simplified-water-polygons-split-3857/simplified_water_polygons.shp, database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, sourceSRID=3857, targetSRID=3857]
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor -     Duration: 7 s 128 ms
[INFO ] 2023-05-22 22:47:02.956 [pool-2-thread-6] WorkflowExecutor - ----------------------------------------
[INFO ] 2023-05-22 22:47:02.957 [main] Execute - Finished executing the workflow workflow.js
```

Have you executed this step with the main branch or with version 0.7.1? We had a couple of issues in the last release that have now been fixed.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c3Mmh/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/639,incubator-baremaps,1689751125,639,Problem with the basic osm example,gcor,4715396,Anton Ahatov,anton@gcor.ru,CLOSED,2023-04-30T02:20:25Z,2023-05-15T19:44:20Z,"Hello. Could you help with the basic example problem?

My steps:

1. download [osm example](https://github.com/apache/incubator-baremaps/tree/main/examples/openstreetmap)
2. setup db
3. execute `baremaps workflow execute --file ./workflow.json`

I see error: `java.lang.NullPointerException: Cannot invoke ""java.util.List.stream()"" because ""refs"" is null`

If I start `baremaps map dev ...` I see a white screen on localhost:9000 without any errors in the inspector.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/639/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIYIn,incubator-baremaps,1528922663,639,NA,gcor,4715396,Anton Ahatov,anton@gcor.ru,NA,2023-04-30T02:26:41Z,2023-04-30T02:26:41Z,"Found that the height of map is 0

<img width=""955"" alt=""Screenshot 2023-04-30 at 03 23 59"" src=""https://user-images.githubusercontent.com/4715396/235332599-a107d6ec-1f40-414a-9168-05e0d6189214.png"">
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIYIn/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIm1s,incubator-baremaps,1528982892,639,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-30T09:46:02Z,2023-04-30T09:46:02Z,"@gcor Thanks for taking the time to report these issues. We really need to improve the experience for new users and your comments are of great help.

The warnings displayed in the logs are provided as a conveniences to fix the geometries upstream. It has been reported by several new users and we will hide them in future releases to avoid confusion.

Good catch for the second issue related to the size of the div! This issue appeared after upgrading the rendering library and it has been fixed in the main branch. I didn't realize that our latest release was affected and this is a huge motivation for dropping a new release.

If you want to make further experiments, I suggest [building baremaps from the sources](https://github.com/apache/incubator-baremaps-site/blob/main/pages/documentation/developer-manual/how-to-build-with-maven.mdx). I checked the examples with the main version and they work as expected.






","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIm1s/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIvMt,incubator-baremaps,1529017133,639,NA,gcor,4715396,Anton Ahatov,anton@gcor.ru,NA,2023-04-30T12:41:49Z,2023-04-30T12:41:49Z,"Thank you! Could I clarify one more moment?

Right now there are only red buildings in the example, but it would be great to have a similar one on your homepage: https://baremaps.apache.org/ 

Are you planning to add additional settings to `style.json` in the example, especially `sprite` and `glyphs`? As far as I understand, your public demo uses non-open-source api?
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIvMt/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIv5q,incubator-baremaps,1529020010,639,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-04-30T12:57:56Z,2023-04-30T12:57:56Z,"Sure, the map published on the homepage is located in the [`basemap` directory](https://github.com/apache/incubator-baremaps/tree/main/basemap). As the style is rather complex, we use javascript instead of json as a configuration language, but the commands to build and serve the map are essentially the same. 

The repository used to create the sprites has not yet been moved to apache (we recently joined the incubator), however, you can find it in our [old organisation](https://github.com/baremaps/icons). I believe it is also fine to download the resulting files directly:
- https://tiles.baremaps.com/sprites/osm/sprite.png
- https://tiles.baremaps.com/sprites/osm/sprite.json

Do not hesitate to share your experience and usecase. Our focus is currently on community building and we really need to improve on this aspect in order to graduate from the incubator at some point.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bIv5q/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cMM68,incubator-baremaps,1546702524,639,NA,gcor,4715396,Anton Ahatov,anton@gcor.ru,NA,2023-05-13T16:15:01Z,2023-05-13T16:15:01Z,"Found one thing that could be a bug.
I see a lot of building info duplications

https://demo.baremaps.com/#16.95/46.514889/6.62869

<img width=""568"" alt=""Screenshot 2023-05-13 at 17 11 33"" src=""https://github.com/apache/incubator-baremaps/assets/4715396/0cbb53b6-7f70-4d6e-8bdd-809f6a0658d2"">
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cMM68/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/639,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cMYOZ,incubator-baremaps,1546748825,639,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-13T21:00:21Z,2023-05-13T21:00:21Z,"@gcor I think this is due to the fact that the building source in the vector tile is used twice by the style: a first time for displaying the polygons and a second time for displaying the building numbers. 

After toggling the inspect mode, the duplicate disappears because the building source is used only once by the inspection style. You can observe the same behavior when clicking on trees (trunk and foliage).

![Screenshot 2023-05-13 at 22 56 59](https://github.com/apache/incubator-baremaps/assets/238747/be2afa07-6b0d-431e-9fe7-65abf195a959)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cMYOZ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/640,https://api.github.com/repos/apache/incubator-baremaps/issues/640,incubator-baremaps,1695715430,640,Improve the ip to location api,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-04T10:16:22Z,2023-05-09T08:49:29Z,"The current ip to location endpoint accepts the following path:

/api/ip/{ip}

It would be preferable to replace the path parameter by a query parameter, so that:

/api/iploc?ip={ip}

if the query parameter is empty, then the service should deduce the ip of the client using the header or the connection.

see: https://api.ipify.org/?format=json","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/640/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/640,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bxh6V,incubator-baremaps,1539710613,640,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-09T08:49:29Z,2023-05-09T08:49:29Z,Solved in #648,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5bxh6V/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/641,https://api.github.com/repos/apache/incubator-baremaps/issues/641,incubator-baremaps,1695769434,641,Address encoding issues in the geocoder,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-04T10:52:01Z,2023-05-06T22:21:37Z,"![Screenshot 2023-05-04 at 12 51 19](https://user-images.githubusercontent.com/238747/236183889-e8778440-5868-4b31-8faa-aaca956a1be2.png)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/641/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/651,https://api.github.com/repos/apache/incubator-baremaps/issues/651,incubator-baremaps,1708532471,651,"Documentation ""Installing the CLI"" out of date",louwers,649392,Bart Louwers,,CLOSED,2023-05-13T09:28:48Z,2023-05-15T07:29:16Z,"This is what I see with v0.7.1

```
% ./baremaps
Usage: baremaps [-V] [COMMAND]
A toolkit for producing vector tiles.
  -V, --version   Print version info.
Commands:
  workflow  Manage a workflow.
  database  Database commands.
  map       Map commands.
  geocoder  Geocoder commands (experimental).
  iploc     IP to location commands (experimental).
  ogcapi    OGC API server (experimental).
```

This is different from what the documentation lists as options:

https://baremaps.apache.org/documentation/getting-started/installing-the-cli/

These options still seem to be available with `baremaps map ...`.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/651/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/651,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cL24k,incubator-baremaps,1546612260,651,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-13T10:01:58Z,2023-05-13T10:01:58Z,"Thank you for reporting this issue. Do not hesitate to update the documentation with your output.

Please, notice that following an upgrade of the rendering library, Baremaps v0.7.1 displays a blank map. This has been fixed in the main branch, but we yet have to drop a new release.

https://github.com/apache/incubator-baremaps/issues/639","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cL24k/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/651,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cOmEW,incubator-baremaps,1547329814,651,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-15T07:29:12Z,2023-05-15T07:29:12Z,@louwers I updated the documentation with your output. Do not hesitate to share the other errors or incoherences you spot in the documentation.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cOmEW/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/652,https://api.github.com/repos/apache/incubator-baremaps/issues/652,incubator-baremaps,1708543778,652,CSS issue: Map not showing because it has no height,louwers,649392,Bart Louwers,,CLOSED,2023-05-13T10:00:35Z,2023-05-13T17:50:49Z,"I tried the OSM example.

The map div as

```
#map {
  height: 100%;
}
```

But since it is positioned directly under `body` which does not have any height itself, the map is not showing.

Can be easily fixed by setting the height to `100vh`.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/652/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/652,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cL3BI,incubator-baremaps,1546612808,652,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-13T10:05:02Z,2023-05-13T10:05:02Z,"Thank you for reporting the issue. We fixed it in main with a fixed position, but we yet have to drop a new release.

https://github.com/apache/incubator-baremaps/blob/572a1557904d8290e2afa08eff04b5f3208f3990/baremaps-server/src/main/resources/assets/server.html#L27

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cL3BI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/652,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cMRAg,incubator-baremaps,1546719264,652,NA,louwers,649392,Bart Louwers,,NA,2023-05-13T17:50:49Z,2023-05-13T17:50:49Z,Cool thanks!,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cMRAg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/655,https://api.github.com/repos/apache/incubator-baremaps/issues/655,incubator-baremaps,1708894732,655,Remove the database parameter from the map subcommands,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-14T10:31:54Z,2023-05-22T16:46:51Z,"A few subcommands include a database parameter that could moved in configuration files. For instance  the database parameter of `map dev`, `map serve`, and `map export` subcommands could be moved in the `tileset.json` file, as it is already the case for the `workflow.json` file.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/655/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/655,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cWSIo,incubator-baremaps,1549345320,655,NA,Perdjesk,1125783,,,NA,2023-05-16T09:47:46Z,2023-05-16T09:47:46Z,"While doing a basic implementation that parses the `tileset.json` which contains a custom field `database`, I figured that `tileset.json` is served to the browser client by parsing it and mapping to a POJO. 
Even if it is possible to hide custom fields contained in `tileset.json` by not including those in the POJO served to the client, I find the approach prone to errors which could lead to leaking the database credentials (included in JDBC url) to the client.

If the intent is to have a configuration file alternative to CLI parameters, I would propose to have a clear segregation between configuration files that are served as-is to the client and server side ones.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cWSIo/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/655,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cWbEW,incubator-baremaps,1549381910,655,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-16T10:11:32Z,2023-05-16T10:11:32Z,Sounds good to me. Does this means that we should introduce a new class for the Json payload that we serve?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5cWbEW/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/656,https://api.github.com/repos/apache/incubator-baremaps/issues/656,incubator-baremaps,1709609934,656,Importing natural earth generates an error,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-15T08:42:54Z,2023-05-26T07:23:15Z,"```
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
        at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
        at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:48)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:29)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
        at picocli.CommandLine.access$1300(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
        at picocli.CommandLine.execute(CommandLine.java:2078)
        at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:83)
Caused by: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:162)
        at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
        at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: org.apache.baremaps.workflow.WorkflowException: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
        at org.apache.baremaps.workflow.tasks.ImportGeoPackage.execute(ImportGeoPackage.java:45)
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:157)
        ... 5 more
Caused by: java.lang.RuntimeException: java.io.IOException: Ending write to copy failed.
        at org.apache.baremaps.storage.postgres.PostgresStore.add(PostgresStore.java:187)
        at org.apache.baremaps.workflow.tasks.ImportGeoPackage.execute(ImportGeoPackage.java:42)
        ... 6 more
Caused by: java.io.IOException: Ending write to copy failed.
        at org.postgresql.copy.PGCopyOutputStream.close(PGCopyOutputStream.java:115)
        at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)
        at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)
        at org.apache.baremaps.postgres.copy.CopyWriter.close(CopyWriter.java:344)
        at org.apache.baremaps.storage.postgres.PostgresStore.add(PostgresStore.java:185)
        ... 7 more
Caused by: org.postgresql.util.PSQLException: ERROR: Unknown WKB type (16542440)!
  Where: COPY ne_10m_admin_0_antarctic_claims, line 9, column geom
        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676)
        at org.postgresql.core.v3.QueryExecutorImpl.processCopyResults(QueryExecutorImpl.java:1264)
        at org.postgresql.core.v3.QueryExecutorImpl.endCopy(QueryExecutorImpl.java:1069)
        at org.postgresql.core.v3.CopyInImpl.endCopy(CopyInImpl.java:49)
        at org.postgresql.copy.PGCopyOutputStream.endCopy(PGCopyOutputStream.java:183)
        at org.postgresql.copy.PGCopyOutputStream.close(PGCopyOutputStream.java:113)
        ... 11 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/656/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/656,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c3Hp6,incubator-baremaps,1557953146,656,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-22T20:38:05Z,2023-05-22T20:38:05Z,"@leonardcser When commenting all the steps in the basemap except the one with the ""natural-earth"" id, I get the following result: 

```
baremaps workflow execute --file workflow.js
[INFO ] 2023-05-22 22:31:59.887 [main] Execute - Executing the workflow workflow.js
[INFO ] 2023-05-22 22:32:00.409 [main] WorkflowExecutor - Workflow graph: isDirected: true, allowsSelfLoops: false, nodes: [natural-earth], edges: []
[INFO ] 2023-05-22 22:32:00.416 [pool-2-thread-1] WorkflowExecutor - Executing task DownloadUrl[url=https://naciscdn.org/naturalearth/packages/natural_earth_vector.gpkg.zip, path=data/natural_earth_vector.gpkg.zip, replaceExisting=false] of step natural-earth
[INFO ] 2023-05-22 22:32:01.211 [pool-2-thread-1] DownloadUrl - Skipping download of https://naciscdn.org/naturalearth/packages/natural_earth_vector.gpkg.zip to data/natural_earth_vector.gpkg.zip
[INFO ] 2023-05-22 22:32:01.215 [pool-2-thread-2] WorkflowExecutor - Executing task UnzipFile[file=data/natural_earth_vector.gpkg.zip, directory=data/natural_earth_vector] of step natural-earth
[INFO ] 2023-05-22 22:32:04.424 [pool-2-thread-3] WorkflowExecutor - Executing task ImportGeoPackage[file=data/natural_earth_vector/packages/natural_earth_vector.gpkg, database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, sourceSRID=4326, targetSRID=3857] of step natural-earth
[INFO ] 2023-05-22 22:32:04.667 [pool-2-thread-3] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-05-22 22:32:04.773 [pool-2-thread-3] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@48d08ad5
[INFO ] 2023-05-22 22:32:04.774 [pool-2-thread-3] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-05-22 22:32:50.598 [pool-2-thread-4] WorkflowExecutor - Executing task ExecuteSql[database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, file=queries/ne_index.sql, parallel=true] of step natural-earth
[INFO ] 2023-05-22 22:32:51.056 [pool-2-thread-4] WorkflowExecutor - ----------------------------------------
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor - Workflow graph: isDirected: true, allowsSelfLoops: false, nodes: [natural-earth], edges: []
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor -   Duration: 50 s 639 ms
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor - Step: natural-earth, Duration: 50 s 639 ms  ms
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor -   Task: DownloadUrl[url=https://naciscdn.org/naturalearth/packages/natural_earth_vector.gpkg.zip, path=data/natural_earth_vector.gpkg.zip, replaceExisting=false]
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor -     Duration: 795 ms
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor -   Task: UnzipFile[file=data/natural_earth_vector.gpkg.zip, directory=data/natural_earth_vector]
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor -     Duration: 3 s 207 ms
[INFO ] 2023-05-22 22:32:51.060 [pool-2-thread-4] WorkflowExecutor -   Task: ImportGeoPackage[file=data/natural_earth_vector/packages/natural_earth_vector.gpkg, database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, sourceSRID=4326, targetSRID=3857]
[INFO ] 2023-05-22 22:32:51.061 [pool-2-thread-4] WorkflowExecutor -     Duration: 46 s 173 ms
[INFO ] 2023-05-22 22:32:51.061 [pool-2-thread-4] WorkflowExecutor -   Task: ExecuteSql[database=jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps, file=queries/ne_index.sql, parallel=true]
[INFO ] 2023-05-22 22:32:51.061 [pool-2-thread-4] WorkflowExecutor -     Duration: 457 ms
[INFO ] 2023-05-22 22:32:51.061 [pool-2-thread-4] WorkflowExecutor - ----------------------------------------
[INFO ] 2023-05-22 22:32:51.061 [main] Execute - Finished executing the workflow workflow.js
```

Additionnaly, the ne_10m_admin_0_antarctic_claims table seems to contain data.

Is this issue happening on your mac with the latest version? Could you try to provide more information?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5c3Hp6/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/656,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dJH7n,incubator-baremaps,1562672871,656,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-25T10:34:24Z,2023-05-25T10:34:24Z,"It seems that we have a regression. I have now been able to reproduce the error, but I havn't identified the root cause.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dJH7n/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/657,https://api.github.com/repos/apache/incubator-baremaps/issues/657,incubator-baremaps,1709702164,657,Integration tests for regression detection,leonardcser,73912641,Leonard,,CLOSED,2023-05-15T09:35:54Z,2023-05-22T16:46:23Z,"The idea is to implement a system to check changes by rendering areas of interest and doing a pixel by pixel match detection.

## Approches

In order to do integration testing, the code would have to have it's own `package.json` as it would require:
- maplibre
- puppeteer
- pixelmatch

A consideration to make is whether to use javascript or typescript.
- Javascript is easy to run with node
- Typescript provides more type safety and documentation but requires a ts complier (two step)

### 1. Basemap Only
Include all the logic in a new folder in `basemap/tests/`. The actual tests would be in `basemap/tests/integration/` and the entry point script would be at `basemap/tests/main.js`

In the CICD this would be:

```bash
cd basemap/tests/
npm install
npm run test
```

### 2. Integration Testing Script
Include all the logic in a new package at the root of the repository (`integration-testing/`). This package would export a cli script that allows to run the integration tests in any given folder by discovering them.

The actual tests would also be in `basemap/tests/integration/`. As an example, to run the tests:

```bash
baremaps-test discover basemap
```

## Functionality

The test render would be inspired by maplibre's testing suite:
https://github.com/maplibre/maplibre-gl-js/tree/main/test/integration/render

Each integration test would contain a metadata file with lon, lat and zoom and the an `expected.png` image.

The script would allow to:
 - generate the `expected.png` for individual tests or for all tests in the folder
 - run an individual test or all tests in the folder

For reporting, the script would generate an html file containing statistics and failed tests with side by side comparisons.

## Proposition

Since performing integration testing requires puppeteer, it would make sense to have this a separate package (2nd approach).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/657/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/662,https://api.github.com/repos/apache/incubator-baremaps/issues/662,incubator-baremaps,1719875135,662,Make the download page compliant with Apache's requirements,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-22T15:00:08Z,2023-05-22T20:10:55Z,"- [x] must have at least one link to the current release. This link must use the closer.lua utility. For example: https://www.apache.org/dyn/closer.lua/PROJECT/VERSION/SOURCE-RELEASE. (Note: the mirrors.cgi and closer.cgi scripts have been deprecated. Calls to them redirect to closer.lua.)
- [x] must have a link to the checksum for the current release. These links must use direct links to the Apache distribution server. For example: https://downloads.apache.org/PROJECT/VERSION/CHECKSUM.
- [x] must have a link to the KEYS file for your project on the Apache distribution server. For example: https://downloads.apache.org/PROJECT/KEYS.
should have instructions on how to verify downloads. For this you can include a link to the [Apache documentation on verification](https://www.apache.org/info/verification.html).
- [x] must not include a link to the top level closer.lua utility (e.g. http://www.apache.org/dyn/closer.lua/PROJECT) as the KEYS, signatures, and any verification instructions for your release would be missing from the top-level script.

Source: https://infra.apache.org/release-download-pages.html#download-page","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/662/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/664,https://api.github.com/repos/apache/incubator-baremaps/issues/664,incubator-baremaps,1722777097,664,A conflict introduced a bug in the server command,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-23T20:57:36Z,2023-05-23T21:16:21Z,"After, caching the tile, the server is not able to serve it a second time because the same byte buffer reference is reused.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/664/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/669,https://api.github.com/repos/apache/incubator-baremaps/issues/669,incubator-baremaps,1725570372,669,Fix the sonar configuration,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-25T10:46:26Z,2023-05-28T10:05:13Z,"We should configure sonar to use the apache organisation. An issue has been open on jira:
https://issues.apache.org/jira/projects/INFRA/issues/INFRA-24592
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/669/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/670,https://api.github.com/repos/apache/incubator-baremaps/issues/670,incubator-baremaps,1725641454,670,Filter map points by population,leonardcser,73912641,Leonard,,CLOSED,2023-05-25T11:34:29Z,2023-05-25T13:54:20Z,"Currently, at low zoom level, there are too many city names. The idea would be to filter them by population.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/670/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/673,https://api.github.com/repos/apache/incubator-baremaps/issues/673,incubator-baremaps,1728692695,673,"Display icons, country names, and boundaries on the basemap",bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-27T12:21:07Z,2023-05-27T12:22:41Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/673/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/675,https://api.github.com/repos/apache/incubator-baremaps/issues/675,incubator-baremaps,1728695604,675,Remove name translations from points at low zoom levels,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-27T12:28:32Z,2023-05-27T12:35:30Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/675/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/678,https://api.github.com/repos/apache/incubator-baremaps/issues/678,incubator-baremaps,1729689381,678,Render highway=busway,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-28T21:37:55Z,2023-05-31T21:24:20Z,"Baremaps currently doesn't render highway=busway either, leading to awkward gaps in the map. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/678/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/679,https://api.github.com/repos/apache/incubator-baremaps/issues/679,incubator-baremaps,1729711865,679,RTL text is rendered incorrectly,LeoNatan,2270433,Léo Natan,,CLOSED,2023-05-28T22:23:27Z,2023-06-01T19:06:12Z,"https://demo.baremaps.com/#12.91/32.06932/34.75969

<img width=""981"" alt=""Screenshot 2023-05-29 at 1 20 56"" src=""https://github.com/apache/incubator-baremaps/assets/2270433/eda45797-63d9-4ec5-b76e-1c2df5f79793"">

Should be “תל אביב-יפו”, not “ופי-ביבא לת”. It seems the text renderer just assumes LTR for all languages, or incorrectly draws Hebrew specifically, in this case. Can’t read Arabic, so can’t verify.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/679/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/679,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dW6bF,incubator-baremaps,1566287557,679,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-28T22:32:40Z,2023-05-28T22:32:40Z,"Thanks a lot, I closed #680.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dW6bF/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/679,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dXxkP,incubator-baremaps,1566513423,679,NA,aksiksi,916621,Assil Ksiksi,assilksiksi@gmail.com,NA,2023-05-29T04:27:53Z,2023-05-29T04:27:53Z,"Arabic doesn’t render correctly either. Taking Tunis, Tunisia as an example, it should read تونس.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dXxkP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/679,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZKKU,incubator-baremaps,1566876308,679,NA,bdon,77501,Brandon Liu,,NA,2023-05-29T09:55:11Z,2023-05-29T09:55:11Z,https://github.com/apache/incubator-baremaps-site/pull/30,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZKKU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/679,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZZwk,incubator-baremaps,1566940196,679,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-29T10:35:55Z,2023-05-29T10:35:55Z,"Thanks a lot for the pointer, it now looks better. I will keep this issue open as a few html files in the resource directory of baremaps also need to be fixed.

![Screenshot 2023-05-29 at 12 33 51](https://github.com/apache/incubator-baremaps/assets/238747/99918ffe-7960-4841-82b0-8a326cfb02de)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZZwk/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/679,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5de8OK,incubator-baremaps,1568392074,679,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-30T12:59:21Z,2023-05-30T12:59:21Z,"@aksiksi At a first glance, the patch seems to be working for Tunisia.

<img width=""157"" alt=""Screenshot 2023-05-30 at 14 56 37"" src=""https://github.com/apache/incubator-baremaps/assets/238747/c9343a5a-9302-4379-90fa-e82a1f0335d2"">
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5de8OK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/680,https://api.github.com/repos/apache/incubator-baremaps/issues/680,incubator-baremaps,1729712496,680,Improving support for languages,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-05-28T22:25:23Z,2023-05-28T22:31:44Z,"https://demo.baremaps.com/#12.91/32.06932/34.75969

Should be “תל אביב”, not “ביבא לת”. How do these issues even exists in 2023? Is a team building these renders not aware of RTL languages, or do they just not bother implementing it?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/680/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/681,incubator-baremaps,1730406632,681,Handle the Out of Memory Errors,devdattaT,4159622,Devdatta Tengshe,,CLOSED,2023-05-29T09:21:42Z,2023-11-20T15:26:55Z,"I am trying to import an OSM Extract of a large Metropolitan area, that I already have downloaded, and ingesting it into my PostGIS Database, using the following workflow file:

`{
  ""steps"": [
    {
      ""id"": ""import"",
      ""needs"": [],
      ""tasks"": [
        {
          ""type"": ""ImportOpenStreetMap"",
          ""file"": ""kol.osm.pbf"",
          ""database"": ""jdbc:postgresql://localhost:5432/basemaps?&user=DevdattaTengshe"",
          ""databaseSrid"": 3857
        }
      ]
    },
    {
      ""id"": ""index"",
      ""needs"": [
        ""import""
      ],
      ""tasks"": [
        {
          ""type"": ""ExecuteSql"",
          ""file"": ""indexes.sql"",
          ""database"": ""jdbc:postgresql://localhost:5432/basemaps?&user=DevdattaTengshe""
        }
      ]
    }
  ]
}
`

When I try to import this file into my database, with the command: `baremaps workflow execute --file kol.json` I get the following error

`[INFO ] 2023-05-29 14:46:44.729 [main] Execute - Executing the workflow kol.json
[INFO ] 2023-05-29 14:46:44.842 [pool-2-thread-1] ImportOpenStreetMap - Importing kol.osm.pbf into jdbc:postgresql://localhost:5432/basemaps?&user=DevdattaTengshe
[INFO ] 2023-05-29 14:46:44.847 [pool-2-thread-1] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-05-29 14:46:44.898 [pool-2-thread-1] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@25fd651a
[INFO ] 2023-05-29 14:46:44.899 [pool-2-thread-1] HikariDataSource - HikariPool-1 - Start completed.
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError
	at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
	at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:48)
	at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:29)
	at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
	at picocli.CommandLine.access$1300(CommandLine.java:145)
	at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
	at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
	at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
	at picocli.CommandLine.execute(CommandLine.java:2078)
	at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:83)
Caused by: java.lang.OutOfMemoryError
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)
	at java.base/java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:542)
	at java.base/java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:567)
	at java.base/java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:670)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:159)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:765)
	at org.apache.baremaps.workflow.tasks.ImportOpenStreetMap.execute(ImportOpenStreetMap.java:141)
	at org.apache.baremaps.workflow.tasks.ImportOpenStreetMap.execute(ImportOpenStreetMap.java:100)
	at org.apache.baremaps.workflow.WorkflowExecutor.lambda$initStep$3(WorkflowExecutor.java:97)
	at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
	at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.lang.OutOfMemoryError: Cannot reserve 1048576 bytes of direct buffer memory (allocated: 8589580449, limit: 8589934592)
	at java.base/java.nio.Bits.reserveMemory(Bits.java:178)
	at java.base/java.nio.DirectByteBuffer.<init>(DirectByteBuffer.java:128)
	at java.base/java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:342)
	at org.apache.baremaps.collection.memory.OffHeapMemory.allocate(OffHeapMemory.java:40)
	at org.apache.baremaps.collection.memory.Memory.allocate(Memory.java:94)
	at org.apache.baremaps.collection.memory.Memory.segment(Memory.java:78)
	at org.apache.baremaps.collection.MemoryAlignedDataList.write(MemoryAlignedDataList.java:82)
	at org.apache.baremaps.collection.MemoryAlignedDataList.addIndexed(MemoryAlignedDataList.java:89)
	at org.apache.baremaps.collection.DataList.add(DataList.java:40)
	at org.apache.baremaps.collection.MonotonicDataMap.put(MonotonicDataMap.java:87)
	at org.apache.baremaps.collection.MonotonicDataMap.put(MonotonicDataMap.java:34)
	at org.apache.baremaps.openstreetmap.function.CoordinateMapBuilder.accept(CoordinateMapBuilder.java:41)
	at org.apache.baremaps.openstreetmap.function.CoordinateMapBuilder.accept(CoordinateMapBuilder.java:24)
	at java.base/java.util.function.Consumer.lambda$andThen$0(Consumer.java:65)
	at java.base/java.util.function.Consumer.lambda$andThen$0(Consumer.java:65)
	at java.base/java.util.function.Consumer.lambda$andThen$0(Consumer.java:65)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.apache.baremaps.openstreetmap.function.BlockEntitiesHandler.accept(BlockEntitiesHandler.java:44)
	at org.apache.baremaps.openstreetmap.function.BlockEntitiesHandler.accept(BlockEntitiesHandler.java:25)
	at org.apache.baremaps.stream.ConsumerUtils.lambda$consumeThenReturn$1(ConsumerUtils.java:46)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.apache.baremaps.stream.BufferedSpliterator.tryAdvance(BufferedSpliterator.java:74)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:292)
	at java.base/java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206)
	at java.base/java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:169)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:298)
	at org.apache.baremaps.stream.BatchedSpliterator.tryAdvance(BatchedSpliterator.java:48)
	at org.apache.baremaps.stream.BatchedSpliterator.trySplit(BatchedSpliterator.java:59)
	at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:289)
	at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1311)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1841)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1806)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:177)`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/681/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZEqy,incubator-baremaps,1566853810,681,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-29T09:38:09Z,2023-05-29T09:38:09Z,"I havn't encountered this error before. Does the kol.osm.pbf file come from geofabrik? Baremaps uses large memory mapped files to construct the geometries and it looks like this workflow hits some memory allocation limit. Could you also provide more information about your environement (OS, RAM available, etc.)?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZEqy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZJXS,incubator-baremaps,1566873042,681,NA,devdattaT,4159622,Devdatta Tengshe,,NA,2023-05-29T09:51:48Z,2023-05-29T09:51:48Z,"This is a custom file, created by getting the Extract from geofabrik, and adding additional data (Buildings and POIs) from proprietary sources. 

A possible cause of the error could be due to these additional elements having large Ids.
Running osmium's fileinfo gives the following:

> File:
>   Name: kol.osm.pbf
>   Format: PBF
>   Compression: none
>   Size: 42727714
> Header:
>   Bounding boxes:
>   With history: no
>   Options:
>     generator=osmium/1.15.0
>     pbf_dense_nodes=true
>     pbf_optional_feature_0=Sort.Type_then_ID
>     sorting=Type_then_ID
> [======================================================================] 100%
> Data:
>   Bounding box: (86.5196907,21.7443002,88.9361347,25.0160464)
>   Timestamps:
>     First:
>     Last: 2023-05-22T16:39:43Z
>   Objects ordered (by type and id): yes
>   Multiple versions of same object: no
>   CRC32: not calculated (use --crc/-c to enable)
>   Number of changesets: 0
>   Number of nodes: 6056375
>   Number of ways: 1188524
>   Number of relations: 1667
>   Smallest changeset ID: 0
>   Smallest node ID: 239677149
>   Smallest way ID: 22328118
>   Smallest relation ID: 49602
>   Largest changeset ID: 0
>   Largest node ID: 5000329540503
>   Largest way ID: 3000040486463
>   Largest relation ID: 3000000002836
>   Number of buffers: 9140 (avg 792 objects per buffer)
>   Sum of buffer sizes: 584050072 (0.556 GB)
>   Sum of buffer capacities: 599457792 (0.571 GB, 97% full)
> Metadata:
>   All objects have following metadata attributes: none
>   Some objects have following metadata attributes: version+timestamp
> 

Do note that this file works with other tools such as `osm2pgsql`, `tilemaker` & `planetiler`","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZJXS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZc1H,incubator-baremaps,1566952775,681,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-29T10:48:24Z,2023-05-29T10:48:24Z,"Interesting use case, I knew that pbf files were used for data exchange beyond OpenStreetMap, but I never experienced with this personnally. Does the file weight around 42 MB? Do you know where I could find a similar file? if you don't mind sharing this file privately, being able to reproduce the error would be of great help.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZc1H/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZoTK,incubator-baremaps,1566999754,681,NA,devdattaT,4159622,Devdatta Tengshe,,NA,2023-05-29T11:19:03Z,2023-05-29T11:19:03Z,"I can share a similar file with you , which I created just now, containing data from GeoFabrik, and Buildings added from Microsoft Buildings. I have checked, and I get a similar out of Memory Error with this File.
The file size of this new file is about 62 Mb, and I can share it with you privately as a Google Drive link.
I have shared it on the Gmail address present on your Profile.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZoTK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZo4R,incubator-baremaps,1567002129,681,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-29T11:21:35Z,2023-05-29T11:21:35Z,"This is great, thank you!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dZo4R/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/681,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5d48NJ,incubator-baremaps,1575207753,681,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-06-03T21:38:49Z,2023-06-03T21:38:49Z,"I think I spotted the origin of the issue. The keys of the additional object start at a much greater index than the usual object. The MonotonicDataMap that stores coordinates partition the key space with chunks and the number of chunks in between the last osm key and the first additional object key does not fit into memory. We will probably need to devise a new data structure to address this issue.

last osm key: 10935151878
first additional object key: 5000028797831","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5d48NJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/682,https://api.github.com/repos/apache/incubator-baremaps/issues/682,incubator-baremaps,1731089138,682,Instructions in ip to location example are difficult to follow,arnaudaz,1707957,,,CLOSED,2023-05-29T18:00:26Z,2023-06-21T07:15:30Z,"Great Project! In the documentation example, https://baremaps.apache.org/documentation/examples/ip-to-location/ , the first section around datasets mentions the 5 RIRs and that IP Geolocation is publicly available from them.

In the 2nd step, Generate the index there is the instruction: Download and decompress the data from the RIRs

Loading the first arin.net link, it is not clear or obvious how to download the data, which makes this example impossible to follow.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/682/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/682,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dbK_L,incubator-baremaps,1567403979,682,NA,Perdjesk,1125783,,,NA,2023-05-29T18:16:26Z,2023-05-29T18:16:26Z,"Those are steps describing what baremaps is doing when executing the [wokflow.js](https://github.com/apache/incubator-baremaps/blob/28a3bcdb9d36502517c4c88611ffcf7c320aa48c/examples/ip-to-location/workflow.js#LL12C7-L12C12), not steps that should be done manually.

>**The workflow executed in the following command contains multiple steps.**
> * Download and decompress the data from the RIRs
> ...

However I agree that the current docs could be misread when going fast over the tutorial.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dbK_L/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/682,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fYmwT,incubator-baremaps,1600285715,682,NA,Perdjesk,1125783,,,NA,2023-06-21T06:57:18Z,2023-06-21T06:57:18Z,@bchapuis this issue can be closed with the documentation changes live at https://baremaps.apache.org/documentation/examples/ip-to-location/,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fYmwT/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/683,https://api.github.com/repos/apache/incubator-baremaps/issues/683,incubator-baremaps,1731305487,683,Zooming into detail text stays at same scale,aex-gh,2067567,aex,,OPEN,2023-05-29T23:03:38Z,2024-02-26T07:21:23Z,"When zooming in on the demo, the text for roads, places etc all stay at the original scale where as the vector features scale as you zoom. This makes trying to zoom to read text impossible.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/683/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/683,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dhP2l,incubator-baremaps,1568996773,683,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-30T19:49:15Z,2023-05-30T19:49:15Z,"Thanks a lot for reporting this issue, I also think the font size is too small right now.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5dhP2l/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/684,https://api.github.com/repos/apache/incubator-baremaps/issues/684,incubator-baremaps,1731996700,684,Baremaps does not draw highways marked as construction,devdattaT,4159622,Devdatta Tengshe,,CLOSED,2023-05-30T10:45:08Z,2023-05-31T07:14:26Z,"If you look at https://demo.baremaps.com/#16.05/18.507001/73.784037, you will see a Gap , because it misses the roads marked as construction = * and highway=construction

Map from Baremaps:
<img width=""1007"" alt=""Screenshot 2023-05-30 at 16 12 42"" src=""https://github.com/apache/incubator-baremaps/assets/4159622/971e2f48-c6f3-4351-903a-853e3690d3c3"">


Map from OSM's Carto:
<img width=""1007"" alt=""Screenshot 2023-05-30 at 16 13 17"" src=""https://github.com/apache/incubator-baremaps/assets/4159622/9aea2198-035f-41c6-afaf-c157ee3bdbc1"">
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/684/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/684,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5denuH,incubator-baremaps,1568308103,684,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-30T11:59:00Z,2023-05-30T11:59:00Z,"Good point! The data is present in the vector tiles, so it is a matter of adding new directives to the style. These dashed lines are usually a bit tricky to realize (we a large line for the background and casing; we also need a dashed white line to indicate the construction). We actually had a working version before we switch to the javascript style that could be recovered.

https://github.com/apache/incubator-baremaps/blob/main/basemap/layers/highway/highway_construction.js

<img width=""1840"" alt=""Screenshot 2023-05-30 at 13 52 11"" src=""https://github.com/apache/incubator-baremaps/assets/238747/76bd557c-eeb3-47ab-aa01-d2b3d41b5287"">
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5denuH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/684,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5djpSA,incubator-baremaps,1569625216,684,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-05-31T07:13:54Z,2023-05-31T07:13:54Z,"Here is the new version. The PR handles most highway types and have been checked with constructions in Switzerland.

![image](https://github.com/apache/incubator-baremaps/assets/238747/66de8392-a519-473c-9ef3-02b57bee58d3)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5djpSA/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/688,https://api.github.com/repos/apache/incubator-baremaps/issues/688,incubator-baremaps,1738745395,688,The export command is currently broken and fails for the planet,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-06-02T19:59:16Z,2023-06-23T12:33:56Z,"<img width=""1280"" alt=""log"" src=""https://github.com/apache/incubator-baremaps/assets/238747/21b6f179-ea2a-4bd2-9354-7fed74ea5cdc"">
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/688/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/688,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fJR-k,incubator-baremaps,1596268452,688,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-06-18T20:59:47Z,2023-06-18T20:59:47Z,"Unfortunately, I havn't been able to reproduce this error. I have been able to export all the tiles in a MBTiles file (~150GB) without incident. I believe this issue may be related to the configuration of postgresql. Here are some of the custom settings configured in the postgres.conf files:

```
work_mem = 4GB
shared_buffers = 4GB maintenance_work_mem = 16GB autovacuum_work_mem = 4GB max_worker_processes = 16 max_parallel_workers_per_gather = 8
max_parallel_workers = 16 wal_level = minimal
checkpoint_timeout = 10min max_wal_size = 20GB
min_wal_size = 80MB
checkpoint_completion_target = 0.9 max_wal_senders = 0
```

The PR associated with this issue fixes minor issues found along the way.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fJR-k/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/692,https://api.github.com/repos/apache/incubator-baremaps/issues/692,incubator-baremaps,1750122502,692,Add openstreetmap patterns to the map,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-06-09T15:41:25Z,2023-06-22T11:38:32Z,"The openstreetmap-carto style applies patterns to features.

https://github.com/gravitystorm/openstreetmap-carto/tree/master/symbols/generating_patterns

The svg files corresponding to these patterns could be converted to sdf sprites and added to the map. The idea would be to keep these sprites independant of the color, hence enabling the user to customize the map to a greater extent.

Due to license imcompatibilities, the scripts used to generate the sprite are not part of baremaps. However, we could integrate the resulting file in the basemap.

https://github.com/bchapuis/openstreetmap-icons","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/692/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/692,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fhAP9,incubator-baremaps,1602487293,692,NA,leonardcser,73912641,Leonard,,NA,2023-06-22T11:38:32Z,2023-06-22T11:38:32Z,"Currently Maplibre does not allow to change the color of patterns from an SDF format or any format. The color must originate from the image. As mentioned in the documentation, the property `paint -> fill-pattern` overrides `paint -> fill-color`:

https://maplibre.org/maplibre-style-spec/layers/#paint-fill-fill-color

The property `symbol -> icon-color` is also not compatible with `paint -> fill-pattern`.

A possible solution would be to create a script that generates SVG files from the `theme.js` and are then used as assets with the `paint -> fill-pattern` property. The tricky part would be to make this work with quick reload in development mode.

This incompatibility with `paint -> fill-pattern` and `paint -> fill-color` also implies that a layer that has patterns must be split into two layers, one for fill color and the other one for the pattern.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fhAP9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/693,https://api.github.com/repos/apache/incubator-baremaps/issues/693,incubator-baremaps,1750291393,693,Add support for PMTiles,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-06-09T17:57:52Z,2024-02-05T07:25:37Z,https://github.com/protomaps/PMTiles,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/693/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/695,https://api.github.com/repos/apache/incubator-baremaps/issues/695,incubator-baremaps,1751293465,695,Display natural=wood layer on top of leisure=park layer,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-06-11T07:25:23Z,2023-06-16T09:11:41Z,"As shown below, the natural=wood layer is currently displayed below the leisure=park layer resulting in a loss of details. This issue is also an opportunity to check that the ordering of the other layers in natural and leisure makes sense. We should also test the result with the baremaps-renderer.


![Screenshot 2023-06-11 at 09 21 01](https://github.com/apache/incubator-baremaps/assets/238747/5b63f49d-0587-4a75-b462-d614c8017301)
![Screenshot 2023-06-11 at 09 21 08](https://github.com/apache/incubator-baremaps/assets/238747/cfd9c195-eef1-4f9a-b25e-d2bea8f20cda)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/695/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/696,https://api.github.com/repos/apache/incubator-baremaps/issues/696,incubator-baremaps,1751294802,696,Merge contiguous geometries within tiles,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2023-06-11T07:27:27Z,2023-07-11T11:09:22Z,"We should merge contiguous geometries within the tiles (e.g., oceans squares). This should probably be with a step in the workflow.

![Screenshot 2023-06-11 at 09 25 50](https://github.com/apache/incubator-baremaps/assets/238747/728aceb2-38de-406a-9b3f-38d362d1bf4d)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/696/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/697,https://api.github.com/repos/apache/incubator-baremaps/issues/697,incubator-baremaps,1752521376,697,Add the ability to serve a mbtiles file,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-06-12T11:22:19Z,2023-07-01T11:32:22Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/697/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/702,https://api.github.com/repos/apache/incubator-baremaps/issues/702,incubator-baremaps,1760151044,702,Upgrading to 0.7.1,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2023-06-16T08:09:55Z,2023-06-19T17:24:16Z,"I've been a old baremaps version.
I've upgraded it to 0.7.1
But i aml getting an error
```
[ERROR] 2023-06-16 09:58:40.934 [servicetalk-global-executor-1-2] HttpExceptionMapperServiceFilter - Unexpected exception during service processing for connection=[id: 0x845aa73d, L:/[0:0:0:0:0:0:0:1%0]:9000 - R:/[0:0:0:0:0:0:0:1%0]:45702], request='GET /tiles/14/8311/5658.mvt HTTP/1.1'. Trying to return: 500 Internal Server Error
java.lang.NullPointerException: Cannot invoke ""java.nio.ByteBuffer.duplicate()"" because the return value of ""org.apache.baremaps.database.tile.TileStore.read(org.apache.baremaps.database.tile.Tile)"" is null

```

Tile set is pretty strait foward
```
{
  ""tilejson"": ""2.1.0"",
  ""tiles"": [""http://localhost:9000/tiles/{z}/{x}/{y}.mvt""],
  ""vector_layers"": [
    {
      ""id"": ""activite"",
      ""queries"": [
        {
          ""minzoom"": 13,
          ""maxzoom"": 20,
          ""sql"": ""SELECT uuid_hash(id)::integer, jsonb_build_object('nom', nom::text) as tags, geom FROM nexsis.activite""
        }
      ]
    }
  ]
}
```
And styleset also
```
{
  ""version"" : 8,
  ""sources"" : {
    ""baremaps"" : {
      ""type"" : ""vector"",
      ""url"" : ""http://localhost:9000/tiles.json""
    }
  },
  ""layers"" : [
    {
      ""id"" : ""activite"",
      ""type"" : ""circle"",
      ""source"" : ""baremaps"",
      ""source-layer"" : ""activite"",
      ""layout"" : {
        ""visibility"" : ""visible""
      }
    }
  ],
  ""center"" : [ 2.66, 48.5395 ],
  ""metadata"" : { ""maputnik:renderer"" : ""mbgljs"" },
  ""zoom"" : 14
}
```

Select in database is ok
```
   abs     |                 tags                  |                        geom                        
------------+---------------------------------------+----------------------------------------------------
 2045938576 | {""nom"": ""{activite_ambassade}""}       | 0101000020110F0000576E0B891F0C1241823906CE34A45741
 1279007087 | {""nom"": ""{activite_justice}""}         | 0101000020110F000030581D41860C12412B5516082CA45741
 2048781369 | {""nom"": ""{activite_poste}""}           | 0101000020110F0000C6699A4CDE0C1241A016660726A45741
  522579177 | {""nom"": ""{activité_voiture}""}         | 0101000020110F0000C718493C3B0D124173307A411DA45741
  979850116 | {""nom"": ""{activite_musee}""}           | 0101000020110F0000ADB4FFB67F0D1241B0A32EDE15A45741
 2116634689 | {""nom"": ""{activite_CS}""}              | 0101000020110F0000CA76A61BF50D1241851B47180DA45741
  596747879 | {""nom"": ""{activite_magasin}""}         | 0101000020110F0000B0125D96390E12419F872DDC03A45741
```



Any help would be appreciated

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/702/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/702,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fDfdJ,incubator-baremaps,1594750793,702,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-06-16T14:12:50Z,2023-06-16T14:12:50Z,Thanks a lot for reporting this issue. We identified a couple of problems in 0.7.1 that we will soon address in 0.7.2. Have you tried building baremaps from source (main branch)?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fDfdJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/702,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fMIh1,incubator-baremaps,1597016181,702,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2023-06-19T11:29:00Z,2023-06-19T11:29:00Z,"I will wait for 7.2, and check it again 
thanks for all the work :)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5fMIh1/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/703,https://api.github.com/repos/apache/incubator-baremaps/issues/703,incubator-baremaps,1760232722,703,New map style local editing command,leonardcser,73912641,Leonard,,CLOSED,2023-06-16T09:07:09Z,2023-06-20T11:59:15Z,"The idea would be to have a command to update the styles locally using the wold map tiles from the production server.

This is currently done by running:

```bash
baremaps map dev --tileset 'tileset.js' --style 'style.js'
```

And setting in the `config.js` host to `https://demo.baremaps.com` and the database to something valid. The database is not needed in this case and this is why there should be a new command for this.

## Suggestion

```bash
baremaps map style --style 'style.js'
```

This would not use any db connection but instead override the config host to be `https://demo.baremaps.com` in order to fetch the tiles from this host.

It would allow editing the styles locally while previewing the changes on the world basemap.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/703/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/711,https://api.github.com/repos/apache/incubator-baremaps/issues/711,incubator-baremaps,1771762578,711,Broken link on site,sydbarrett74,6467403,,,CLOSED,2023-06-23T16:53:17Z,2023-06-27T08:38:26Z,"On the [Getting Started](https://baremaps.apache.org/documentation/getting-started/) page, the **Developer Manual** link, which currently points [here](https://baremaps.apache.org/developer-manual/), links to a nonexistent page.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/711/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/711,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5f6Bu8,incubator-baremaps,1609046972,711,NA,leonardcser,73912641,Leonard,,NA,2023-06-27T08:36:25Z,2023-06-27T08:36:25Z,Thank you for reporting this issue! This is now fixed.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5f6Bu8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/713,https://api.github.com/repos/apache/incubator-baremaps/issues/713,incubator-baremaps,1780280857,713,Prevent information exposure through a stack trace ,Perdjesk,1125783,,,CLOSED,2023-06-29T07:24:29Z,2023-07-30T18:05:22Z,"Server response must never include details about the error and stacktrace.

https://github.com/apache/incubator-baremaps/pull/712#discussion_r1245594310



Before example:
```
Response.status(Response.Status.BAD_REQUEST).entity(e.getMessage()).build();
```

After example:
```
log.warn(e.getMessage());
Response.status(Response.Status.BAD_REQUEST).build();
```



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/713/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/716,https://api.github.com/repos/apache/incubator-baremaps/issues/716,incubator-baremaps,1789868196,716,Incubator disclaimer missing from website,sebbASF,16689231,Sebb,,CLOSED,2023-07-05T16:06:12Z,2023-07-07T09:17:42Z,"Podlings must display the Incubator disclaimer on their website.

https://incubator.apache.org/guides/branding.html#disclaimers","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/716/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/716,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5gtLoe,incubator-baremaps,1622456862,716,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-05T20:30:11Z,2023-07-05T20:30:11Z,"Thanks a lot for reporting this. To be clear, does this mean we have to include the disclaimer on all our web pages (e.g. in the footer)?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5gtLoe/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/716,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5gtn9a,incubator-baremaps,1622572890,716,NA,sebbASF,16689231,Sebb,,NA,2023-07-05T21:49:01Z,2023-07-05T21:49:01Z,"Yes, adding it to the footer is a good idea.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5gtn9a/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/716,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5g3TpH,incubator-baremaps,1625111111,716,NA,leonardcser,73912641,Leonard,,NA,2023-07-07T09:14:58Z,2023-07-07T09:14:58Z,"Thank you for opening this issue, it has been added to the site.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5g3TpH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/716,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5g3UeG,incubator-baremaps,1625114502,716,NA,sebbASF,16689231,Sebb,,NA,2023-07-07T09:17:42Z,2023-07-07T09:17:42Z,Thanks for the very prompt attention to this.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5g3UeG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/717,https://api.github.com/repos/apache/incubator-baremaps/issues/717,incubator-baremaps,1793626173,717,Improve the inspect popup,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-07-07T14:14:45Z,2023-07-10T08:17:35Z,"The inspect popup overflows. We may want to fix this plugin or create our own.

![Screenshot 2023-07-07 at 16 11 29](https://github.com/apache/incubator-baremaps/assets/238747/706468a5-6500-4123-b792-f1c748c0eaeb)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/717/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/717,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hEHTR,incubator-baremaps,1628468433,717,NA,leonardcser,73912641,Leonard,,NA,2023-07-10T08:17:22Z,2023-07-10T08:17:22Z,Fixed through #718,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hEHTR/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/719,https://api.github.com/repos/apache/incubator-baremaps/issues/719,incubator-baremaps,1798723168,719,publish the artifacts to the apache maven repository,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2023-07-11T11:28:44Z,2023-07-11T11:30:44Z,We should do this by hand to learn the process and then think about its automation (if it makes sense).,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/719/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/720,https://api.github.com/repos/apache/incubator-baremaps/issues/720,incubator-baremaps,1798733459,720,Check the project with Skywalking,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-07-11T11:34:52Z,2023-07-20T13:17:59Z,Is skywalking similar to maven rat? If so do we really need to configure it?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/720/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/720,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hwvY_,incubator-baremaps,1640166975,720,NA,leonardcser,73912641,Leonard,,NA,2023-07-18T12:57:17Z,2023-07-18T12:57:17Z,"Skywalking Eye and Maven Rat both do the same. They can check and fix license headers. Below are some pros and cons:

### Skywalking Eye (https://github.com/apache/skywalking-eyes)
#### Pros
- Configuration in a separate file `.licenserc.yaml`
- Has GitHub actions hook

#### Cons
- Needs separate installation with Docker or the executable

### Maven Rat (https://github.com/apache/creadur-rat)
#### Pros
- Has Maven plugin
- Larger community and used by more Apache projects

#### Cons
- Configuration is in the `pom.xml` file
- Configuration need to be duplicated if we want to include it in build and reporting tags","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hwvY_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/720,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h_Btc,incubator-baremaps,1643912028,720,NA,leonardcser,73912641,Leonard,,NA,2023-07-20T13:17:59Z,2023-07-20T13:17:59Z,"Maven Rat seems to be the better choice. It is older than Skywalking Eyes but works great for our use case. Closing this, and referring here: #731 ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h_Btc/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/721,https://api.github.com/repos/apache/incubator-baremaps/issues/721,incubator-baremaps,1798742395,721,Audit the various test data sets,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-07-11T11:39:54Z,2024-03-06T16:51:42Z,"All the test data comming from OSM, natural earth, etc. should be removed from our repository (i.e. replaced by synthetic data), or moved in a separate 'non-free' module excluded from the release.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/721/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/721,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s52GN-M,incubator-baremaps,1981341580,721,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-03-06T16:51:42Z,2024-03-06T16:51:42Z,Closed by #841 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s52GN-M/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/722,https://api.github.com/repos/apache/incubator-baremaps/issues/722,incubator-baremaps,1798761790,722,Committers: a list of current committers on the project.,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-07-11T11:51:06Z,2023-07-12T15:30:00Z,"The list should be static and the new committers will gradually add their name and information to it.

e.g. https://calcite.apache.org/community/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/722/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/722,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hUecU,incubator-baremaps,1632757524,722,NA,leonardcser,73912641,Leonard,,NA,2023-07-12T15:30:00Z,2023-07-12T15:30:00Z,Closing this issue via https://github.com/apache/incubator-baremaps-site/pull/38#pullrequestreview-1526641351,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hUecU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/723,https://api.github.com/repos/apache/incubator-baremaps/issues/723,incubator-baremaps,1798765285,723,"Issue Tracking: links to the github issue tracking tool, possibly including frequently-used filters for issue lists.",bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-07-11T11:52:55Z,2023-07-13T10:18:44Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/723/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/723,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hZFg1,incubator-baremaps,1633966133,723,NA,leonardcser,73912641,Leonard,,NA,2023-07-13T10:18:37Z,2023-07-13T10:18:37Z,Closed via https://github.com/apache/incubator-baremaps-site/pull/39,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5hZFg1/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/725,https://api.github.com/repos/apache/incubator-baremaps/issues/725,incubator-baremaps,1802891422,725,Request VM from Apache infra,leonardcser,73912641,Leonard,,CLOSED,2023-07-13T12:12:58Z,2024-02-03T19:33:12Z,"The mail suggested to get in contact with infra in order to setup a VM for hosting the Basemap:

https://lists.apache.org/thread/grxkzp6dzx78wvltxzgr4tz8cpnj7ww8

However, based on the information for requesting a VM, our requirements might be too high:

https://infra.apache.org/vm-for-project.html

**Building the Basemap**

- 128G RAM
- 32GB CPU
- 4TB SSD

**Hosting the Basemap with MDTiles**

- 4 cores
- 1TB SSD
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/725/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/725,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5yw9XO,incubator-baremaps,1925436878,725,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-02-03T19:33:12Z,2024-02-03T19:33:12Z,We should find another way to host the tiles of the demonstration.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5yw9XO/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/726,incubator-baremaps,1812492936,726,Recommend settings for exporting tiles quickly,polastre,2539570,Joe Polastre,,CLOSED,2023-07-19T18:22:48Z,2023-08-24T09:25:09Z,"Exporting even modest datasets to tiles or mbtiles currently takes a very long time (for me) -- typically 12+ hours for a Postgres database that is only around 100mb in size.

#688 recommends some Postgres config settings to improve performance. Are there other recommended settings for the JVM that would improve performance or parallel processing settings?

Would it be possible to put these in the baremaps documentation?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/726/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h9_UD,incubator-baremaps,1643640067,726,NA,Perdjesk,1125783,,,NA,2023-07-20T10:04:53Z,2023-07-20T10:04:53Z,"Would it be possible to get more information about the source data imported in postgresql, the size of each table in postgresql and the `tilset.json`? 

For comparison the included example in `examples/openstreetmap` is exported to mbtiles in less than a minute for a postgresql database around 50MB.
```
select
  table_name,
  pg_size_pretty(pg_relation_size(quote_ident(table_name))),
  pg_relation_size(quote_ident(table_name))
from information_schema.tables
where table_catalog  = 'baremaps' and table_schema = 'public' and table_type = 'BASE TABLE' 
order by pg_relation_size desc;


table_name     |pg_size_pretty|pg_relation_size|
---------------+--------------+----------------+
osm_nodes      |36 MB         |        37478400|
osm_ways       |15 MB         |        16039936|
spatial_ref_sys|6896 kB       |         7061504|
osm_relations  |904 kB        |          925696|
osm_headers    |8192 bytes    |            8192|
```


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5h9_UD/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iA56c,incubator-baremaps,1644404380,726,NA,polastre,2539570,Joe Polastre,,NA,2023-07-20T18:33:08Z,2023-07-20T18:33:08Z,"Thanks for the quick response. Here's a rundown of the setup, and then the output you requested.

I'm running baremaps 0.7.1 locally, connecting to a postgis database container running in docker. For export, I run the following command:
```
baremaps map export --tileset=""./data/tileset.json"" --database=""jdbc:postgresql://localhost:9001/baremaps?&user=baremaps&password=baremaps"" --repository=""./data/tiles""
```

The input data is a subset of the [OSM export for the state of Texas](https://download.geofabrik.de/north-america/us/texas-latest.osm.pbf), limited to administrative boundaries and information about roads and airports. Almost all of the tileset definitions are of the form:
```sql
SELECT id, tags, geom FROM osm_ways WHERE tags ? 'aeroway' AND tags ->> 'aeroway' = 'runway'
```

There are indices on `tags` and `geom` for all the `osm_*` tables, like `osm_ways`.

When running the export command, you can see how long it takes. Note that the same performance (slowness) is observed whether exporting mvt files or exporting a single mbtiles file.
```
[INFO ] 2023-07-20 17:57:27.967 [main] ExportVectorTiles - Exporting vector tiles from jdbc:postgresql://localhost:9001/baremaps?&user=baremaps&password=baremaps to /home/joe.polastre/git/basemap-tiles/./data/tiles
[INFO ] 2023-07-20 17:57:27.972 [main] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-07-20 17:57:28.126 [main] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7fc6de5b
[INFO ] 2023-07-20 17:57:28.127 [main] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-07-20 17:57:33.280 [ForkJoinPool.commonPool-worker-20] ProgressLogger - 0.0%
[INFO ] 2023-07-20 17:57:38.329 [ForkJoinPool.commonPool-worker-8] ProgressLogger - 0.0%
[INFO ] 2023-07-20 17:57:43.350 [ForkJoinPool.commonPool-worker-33] ProgressLogger - 0.0%
[INFO ] 2023-07-20 17:57:48.360 [ForkJoinPool.commonPool-worker-28] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:57:53.374 [ForkJoinPool.commonPool-worker-17] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:57:58.399 [ForkJoinPool.commonPool-worker-27] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:58:03.414 [ForkJoinPool.commonPool-worker-10] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:58:08.415 [ForkJoinPool.commonPool-worker-14] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:58:13.423 [ForkJoinPool.commonPool-worker-14] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:58:18.485 [ForkJoinPool.commonPool-worker-19] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:58:23.500 [ForkJoinPool.commonPool-worker-29] ProgressLogger - 0.01%
[INFO ] 2023-07-20 17:58:28.506 [ForkJoinPool.commonPool-worker-20] ProgressLogger - 0.02%
[INFO ] 2023-07-20 17:58:33.530 [ForkJoinPool.commonPool-worker-24] ProgressLogger - 0.02%
```

Postgresql database:
```
baremaps=# select
  table_name,
  pg_size_pretty(pg_relation_size(quote_ident(table_name))),
  pg_relation_size(quote_ident(table_name))
from information_schema.tables
where table_catalog  = 'baremaps' and table_schema = 'public' and table_type = 'BASE TABLE' 
order by pg_relation_size desc;
   table_name    | pg_size_pretty | pg_relation_size 
-----------------+----------------+------------------
 osm_nodes       | 76 MB          |         80117760
 osm_ways        | 13 MB          |         13524992
 spatial_ref_sys | 6896 kB        |          7061504
 osm_relations   | 1384 kB        |          1417216
 osm_headers     | 8192 bytes     |             8192
(5 rows)
```

And here is the tileset.json. It is generating the whole planet because I will be importing the larger OSM global dataset after getting everything working, so I was benchmarking how long it would take to export a slew of empty tiles with only Texas data available as a first step.

Note that if I limit my bounding box to the state of Texas (`""bounds"": [-106.645646, 25.837377, -93.508292, 36.500704]`), then it takes 500 seconds to export all the tiles. This is on an 36 core Xeon server where `java` was using 3600% cpu during the export.

```json
{
    ""tilejson"": ""2.2.0"",
    ""attribution"": ""© <a href=\""https://www.openstreetmap.org/\"">OpenStreetMap</a> © <a href=\""https://www.geoboundaries.org\"">geoBoundaries</a>"",
    ""tiles"": [
        ""http://localhost:9000/tiles/{z}/{x}/{y}.mvt""
    ],
    ""minzoom"": 0,
    ""maxzoom"": 14,
    ""bounds"": [
        -180,
        -85,
        180,
        85
    ],
    ""center"": [
        -115.1508,
        36.0814,
        13
    ],
    ""vector_layers"": [
        {
            ""id"": ""boundaries-admin"",
            ""queries"": [
                {
                    ""minzoom"": 0,
                    ""maxzoom"": 6,
                    ""sql"": ""SELECT id, jsonb_build_object('boundary', 'administrative', 'admin_level', tags -> 'admin_level'), geom FROM boundaries_adm_z$zoom;""
                },
                {
                    ""minzoom"": 6,
                    ""maxzoom"": 13,
                    ""sql"": ""SELECT id, jsonb_build_object('boundary', 'administrative', 'admin_level', tags -> 'admin_level'), geom FROM boundaries_adm_z$zoom;""
                },
                {
                    ""minzoom"": 13,
                    ""maxzoom"": 20,
                    ""sql"": ""SELECT id, jsonb_build_object('boundary', 'administrative', 'admin_level', tags -> 'admin_level'), geom FROM boundaries_adm_z99;""
                }
            ]
        },
        {
            ""id"": ""aerodrome-tier1"",
            ""queries"": [
                {
                    ""minzoom"": 6,
                    ""maxzoom"": 20,
                    ""sql"": ""SELECT id, tags, geom from osm_ways where tags ->> 'aeroway' = 'aerodrome'""
                }
            ]
        },
        {
            ""id"": ""taxiway"",
            ""queries"": [
                {
                    ""minzoom"": 6,
                    ""maxzoom"": 20,
                    ""sql"": ""SELECT id, tags, geom FROM osm_ways WHERE tags ? 'aeroway' AND tags ->> 'aeroway' = 'taxiway'""
                }
            ]
        },
        {
            ""id"": ""runway"",
            ""queries"": [
                {
                    ""minzoom"": 6,
                    ""maxzoom"": 20,
                    ""sql"": ""SELECT id, tags, geom FROM osm_ways WHERE tags ? 'aeroway' AND tags ->> 'aeroway' = 'runway'""
                }
            ]
        }
    ]
}
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iA56c/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iEmp6,incubator-baremaps,1645374074,726,NA,leonardcser,73912641,Leonard,,NA,2023-07-21T10:38:45Z,2023-07-21T10:38:45Z,"Hi, thanks for the information. I was not able to reproduce your issue. 

What comes to mind are the following suggestions:
- Make sure you have increased the docker limits for CPU, memory and disk (in settings>resources)
- Try running Postgis without Docker
- Tweaking the `postgres.conf` settings (this is specific to each machine)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iEmp6/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iF_5u,incubator-baremaps,1645739630,726,NA,polastre,2539570,Joe Polastre,,NA,2023-07-21T15:09:31Z,2023-07-21T15:09:31Z,"@leonardcser I have run the workflow and export for `examples/openstreetmap`. The output area of those tiles is incredibly small, the size of Liechtenstein (160 sq km). When I export, of course it runs fast (a few seconds) since so few tiles actually need to be generated.

Regardless of how PostgreSQL is run (docker or not), the `baremaps map export` java process takes up 100% of every available CPU up to my 36 CPUs available. This is likely the bottleneck on export. I'm not sure what java is actually doing since most of the work is in PostgreSQL to generate the MVT tiles.

Have you tried exporting areas bigger than Liechtenstein? Can you send me those examples and any benchmarks? How long did it take? What kind of machine did you use? Were you using v0.7.1 release or a branch?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iF_5u/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iGLtN,incubator-baremaps,1645787981,726,NA,Perdjesk,1125783,,,NA,2023-07-21T15:47:31Z,2023-07-21T15:47:31Z,"I am not personally familiar with the `ExportVectorTiles` command, however by skimming into it, it becomes apparent that the `bounds`, `minzoom` and `maxzoom` configuration highly influences the processing time regardless of the content size in postgresql. The export feature is ""unaware"" of what is the scope of data in the database provided and solely uses the bounds and zoom levels to determine what will queried. Thus in case of partial data the `bounds` configuration in `tileset.json` should be specified as minimal as possible.

Below examples with ```""minzoom"": 12.0, ""maxzoom"": 14.0```

`examples/openstreetmap/tileset.json` Liechtenstein:
```
  ""bounds"": [
    9.471078,
    47.04774,
    9.636217,
    47.27128
  ]
```
[count](https://github.com/apache/incubator-baremaps/blob/e93c031fab93f7584ca0fa230a72d09b1489bc09/baremaps-core/src/main/java/org/apache/baremaps/workflow/tasks/ExportVectorTiles.java#L66) = 180 


""world"" bounds:
```
  ""bounds"": [
    -180,
    -85,
    180,
    85
  ]
```
[count](https://github.com/apache/incubator-baremaps/blob/e93c031fab93f7584ca0fa230a72d09b1489bc09/baremaps-core/src/main/java/org/apache/baremaps/workflow/tasks/ExportVectorTiles.java#L66)  = 351'207'424


State of Texas bounds:
```
  ""bounds"": [
    -106.645646,
    25.837377,
    -93.508292,
    36.500704
  ]
```
[count](https://github.com/apache/incubator-baremaps/blob/e93c031fab93f7584ca0fa230a72d09b1489bc09/baremaps-core/src/main/java/org/apache/baremaps/workflow/tasks/ExportVectorTiles.java#L66)  =  448'823

Thus the 500 seconds achieved when using those bounds better reflect the effective required time to process the data in postgresql you imported.

EDIT: We should improve the documentation to inform about the influence of `tileset.json` configuration when using export command. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iGLtN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iNF-F,incubator-baremaps,1647599493,726,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-24T10:00:27Z,2023-07-24T10:00:27Z,"Yes, the bounds must be set to the correct extent. The planet export currently takes about three days on a big server (16 cores, 128GB of Ram, SSD drives, etc.). That beeing said, the export process has not yet been optimized and we can probably find ways to improve it (e.g. with batches).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iNF-F/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kz5-7,incubator-baremaps,1691328443,726,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-24T09:23:38Z,2023-08-24T09:23:38Z,"I just did a planet export and it now takes a reasonable time to generate the mbtiles (2.5 days for 132G).

Here is an excerpt of the log:

```
[INFO ] 2023-08-22 20:08:04.435 [main] PostgresUtils - HikariConfig: com.zaxxer.hikari.HikariConfig@181b8c4b
[INFO ] 2023-08-22 20:08:04.437 [main] HikariDataSource - baremaps - Starting...
[INFO ] 2023-08-22 20:08:04.590 [main] HikariPool - baremaps - Added connection org.postgresql.jdbc.PgConnection@71ed560f
[INFO ] 2023-08-22 20:08:04.590 [main] HikariDataSource - baremaps - Start completed.
[INFO ] 2023-08-22 20:08:04.643 [main] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-08-22 20:08:04.678 [main] HikariPool - HikariPool-1 - Added connection org.sqlite.jdbc4.JDBC4Connection@6c8f60f3
[INFO ] 2023-08-22 20:08:04.678 [main] HikariDataSource - HikariPool-1 - Start completed.
[INFO ] 2023-08-22 20:08:09.722 [ForkJoinPool.commonPool-worker-2] ProgressLogger - 0.0%
...
[INFO ] 2023-08-24 05:32:29.550 [ForkJoinPool.commonPool-worker-30] ProgressLogger - 99.96%
[INFO ] 2023-08-24 05:32:34.550 [ForkJoinPool.commonPool-worker-20] ProgressLogger - 99.97%
[INFO ] 2023-08-24 05:32:39.550 [ForkJoinPool.commonPool-worker-18] ProgressLogger - 99.98%
[INFO ] 2023-08-24 05:32:44.550 [ForkJoinPool.commonPool-worker-20] ProgressLogger - 99.99%
[INFO ] 2023-08-24 05:32:49.550 [ForkJoinPool.commonPool-worker-24] ProgressLogger - 99.99%
[INFO ] 2023-08-24 05:32:53.378 [ForkJoinPool.commonPool-worker-30] ProgressLogger - 100.0%
```

The issue was related to poorly optimized postgresql queries that have been fixed in #753. The long queries are now logged with a warning to help user optimize the pipeline.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kz5-7/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/726,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kz6rg,incubator-baremaps,1691331296,726,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-24T09:25:08Z,2023-08-24T09:25:08Z,@polastre Do not hesitate to reopen this issue if the proposed fix does not address it correctly.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kz6rg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/729,https://api.github.com/repos/apache/incubator-baremaps/issues/729,incubator-baremaps,1813924404,729,Extend the gitignored files,leonardcser,73912641,Leonard,,CLOSED,2023-07-20T12:48:50Z,2023-07-20T13:07:37Z,"Currently, examples generate files that are not gitignored. This has two problem:

- Untracked files cluttering the git repository
- Maven Rat checking generated files

To remediate this, all files generated by the examples should be in the `.gitignore` at the root of the repository.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/729/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/731,https://api.github.com/repos/apache/incubator-baremaps/issues/731,incubator-baremaps,1813980732,731,Configure Maven Rat,leonardcser,73912641,Leonard,,CLOSED,2023-07-20T13:17:31Z,2023-11-20T15:33:06Z,"The goal is to configure Maven Rat to exclude the right files, as well as documenting each exclude.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/731/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/735,https://api.github.com/repos/apache/incubator-baremaps/issues/735,incubator-baremaps,1815961236,735,"Examples/openstreetmap fails with ""Unable to build geometry for relation""",polastre,2539570,Joe Polastre,,CLOSED,2023-07-21T15:01:28Z,2023-08-10T06:48:44Z,"When importing the workflow.json for `examples/openstreetmap` using the 0.7.1 release, it fails with:

```
RelationGeometryBuilder - Unable to build the geometry for relation #5401257
```

Running:
```
cd examples/openstreetmap
baremaps workflow execute --file=workflow.json --log-level=DEBUG
```

Full error:
```
[WARN ] 2023-07-21 15:00:09.050 [ForkJoinPool.commonPool-worker-33] RelationGeometryBuilder - Unable to build the geometry for relation #5401257
org.apache.baremaps.stream.StreamException: java.lang.NullPointerException: Cannot invoke ""java.util.List.stream()"" because ""refs"" is null
        at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.createLine(RelationGeometryBuilder.java:168) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.lambda$createPolygons$2(RelationGeometryBuilder.java:143) ~[baremaps-core-0.7.1.jar:?]
        at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]
        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[?:?]
        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[?:?]
        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]
        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[?:?]
        at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.createPolygons(RelationGeometryBuilder.java:142) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.accept(RelationGeometryBuilder.java:71) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.openstreetmap.function.EntityGeometryBuilder.accept(EntityGeometryBuilder.java:54) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.openstreetmap.function.EntityGeometryBuilder.accept(EntityGeometryBuilder.java:27) ~[baremaps-core-0.7.1.jar:?]
        at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
        at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
        at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
        at org.apache.baremaps.openstreetmap.function.BlockEntitiesHandler.accept(BlockEntitiesHandler.java:47) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.openstreetmap.function.BlockEntitiesHandler.accept(BlockEntitiesHandler.java:25) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.stream.ConsumerUtils.lambda$consumeThenReturn$1(ConsumerUtils.java:46) ~[baremaps-core-0.7.1.jar:?]
        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
        at org.apache.baremaps.stream.BufferedSpliterator.tryAdvance(BufferedSpliterator.java:74) ~[baremaps-core-0.7.1.jar:?]
        at java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:292) ~[?:?]
        at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206) ~[?:?]
        at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:169) ~[?:?]
        at java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:298) ~[?:?]
        at org.apache.baremaps.stream.BatchedSpliterator.tryAdvance(BatchedSpliterator.java:48) ~[baremaps-core-0.7.1.jar:?]
        at org.apache.baremaps.stream.BatchedSpliterator.trySplit(BatchedSpliterator.java:59) ~[baremaps-core-0.7.1.jar:?]
        at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:289) ~[?:?]
        at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754) ~[?:?]
        at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[?:?]
        at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[?:?]
        at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[?:?]
        at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[?:?]
        at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[?:?]
Caused by: java.lang.NullPointerException: Cannot invoke ""java.util.List.stream()"" because ""refs"" is null
        at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.createLine(RelationGeometryBuilder.java:164) ~[baremaps-core-0.7.1.jar:?]
        ... 37 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/735/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/735,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iHDMn,incubator-baremaps,1646015271,735,NA,Perdjesk,1125783,,,NA,2023-07-21T17:17:20Z,2023-07-21T17:17:20Z,"It is a warning and should not stop the import command. The stacktrace is given as context.

Similar to and more context in the following issues: https://github.com/apache/incubator-baremaps/issues/623 https://github.com/apache/incubator-baremaps/issues/639

@bchapuis given the number of occurrences of similar reports, maybe we could have a WARN with enough details but not a stacktrace. My guess is that the stacktrace is ""hiding"" the fact the log entry is a warning.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iHDMn/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/735,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iNEo8,incubator-baremaps,1647594044,735,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-07-24T09:56:52Z,2023-07-24T09:56:52Z,"Yes, we should probably change this behavior as suggested [here](https://github.com/apache/incubator-baremaps/issues/623#issuecomment-1516581692). It causes way too much confusion, and I'm not aware of issues that have been fixed in OSM thanks to this warning.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5iNEo8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/735,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jsqcy,incubator-baremaps,1672652594,735,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-10T06:48:31Z,2023-08-10T06:48:31Z,Fixed in #625,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jsqcy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/736,https://api.github.com/repos/apache/incubator-baremaps/issues/736,incubator-baremaps,1819696642,736,Display local city names labels in translated labels.,rmarquis,162442,Rémy Marquis,remy.marquis@gmail.com,CLOSED,2023-07-25T07:09:53Z,2023-11-20T15:32:51Z,"By default, Baremaps displays city names and labels in the local language only.

For countries that use a non Latin alphabet (e.g. cyrillic, arabic or east Asian scripts), that impedes usuabiliy as it is much harder to navigate on the map without prior knowledge of the local language.

I'd like the ability to display the map in a given language, or better, the ability to display both the labels in the local language and the translation below. Ideally, the default translation would be English but it could be chosen by the user, as to not make it Western-centric only.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/736/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/736,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j8Q2m,incubator-baremaps,1676742054,736,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-14T06:18:15Z,2023-08-14T06:18:15Z,"I just added a language selector in the web site that enable the selection of the base language. 

https://github.com/apache/incubator-baremaps-site/pull/43

Unfortunately, this solution only work at low zoom level where we select all the attributes. We should keep this issue open until the basemap gets modified accordingly.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j8Q2m/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/739,incubator-baremaps,1828945328,739,How to get DEM files for contour lines?,pakastin,1475902,Juha Lindstedt,juha@pakastin.fi,CLOSED,2023-07-31T11:03:57Z,2023-08-02T06:24:43Z,I'm having difficulties figuring out where/how to get DEM files for contour lines example [here](https://baremaps.apache.org/documentation/examples/import-contour-into-postgis/)?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/739/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1WjU,incubator-baremaps,1658153172,739,NA,leonardcser,73912641,Leonard,,NA,2023-07-31T11:06:32Z,2023-07-31T11:06:32Z,You are able to download the [ASTER V3](https://asterweb.jpl.nasa.gov/gdem.asp) dataset with a free account on [NASA EarthData](https://search.earthdata.nasa.gov/search/),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1WjU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1YF1,incubator-baremaps,1658159477,739,NA,pakastin,1475902,Juha Lindstedt,juha@pakastin.fi,NA,2023-07-31T11:10:52Z,2023-07-31T11:10:52Z,I registered but can't figure out where to download in that tool,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1YF1/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1aL-,incubator-baremaps,1658168062,739,NA,leonardcser,73912641,Leonard,,NA,2023-07-31T11:15:31Z,2023-07-31T11:15:31Z,"Here is the direct link: https://search.earthdata.nasa.gov/search/granules?p=C1711961296-LPCLOUD&pg[0][v]=f&pg[0][gsk]=-start_date&q=aster%20v3&tl=1690802043.156!3!!

You can either add the individual files into a collection and then download them or click on `download all`.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1aL-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1ayW,incubator-baremaps,1658170518,739,NA,pakastin,1475902,Juha Lindstedt,juha@pakastin.fi,NA,2023-07-31T11:16:37Z,2023-07-31T11:16:37Z,"Oh, i missed that ""download all"" button, thank you so much!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i1ayW/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i7evt,incubator-baremaps,1659759597,739,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-01T07:51:21Z,2023-08-01T07:51:21Z,"@pakastin Notice that while this approach works well for small areas, we havn't been able to apply it for the whole world yet: gdal_contour takes a lot of time to generate lines for large areas. I logged #740 to track this issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i7evt/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i7flt,incubator-baremaps,1659763053,739,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-01T07:53:45Z,2023-08-01T07:53:45Z,"@leonardcser Maybe we should add some instructions on how to download the nasa dem. Also, if I recall correctly, the nasa dem produces some artifacts and greater results where obtained with the copernicus dataset. It would be nice to have this information somewhere in the documentation (with screenshots of the problem encountered).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5i7flt/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/739,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jCZBH,incubator-baremaps,1661571143,739,NA,leonardcser,73912641,Leonard,,NA,2023-08-02T06:23:30Z,2023-08-02T06:23:30Z,"Definitely, I added a new issue #741.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jCZBH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/740,https://api.github.com/repos/apache/incubator-baremaps/issues/740,incubator-baremaps,1830670856,740,Generate elevation lines for the whole world,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-08-01T07:50:15Z,2024-09-26T20:56:13Z,"We should generate contour lines for the world. Our current [example](https://baremaps.apache.org/documentation/examples/import-contour-into-postgis/) takes a small geotiff and saves the resulting contours in postgis. So far, we havn't been able to generate contours for the whole world using this approach. A possibility may be to split the world into smaller areas and then to merge the lines that touch each others.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/740/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/741,https://api.github.com/repos/apache/incubator-baremaps/issues/741,incubator-baremaps,1832512651,741,Document downloading DEM datasets,leonardcser,73912641,Leonard,,CLOSED,2023-08-02T06:20:10Z,2024-02-03T19:11:26Z,The goal would be to create a new tab with information with different datasets and how to download them.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/741/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/741,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jSFbE,incubator-baremaps,1665685188,741,NA,leonardcser,73912641,Leonard,,NA,2023-08-04T14:17:38Z,2023-08-04T14:17:38Z,Currently in progress here: https://github.com/apache/incubator-baremaps-site/pull/42,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5jSFbE/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/742,https://api.github.com/repos/apache/incubator-baremaps/issues/742,incubator-baremaps,1837958002,742,SQLITE_BUSY error during mbtiles export,polastre,2539570,Joe Polastre,,CLOSED,2023-08-05T22:17:48Z,2023-08-24T09:25:51Z,"I keep getting this error when trying to export to mbtiles. I'm not sure if this is due to trying to write concurrently to a mbtiles file on a multicore machine or something else?

Exporting to files (not using the `--mbtiles` option) works successfully. This is with the official 0.7.1 release.

```
baremaps map export --mbtiles --tileset=""/data/tileset.json"" --database=""jdbc:postgresql://postgis:5432/baremaps?&user=baremaps&password=baremaps"" --repository=""/data/tiles.mbtiles""
[INFO ] 2023-08-05 22:12:30.462 [main] ExportVectorTiles - Exporting vector tiles from jdbc:postgresql://postgis:5432/baremaps?&user=baremaps&password=baremaps to /data/tiles.mbtiles
[INFO ] 2023-08-05 22:12:30.468 [main] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-08-05 22:12:30.624 [main] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@fb9c7aa
[INFO ] 2023-08-05 22:12:30.625 [main] HikariDataSource - HikariPool-1 - Start completed.
java.lang.RuntimeException: java.lang.RuntimeException: An error occurred while creating the tiles
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)
        at java.base/java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:562)
        at java.base/java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:591)
        at java.base/java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:689)
        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:159)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:173)
        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)
        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:765)
        at org.apache.baremaps.workflow.tasks.ExportVectorTiles.execute(ExportVectorTiles.java:81)
        at org.apache.baremaps.cli.map.Export.call(Export.java:68)
        at org.apache.baremaps.cli.map.Export.call(Export.java:29)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
        at picocli.CommandLine.access$1300(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
        at picocli.CommandLine.execute(CommandLine.java:2078)
        at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:83)
Caused by: java.lang.RuntimeException: An error occurred while creating the tiles
        at org.apache.baremaps.database.tile.TileChannel.accept(TileChannel.java:63)
        at org.apache.baremaps.database.tile.TileChannel.accept(TileChannel.java:21)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
        at java.base/java.util.ArrayList$Itr.forEachRemaining(ArrayList.java:1003)
        at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)
        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
        at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290)
        at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754)
        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.apache.baremaps.database.tile.TileStoreException: org.sqlite.SQLiteException: [SQLITE_BUSY] The database file is locked (database is locked)
        at org.apache.baremaps.database.tile.MBTiles.write(MBTiles.java:100)
        at org.apache.baremaps.database.tile.TileChannel.accept(TileChannel.java:58)
        ... 12 more
Caused by: org.sqlite.SQLiteException: [SQLITE_BUSY] The database file is locked (database is locked)
        at org.sqlite.core.DB.newSQLException(DB.java:1135)
        at org.sqlite.core.DB.newSQLException(DB.java:1146)
        at org.sqlite.core.DB.execute(DB.java:941)
        at org.sqlite.core.DB.executeUpdate(DB.java:1010)
        at org.sqlite.jdbc3.JDBC3PreparedStatement.lambda$executeLargeUpdate$2(JDBC3PreparedStatement.java:117)
        at org.sqlite.jdbc3.JDBC3Statement.withConnectionTimeout(JDBC3Statement.java:429)
        at org.sqlite.jdbc3.JDBC3PreparedStatement.executeLargeUpdate(JDBC3PreparedStatement.java:116)
        at org.sqlite.jdbc3.JDBC3PreparedStatement.executeUpdate(JDBC3PreparedStatement.java:98)
        at org.apache.baremaps.database.tile.MBTiles.write(MBTiles.java:98)
        ... 13 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/742/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/742,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j8Ro9,incubator-baremaps,1676745277,742,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-14T06:21:53Z,2023-08-14T06:21:53Z,"My bad, I introduced a mistake in the configuration parameters of the sqlite datasource in main. As SQLite is single threaded it doesn't work well with a Thread pool. This has been fixed in #744.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j8Ro9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/743,https://api.github.com/repos/apache/incubator-baremaps/issues/743,incubator-baremaps,1844939683,743,OSMRelation only build mulipolygon,ch0s1n,115338255,,,OPEN,2023-08-10T10:54:26Z,2023-08-14T11:10:56Z,"hi,i am having some difficulty with using osm data.With reading code i found that the workflow only build mulipolygon geometry.Is there anything wrong with this? I think it is necessary to build all types of geometry data
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/743/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/743,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j8Pba,incubator-baremaps,1676736218,743,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-14T06:11:43Z,2023-08-14T06:11:43Z,"Hello, Thanks a lot for reporting this issue. I just checked the osm_ways and osm_relations table in postgis on a fresh import and I'm not able to reproduce the issue. I see geometries of type point, linestring, polygon, and multi-polygon. Could you provide some additional context? Thanks a lot.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j8Pba/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/743,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j9u9T,incubator-baremaps,1677127507,743,NA,ch0s1n,115338255,,,NA,2023-08-14T11:10:56Z,2023-08-14T11:10:56Z,"oh,thanks for replaying me.I tried the example data in the official website the data of liechtenstein-latest.osm.pbf.Then i checked the database.and in the osm_relations table,lots of data's geom is null.I didn't whether is it routine?
a data in osm_relations table is like:

> INSERT INTO ""public"".""osm_relations"" (""id"", ""version"", ""uid"", ""timestamp"", ""changeset"", ""tags"", ""member_refs"", ""member_types"", ""member_roles"", ""geom"") VALUES (8497, 65, 0, '2023-01-26 02:14:09', 0, '{""to"": ""Basel"", ""ref"": ""2"", ""url"": ""https://www.schweizmobil.ch/de/veloland/routen/route-02.html"", ""from"": ""Andermatt"", ""name"": ""Rhein-Route"", ""type"": ""superroute"", ""route"": ""bicycle"", ""name:de"": ""Rhein-Route"", ""name:en"": ""Rhine Route"", ""name:fr"": ""Route du Rhin"", ""name:it"": ""Percorso del Reno"", ""name:nl"": ""Rijnroute"", ""network"": ""ncn"", ""distance"": ""430"", ""operator"": ""SchweizMobil"", ""wikidata"": ""Q1253779""}', '{149202,326881,102638,149204,117051,28068,30431,149220,10982167}', '{2,2,2,2,2,2,2,2,2}', '{"""","""","""","""","""","""","""","""",""""}', NULL);","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5j9u9T/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/745,https://api.github.com/repos/apache/incubator-baremaps/issues/745,incubator-baremaps,1847378629,745,Create a workflow for the daylight distribution of OpenStreetMap,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-08-11T20:21:50Z,2023-11-08T22:41:20Z,"[Daylight](https://daylightmap.org/) is a complete distribution OpenStreetMap.

- [x] #751
- [x] import the daylight road addition (osc xml)
- [x] import the daylight administrative boundaries (osc xml)
- [x] import the daylight coast lines (tar)
- [ ] import the localization data (tar)
- [ ] import the important features (json)
- [ ] create simplifications
- [ ] adapt the style
- [ ] export the vector tiles","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/745/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/746,https://api.github.com/repos/apache/incubator-baremaps/issues/746,incubator-baremaps,1850567587,746,Style.js can't directly set source `tiles` key,polastre,2539570,Joe Polastre,,CLOSED,2023-08-14T21:28:27Z,2023-08-15T21:51:26Z,"For a `source` in a `style.json` file, it can either be a `url` to a tileJson file or it can directly encode tileJson into the source by setting keys like `tiles: []` and `minzoom`/`maxzoom`. 

When you use `style.js` such as this:
```
export default {
    ""version"": 8,
    ""name"": ""MyMap"",
    ""center"": config.center,
    ""zoom"": config.zoom,
    ""sources"": {
        ""mymap"": {
            ""type"": ""vector"",
            ""tiles"": [
                ""http://my.server.com/{z}/{y}/{x}.mvt""
            ],
            ""maxzoom"": 14,
        }
    },
    ...
};
```

It removes the keys `tiles` and `maxzoom`. If you include `url`, then `url` is persisted. It seems it only supports syntax where tileJson is used as a separate file. Is there a way to include the tileJson relevant fields in the `source` and have the baremaps dev server pass that data through when it generates `style.json`?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/746/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/746,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kHO8A,incubator-baremaps,1679617792,746,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-15T21:08:49Z,2023-08-15T21:08:49Z,"Thanks a lot for reporting this issue, it really helps. The attributes were missing in our class.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kHO8A/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/748,https://api.github.com/repos/apache/incubator-baremaps/issues/748,incubator-baremaps,1853990983,748,Semicolons being parsed out of sql files,polastre,2539570,Joe Polastre,,CLOSED,2023-08-16T22:39:12Z,2023-08-18T20:05:33Z,"I have a `.sql` file called in my `workflow.js`. Inside the `.sql` file is a string that as a `;`. It appears that baremaps is truncating the statement at this `;` even though it is part of a string and not part of the SQL syntax. For example:

```sql
SELECT
  id,
  CASE
	WHEN tags ->> 'width' ILIKE '%;%ft' THEN TRIM(SPLIT_PART(tags->> 'width', ';', 1))
	ELSE tags ->> 'width'
	END AS width
FROM osm_ways
WHERE tags ->> 'aeroway' = 'runway';
```

The workflow gives a `Failed executing` error, with the following sql fragment indicating it truncated my sql:
```
SELECT
  id,
  CASE
	WHEN tags ->> 'width' ILIKE '%
```

The expected behavior is that sql statements are not truncated due to a `;` inside of a quoted string.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/748/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/748,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kQISu,incubator-baremaps,1681949870,748,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-17T09:32:18Z,2023-08-17T09:32:18Z,"Good catch, our split function was indeed very naive. I created a PR to fix this issue and added a test case.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kQISu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/748,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kY9j_,incubator-baremaps,1684265215,748,NA,polastre,2539570,Joe Polastre,,NA,2023-08-18T18:11:51Z,2023-08-18T18:11:51Z,Thanks for the quick fix @bchapuis! Do you know when the next baremaps release will be? Last one was back in April.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kY9j_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/748,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kZLm6,incubator-baremaps,1684322746,748,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-18T19:00:27Z,2023-08-18T19:00:27Z,"I posted an email on our mailing list earlier today about the upcoming release 😄 Our aim is to roll out a new release candidate next week and start a vote. I hope we can subsequently partially automate the release process, as the ASF recently allowed it.

https://lists.apache.org/thread/879vnwys7w1ptcdon2fjtq0o4xq7prcj

Your help is valuable and welcome. If you're keen, please jump in! There are multiple ways to contribute: from bug reporting (like this one), resolving issues, enhancing documentation, reviewing examples, to verifying release artifacts and more.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kZLm6/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/748,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kZNyN,incubator-baremaps,1684331661,748,NA,polastre,2539570,Joe Polastre,,NA,2023-08-18T19:09:57Z,2023-08-18T19:09:57Z,"Thanks @bchapuis, I need to subscribe to the mailing list! I have a potential contribution coming up for you, stay tuned.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kZNyN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/748,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kZaYZ,incubator-baremaps,1684383257,748,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-18T20:05:33Z,2023-08-18T20:05:33Z,"Cool, looking forward to it!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5kZaYZ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/751,https://api.github.com/repos/apache/incubator-baremaps/issues/751,incubator-baremaps,1859186785,751,import the daylight distribution (osm pbf),bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-08-21T11:37:29Z,2023-11-17T12:26:10Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/751/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/752,https://api.github.com/repos/apache/incubator-baremaps/issues/752,incubator-baremaps,1863435312,752,Release and CI automation,Perdjesk,1125783,,,CLOSED,2023-08-23T14:18:33Z,2024-11-09T13:07:59Z,"Goals:
- CI can build and sign artifacts
- CI can publish artifacts to SVN and Nexus
  * SVN dev: https://dist.apache.org/repos/dist/dev/incubator/baremaps/ 
  * Nexus staging: https://repository.apache.org 
- CI triggers build, sign and publish on git tags
- CI generate release candidate vote email and release announcement email
- Reproducible published artifacts (i.e published artifacts with checksum can be reproduced by any machine with exactly the same checksum)
- Automation can be executed by committers on their own machine with their own credentials or signing key.


Relates to: https://github.com/apache/incubator-baremaps/issues/492


- [ ] SVN and Nexus technical baremaps credentials
- [ ] GPG Signing key configured in incubator-baremaps repo as `GPG_SECRET_KEY`
- [ ] Reproducible artifacts


References:
- https://infra.apache.org/release-signing.html#automated-release-signing
- https://issues.apache.org/jira/browse/INFRA-23996

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/752/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/752,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s53HE2F,incubator-baremaps,1998343557,752,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-03-14T20:12:55Z,2024-03-14T20:12:55Z,"I just logged an issue on INFRA to setup the secrets on github.
https://issues.apache.org/jira/browse/INFRA-25610

And drafted a PR for the automation of the release process.
https://github.com/apache/incubator-baremaps/pull/844","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s53HE2F/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/754,https://api.github.com/repos/apache/incubator-baremaps/issues/754,incubator-baremaps,1864985288,754,Release Baremaps v0.7.2,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-08-24T11:46:35Z,2023-11-20T21:21:47Z,"In order to release a new version of Apache Baremaps, follow these steps:

- [x] Notify the mailing list and ask everyone to pause commits on the main branch
- [x] Create a new issue on GitHub with the title ""Release Baremaps 0.7.2""
- [x] Create a new branch for the release (e.g. `release-0.7.2`)

```bash
git checkout -b release-0.7.2
git push --set-upstream origin release-0.7.2
```

- [x] Set the release version and commit the changes:

```bash 
./mvnw versions:set -DnewVersion=0.7.2
git commit -a -m ""Release Baremaps 0.7.2""
```

- [x] Tag the last commit with the release candidate version:

```bash
git tag v0.7.2-rc3
```

- [x] Push the tag to the remote repository:

```bash
git push origin v0.7.2-rc3
```

- [x] Generate the release notes for this tag on GitHub with release ticked in order to generate a release notes.
- [x] Generate the artifacts:

```bash
./scripts/generate-artifacts.sh
```

- [x] Publish the artifacts:

```bash
svn co https://dist.apache.org/repos/dist/dev/incubator/baremaps/ baremaps-dev
mkdir baremaps-dev/0.7.2-rc3
cp ./baremaps-cli/target/apache-baremaps-0.7.2-incubating-* baremaps-dev/0.7.2-rc3/.
svn commit -m ""Baremaps 0.7.2-rc3""
```

- [x] Ask the community to vote for the release candidate.
- [x] If the release candidate is not approved by the community, commit the necessary changes, clean the git history,
  and go back to step 5.
- [x] If the release candidate is approved by the community, tag the release commit with the release version:

```bash
git tag -a v0.7.2
git push origin v0.7.2
```

- [x] Move the artifacts into the release directory with svn:

```bash
svn mv -m ""Baremaps 0.7.2"" \
  https://dist.apache.org/repos/dist/dev/incubator/baremaps/0.7.2-rc3/ \
  https://dist.apache.org/repos/dist/release/incubator/baremaps/0.7.2/
```

- [x] Set the version of the next iteration and commit the changes:

```bash
./mvnw versions:set -DnewVersion=<next_version>-SNAPSHOT
git commit -a -m ""Prepare for next development iteration""
git push origin
```

- [x] Notify the community of the release by sending a message to the mailing list.
- [x] Rebase the release branch into the main branch.
- [x] Clean up all the release candidate branches and tags.

## Verifying the release artifacts

Verify the GPG signature of the release artifacts:

```bash
gpg --verify apache-baremaps-0.7.2-incubating-bin.tar.gz.asc
gpg --verify apache-baremaps-0.7.2-incubating-src.tar.gz.asc
```

Verify the SHA512 checksum of the release artifacts:

```bash
shasum -a 512 -c apache-baremaps-0.7.2-incubating-bin.tar.gz.sha512
shasum -a 512 -c apache-baremaps-0.7.2-incubating-src.tar.gz.sha512
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/754/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/755,https://api.github.com/repos/apache/incubator-baremaps/issues/755,incubator-baremaps,1868029425,755,Fix antialias artifacts at low zoom level,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-08-26T11:07:27Z,2023-08-28T19:27:33Z,"![Screenshot 2023-08-26 at 13 03 35](https://github.com/apache/incubator-baremaps/assets/238747/30e966c1-ba96-47ce-bb84-fa6fafe99af1)

Small artifacts can be noticed on the basemap at low zoom level. These artifact are due to overlapping geometries rendered with antialiasing. Configuring sort keys does not address this issue. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/755/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/760,https://api.github.com/repos/apache/incubator-baremaps/issues/760,incubator-baremaps,1873498035,760,Remove the APPENDIX section in the Licence,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-08-30T11:40:38Z,2023-11-17T12:26:38Z,"Remove the ""APPENDIX: How to apply the Apache License to your work” section.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/760/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/762,https://api.github.com/repos/apache/incubator-baremaps/issues/762,incubator-baremaps,1873820993,762,Geocoder based on OpenStreetMap data,Perdjesk,1125783,,,OPEN,2023-08-30T14:37:44Z,2023-09-13T08:59:05Z,"Goals:

- Replaces current geocoder data source from GeoNames to OSM data.
- Feeds OSM data into Apache Lucene
- Serve existing API geocoding endpoints with OSM data and Lucene index

Non-goals:

- Extend with new features (such as inverse queries lat/long to entity)


Issues:

- [x] #779 
- [ ] Serve basic text to location queries through API
- [ ] Better consistent handling of testing against OSM node type vs geometry type when mapping to Lucene document
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/762/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/763,https://api.github.com/repos/apache/incubator-baremaps/issues/763,incubator-baremaps,1874554424,763,Print offending query or file when there's a PostgreSQL exception,polastre,2539570,Joe Polastre,,OPEN,2023-08-31T00:28:07Z,2023-08-31T12:31:52Z,"When you get `org.postgresql.util.PSQLException`, there's a stack trace with something like:

```
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: org.postgresql.util.PSQLException: ERROR: column ""name"" does not exist
```

However there's no indication of which file or sql statement caused this exception.

I believe in v0.7.1, it would tell you which sql statement was just executed. In the v0.7.2-rc, it doesn't tell you which sql statement.

I'm running `import` with the log level set to debug and can't track down the offending sql.

It would be helpful to include more debugging information here to be developer friendly.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/763/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/763,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lYmfi,incubator-baremaps,1700947938,763,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-31T12:31:38Z,2023-08-31T12:31:38Z,"Thanks a lot for reporting this, we should definitely log the exception. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lYmfi/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/764,https://api.github.com/repos/apache/incubator-baremaps/issues/764,incubator-baremaps,1874708130,764,Workflow processing does not permit Postgres DO / Function blocks,polastre,2539570,Joe Polastre,,CLOSED,2023-08-31T03:02:19Z,2023-11-17T12:26:59Z,"Consider a function like this, that converts all the columns to lowercase from a dataset:

```sql
DO $$
DECLARE row record;
BEGIN
  FOR row IN SELECT table_schema,table_name,column_name
             FROM information_schema.columns
             WHERE table_schema = 'public'
			 AND lower(column_name) != column_name
             AND table_name LIKE 'ne_%'
  LOOP
    EXECUTE format('ALTER TABLE %I.%I RENAME COLUMN %I TO %I',
      row.table_schema,row.table_name,row.column_name,lower(row.column_name));  
  END LOOP;
END $$;
```

If you copy and paste this into Postgres, it works just fine.

If you run it in a `.sql` file in your `workflow.js`, you get the error:

```
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 4 in SQL 
DO $$
DECLARE row record. Expected terminating $$
        at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
        at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:48)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:29)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
        at picocli.CommandLine.access$1300(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
        at picocli.CommandLine.execute(CommandLine.java:2078)
        at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:62)
```

I believe this is again due to `;` parsing by baremaps.

version: 0.7.2-rc1","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/764/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/764,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lWXi1,incubator-baremaps,1700362421,764,NA,polastre,2539570,Joe Polastre,,NA,2023-08-31T04:48:48Z,2023-08-31T04:48:48Z,"Perhaps a different but bigger problem here is that `v0.7.2` imports shapefiles with case-sensitive column names. So some tables in Natural Earth are imported with uppercase column names, which breaks all kinds of stuff. In `v0.7.1`, they were imported with all lowercase names. Note that not every Natural Earth table has uppercase names, it seems to be a bit of a mix. I'm not sure if that was intentional by the baremaps authors to preserve the case in column names, or a side effect of the latest changes. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lWXi1/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/764,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lYp1w,incubator-baremaps,1700961648,764,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-31T12:38:43Z,2023-08-31T12:38:43Z,"Yes, this is probably due to the `;` parsing you spotted earlier. By default, jdbc does not allow to execute sql script for security reasons. We should probably introduce a new task that overrides these defaults and allows to execute this kind a script.

The second problem is definetly a regression, sorry for that. For you, which behavior feels the most natural (lowercase, uppercase, case insensitive)? We can log another issue for this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lYp1w/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/764,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5la1pj,incubator-baremaps,1701534307,764,NA,polastre,2539570,Joe Polastre,,NA,2023-08-31T18:11:25Z,2023-08-31T18:11:25Z,"It is hard to say what's the right thing to do here. On one hand it is ""accurate"" to use the case-sensitive field names on importing shapefiles

On the other hand, shapefiles often use all uppercase which leads to really terrible query syntax in PostgreSQL.

My preference would be the old behavior. However, we have already implemented a workaround for this to post-process at a particular stage of the workflow to force the tables to lowercase column names.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5la1pj/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/764,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lbmB_,incubator-baremaps,1701732479,764,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-08-31T20:25:17Z,2023-08-31T20:25:17Z,"Thanks for the feedback. Let's rollback the old behavior (I liked it as well). In the context of postgresql, it makes sense to have simple lower case table and column names.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lbmB_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/766,incubator-baremaps,1876034538,766,Generated tileset.json doesn't include `queries` key for each layer,polastre,2539570,Joe Polastre,,CLOSED,2023-08-31T18:05:05Z,2023-10-26T08:56:20Z,"In `v0.7.2-rc1`, the generated tileset.json doesn't include the `queries` key anymore in the `vector_tiles` section.

We were using this key for post-processing activities. This is a serious problem for us.

Looks like #658 removed this data from the generated `tileset.json` file.

I can see how this might be a security vulnerability if that is exposed _in production_, however it is really useful for intermediate processing _in development_.

Can we bring it back, please? cc @bchapuis @Perdjesk ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/766/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5la0Xq,incubator-baremaps,1701529066,766,NA,polastre,2539570,Joe Polastre,,NA,2023-08-31T18:07:46Z,2023-08-31T18:07:46Z,"It looks like the production concern was already addressed prior to this change, so bringing back the queries and database information in some format in dev would be really helpful.

https://github.com/apache/incubator-baremaps/pull/658/files#diff-94ecab9df3004fae4fd05c3c610d8ef629f81cb775f72a53a19070c0293bc27cL60-L65","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5la0Xq/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lbIOT,incubator-baremaps,1701610387,766,NA,Perdjesk,1125783,,,NA,2023-08-31T19:08:17Z,2023-08-31T19:08:17Z,"In your use case, do I understand correctly that you built around getting the SQL queries out of baremaps server by requesting the `tiles.json` and were using the SQL queries ad-hoc outside of baremaps and directly against the database?

Going forward I see two possible paths for baremaps to provide an API with the SQL queries per layer:
* Serve a `tile.json` which is a combination of per specification fields with addition of custom fields (e.g queries). The current JSON schemas of TileJSON are permissive for this as there is no usage of `""additionalProperties"": false`. See https://github.com/mapbox/tilejson-spec/blob/master/. This would match the previous behavior with the difference being that every additions would require vetting before addition into the [TileJSON POJO](https://github.com/apache/incubator-baremaps/blob/ba2790e14e3c6788766fa7156af9267d91068bba/baremaps-core/src/main/java/org/apache/baremaps/vectortile/tilejson/TileJSON.java#L34)
* Serve a `tile.json` with only fields from specification and have another endpoint such as `tile-extended.json` which would be the base `tile.json` with the additions of custom fields. Alternatively the newly endpoint could serve data without following TileJSON and only contain data tailored to various needs.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lbIOT/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ldBNg,incubator-baremaps,1702105952,766,NA,polastre,2539570,Joe Polastre,,NA,2023-09-01T03:30:27Z,2023-09-01T03:30:27Z,"Yes @Perdjesk, your understanding is exactly right. I built my own tile exporter that performs much faster than the baremaps exporter (we plan to open source it in the near future). It relies on getting the SQL queries for the tileset out of the baremaps tiles.json.

Either option would be completely fine for our use case.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ldBNg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5leyw2,incubator-baremaps,1702571062,766,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-01T11:02:28Z,2023-09-01T11:02:28Z,@polastre I'm looking forward to learn more about this. Our exporter has been left a bit aside to focus on the basemap and it would be great if we can integrate your optimizations at some point.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5leyw2/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lqnIb,incubator-baremaps,1705669147,766,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-04T20:12:07Z,2023-09-04T20:12:07Z,@polastre The security concern was a concern reported by @Perdjesk and another user. #722 exposes the SQL queries in dev mode and keep them hidden in production.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lqnIb/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lqsej,incubator-baremaps,1705691043,766,NA,polastre,2539570,Joe Polastre,,NA,2023-09-04T20:50:24Z,2023-09-04T20:50:24Z,"Thanks, #772 will help out a lot. We really need this, and I think the dev-mode-only is a reasonable compromise.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lqsej/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lqsn3,incubator-baremaps,1705691639,766,NA,polastre,2539570,Joe Polastre,,NA,2023-09-04T20:51:36Z,2023-09-04T20:51:36Z,"Note that our exporter is not built in Java, so I'm not sure if it will be compatible with this Apache project. I'll post a link to it once we open source it.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lqsn3/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lq6ZL,incubator-baremaps,1705748043,766,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-04T22:48:00Z,2023-09-04T22:48:00Z,"That would be awesome, as long as the license is compatible with Apache (MIT, BSD, ASL, etc.), we can probably port and integrate the optimization to Java.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lq6ZL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ox2y4,incubator-baremaps,1757899960,766,NA,polastre,2539570,Joe Polastre,,NA,2023-10-11T15:03:03Z,2023-10-11T15:03:03Z,"@bchapuis here is the `baremaps-exporter` that we wrote to speed things up:
https://github.com/flightaware/baremaps-exporter","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ox2y4/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5o3T8A,incubator-baremaps,1759330048,766,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-10-12T10:17:26Z,2023-10-12T10:17:26Z,"This is awesome! 

The sql unioning looks really straight forward. The original PostgresTileStore was devised to make use of CTEs. I guess that with recent versions of postgis, this kind of optimization is not necessary anymore. I will try to update our code accordingly and see if we can implement a similar batching strategy.

Thanks a lot for sharing.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5o3T8A/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/766,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5qIz7j,incubator-baremaps,1780694755,766,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-10-26T08:56:20Z,2023-10-26T08:56:20Z,@polastre I started aligning the queries generated by the PostgresTileStore to the queries generated by the baremaps-exporter in #792.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5qIz7j/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/767,https://api.github.com/repos/apache/incubator-baremaps/issues/767,incubator-baremaps,1876065460,767,Store binary versions for all releases,polastre,2539570,Joe Polastre,,CLOSED,2023-08-31T18:24:25Z,2023-09-01T11:09:47Z,"`v0.7.1` was removed from the binary releases at https://dist.apache.org/repos/dist/dev/incubator/baremaps/

Please bring it back so that we can reliably pull a specific binary versions in our build scripts. Thank you.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/767/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/767,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5la623,incubator-baremaps,1701555639,767,NA,polastre,2539570,Joe Polastre,,NA,2023-08-31T18:26:54Z,2023-08-31T18:26:54Z,"I guess we're supposed to not use the dev distribution eh? So this is the right place for all archived historical releases?

https://dlcdn.apache.org/incubator/baremaps/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5la623/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/767,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lbT7E,incubator-baremaps,1701658308,767,NA,Perdjesk,1125783,,,NA,2023-08-31T19:23:14Z,2023-08-31T19:23:14Z,"You are more than welcome to use the release candidates and give feedback, it is very useful and meant for that.

However the artifacts at https://dist.apache.org/repos/dist/dev/ will come and go and are not a reliable source for stable releases and should not be used in automation (e.g scripts).

https://dlcdn.apache.org/incubator/baremaps/ is the correct URL for stable releases.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5lbT7E/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/767,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ldA2F,incubator-baremaps,1702104453,767,NA,polastre,2539570,Joe Polastre,,NA,2023-09-01T03:28:19Z,2023-09-01T03:28:19Z,Thanks for the confirmation.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5ldA2F/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/767,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5le03p,incubator-baremaps,1702579689,767,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-01T11:09:46Z,2023-09-01T11:09:46Z,Here is the stable directory on the same server: https://dist.apache.org/repos/dist/release/incubator/baremaps/0.7.1/,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5le03p/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/770,https://api.github.com/repos/apache/incubator-baremaps/issues/770,incubator-baremaps,1878672255,770,Improve exception handling and logging in baremaps,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-09-02T12:40:45Z,2023-11-04T23:29:50Z,"I'd like to improve the way we trigger and handle exception in baremaps. At the moment, baremaps mostly use checked exceptions. This is problematic because we extensively rely on the Stream API which does not support checked exception. Therefore, we may be tempted to introduce the folling kind of exception caching and rethrowing code in the codebase (pseudo-code):

```java
try {
  stream.map(elem -> {
    try {
        // do something
    } catch(BaremapsException e) {
       throw new RuntimeException(e);
    }
  }).toList();
} catch (RuntimeException e) {
    if (e.getCause() instanceof BaremapsException) {
      throw e.getCause();
    } else {
       throw e;
    }
}
```

In addition to being unreadable, it is easy to forget to log exceptions correctly as reported in #763.

My current opinion is that we should use uncatched exceptions instead of checked exception in the API and let the error propagate several levels up. We should then systematically catch and log them at the level of the workflow executor. In addition to being more readable and reducing the amount code related to exception handling, this approach may enable us to build comprehensive execution reports.

@Perdjesk @polastre What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/770/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/770,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5md0pt,incubator-baremaps,1719093869,770,NA,cmahnke,194820,,,NA,2023-09-14T09:30:29Z,2023-09-14T09:30:29Z,"This is also required to stop a workflow run, if there is an error in a previous step:
```

[INFO ] 2023-09-14 11:27:58.400 [main] Execute - Executing the workflow workflow.json
[INFO ] 2023-09-14 11:27:58.529 [pool-2-thread-1] DownloadUrl - Downloading https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf to liechtenstein-latest.osm.pbf
[INFO ] 2023-09-14 11:27:58.895 [pool-2-thread-1] DownloadUrl - Skipping download of https://download.geofabrik.de/europe/liechtenstein-latest.osm.pbf to liechtenstein-latest.osm.pbf
[INFO ] 2023-09-14 11:27:58.895 [pool-2-thread-2] ImportOpenStreetMap - Importing liechtenstein-latest.osm.pbf into jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps
[INFO ] 2023-09-14 11:27:58.902 [pool-2-thread-2] HikariDataSource - HikariPool-1 - Starting...
[INFO ] 2023-09-14 11:27:59.107 [pool-2-thread-2] HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@e74ca58
[INFO ] 2023-09-14 11:27:59.108 [pool-2-thread-2] HikariDataSource - HikariPool-1 - Start completed.
[WARN ] 2023-09-14 11:28:01.593 [ForkJoinPool.commonPool-worker-6] RelationGeometryBuilder - Unable to build the geometry for relation #5401257
org.apache.baremaps.stream.StreamException: java.lang.NullPointerException: Cannot invoke ""java.util.List.stream()"" because ""refs"" is null
	at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.createLine(RelationGeometryBuilder.java:168) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.lambda$createPolygons$2(RelationGeometryBuilder.java:143) ~[baremaps-core-0.7.1.jar:?]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[?:?]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[?:?]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[?:?]
	at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.createPolygons(RelationGeometryBuilder.java:142) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.accept(RelationGeometryBuilder.java:71) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.openstreetmap.function.EntityGeometryBuilder.accept(EntityGeometryBuilder.java:54) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.openstreetmap.function.EntityGeometryBuilder.accept(EntityGeometryBuilder.java:27) ~[baremaps-core-0.7.1.jar:?]
	at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
	at java.util.function.Consumer.lambda$andThen$0(Consumer.java:65) ~[?:?]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.apache.baremaps.openstreetmap.function.BlockEntitiesHandler.accept(BlockEntitiesHandler.java:47) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.openstreetmap.function.BlockEntitiesHandler.accept(BlockEntitiesHandler.java:25) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.stream.ConsumerUtils.lambda$consumeThenReturn$1(ConsumerUtils.java:46) ~[baremaps-core-0.7.1.jar:?]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at org.apache.baremaps.stream.BufferedSpliterator.tryAdvance(BufferedSpliterator.java:74) ~[baremaps-core-0.7.1.jar:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:292) ~[?:?]
	at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206) ~[?:?]
	at java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:169) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:298) ~[?:?]
	at org.apache.baremaps.stream.BatchedSpliterator.tryAdvance(BatchedSpliterator.java:48) ~[baremaps-core-0.7.1.jar:?]
	at org.apache.baremaps.stream.BatchedSpliterator.trySplit(BatchedSpliterator.java:59) ~[baremaps-core-0.7.1.jar:?]
	at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:289) ~[?:?]
	at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754) ~[?:?]
	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387) ~[?:?]
	at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312) ~[?:?]
	at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843) ~[?:?]
	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808) ~[?:?]
	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188) ~[?:?]
Caused by: java.lang.NullPointerException: Cannot invoke ""java.util.List.stream()"" because ""refs"" is null
	at org.apache.baremaps.openstreetmap.function.RelationGeometryBuilder.createLine(RelationGeometryBuilder.java:164) ~[baremaps-core-0.7.1.jar:?]
	... 37 more
[INFO ] 2023-09-14 11:28:01.970 [pool-2-thread-2] ImportOpenStreetMap - Finished importing liechtenstein-latest.osm.pbf into jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps
[INFO ] 2023-09-14 11:28:01.971 [pool-2-thread-3] ExecuteSql - Executing indexes.sql
```

And yes: This means that the current documented example is broken with 0.7.1

Someone already spotted this issue: https://github.com/apache/incubator-baremaps/issues/743#issuecomment-1677127507

**[Update]**
This is fixed in the current Git version.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5md0pt/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/774,https://api.github.com/repos/apache/incubator-baremaps/issues/774,incubator-baremaps,1884641555,774,How to fetch env variables in style.js/tileset.js,polastre,2539570,Joe Polastre,,CLOSED,2023-09-06T19:43:02Z,2023-09-09T12:14:43Z,"Is there a way to use `process.env` in those files or in a `config.js` that is loaded in?

I get the error:
```
java.io.IOException: org.graalvm.polyglot.PolyglotException: ReferenceError: process is not defined
```

which seems to be an artifact of using Polyglot.

Any suggestions?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/774/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/774,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l6cyL,incubator-baremaps,1709821067,774,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-07T09:34:26Z,2023-09-07T09:34:26Z,"The environment variables were not yet exposed to the javascript execution context. After merging #776, you should be able to access them as follow:

```js
env[""VARIABLE_NAME""];
```

The following should print all the variables:

```js
console.log(JSON.stringify(env, null, 2));
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l6cyL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/774,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l-EAZ,incubator-baremaps,1710768153,774,NA,polastre,2539570,Joe Polastre,,NA,2023-09-07T21:03:35Z,2023-09-07T21:03:35Z,This would be fantastic.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l-EAZ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/775,incubator-baremaps,1884881067,775,Set number of event loop threads,polastre,2539570,Joe Polastre,,CLOSED,2023-09-06T23:26:01Z,2023-09-12T19:25:06Z,"In v0.7.2-rc1, `baremaps map dev` is creating threads based on the number of cores on my machine.

On one such machine, it spins up 144 worker threads (!!!). Postgres, by default, only allows 100 concurrent connections. 144 seems excessive.

I tried setting `-Dio.netty.eventLoopThreads=50` when running baremaps, but it doesn't like that.

How can I control how many threads are set up so it doesn't blow up Postgres?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/775/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l6oYE,incubator-baremaps,1709868548,775,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-07T10:00:28Z,2023-09-07T10:00:28Z,"You do have a lot of cores... Is it an Ampere server?

We currently initialize the connection pool to twice the number of cores as recommended in the postgresql [documentation](https://wiki.postgresql.org/wiki/Number_Of_Database_Connections).

https://github.com/apache/incubator-baremaps/blob/be499e3d8aaec78a4ea3fa277f05a8d66b0bc8bd/baremaps-core/src/main/java/org/apache/baremaps/utils/PostgresUtils.java#L52

Given that this default value is not always sound, I think we should expose it to the user.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l6oYE/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l-D6_,incubator-baremaps,1710767807,775,NA,polastre,2539570,Joe Polastre,,NA,2023-09-07T21:03:14Z,2023-09-07T21:03:14Z,"We have our own on-prem servers, this one with 72 others with 64. :) It makes generating tiles a lot faster.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5l-D6_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mCgpw,incubator-baremaps,1711934064,775,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-08T16:27:40Z,2023-09-08T16:27:40Z,"That's a nice setup ;)

Regarding this issue I think we have to options. One would consist in adding a command line parameter to the command line (e.g. `--maximum-pool-size 64`). The other one would consist in adding this parameter to the tileset.json file.

```
{
  ...
  'database': 'jdbc://...',
  'maximum-pool-size': 64
}
```

As the need for customization increases, we could to introduce a new 'datasource' field with more configuration parameters and deprecate the 'database' field.

```
{
  'datasource': {
    'jdbcUrl': 'jdbc://...',
    'maximumPoolSize': 64,
    'minimumPoolSize': 16,
    ...
  }
}
```

It would be nice to have your feedback on these alternative before doing the implementation. Personally, I tend to prefer the third option.



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mCgpw/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mFPQf,incubator-baremaps,1712649247,775,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-09T21:57:47Z,2023-09-09T21:57:47Z,"Just experimented with another alternative. The database can either be a string or a json object representing an hikari connection pool. This allows to set the maximum number of connections in the pool.

The following values are allowed:

```
{
    ""database"": ""jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps"",
}
```

Or:

```
{
    ""database"": {
        ""jdbcUrl"": ""jdbc:postgresql://localhost:5432/baremaps?&user=baremaps&password=baremaps"",
        ""maximumPoolSize"": 4,
    },
}
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mFPQf/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mNpJ-,incubator-baremaps,1714852478,775,NA,polastre,2539570,Joe Polastre,,NA,2023-09-12T02:00:39Z,2023-09-12T02:00:39Z,Any of these look good to me. Does this second option work without any changes out of the box? Having an object is preferable as it gives us flexibility for future enhancements.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mNpJ-/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/775,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mOcIA,incubator-baremaps,1715061248,775,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-12T06:23:03Z,2023-09-12T06:23:03Z,"Yes, the last works either with a string or with an object. I usually don't like to store things of a different type (string or object) in an attribute. However, we can probably deprecate the string in a future version and keep only the object.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mOcIA/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/779,https://api.github.com/repos/apache/incubator-baremaps/issues/779,incubator-baremaps,1892039682,779,Basic read OSM PBF Node/Way elements into an Lucene index.,Perdjesk,1125783,,,CLOSED,2023-09-12T09:07:23Z,2023-09-13T08:59:04Z,,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/779/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/781,https://api.github.com/repos/apache/incubator-baremaps/issues/781,incubator-baremaps,1893291431,781,Include the version number in the license of the binary distribution,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-09-12T21:19:50Z,2024-02-03T19:32:06Z,"The LICENSE file of the binary version needs to declare which version of the source code your binary version is based on. 

https://github.com/apache/hadoop/blob/trunk/LICENSE-binary
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/781/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/784,https://api.github.com/repos/apache/incubator-baremaps/issues/784,incubator-baremaps,1896181207,784,Filter the OSM entities by bounding box and tags when importing data,cmahnke,194820,,,OPEN,2023-09-14T09:46:28Z,2023-09-16T10:19:02Z,"Disclaimer: I do not know if these features are implemented, if not, consider this as a feature request:

Provide an example to filter data, for example before or during database import. For example for OSM.
* By bounding box - Use cases are extracting just a city or some states (like BeNeLux) that aren't provided as GeoFabrik exports. Maybe the Overpass API could help, but getting huge datasets might fail.
* By Type, like `shop`, `aerialway`, `railway` - you get the point.

This would be quite useful to reduce the database size by ignoring unwanted data.

If those features exist, this issue might be moved to https://github.com/apache/incubator-baremaps-site

**[Update]**
[osmium](https://osmcode.org/osmium-tool/) and maybe [Osmosis](https://github.com/openstreetmap/osmosis) can do the filtering, but Im not sure if the license is compatible for direct inclusion. May there could be some sort of `exec` workflow step?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/784/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/784,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mmNi9,incubator-baremaps,1721292989,784,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-15T13:34:10Z,2023-09-15T13:34:10Z,"Filtering is a good idea! I think we will have to add additional parameter to the ImportOSM step. As we use the Stream API, this kind of filter could be plugged at the level of the parser.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5mmNi9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/785,https://api.github.com/repos/apache/incubator-baremaps/issues/785,incubator-baremaps,1902562888,785,Questions about source release artifact,Perdjesk,1125783,,,CLOSED,2023-09-19T09:23:20Z,2024-02-24T12:47:30Z,"
### Should the examples be in source release artifact? 
The current `assembly/src.xml` doesn't include them because of a typography error:

https://github.com/apache/incubator-baremaps/blob/894e959a0df0f17ee529edf8ba1562b02875ce27/baremaps-cli/src/assembly/src.xml#L44

This is related to the point mentionned in mailing list:
> I tried to run the example from the tar.gz binary, but the website seems to refer to the repo - not a release. As an example, the openStreet Map example wouldn’t work with one of our binary releases. This isn’t a blocker by any means, just a developer experience idea that I thought about while checking the release. 

https://lists.apache.org/thread/bgy6209f65c0kyfrw4gdm2lg935dn9j3

### Should the Maven wrapper be included in source release artifact? 
In order to provide better build reproducibility and avoid potential build errors due to different Maven versions.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/785/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/785,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5m1Dgz,incubator-baremaps,1725184051,785,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-09-19T09:52:24Z,2023-09-19T09:52:24Z,"Good catch, let's correct the example issue in the next release.

if I recall correctly it is common to exclude the maven wrapper from the releases due to licensing issues (GPL).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5m1Dgz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/785,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s509ytl,incubator-baremaps,1962355557,785,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-02-24T12:47:22Z,2024-02-24T12:47:22Z,Fixed in #836,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s509ytl/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/790,incubator-baremaps,1936614246,790,java.nio.file.FileAlreadyExistsException on file unzip,polastre,2539570,Joe Polastre,,CLOSED,2023-10-11T01:38:51Z,2023-11-04T00:32:07Z,"This is using v0.7.2-rc2:

Here's a sample workflow to download the latest shapefiles from natural earth. The zip file has a directory inside of it, which seems to be incompatible with the `UnzipFile` task.

workflow.js:
```js
import config from ""./config.js"";

export default {
    ""steps"": [
        {
            ""id"": ""natural-earth"",
            ""needs"": [],
            ""tasks"": [
                {
                    ""type"": ""DownloadUrl"",
                    ""url"": ""http://www.shadedrelief.com/ne-draft/World-Base-Map-Shapefiles.zip"",
                    ""path"": ""/data/downloads/natural_earth_basemap.zip""
                },
                {
                    ""type"": ""UnzipFile"",
                    ""file"": ""/data/downloads/natural_earth_basemap.zip"",
                    ""directory"": ""/data/downloads/natural_earth_basemap""
                },
            ]
        }
    ]
};
```

Execution log:
```sh
$ baremaps workflow execute --file=/data/workflow-ne.js
[INFO ] 2023-10-11 01:34:51.921 [main] Execute - Executing the workflow /data/workflow-ne.js
[INFO ] 2023-10-11 01:34:52.773 [main] WorkflowExecutor - Workflow graph: isDirected: true, allowsSelfLoops: false, nodes: [natural-earth], edges: []
[INFO ] 2023-10-11 01:34:52.787 [pool-2-thread-1] WorkflowExecutor - Executing task DownloadUrl[url=http://www.shadedrelief.com/ne-draft/World-Base-Map-Shapefiles.zip, path=/data/downloads/natural_earth_basemap.zip, replaceExisting=false] of step natural-earth
[INFO ] 2023-10-11 01:34:52.789 [pool-2-thread-1] DownloadUrl - Skipping download of http://www.shadedrelief.com/ne-draft/World-Base-Map-Shapefiles.zip to /data/downloads/natural_earth_basemap.zip
[INFO ] 2023-10-11 01:34:52.795 [pool-2-thread-2] WorkflowExecutor - Executing task UnzipFile[file=/data/downloads/natural_earth_basemap.zip, directory=/data/downloads/natural_earth_basemap] of step natural-earth
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: java.nio.file.FileAlreadyExistsException: /data/downloads/natural_earth_basemap/World-Base-Map-Shapefiles
        at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
        at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:48)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:29)
        at picocli.CommandLine.executeUserObject(CommandLine.java:1953)
        at picocli.CommandLine.access$1300(CommandLine.java:145)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)
        at picocli.CommandLine.execute(CommandLine.java:2078)
        at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:62)
Caused by: org.apache.baremaps.workflow.WorkflowException: java.nio.file.FileAlreadyExistsException: /data/downloads/natural_earth_basemap/World-Base-Map-Shapefiles
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:162)
        at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
        at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.nio.file.FileAlreadyExistsException: /data/downloads/natural_earth_basemap/World-Base-Map-Shapefiles
        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:94)
        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)
        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
        at java.base/sun.nio.fs.UnixFileSystemProvider.createDirectory(UnixFileSystemProvider.java:397)
        at java.base/java.nio.file.Files.createDirectory(Files.java:700)
        at java.base/java.nio.file.Files.createAndCheckIsDirectory(Files.java:807)
        at java.base/java.nio.file.Files.createDirectories(Files.java:753)
        at org.apache.baremaps.workflow.tasks.UnzipFile.execute(UnzipFile.java:52)
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:157)
        ... 5 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/790/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5os7Fx,incubator-baremaps,1756606833,790,NA,polastre,2539570,Joe Polastre,,NA,2023-10-11T01:46:17Z,2023-10-11T01:46:17Z,"As an aside, it would be _really nice_ to have a documentation page where it lists all the possible tasks and their arguments.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5os7Fx/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5os-G_,incubator-baremaps,1756619199,790,NA,polastre,2539570,Joe Polastre,,NA,2023-10-11T02:04:27Z,2023-10-11T02:04:27Z,"I've hacked around it with this, but I'm assuming this isn't what you intend people to do:

```js
{
    ""type"": ""ExecuteCommand"",
    ""command"": ""unzip /data/downloads/natural_earth_basemap.zip -d /data/downloads/natural_earth_basemap"",
},
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5os-G_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5oxxmh,incubator-baremaps,1757878689,790,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-10-11T14:56:06Z,2023-10-11T14:56:06Z,"Thank you for reporting this issue with clear instructions to reproduce the problem.

Yes, we should improve the documentation. As these parts are still moving relatively fast, I believe that publishing a javadoc that we reference in the manual would be the best way to keep everything up to date for now.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5oxxmh/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5pKzb6,incubator-baremaps,1764439802,790,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-10-16T13:02:17Z,2023-10-16T13:02:17Z,"Interesting, after some digging, it looks like our current bottleneck is the export in the sqlite file. We are probably doing something wrong when exporting data, but I'm not yet able to spot the cause of the issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5pKzb6/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5pVPbz,incubator-baremaps,1767175923,790,NA,polastre,2539570,Joe Polastre,,NA,2023-10-17T21:02:00Z,2023-10-17T21:02:00Z,@bchapuis I think your commend relates to #726 and https://github.com/apache/incubator-baremaps/issues/766#issuecomment-1759330048 and not this issue.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5pVPbz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/790,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5qIwvz,incubator-baremaps,1780681715,790,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-10-26T08:48:18Z,2023-10-26T08:48:18Z,Thank you for pointing the right conversation.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5qIwvz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/795,https://api.github.com/repos/apache/incubator-baremaps/issues/795,incubator-baremaps,1966583892,795,CGAlgorithmsDD::orientationIndex encountered NaN/Inf numbers,leonardcser,73912641,Leonard,,OPEN,2023-10-28T12:49:30Z,2024-10-30T17:34:43Z,"Building the basemap with the the following osm pbf, produces the error below:

### Config
```json
{
    ""osmPbfUrl"": ""https://download.geofabrik.de/europe/france/ile-de-france-latest.osm.pbf"",
}
```


### Stacktrace
```
[INFO ] 2023-10-28 14:41:49.168 [pool-2-thread-8] WorkflowExecutor - Executing task ExecuteSql[database=jdbc:postgresql://localhost:5432/baremaps?&user=bertil, file=layers/ocean/prepare.sql, parallel=false] of step openstreetmap-ocean
[INFO ] 2023-10-28 14:42:04.928 [pool-2-thread-8] WorkflowExecutor - Executing task ExecuteSql[database=jdbc:postgresql://localhost:5432/baremaps?&user=bertil, file=layers/ocean/index.sql, parallel=false] of step openstreetmap-ocean
java.util.concurrent.ExecutionException: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: org.postgresql.util.PSQLException: ERROR: GEOSTopologyPreserveSimplify: IllegalArgumentException: CGAlgorithmsDD::orientationIndex encountered NaN/Inf numbers
  Where: parallel worker
        at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)
        at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:53)
        at org.apache.baremaps.cli.workflow.Execute.call(Execute.java:34)
        at picocli.CommandLine.executeUserObject(CommandLine.java:2041)
        at picocli.CommandLine.access$1500(CommandLine.java:148)
        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2453)
        at picocli.CommandLine$RunLast.handle(CommandLine.java:2415)
        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)
        at picocli.CommandLine$RunLast.execute(CommandLine.java:2417)
        at picocli.CommandLine.execute(CommandLine.java:2170)
        at org.apache.baremaps.cli.Baremaps.main(Baremaps.java:66)
Caused by: org.apache.baremaps.workflow.WorkflowException: org.apache.baremaps.workflow.WorkflowException: org.postgresql.util.PSQLException: ERROR: GEOSTopologyPreserveSimplify: IllegalArgumentException: CGAlgorithmsDD::orientationIndex encountered NaN/Inf numbers
  Where: parallel worker
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:167)
        at java.base/java.util.concurrent.CompletableFuture$UniRun.tryFire(CompletableFuture.java:787)
        at java.base/java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
        at java.base/java.lang.Thread.run(Thread.java:1623)
Caused by: org.apache.baremaps.workflow.WorkflowException: org.postgresql.util.PSQLException: ERROR: GEOSTopologyPreserveSimplify: IllegalArgumentException: CGAlgorithmsDD::orientationIndex encountered NaN/Inf numbers
  Where: parallel worker
        at org.apache.baremaps.workflow.tasks.ExecuteSql.lambda$execute$0(ExecuteSql.java:46)
        at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1006)
        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
        at org.apache.baremaps.workflow.tasks.ExecuteSql.execute(ExecuteSql.java:39)
        at org.apache.baremaps.workflow.WorkflowExecutor.lambda$createFutureStep$3(WorkflowExecutor.java:162)
        ... 5 more
Caused by: org.postgresql.util.PSQLException: ERROR: GEOSTopologyPreserveSimplify: IllegalArgumentException: CGAlgorithmsDD::orientationIndex encountered NaN/Inf numbers
  Where: parallel worker
        at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
        at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
        at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
        at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
        at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
        at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
        at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
        at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
        at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
        at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
        at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
        at org.apache.baremaps.workflow.tasks.ExecuteSql.lambda$execute$0(ExecuteSql.java:44)
        ... 9 more
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/795/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/795,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59Tlb_,incubator-baremaps,2102286079,795,NA,louwers,649392,Bart Louwers,,NA,2024-05-09T09:21:35Z,2024-05-09T09:21:35Z,"Is a specific PostGIS version required?

Edit: Running it again, crashes again.
Probably an issue with the data that is not handled gracefully.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59Tlb_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/795,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59ey2G,incubator-baremaps,2105224582,795,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-10T20:21:48Z,2024-05-10T20:21:48Z,"@louwers Thanks a lot for reporting this, I'm currently not able to reproduce the issue. I tried several files from geofabrick without getting this exception.

I currently use the following docker image for postgis on the mac (`kartoza/postgis:15-3.3`). Could you provide some information about your postgis setup?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59ey2G/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/795,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59e4DS,incubator-baremaps,2105245906,795,NA,louwers,649392,Bart Louwers,,NA,2024-05-10T20:41:25Z,2024-05-10T20:41:25Z,"I'm using PostgreSQL 16 with PostGIS 3.4. I'm using https://postgresapp.com/ on macOS, you might want to try that (no Docker overhead).

It happens for the Switzerland data as well as the the Netherlands data (did not try other downloads).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59e4DS/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/795,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59gxoe,incubator-baremaps,2105743902,795,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-11T13:21:59Z,2024-05-11T13:21:59Z,"Great, I have now been able to reproduce the error. It looks like `st_simplifypreservetopology` is causing this issue. A quick workaround was to replace these calls with `st_simplify`, but I will try to find for a better alternative.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59gxoe/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/795,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59kjUV,incubator-baremaps,2106733845,795,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-13T06:15:45Z,2024-05-13T06:15:45Z,"The problem seems related to the version of geos used in PostgresApp (3.12.1) and specific to the use of `st_simplifypreservetopology`. 

https://github.com/PostgresApp/PostgresApp/blob/bb7118f1b17224f0efd8cf094e20be3da812f88b/src-16/makefile#L24

The `kartoza/postgis:16-3.4` docker image uses an older version of geos (3.11.1-CAPI-1.17.1). I will try to compile PostgressApp with geos 3.11.1 to confirm this. Only a few people seems to have encountered this problem yet, but I guess that it will become pervasive as people start building against the latest version of geos.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59kjUV/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/797,https://api.github.com/repos/apache/incubator-baremaps/issues/797,incubator-baremaps,1975807913,797,[Cache] Question,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2023-11-03T09:49:24Z,2023-11-17T12:23:17Z,"Hello.
The cache in Baremaps works with caffeine.
I was wondering what would be your approch to invalidate the cache when changes take place in the database.
The API states       --cache=CACHE           The caffeine cache directive.
But it is a bit obscure what is expected.
Thanks","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/797/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/797,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5q4e4F,incubator-baremaps,1793191429,797,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-11-03T22:28:35Z,2023-11-03T22:28:35Z,"We should probably include this in the documentation of the command.

Here is the documentation from caffeine:

https://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.2.2/com/github/benmanes/caffeine/cache/CaffeineSpec.html

And a command line example (1GB cache with 1 hour expiration):

```bash
baremaps map serve \
  --cache 'maximumWeight=1073741824,expireAfterAccess=1h'  \
  --tileset tileset.js   --style style.js
```




","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5q4e4F/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/810,https://api.github.com/repos/apache/incubator-baremaps/issues/810,incubator-baremaps,2025773431,810,SQL Join Erreur,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,CLOSED,2023-12-05T09:42:59Z,2023-12-11T13:17:55Z,"I cant seem to get a JOIN with an sql statement.
`SELECT uuid_hash(ega.id)::integer, jsonb_build_object('nom', ega.nom[1]::text, 'couleur', ta.couleur ) as tags, geom FROM nexsis.ega JOIN typologie.typologie_activite ta ON (ega.id_typologie= ta.id)`
Will give me a syntax error 
with the sql statement
`h4b7f106c as (select * from nexsis.egaLEFT JOIN typologie.typologie_activite ta ON`
The space seems to be removed before a JOIN.
i""ve tried using alias, doing a simple JOiN ect ... but the same error. Seems only to be with JOIN because adding WHERE after does work


Is there a limitation to the sql (no joins allowed?)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/810/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/810,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-TG7,incubator-baremaps,1845047739,810,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-12-07T10:06:13Z,2023-12-07T10:06:13Z,"Hello @julsbreakdown, it looks like you are not using the latest version of baremaps. In the latest version, the sql generated by baremaps got simpler. Could you give it a try? I already spotted minor issues in the latest release, they have been fixed in main and will be released soon.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-TG7/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/810,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-W-Z,incubator-baremaps,1845063577,810,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2023-12-07T10:16:45Z,2023-12-07T10:16:45Z,"This is with the [v0.7.2](https://github.com/apache/incubator-baremaps/releases/tag/v0.7.2)
version =( ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-W-Z/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/810,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-c5l,incubator-baremaps,1845087845,810,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-12-07T10:30:49Z,2023-12-07T10:30:49Z,"You are right, sorry, I believed the latest changes had been released. Regarding the query, it would be nice to add a few test cases that ensure this kind of JOIN queries pass. Is this something you could contribute?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-c5l/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/810,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-eHm,incubator-baremaps,1845092838,810,NA,julsbreakdown,10759614,jwaddle,julien.waddle@camptocamp.com,NA,2023-12-07T10:33:31Z,2023-12-07T10:33:31Z,"If you point me out to where why not.
However i'm not a Java expert !","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5t-eHm/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/810,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5uCIyb,incubator-baremaps,1846054043,810,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2023-12-07T20:22:36Z,2023-12-07T20:22:36Z,I guess the easiest would be to add a failing example in the example directory. Having a simple sql script to initialize a database and a tileset with the problematic query would greatly help at reproducing the problem.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5uCIyb/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/815,https://api.github.com/repos/apache/incubator-baremaps/issues/815,incubator-baremaps,2044747975,815,Replace the osm files by osm-testdata,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2023-12-16T13:22:11Z,2024-01-02T11:01:46Z,"The osm files in the test directory have a license incompatible with Apache.

We could replace them with osm-testdata which has a public license.
https://github.com/osmcode/osm-testdata/tree/master

This is also an opportunity to test the osm parsers more systematically.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/815/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/815,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5vsTEO,incubator-baremaps,1873883406,815,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-01-02T11:01:46Z,2024-01-02T11:01:46Z,Closed by #816 ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5vsTEO/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/845,https://api.github.com/repos/apache/incubator-baremaps/issues/845,incubator-baremaps,2235358019,845,Create tiles with data from multiple databases,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2024-04-10T11:21:33Z,2024-04-10T11:30:11Z,"Tilesets currently connect to a single database. It would be nice if a tileset could span and connect to several databases.

One possible implementation would consist in specifying the data source at the layer level in the tileset. This way the TileStore could group layers by data source, fetch the layers by data source, and concatenate the layers in the TileStore. This is probably the easiest way to implement this feature, however, it means that each layer query will always involve only one database.

```json
{
""datasources"":[
 {
   ""id"": ""a""
   ""jdbcUrl"": ""jdbc:postgresql://a:5432/a"",
   ""poolSize"": 8
 },
 {
   ""id"": ""b""
   ""jdbcUrl"": ""jdbc:postgresql://b:5432/b"",
   ""poolSize"": 8
 }
],
""vector_layers"": [
    {
      ""id"": ""layer-a"",
      ""datasource"": ""a""
      ""queries"": [
        {
          ""minzoom"": 12,
          ""maxzoom"": 20,
          ""sql"": ""SELECT id, tags, geom FROM table""
        },
      ]
    },
   {
      ""id"": ""layer-b"",
      ""datasource"": ""b""
      ""queries"": [
        {
          ""minzoom"": 12,
          ""maxzoom"": 20,
          ""sql"": ""SELECT id, tags, geom FROM table""
        },
      ]
    },
]
```

Another possibile implementation may be to rely on apache calcite to provide a uniform access to several databases. This solution would allow to execute queries that span over multiple databases. Personally, I'm a bit more interested in this alternative, as I currently seek to improve the compatibility of calcite with postgis. Unfortunately, it is probably not practical in a short to medium time frame.

https://github.com/apache/calcite/pull/3668

I suggest we go for the first option, keeping in mind that apache calcite may be a better solution in the long term. @julsbreakdown do not hesitate to comment and to provide feedback.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/845/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/845,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56BuaV,incubator-baremaps,2047272597,845,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-10T11:22:57Z,2024-04-10T11:22:57Z,We should probably find a way to set a default datasource.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56BuaV/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/846,https://api.github.com/repos/apache/incubator-baremaps/issues/846,incubator-baremaps,2235367395,846,Add the ability to serve multiple tilesets with a single process,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2024-04-10T11:27:16Z,2024-04-10T11:27:16Z,"Here is the original comment.

https://github.com/apache/incubator-baremaps/issues/571#issuecomment-1384975128","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/846/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/847,https://api.github.com/repos/apache/incubator-baremaps/issues/847,incubator-baremaps,2237828205,847,workflow.json in osm example is not working,benoitregamey,61193520,Benoit G. Regamey,,CLOSED,2024-04-11T14:12:11Z,2024-09-26T20:59:27Z,"Hi there,
Awesome project, thanks !

Here's my 2 cents : the `examples/openstreetmap/workflow.json` seems not to work. Log says : 
```
Could not resolve type id 'ImportOsmPbf' as a subtype of `org.apache.baremaps.workflow.Task`
```
I had to manually download OSM data in `.pbf` and use the command `baremaps database import-osm` to get it to work.

All the best
Benoit","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/847/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/847,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56L8BL,incubator-baremaps,2049949771,847,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-11T15:21:20Z,2024-04-11T15:21:20Z,"Thanks a lot for reporting this issue. Could you tell me which version of baremaps you are using?

We are in the process of dropping a new release and I fixed some issues when testing the examples. Do you think they may be related?
https://github.com/apache/incubator-baremaps/pull/848

Also, everyone is invited to vote for the release artifacts, so do not hesitate to add yours.
https://lists.apache.org/thread/cvz3y3rqsnv37zqx8b7vo65f6lpbtjm6
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56L8BL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/847,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56kEhB,incubator-baremaps,2056276033,847,NA,benoitregamey,61193520,Benoit G. Regamey,,NA,2024-04-15T08:53:10Z,2024-04-15T08:53:10Z,"I used version 0.7.2 from here `https://dist.apache.org/repos/dist/release/incubator/baremaps/0.7.2/`

_We are in the process of dropping a new release and I fixed some issues when testing the examples. Do you think they may be related?_
I don't know, according to the logs, it seems the task `ImportOsmPbf` does not exist","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56kEhB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/847,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56rvo6,incubator-baremaps,2058287674,847,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-04-16T05:58:13Z,2024-04-16T05:58:13Z,"The format of the workflow currently used in the main branch probably changed slightly and is not supported by 0.7.2 anymore. One option could be to try with 0.7.3-rc1 from here (I tested the openstreetmap example currently in main with this release candidate):

https://dist.apache.org/repos/dist/dev/incubator/baremaps/0.7.3-rc1/

Another option could be to use the workflow tagged with 0.7.2 (as you noticed the problematic task was named `ImportOpenStreetMap` by then and was renamed `ImportOsmPbf`):

https://github.com/apache/incubator-baremaps/blob/v0.7.2/examples/openstreetmap/workflow.json

Do not hesitate to reach out if you need some support along the setup.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s56rvo6/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/849,incubator-baremaps,2245264397,849,Add support for Overturemap parquet files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2024-04-16T06:57:05Z,2024-06-14T09:24:47Z,https://github.com/OvertureMaps/data,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/849/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s58erHg,incubator-baremaps,2088415712,849,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-01T12:46:18Z,2024-05-01T12:46:18Z,"@sebr72 as discussed, I'm not really satisfied with my current experiment in the overturemap branch. The geoparquet format contains semi structured data which require some changes in the DataTable abstraction. Also, it requires a deep understanding of the geoparquet format. 

One avenue (probably the best) could be to use the parser available in sedona (the project is written in scala):
https://sedona.apache.org/latest-snapshot/tutorial/sql/#__tabbed_9_2

Another avenue could be to build upon my throw-away overturemaps branch, but I'm not sure about the effort needed to have something robust.

In both cases, adding parquet or sedona will result in a lot of new dependencies (hadoop, spark).
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s58erHg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s58fiUC,incubator-baremaps,2088641794,849,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-01T15:33:27Z,2024-05-01T15:33:27Z,"@sebr72 There may also be a third option which is to rely on parquet support in postgresql. I have no experience with this extention.
https://github.com/adjust/parquet_fdw
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s58fiUC/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s597KeO,incubator-baremaps,2112661390,849,NA,sebr72,48369171,,,NA,2024-05-15T14:11:19Z,2024-05-15T14:11:19Z,"@bchapuis I had a look at Sedona and I highlight the following:

1. Large project mainly relying on Spark or Flink (large project themselves)
2. The java examples are around Flink which is a lot faster than Spark but it is not directly linked to Geoparquet
3. The geoparquet implementation is in Scala and geared around Spark
4. Combining Spark Sedona and Scala with baremaps will end up in an ""expensive"" integration for Geoparquet.

I am going to switch to have a look at:
https://github.com/apache/drill/tree/master/exec/java-exec/src/main/java/org/apache/drill/exec/store/parquet
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s597KeO/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s599cZo,incubator-baremaps,2113259112,849,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-15T19:01:10Z,2024-05-15T19:01:10Z,"Yes, I think the suggestion of @Drabble to look into drill is a good idea. We can probably either use it or get inspiration from it for our own implementation.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s599cZo/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_gU03,incubator-baremaps,2139180343,849,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-30T09:47:04Z,2024-05-30T09:47:04Z,"@sebr72 @Drabble I will merge the current PR and organize the git history to have three separated commits with our individual contributions. For the following tasks, I suggest we make individual PRs and split the work more clearly.

- [x] Cleanup the sonar problems when it makes sense (@sebr72 ).
- [ ] Add some unit tests to the GeoParquetReader (@sebr72 ).
- [ ] Define a better organization for the packages and classes of the geoparquet module (data, hadoop, etc.).
- [ ] Improve the allocation of objects in the GeoParquet reader (list for each field, wrapper for each value, etc.)
- [ ] The high level abstration (DataTable, DataColumn, etc.) needs support for nested data structures such as groups in geoparquet and json in other data formats (#857, #860).
- [ ] Improve the abstraction of the GeoParquetGroup (the current version uses internal classes, and the getters/setters were quickly definined to have an end-to-end example, etc.) - after doing a pass on the DataTable abstraction
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_gU03/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_hNRp,incubator-baremaps,2139411561,849,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-30T12:06:28Z,2024-05-30T12:06:28Z,@sebr72 @Drabble I merged the changes and we can now continue with individual PRs.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_hNRp/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_w08R,incubator-baremaps,2143506193,849,NA,Drabble,3996615,Antoine Drabble,,NA,2024-06-01T16:30:08Z,2024-06-01T16:30:08Z,"@bchapuis Great job on the pull request! I will look at your new one for nested groups.

I would be really interested in making an example to go from Overture data on S3 to serving MVT to a Maputnik frontend.

I think this would mean:

1 Fix the code to be able to use a S3 url directly. E.g. s3a://overturemaps-us-west-2/release/2024-05-16-beta.0/theme=admins/type=*/*
2. Use the GeoParquetDataTable to write Overture data into Postgresql using a ProjectionTransformer to go from EPSG:4326 to EPSG:3857
3. Create a geospatial index for the geometry column
4. Create a materialised view to group the columns into a TAGS jsonb field and maybe simplifications for different zoom levels
5. Make a simple style.json and tileset.json to serve the data

What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_w08R/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_w--v,incubator-baremaps,2143547311,849,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-06-01T18:49:19Z,2024-06-01T18:49:19Z,"Yes, the plan sounds good and can probably be addressed with multiple PRs. Maybe we can skip step 4 or use views instead of materialized views. As the daylight distribution with soon be deprecated and replaced by overturemaps, an idea could be to copy the daylight directory and use it as a basis.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s5_w--v/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6BMuS3,incubator-baremaps,2167596215,849,NA,Drabble,3996615,Antoine Drabble,,NA,2024-06-14T09:09:43Z,2024-06-14T09:09:43Z,We have a basic support for Overture maps now. Should we consider this issue closed and raise more issues for further improvements to the Overture maps library?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6BMuS3/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/849,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6BM0zR,incubator-baremaps,2167622865,849,NA,fgravin,1491924,Florent Gravin,florent.gravin@camptocamp.com,NA,2024-06-14T09:24:46Z,2024-06-14T09:24:46Z,Congratz guys :tada: ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6BM0zR/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/850,https://api.github.com/repos/apache/incubator-baremaps/issues/850,incubator-baremaps,2248018458,850,Improve LICENSE and NOTICE files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2024-04-17T11:06:19Z,2024-09-26T20:58:47Z,"- [ ] License information should reside in the LICENSE file, not the NOTICE
file.
- [ ] The binary distribution should include third-party LICENSE files and
NOTICE files (if applicable, such as for projects using the Apache 2.0
license with accompanying NOTICE files).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/850/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/850,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6NvEQ_,incubator-baremaps,2377925695,850,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-09-26T20:58:46Z,2024-09-26T20:58:46Z,"@CalvinKirs Could you have a look at the LICENSE and NOTICE? It would be nice if we could address this for the next release. I you want we can also work on it together and schedule some peer programming session. To be honest, I'm not completly sure on how to address these licensing issues.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6NvEQ_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/853,https://api.github.com/repos/apache/incubator-baremaps/issues/853,incubator-baremaps,2287225174,853,workflow.json missing in basemap directory,louwers,649392,Bart Louwers,,CLOSED,2024-05-09T08:57:31Z,2024-05-10T23:14:13Z,The instructions in `basemap/README.md` seem to reference a non-existing `workflow.json`.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/853/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/853,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59ewpc,incubator-baremaps,2105215580,853,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-05-10T20:16:12Z,2024-05-10T20:16:12Z,"@louwers Thanks a lot, I forgot to update the instruction after modifying the basemap. There is now an `import.js` file which is used to import the pbf file, and an `update.js` file which is used to apply the openstreetmap changeset to the database.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59ewpc/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/853,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59fWxr,incubator-baremaps,2105371755,853,NA,louwers,649392,Bart Louwers,,NA,2024-05-10T23:14:12Z,2024-05-10T23:14:12Z,Thought so!,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s59fWxr/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/864,https://api.github.com/repos/apache/incubator-baremaps/issues/864,incubator-baremaps,2333885361,864,The `ProjectionTransformer` assumes that all the geometry columns have the same CRS,Drabble,3996615,Antoine Drabble,,OPEN,2024-06-04T16:00:33Z,2024-06-04T16:00:33Z,"In the `ProjectionTransformer`, we assume that the geometry fields are all using the same CRS.

In the GeoParquet spec we can have any number of geometry fields with any number of different CRS.

![image](https://github.com/apache/incubator-baremaps/assets/3996615/c417b33c-c3dc-4f6c-a5a3-369bb9486b78)


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/864/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/865,https://api.github.com/repos/apache/incubator-baremaps/issues/865,incubator-baremaps,2336465289,865,Jammer ,Chiflinki,171850170,Chiflinki,,CLOSED,2024-06-05T17:34:49Z,2024-06-12T12:13:40Z,Perro perro ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/865/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/865,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6AL5PY,incubator-baremaps,2150601688,865,NA,Chiflinki,171850170,Chiflinki,,NA,2024-06-05T17:35:27Z,2024-06-05T17:35:27Z,Hola ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6AL5PY/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/865,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6AME1p,incubator-baremaps,2150649193,865,NA,Chiflinki,171850170,Chiflinki,,NA,2024-06-05T18:03:08Z,2024-06-05T18:03:08Z,Perro ,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6AME1p/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/878,https://api.github.com/repos/apache/incubator-baremaps/issues/878,incubator-baremaps,2352937733,878,Improve the modularization of the project,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2024-06-14T09:23:04Z,2024-09-26T20:55:59Z,"I think we should continue our effor to improve the modularization of baremaps.

Here are some of the codecs we could extract from the core and put in dedicated modules.

- [ ] baremaps-shapefile: a standalone shapefile reader
- [x] baremaps-flatgeobuf: a standalone flatgeobuf reader and writer
- [x] baremaps-mbtiles: a standalone mbtiles reader and writer

Some other parts of the code may also benefit from being put in modules but the advantage is less clear.

- [x] baremaps-workflow: a workflow engine (the implementation of the tasks should probably remain in core)
- [ ] baremaps-iploc: the utilities to perform ip to location based on ripe/nic/rir/nro data (I still struggle with the name of this module)
- [ ] baremaps-geocoder: the utilities for creating a geocoder based on lucene.
- [ ] etc.

What are you thought on this plan? I intent to use this issue to track the progress on these changes. They will be implemented with multiple small pull requests and the list of modules will evolve.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/878/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/879,https://api.github.com/repos/apache/incubator-baremaps/issues/879,incubator-baremaps,2352973201,879,Create a basemap for Overture Maps,Drabble,3996615,Antoine Drabble,,OPEN,2024-06-14T09:41:23Z,2024-07-31T12:21:43Z,"To follow up on the [simple Overture Maps example](https://github.com/apache/incubator-baremaps/tree/main/examples/overture) for Overture Maps data to a MVT Rest service we could now start working on a full Overture basemap.

Some questions to answer:
- How much data is there to download and how long does it take?
- What are the storage requirements for the PostGIS database?
- How many simplifications should we do so that the map loads fast?
- How do we map the styles from the OSM basemap to Overture?
    - Maybe we can use the [Overture categories mapping](https://wiki.openstreetmap.org/wiki/Overture_categories).

Here is a proposition for the roadmap:
1. [ ] Copy the example into a folder called basemap-overture.
2. [ ] Improve the style for the administrative boundaries which are already used in the overture example.
3. [ ] Add support in order for all the sub-themes https://docs.overturemaps.org/schema/reference/. It means creating spatial indexes, mapping styles from the OSM basemap and creating materialized views for simplifications.
    1. [ ] Administrative Boundary
    2. [ ] Locality
    3. [ ] Locality Area
    4. [ ] Infrastructure
    5. [ ] Land
    6. [ ] Land Cover
    7. [ ] Land Use
    8. [ ] Water
    9. [ ] Building
    10. [ ] Building Part
    11. [ ] Boundary
    12. [ ] Division
    13. [ ] Division Area
    14. [ ] Place
    15. [ ] Connector
    16. [ ] Segment
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/879/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/879,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6BNAFG,incubator-baremaps,2167669062,879,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-06-14T09:50:23Z,2024-06-14T09:50:23Z,"@Drabble The roadmap is great, and I think it is a good idea to proceed step by step. I would simply name the folder overturemaps as we already have basemap and daylight without prefix. Also, depending on the size of the data, we may need some beefy hardware to do this. We can synchronize in private if you need some resources for this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6BNAFG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/886,https://api.github.com/repos/apache/incubator-baremaps/issues/886,incubator-baremaps,2413701762,886,"Attribution is about the data, not the styles.",hamlet,22633,,,CLOSED,2024-07-17T13:58:48Z,2024-07-22T11:11:50Z,"Hello,

Reading the documentation at https://baremaps.apache.org/documentation/developer-manual/basemap/, I read (emphasis mine) :

> Baremaps comes with a [default tileset and stylesheet (opens in a new tab)](https://github.com/apache/incubator-baremaps/tree/main/basemap) that can be used to generate vector tiles. The stylesheet is based on the [OpenStreetMap Carto (opens in a new tab)](https://github.com/gravitystorm/openstreetmap-carto) style. It is an ongoing effort to create an **attribution-free map style**.

As an OSM contributor, I'm quite worried by the stated intent.

First and foremost, the requirement for attribution lies with the license of the data (ODbL), not of the style or the generated tiles (CC-BY-SA for the OSM Carto tiles). See this [page](https://www.openstreetmap.org/copyright) for more details and pointers. So, in other word, as long as you use OSM data (even through Overture or something), you need to display the attribution, even if you rewrite the stylesheets from scratch.

Secondarily, I'm surprised that an Apache-hosted project advocates for the circumvention of legal provision for the protection of data paternity. It's like the Apache Foundation would say ""please use and  build upon our software, and disregard any license associated"" or even ""please make a fork of our project and make money with it !""

Attribution is the only requirement for using OSM data, created with care by thousands of individuals. A little link to show the source of your data is a small price to pay and would probably benefits your users, as it enable everyone to go to the source of the data to make relevant corrections.

Hope this can be clarified quickly.

Best regards.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/886/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/886,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6FXN4j,incubator-baremaps,2237455907,886,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-07-18T19:55:23Z,2024-07-18T19:55:23Z,"Thank you very much for this feedback. I tried to make it clear that the ""map style"" is attribution-free or vendor-neutral, but I now realize it could be understood differently. What I wanted to convey is that derivatives of the style can be created without adding an additional baremaps' copyright to the map (as in OpenStreetMap Carto). To my knowledge, most other vector maps are not really vendor-neutral and require to append additional copyrights for the style or schema.

I will try to reformulate the sentence once I'm back from holiday and let you know when the website has been updated. I usually check that the maps and screenshots we add to the documentation website contain the copyright and link to OpenStreetMap. I hope this addresses your concern, but please let us know if there are any other issues that need to be addressed, as we really aim to create a good map for the community.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6FXN4j/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/886,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6FrOUL,incubator-baremaps,2242700555,886,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-07-22T11:11:15Z,2024-07-22T11:11:15Z,"@hamlet I have removed the term ""attribution-free"" and made several improvements to the text. 

https://github.com/apache/incubator-baremaps-site/commit/4c0f759472157e1edc897330dc8179191869a5ab

Please feel free to reopen the issue and to provide additional feedback if necessary. Your contributions are welcome, we appreciate any help in expanding our community.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6FrOUL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/887,https://api.github.com/repos/apache/incubator-baremaps/issues/887,incubator-baremaps,2423830902,887,Broken link on https://baremaps.apache.org/documentation/,tomlayg6,73789760,,,CLOSED,2024-07-22T21:53:02Z,2024-07-23T06:29:19Z,"The https://baremaps.apache.org/documentation/ page has a navigation menu on the LHS

The Developer manual/Basemap link does not work; the href attribute is missing","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/887/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/887,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Fxh9L,incubator-baremaps,2244353867,887,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-07-23T06:29:18Z,2024-07-23T06:29:18Z,"Thanks a lot, this was a left over from a previous commit. The basemap page has been move up (right after the introduction).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Fxh9L/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/888,https://api.github.com/repos/apache/incubator-baremaps/issues/888,incubator-baremaps,2425120137,888,Broken link,tomlayg6,73789760,,,CLOSED,2024-07-23T12:41:29Z,2024-07-24T12:13:46Z,https://github.com/apache/incubator-baremaps/blob/8dce39f7d87bdc932c832df5418cc2fdcd1add7f/README.md?plain=1#L57,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/888/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/888,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6F0lwT,incubator-baremaps,2245155859,888,NA,tomlayg6,73789760,,,NA,2024-07-23T12:45:41Z,2024-07-23T12:45:41Z,See also https://github.com/apache/incubator-baremaps-site/blob/74d1639d7ea46df504c540bedb4e09c357ab9351/src/pages/index.mdx?plain=1#L94,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6F0lwT/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/888,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6F8B4H,incubator-baremaps,2247106055,888,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-07-24T07:31:17Z,2024-07-24T07:31:17Z,"Thanks a lot, I havn't checked these links for a while and just ran broken link checker to get a better sense of the broken urls on the website. Here is the full report. I guess we could add a step in the CI.

```
Getting links from: http://baremaps.apache.org/
├───OK─── https://baremaps.apache.org/map/
├───OK─── https://baremaps.apache.org/download/release-0.7.3
├───OK─── https://baremaps.apache.org/documentation/
├───OK─── https://github.com/apache/incubator-baremaps/
├───OK─── https://baremaps.apache.org/download/release-0.7.2
├───OK─── https://baremaps.apache.org/download/release-0.7.1
├───OK─── https://baremaps.apache.org/documentation/basemap/
├───OK─── https://baremaps.apache.org/documentation/getting-started/
├───OK─── https://baremaps.apache.org/documentation/getting-started/installing-the-cli/
├───OK─── https://baremaps.apache.org/documentation/getting-started/installing-postgis/
├───OK─── https://baremaps.apache.org/documentation/examples/
├───OK─── https://baremaps.apache.org/documentation/examples/import-osm-into-postgis/
├───OK─── https://baremaps.apache.org/documentation/examples/serve-and-export-vector-tiles/
├───OK─── https://baremaps.apache.org/documentation/examples/contour-lines-in-vector-tiles/
├───OK─── https://baremaps.apache.org/documentation/examples/import-naturalearth-into-postgis/
├───OK─── https://baremaps.apache.org/documentation/examples/extrusion/
├───OK─── https://baremaps.apache.org/documentation/examples/ip-to-location/
├───OK─── https://baremaps.apache.org/documentation/examples/geocoding/
├───OK─── https://baremaps.apache.org/documentation/examples/gdal-macos/
├───OK─── https://baremaps.apache.org/documentation/examples/geoadmin/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/how-to-build-with-maven/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/setup-in-intellij/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/project-structure/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/geocoder/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/ip-to-location/
├───OK─── https://baremaps.apache.org/documentation/developer-manual/layer-simplification/
├───OK─── https://baremaps.apache.org/community/project-members/
├───OK─── https://baremaps.apache.org/community/mailing-lists/
├───OK─── https://github.com/apache/incubator-baremaps/issues
├───OK─── https://github.com/apache/incubator-baremaps/blob/main/CONTRIBUTING.md
├───OK─── https://www.apache.org/events/current-event.html
├───OK─── https://www.apache.org/licenses/
├───OK─── https://www.apache.org/foundation/sponsorship.html
├───OK─── https://www.apache.org/foundation/sponsors
├───OK─── https://www.apache.org/security/
├───OK─── https://privacy.apache.org/policies/privacy-policy-public.html
├───OK─── https://www.apache.org/
├───OK─── https://baremaps.apache.org/experiments/raster-dem/
├───OK─── https://baremaps.apache.org/experiments/raster-hillshade/
├───OK─── https://baremaps.apache.org/experiments/basemap-raster-hillshade/
├───OK─── https://www.openstreetmap.org/
├───OK─── https://baremaps.apache.org/images/map_eu.png
├───OK─── https://baremaps.apache.org/images/map_styles.png
├─BROKEN─ https://baremaps.apache.org/documentation/developer-manual/basemap/ (HTTP_404)
├───OK─── https://baremaps.apache.org/images/geocoder.gif
├───OK─── https://baremaps.apache.org/images/map_vector_view.png
├───OK─── https://www.apache.org/licenses/LICENSE-2.0
└───OK─── https://www.apache.org/foundation/marks/list/
Finished! 82 links found. 33 excluded. 1 broken.

Getting links from: https://baremaps.apache.org/map/
Finished! 66 links found. 66 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/download/release-0.7.3
├───OK─── https://github.com/apache/incubator-baremaps/issues/new
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/download/release-0.7.3.mdx
├───OK─── https://github.com/apache/incubator-baremaps/releases/tag/v0.7.3
├───OK─── https://downloads.apache.org/incubator/baremaps/KEYS
├───OK─── https://www.apache.org/dyn/closer.lua/incubator/baremaps/0.7.3/apache-baremaps-0.7.3-incubating-src.tar.gz
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.3/apache-baremaps-0.7.3-incubating-src.tar.gz.sha512
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.3/apache-baremaps-0.7.3-incubating-src.tar.gz.asc
├───OK─── https://www.apache.org/dyn/closer.lua/incubator/baremaps/0.7.3/apache-baremaps-0.7.3-incubating-bin.tar.gz
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.3/apache-baremaps-0.7.3-incubating-bin.tar.gz.sha512
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.3/apache-baremaps-0.7.3-incubating-bin.tar.gz.asc
├───OK─── https://www.apache.org/info/verification.html
Finished! 93 links found. 82 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/index.mdx
├───OK─── https://github.com/apache/incubator-baremaps/blob/main/LICENSE
├───OK─── https://github.com/gravitystorm/openstreetmap-carto
Finished! 91 links found. 88 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/download/release-0.7.2
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/download/release-0.7.2.mdx
├───OK─── https://github.com/apache/incubator-baremaps/releases/tag/v0.7.2
├───OK─── https://www.apache.org/dyn/closer.lua/incubator/baremaps/0.7.2/apache-baremaps-0.7.2-incubating-src.tar.gz
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.2/apache-baremaps-0.7.2-incubating-src.tar.gz.sha512
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.2/apache-baremaps-0.7.2-incubating-src.tar.gz.asc
├───OK─── https://www.apache.org/dyn/closer.lua/incubator/baremaps/0.7.2/apache-baremaps-0.7.2-incubating-bin.tar.gz
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.2/apache-baremaps-0.7.2-incubating-bin.tar.gz.sha512
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.2/apache-baremaps-0.7.2-incubating-bin.tar.gz.asc
Finished! 94 links found. 86 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/download/release-0.7.1
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/download/release-0.7.1.mdx
├───OK─── https://github.com/apache/incubator-baremaps/releases/tag/v0.7.1
├───OK─── https://www.apache.org/dyn/closer.lua/incubator/baremaps/0.7.1/baremaps-0.7.1-incubating-src.tar.gz
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.1/baremaps-0.7.1-incubating-src.tar.gz.sha512
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.1/baremaps-0.7.1-incubating-src.tar.gz.asc
├───OK─── https://www.apache.org/dyn/closer.lua/incubator/baremaps/0.7.1/baremaps-0.7.1-incubating-bin.tar.gz
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.1/baremaps-0.7.1-incubating-bin.tar.gz.sha512
├───OK─── https://downloads.apache.org/incubator/baremaps/0.7.1/baremaps-0.7.1-incubating-bin.tar.gz.asc
Finished! 93 links found. 85 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/basemap/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/basemap.mdx
├───OK─── https://www.naturalearthdata.com/
├───OK─── https://wiki.openstreetmap.org/wiki/Template:Vector_map
Finished! 103 links found. 100 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/getting-started/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/getting-started.md
Finished! 92 links found. 91 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/getting-started/installing-the-cli/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/getting-started/installing-the-cli.mdx
├───OK─── https://sdkman.io/
├───OK─── https://dist.apache.org/repos/dist/release/incubator/baremaps/
Finished! 95 links found. 92 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/getting-started/installing-postgis/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/getting-started/installing-postgis.mdx
├───OK─── https://postgis.net/
Finished! 93 links found. 91 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples.mdx
├───OK─── https://github.com/apache/incubator-baremaps/archive/refs/heads/main.zip
├───OK─── https://github.com/apache/incubator-baremaps/blob/main/examples/
├─BROKEN─ https://baremaps.apache.org/getting-started/installing-the-cli/ (HTTP_404)
├─BROKEN─ https://baremaps.apache.org/documentation/examples/import-contour-into-postgis/ (HTTP_404)
Finished! 100 links found. 95 excluded. 2 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/import-osm-into-postgis/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/import-osm-into-postgis.mdx
├───OK─── https://planet.openstreetmap.org/
├───OK─── https://developers.google.com/protocol-buffers
├───OK─── http://www.geofabrik.de/data/download.html
├───OK─── https://en.wikipedia.org/wiki/Liechtenstein
├───OK─── https://raw.githubusercontent.com/apache/incubator-baremaps/main/examples/openstreetmap/workflow.json
├───OK─── https://wiki.openstreetmap.org/wiki/Elements
├───OK─── https://symas.com/lmdb/
├───OK─── https://baremaps.apache.org/_next/static/media/database.ee4f3f49.png
Finished! 111 links found. 102 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/serve-and-export-vector-tiles/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/serve-and-export-vector-tiles.mdx
├───OK─── https://github.com/apache/incubator-baremaps/blob/main/examples/openstreetmap/
├───OK─── https://github.com/apache/incubator-baremaps/blob/main/examples/contour/
├───OK─── https://github.com/apache/incubator-baremaps/blob/main/examples/naturalearth/
├─BROKEN─ http://localhost:9000/ (ERRNO_ECONNREFUSED)
├───OK─── https://postgis.net/docs/ST_AsMVT.html
├───OK─── https://docs.mapbox.com/vector-tiles/specification/
├───OK─── https://wiki.c2.com/?StorageIsCheap
Finished! 108 links found. 100 excluded. 1 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/contour-lines-in-vector-tiles/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/contour-lines-in-vector-tiles.mdx
├───OK─── https://asterweb.jpl.nasa.gov/gdem.asp
├───OK─── https://search.earthdata.nasa.gov/search/granules?p=C1711961296-LPCLOUD&pg%5B0%5D%5Bv%5D=f&pg%5B0%5D%5Bgsk%5D=-start_date&q=aster%20v3&tl=1691157297.898!3!!
├───OK─── https://baremaps.apache.org/_next/static/media/earthdata-aster-dem.2ba2986d.png
├─BROKEN─ https://www2.jpl.nasa.gov/srtm/ (ERRNO_ENOTFOUND)
├───OK─── https://registry.opendata.aws/copernicus-dem/
Finished! 116 links found. 110 excluded. 1 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/import-naturalearth-into-postgis/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/import-naturalearth-into-postgis.mdx
Finished! 99 links found. 98 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/extrusion/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/extrusion.mdx
├───OK─── https://raw.githubusercontent.com/apache/incubator-baremaps/main/examples/extrusion/tileset.json
├───OK─── https://raw.githubusercontent.com/apache/incubator-baremaps/main/examples/extrusion/style.json
├───OK─── https://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.2.2/com/github/benmanes/caffeine/cache/CaffeineSpec.html
├─BROKEN─ http://localhost:9000/ (HTTP_undefined)
├───OK─── https://baremaps.apache.org/_next/static/media/extrusion.9934b529.png
Finished! 99 links found. 93 excluded. 1 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/ip-to-location/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/ip-to-location.mdx
├───OK─── https://www.irr.net/docs/list.html
├───OK─── https://en.wikipedia.org/wiki/Regional_Internet_registry
├─BROKEN─ https://www.irr.net/docs/rpsl.html (HTTP_404)
├─BROKEN─ http://localhost:9000/ (HTTP_undefined)
├───OK─── https://user-images.githubusercontent.com/238747/234003934-e10040e1-0fdc-45e9-95f5-322fb2401c97.png
Finished! 108 links found. 102 excluded. 2 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/geocoding/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/geocoding.mdx
├───OK─── https://www.geonames.org/
├───OK─── https://raw.githubusercontent.com/apache/incubator-baremaps/main/examples/geocoding/workflow.js
├─BROKEN─ http://localhost:9000/ (HTTP_undefined)
Finished! 105 links found. 101 excluded. 1 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/gdal-macos/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/gdal-macos.mdx
├───OK─── https://github.com/OSGeo/gdal/blob/master/ci/travis/osx/before_install.sh
├───OK─── https://github.com/adoptium/temurin-build/issues/1671
├───OK─── https://stackoverflow.com/questions/52911791/hardened-runtime-for-java-and-mojave
├───OK─── https://stackoverflow.com/questions/52905940/how-to-codesign-and-enable-the-hardened-runtime-for-a-3rd-party-cli-on-xcode
Finished! 100 links found. 95 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/examples/geoadmin/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/examples/geoadmin.mdx
├───OK─── https://www.bafu.admin.ch/bafu/de/home/zustand/daten/geodaten/laerm--geodaten.html
Finished! 91 links found. 89 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual.mdx
├─BROKEN─ https://baremaps.apache.org/documentation/developer-manual/basemap/ (HTTP_404)
Finished! 95 links found. 93 excluded. 1 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/how-to-build-with-maven/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual/how-to-build-with-maven.mdx
├───OK─── https://maven.apache.org/download.cgi
Finished! 101 links found. 99 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/setup-in-intellij/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual/setup-in-intellij.mdx
├───OK─── https://www.youtube.com/embed/GkwG6EbVjvU?si=mb7hvtD1DrALfCqt
Finished! 91 links found. 89 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/project-structure/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual/project-structure.mdx
Finished! 95 links found. 94 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/geocoder/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual/geocoder.mdx
Finished! 90 links found. 89 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/ip-to-location/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual/ip-to-location.mdx
├─BROKEN─ https://whatismyipaddress.com/rir (HTTP_403)
├───OK─── https://www.arin.net/
├───OK─── https://www.lacnic.net/
├───OK─── https://afrinic.net/
├───OK─── https://www.ripe.net/
├───OK─── https://www.apnic.net/
├─BROKEN─ https://www.ripe.net/manage-ips-and-asns/db/support/documentation/ripe-database-documentation/rpsl-object-types/4-2-descriptions-of-primary-objects/4-2-4-description-of-the-inetnum-object (HTTP_404)
├─BROKEN─ https://www.ripe.net/participate/member-support/list-of-members/list-of-country-codes-and-rirs (HTTP_429)
├─BROKEN─ https://www.ripe.net/manage-ips-and-asns/db/support/documentation/ripe-database-documentation/ripe-database-structure (HTTP_429)
├───OK─── https://raw.githubusercontent.com/apache/incubator-baremaps/main/examples/ip-to-location/workflow.js
├───OK─── https://www.iana.org/numbers
Finished! 114 links found. 102 excluded. 4 broken.

Getting links from: https://baremaps.apache.org/documentation/developer-manual/layer-simplification/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/documentation/developer-manual/layer-simplification.mdx
Finished! 104 links found. 103 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/community/project-members/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/community/project-members.mdx
├───OK─── https://github.com/Drabble
├───OK─── https://github.com/Drabble.png
├───OK─── https://github.com/bchapuis
├───OK─── https://github.com/bchapuis.png
├───OK─── https://github.com/bdelacretaz
├───OK─── https://github.com/bdelacretaz.png
├───OK─── https://github.com/danduk82
├───OK─── https://github.com/danduk82.png
├───OK─── https://github.com/desruisseaux
├───OK─── https://github.com/desruisseaux.png
├───OK─── https://github.com/julianhyde
├───OK─── https://github.com/julianhyde.png
├───OK─── https://github.com/joshfischer1108
├───OK─── https://github.com/joshfischer1108.png
├───OK─── https://github.com/swerky
├───OK─── https://github.com/swerky.png
├───OK─── https://github.com/CalvinKirs
├───OK─── https://github.com/CalvinKirs.png
├───OK─── https://github.com/LeonardBesseau
├───OK─── https://github.com/LeonardBesseau.png
├───OK─── https://github.com/leonardcser
├───OK─── https://github.com/leonardcser.png
├───OK─── https://github.com/percivall
├───OK─── https://github.com/percivall.png
├───OK─── https://github.com/perdjesk
├───OK─── https://github.com/perdjesk.png
Finished! 96 links found. 69 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/community/mailing-lists/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/community/mailing-lists.mdx
├───OK─── https://lists.apache.org/list.html?dev@baremaps.apache.org
Finished! 75 links found. 73 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/experiments/raster-dem/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/experiments/raster-dem.mdx
├───OK─── https://registry.opendata.aws/terrain-tiles/
Finished! 75 links found. 73 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/experiments/raster-hillshade/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/experiments/raster-hillshade.mdx
Finished! 75 links found. 74 excluded. 0 broken.

Getting links from: https://baremaps.apache.org/experiments/basemap-raster-hillshade/
├───OK─── https://github.com/apache/incubator-baremaps-site/blob/main/src/pages/experiments/basemap-raster-hillshade.mdx
Finished! 74 links found. 73 excluded. 0 broken.

Finished! 3024 links found. 2830 excluded. 14 broken.
Elapsed time: 49 seconds
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6F8B4H/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/888,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6F-grz,incubator-baremaps,2247756531,888,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-07-24T12:13:46Z,2024-07-24T12:13:46Z,"Fixed everything in:
https://github.com/apache/incubator-baremaps-site/commit/348ee4a0e2fc55a814a1f3dd86371cb69f2d6ad9","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6F-grz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/897,https://api.github.com/repos/apache/incubator-baremaps/issues/897,incubator-baremaps,2598899902,897,Broken links on website,sebbASF,16689231,Sebb,,CLOSED,2024-10-19T08:35:19Z,2024-10-19T20:11:05Z,"There are a couple of link references to /documentation/basemap in the website code at 
https://github.com/search?q=repo%3Aapache%2Fincubator-baremaps-site+documentation%2Fbasemap&type=code

These do not work.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/897/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/897,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qfivh,incubator-baremaps,2424187873,897,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-10-19T20:10:38Z,2024-10-19T20:10:38Z,"Good catch, thank you! I forgot to search for links without the trailing slash at my last attempt at improving the getting started and ammended the last commit.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qfivh/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/898,incubator-baremaps,2598907285,898,Document how to report issues in website repo.,sebbASF,16689231,Sebb,,CLOSED,2024-10-19T08:40:18Z,2024-10-30T17:33:04Z,"It would be useful to add info to https://github.com/apache/incubator-baremaps-site/blob/main/README.md to say where to report issues with the repo/site.

Better yet would be to enable issues on the repo, as that would make it possible to generate an issue directly from a file location.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/898/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6QfhaL,incubator-baremaps,2424182411,898,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-10-19T20:02:12Z,2024-10-19T20:02:12Z,"Thank you for reporting this issue. Currently, all issues are managed within the incubator-baremaps repository, and we encourage using the ""documentation"" label to clearly identify documentation-related issues. I hadn't considered the possibility of generating an issue directly from a file location, but we would need to ask the infra team to enable this feature since we don't have admin rights on the repo. Another option is to create a PR directly from the website using the ""Edit"" button. I clarified the instructions in the README.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6QfhaL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qfsuz,incubator-baremaps,2424228787,898,NA,sebbASF,16689231,Sebb,,NA,2024-10-19T21:48:31Z,2024-10-19T21:48:31Z,"1) The information needs to be added to the README on the baremaps-SITE repository, because that is where the problems are.

2) you can enable issues in the .asf.yaml file; no need to involve Infra
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qfsuz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qht1j,incubator-baremaps,2424757603,898,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-10-20T09:23:08Z,2024-10-20T09:23:08Z,"Thanks for the pointer. Let's enable issues on the baremaps-site repo. I will reopen the issue for now. Still, I think it's good if we encourage visitors to open PRs as soon as possible.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qht1j/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qh-p8,incubator-baremaps,2424826492,898,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-10-20T10:27:39Z,2024-10-20T10:27:39Z,I ammended the main README so that the issues on the baremaps-site repository is properly referenced.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qh-p8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6QiOUX,incubator-baremaps,2424890647,898,NA,sebbASF,16689231,Sebb,,NA,2024-10-20T12:09:38Z,2024-10-20T12:09:38Z,"Thanks, however how to report issues with the website is not documented on the website itself.

Separately, it might be worth adding a link to the website repo at the bottom of each page. For example like: https://events.apache.org or even https://community.apache.org which links to the page source (that may not be easy, depending on how the site is built).","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6QiOUX/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6QjZtI,incubator-baremaps,2425199432,898,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-10-20T20:09:16Z,2024-10-20T20:09:16Z,"Regarding your first comment, I updated the CONTRIBUTING.md file in the baremaps repo to reflect your changes. This file is referenced in the menu of the web site.

On the website, we have two links on the right sidebar. The first one (Questions? Give us feedback) now points to the website's new issue page. The second one (Edit this page) points to the corresponding file in the repository.

Do not hesitate to make a PR if you think this can still be improved.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6QjZtI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qjpsf,incubator-baremaps,2425264927,898,NA,sebbASF,16689231,Sebb,,NA,2024-10-20T22:37:55Z,2024-10-20T22:37:55Z,"> Regarding your first comment, I updated the CONTRIBUTING.md file in the baremaps repo to reflect your changes. This file is referenced in the menu of the web site.

OK, looks good.

> On the website, we have two links on the right sidebar. The first one (Questions? Give us feedback) now points to the website's new issue page. 

When I clicked on it, it took me to the code issues page, not the website issues page.

Also, AFAICT these links do not appear on the main page.

>  The second one (Edit this page) points to the corresponding file in the repository.

That works for me.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Qjpsf/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/898,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6R5-Wg,incubator-baremaps,2447893920,898,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-10-30T17:33:04Z,2024-10-30T17:33:04Z,I checked the first linked (Questions? Give us feedback) and it now redirects to the correct repository. It may have been a caching problem.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6R5-Wg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/904,https://api.github.com/repos/apache/incubator-baremaps/issues/904,incubator-baremaps,2646029240,904,Release Baremaps 0.8.1,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2024-11-09T13:11:09Z,2025-01-14T20:43:19Z,"The following instructions assume that the release candidate version has been set in an environment variable:

In order to release a new version of Apache Baremaps, follow these steps:

- [x] Notify the mailing list and ask everyone to pause commits on the main branch
- [x] Create a new issue on GitHub with the title ""Release Baremaps $RELEASE_VERSION""
- [x] Create a new branch for the release (e.g. `release-$RELEASE_VERSION`)

```bash
cd baremaps
git checkout -b release-$RELEASE_VERSION
```

- [x] Set the release version and commit the changes:

```bash 
./mvnw versions:set -DnewVersion=$RELEASE_VERSION
git commit -a -m ""Release Baremaps $RELEASE_VERSION""
git push --set-upstream origin release-$RELEASE_VERSION
```

- [x] Tag the last commit with the release candidate version:

```bash
git tag v$RELEASE_VERSION-rc$CANDIDATE_NUMBER
```

- [x] Push the tag to the remote repository (this will trigger GitHub Action to build the release candidate, publish the artifacts to the [dev directory](https://dist.apache.org/repos/dist/dev/incubator/baremaps/) of dist.apache.org repository, and draft a release on GitHub):

```bash
git push origin v$RELEASE_VERSION-rc$CANDIDATE_NUMBER
```

- [x] Edit the release notes for this tag on GitHub.
- [x] Ask the community to vote for the release candidate.
- [x] If the release candidate is not approved by the community, commit the necessary changes, clean the git history, create a new release candidate, and repeat the process.

> TODO: The following step is not yet fully automated. We need to add secrets and steps to publish the artifacts to the [dev directory](https://dist.apache.org/repos/dist/dev/incubator/baremaps/) (APACHE_USERNAME, APACHE_PASSWORD) and to the maven repository (NEXUS_USERNAME, NEXUS_PASSWORD).

- [x] If the release candidate is approved by the community, tag the release commit with the release version (this will trigger the same GitHub Action as before):

```bash
git tag -a v$RELEASE_VERSION
git push origin v$RELEASE_VERSION
```

- [ ] Register the release on [reporter.apache.org](https://reporter.apache.org/addrelease.html?incubator-baremaps).
- [x] Rebase the release branch into the main branch.
- [x] Clean up all the release candidate branches and tags.
- [x] Publish the release on GitHub.
- [x] Copy the release artifacts from the [dev directory](https://dist.apache.org/repos/dist/dev/incubator/baremaps/) to the [release directory](https://dist.apache.org/repos/dist/release/incubator/baremaps/).

```bash
svn cp https://dist.apache.org/repos/dist/dev/incubator/baremaps/$RELEASE_VERSION-rc$CANDIDATE_NUMBER https://dist.apache.org/repos/dist/release/incubator/baremaps/$RELEASE_VERSION -m ""Release Apache Baremaps (incubating) $RELEASE_VERSION""
```

- [x] Publish the release artifacts to the maven repository.

```bash
./mvnw clean deploy -Papache-release
```

- [x] Set the version of the next iteration and commit the changes:

```bash
./mvnw versions:set -DnewVersion=$NEXT_VERSION-SNAPSHOT
git commit -a -m ""Prepare for next development iteration""
git push origin
```

```bash
./mvnw clean deploy
```

- [ ] Notify the community of the release by sending a message to the mailing list.

## Reproducing the build

The release artifacts are bit-by-bit reproducible if the following conditions are met:
- The build is run with the same version of the JDK (e.g. OpenJDK 17 temurin)
- The build is run with the maven wrapper (e.g. `./mvnw`)

The procedure has been tested on different operating systems (e.g. Linux and MacOS).
For convenience, we suggest to build the release artifacts on a clean environment (e.g. a fresh Docker container).

```bash
git checkout v$RELEASE_VERSION-rc$CANDIDATE_NUMBER
docker run \
  -v $(pwd):/baremaps \
  -w /baremaps \
  eclipse-temurin:17-jdk \
  ./mvnw clean install -DskipTests
```

## Verifying the release artifacts

Verify the GPG signature of the release artifacts:

```bash
gpg --verify apache-baremaps-$RELEASE_VERSION-incubating-bin.tar.gz.asc
gpg --verify apache-baremaps-$RELEASE_VERSION-incubating-src.tar.gz.asc
```

Verify the SHA512 checksum of the release artifacts:

```bash
shasum -a 512 -c apache-baremaps-$RELEASE_VERSION-incubating-bin.tar.gz.sha512
shasum -a 512 -c apache-baremaps-$RELEASE_VERSION-incubating-src.tar.gz.sha512
```

## Vote template

```bash
cat << EOF
subject: [VOTE] Release Apache Baremaps $RELEASE_VERSION-rc$CANDIDATE_NUMBER (incubating)

Hello Everyone,

I have created a build for Apache Baremaps (incubating) $RELEASE_VERSION, release candidate $CANDIDATE_NUMBER.

Thanks to everyone who has contributed to this release.

You can read the release notes here:
https://github.com/apache/incubator-baremaps/releases/tag/v$RELEASE_VERSION-rc$CANDIDATE_NUMBER

The commit to be voted upon:
https://github.com/apache/incubator-baremaps/tree/v$RELEASE_VERSION-rc$CANDIDATE_NUMBER

Its hash is $COMMIT_HASH.

Its tag is v$RELEASE_VERSION-rc$CANDIDATE_NUMBER.

The artifacts to be voted on are located here:
https://dist.apache.org/repos/dist/dev/incubator/baremaps/$RELEASE_VERSION-rc$CANDIDATE_NUMBER/

The hashes of the artifacts are as follows:
<src>
<bin>

Release artifacts are signed with the following key:
http://people.apache.org/keys/committer/<username>.asc
https://downloads.apache.org/incubator/baremaps/KEYS

The README file for the src distribution contains instructions for building and testing the release.

Please vote on releasing this package as Apache Baremaps $RELEASE_VERSION.

The vote is open for the next 72 hours and passes if a majority of at least three +1 PMC votes are cast.

[ ] +1 Release this package as Apache Baremaps $RELEASE_VERSION
[ ] 0 I don't feel strongly about it, but I'm okay with the release
[ ] -1 Do not release this package because...

Here is my vote:

+1 (binding)

$RELEASE_MANAGER_NAME
EOF
```

## Announce template

```bash
cat << EOF
subject: [ANNOUNCE] Apache Baremaps $RELEASE_VERSION (incubating) released

Hello Everyone,

The Apache Baremaps community is pleased to announce the release of Apache Baremaps $RELEASE_VERSION (incubating).
Apache Baremaps is a toolkit and a set of infrastructure components for creating, publishing, and operating online maps.
<short description of the release which should include release highlights>

The release notes are available here:
https://github.com/apache/incubator-baremaps/releases/tag/v$RELEASE_VERSION

The artifacts are available here:
https://dist.apache.org/repos/dist/release/incubator/baremaps/$RELEASE_VERSION

We are looking to grow our community and welcome new contributors.
If you are interested in contributing to the project, please contact us on the mailing list or on GitHub.
We will be happy to help you get started.

The repository is available here:
https://github.com/apache/incubator-baremaps

The documentation is available here:
https://baremaps.apache.org

The mailing list is available here:
https://lists.apache.org/list.html?dev@baremaps.apache.org

The issue tracker is available here:
https://github.com/apache/incubator-baremaps/issues

Best regards,

$RELEASE_MANAGER_NAME
EOF
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/904/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/907,https://api.github.com/repos/apache/incubator-baremaps/issues/907,incubator-baremaps,2740638171,907,Improve the content of the META-INF/MANIFEST.MF files,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2024-12-15T13:17:37Z,2025-01-14T20:42:46Z,"The current version is generated automatically by maven.

```
Manifest-Version: 1.0
Created-By: Maven JAR Plugin 3.3.0
Build-Jdk-Spec: 21
Specification-Title: baremaps-csv
Specification-Version: 0.8
Specification-Vendor: baremaps
Implementation-Title: baremaps-csv
Implementation-Version: 0.8.1
Implementation-Vendor: baremaps
Build-Date: 2024-11-09T13:13:45Z
Build-Jdk: 21.0.4
Build-Version: 0.8.1
```

We should find a way to improve these files so that they look as below.

```
Manifest-Version: 1.0
Created-By: Maven JAR Plugin 3.3.0
Build-Jdk-Spec: 21
Specification-Title: Apache Baremaps CSV (incubating)
Specification-Version: 0.8
Specification-Vendor: Apache Software Foundation
Implementation-Title: Apache Baremaps CSV (incubating)
Implementation-Version: 0.8.1
Implementation-Vendor: Apache Software Foundation
Build-Date: 2024-11-09T13:13:45Z
Build-Jdk: 21.0.4
Build-Version: 0.8.1
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/907/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/908,https://api.github.com/repos/apache/incubator-baremaps/issues/908,incubator-baremaps,2752210261,908,Revise the release process,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2024-12-20T08:27:55Z,2024-12-20T08:27:55Z,"The following steps need to be revised:
- The release.yml file should trigger for revised
- The release candidate cannot be copied anymore as it need to be signed with a commiters key
- The release instructions should contain clarification regarding the version of java used to build the project locally as it must be aligned with the one used on the CI
- The announce templates should use the correct urls
- The registration of the release on reporter.apache.org should mention that only an PPMC member can do that","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/908/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/909,incubator-baremaps,2756082827,909,Performance issue when migrating to 0.8.1 version,AlexGacon,3034717,Alexandre Gacon,,CLOSED,2024-12-23T13:32:02Z,2025-01-09T11:57:24Z,"Hi there,

We are trying to migrate from version 0.7.1 to 0.8.1 and we have a quite important increase of the duration of the requests to baremaps on the same environments (less than 1 second in 0.7.1 and more than 10 seconds in 0.8.1).

When I look at the generated PG requests, I wonder if the where clause is at the right place.

For example in:
```
SELECT 
  ST_ASMVT (MVTGEOM.*, 'ban_numero') 
FROM 
  (
    SELECT 
      ST_ASMVTGEOM (
        T.GEOM, 
        ST_TILEENVELOPE (18, 132979, 90364)
      ) AS GEOM, 
      T.TAGS - 'id' AS TAGS, 
      T.ID AS ID 
    FROM 
      (
        SELECT 
          ROW_NUMBER() OVER (
            ORDER BY 
              ADDOK_ID DESC
          ):: INTEGER AS ID, 
          JSONB_BUILD_OBJECT(
            'id', ADDOK_ID :: TEXT, 'numero', NUMERO :: TEXT
          ) AS TAGS, 
          GEOM 
        FROM 
          IGN.BAN_NUMERO
      ) AS T 
    WHERE 
      T.GEOM IS NOT NULL 
      AND T.GEOM && ST_TILEENVELOPE (
        18, 
        132979, 
        90364, 
        MARGIN => (64.0 / 4096)
      )
  ) AS MVTGEOM
```

if I change the where clause position like this:

```
SELECT 
  ST_ASMVT (MVTGEOM.*, 'ban_numero') 
FROM 
  (
    SELECT 
      ST_ASMVTGEOM (
        T.GEOM, 
        ST_TILEENVELOPE (18, 132979, 90364)
      ) AS GEOM, 
      T.TAGS - 'id' AS TAGS, 
      T.ID AS ID 
    FROM 
      (
        SELECT 
          ROW_NUMBER() OVER (
            ORDER BY 
              ADDOK_ID DESC
          ):: INTEGER AS ID, 
          JSONB_BUILD_OBJECT(
            'id', ADDOK_ID :: TEXT, 'numero', NUMERO :: TEXT
          ) AS TAGS, 
          GEOM 
        FROM 
          IGN.BAN_NUMERO AS TOTO 
        WHERE 
          TOTO.GEOM IS NOT NULL 
          AND TOTO.GEOM && ST_TILEENVELOPE (
            18, 
            132979, 
            90364, 
            MARGIN => (64.0 / 4096)
          )
      ) AS T
  ) AS MVTGEOM
```

I get the previous durations.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/909/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Y3VnB,incubator-baremaps,2564643265,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-12-29T07:51:59Z,2024-12-29T07:51:59Z,"Thanks for the feedback. 

I vaguely recall this change, and it may be a regression. What surprises me is that I don't notice this performance issue when generating tiles for the basemap, which is a complex use case. 

Could you provide the version of postgres and postgis you are using (query optimization improved and I use the latest versions; postgres 17 and postgis 3.5)? 

Also, if you have a little time, could you also provide the query plans for your two queries? To generate them, you must prefix the query with `EXPLAIN ANALYZE SELECT ...`.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Y3VnB/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Y3vRb,incubator-baremaps,2564748379,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2024-12-29T14:52:18Z,2024-12-29T14:52:18Z,"Hi!

We are currently using postgresql 15 with a 3.1 postgis (to be confirmed).
I will send you the explain plan of the queries when I come back from
vacation (6th of January).

The slowness is particulary visible with address points.

Le dim. 29 déc. 2024, 08:52, Bertil Chapuis ***@***.***> a
écrit :

> Thanks for the feedback.
>
> I vaguely recall this change, and it may be a regression. What surprises
> me is that I don't notice this performance issue when generating tiles for
> the basemap, which is a complex use case.
>
> Could you provide the version of postgres and postgis you are using (query
> optimization improved and I use the latest versions; postgres 17 and
> postgis 3.5)?
>
> Also, if you have a little time, could you also provide the query plans
> for your two queries? To generate them, you must prefix the query with EXPLAIN
> ANALYZE SELECT ....
>
> —
> Reply to this email directly, view it on GitHub
> <https://github.com/apache/incubator-baremaps/issues/909#issuecomment-2564643265>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AAXE4XKNWCXVL3MFJZHI2732H6S3JAVCNFSM6AAAAABUDCMUT6VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDKNRUGY2DGMRWGU>
> .
> You are receiving this because you authored the thread.Message ID:
> ***@***.***>
>
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Y3vRb/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Y5hdW,incubator-baremaps,2565216086,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2024-12-30T09:10:51Z,2024-12-30T09:10:51Z,"Great, I will try to generate a small basemap with these versions and see if I notice the same performance issues.

The query plan may indicate if your database indexes are correctly used or not. It may also indicate if postgres 15's query optimizer is able to push the where clause down.

I will also be back january 6th, and should be able to dedicate a little time to this issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Y5hdW/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZWt2H,incubator-baremaps,2572868999,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-06T10:57:34Z,2025-01-06T10:57:34Z,"The execution plan with the official query:

(also on explain.dalibo : https://explain.dalibo.com/plan/acb5c6h59g58eb8a)

```json
[
  {
    ""Plan"": {
      ""Node Type"": ""Aggregate"",
      ""Strategy"": ""Plain"",
      ""Partial Mode"": ""Simple"",
      ""Parallel Aware"": false,
      ""Async Capable"": false,
      ""Startup Cost"": 326091.02,
      ""Total Cost"": 326091.03,
      ""Plan Rows"": 1,
      ""Plan Width"": 32,
      ""Actual Startup Time"": 23942.343,
      ""Actual Total Time"": 23942.349,
      ""Actual Rows"": 1,
      ""Actual Loops"": 1,
      ""Output"": [""st_asmvt(ROW(st_asmvtgeom(t.geom, 'BOX(291530.8258796632 6223044.220809339,291683.69993623346 6223197.094865911)'::box2d, 4096, 256, true), (t.tags - 'id'::text), t.id), 'ban_numero'::text)""],
      ""Shared Hit Blocks"": 212298,
      ""Shared Read Blocks"": 45041,
      ""Shared Dirtied Blocks"": 0,
      ""Shared Written Blocks"": 0,
      ""Local Hit Blocks"": 0,
      ""Local Read Blocks"": 0,
      ""Local Dirtied Blocks"": 0,
      ""Local Written Blocks"": 0,
      ""Temp Read Blocks"": 0,
      ""Temp Written Blocks"": 0,
      ""WAL Records"": 0,
      ""WAL FPI"": 0,
      ""WAL Bytes"": 0,
      ""Plans"": [
        {
          ""Node Type"": ""Subquery Scan"",
          ""Parent Relationship"": ""Outer"",
          ""Parallel Aware"": false,
          ""Async Capable"": false,
          ""Alias"": ""t"",
          ""Startup Cost"": 3.94,
          ""Total Cost"": 325479.16,
          ""Plan Rows"": 244,
          ""Plan Width"": 68,
          ""Actual Startup Time"": 19181.448,
          ""Actual Total Time"": 23942.033,
          ""Actual Rows"": 22,
          ""Actual Loops"": 1,
          ""Output"": [""t.id"", ""t.tags"", ""t.geom"", ""ban_numero.addok_id""],
          ""Filter"": ""((t.geom IS NOT NULL) AND (t.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
          ""Rows Removed by Filter"": 2456432,
          ""Shared Hit Blocks"": 212298,
          ""Shared Read Blocks"": 45041,
          ""Shared Dirtied Blocks"": 0,
          ""Shared Written Blocks"": 0,
          ""Local Hit Blocks"": 0,
          ""Local Read Blocks"": 0,
          ""Local Dirtied Blocks"": 0,
          ""Local Written Blocks"": 0,
          ""Temp Read Blocks"": 0,
          ""Temp Written Blocks"": 0,
          ""WAL Records"": 0,
          ""WAL FPI"": 0,
          ""WAL Bytes"": 0,
          ""Plans"": [
            {
              ""Node Type"": ""WindowAgg"",
              ""Parent Relationship"": ""Subquery"",
              ""Parallel Aware"": false,
              ""Async Capable"": false,
              ""Startup Cost"": 3.94,
              ""Total Cost"": 294774.00,
              ""Plan Rows"": 2456413,
              ""Plan Width"": 85,
              ""Actual Startup Time"": 22.052,
              ""Actual Total Time"": 23253.157,
              ""Actual Rows"": 2456454,
              ""Actual Loops"": 1,
              ""Output"": [""(row_number() OVER (?))::integer"", ""jsonb_build_object('id', ban_numero.addok_id, 'numero', ban_numero.numero)"", ""ban_numero.geom"", ""ban_numero.addok_id""],
              ""Shared Hit Blocks"": 212298,
              ""Shared Read Blocks"": 45041,
              ""Shared Dirtied Blocks"": 0,
              ""Shared Written Blocks"": 0,
              ""Local Hit Blocks"": 0,
              ""Local Read Blocks"": 0,
              ""Local Dirtied Blocks"": 0,
              ""Local Written Blocks"": 0,
              ""Temp Read Blocks"": 0,
              ""Temp Written Blocks"": 0,
              ""WAL Records"": 0,
              ""WAL FPI"": 0,
              ""WAL Bytes"": 0,
              ""Plans"": [
                {
                  ""Node Type"": ""Merge Append"",
                  ""Parent Relationship"": ""Outer"",
                  ""Parallel Aware"": false,
                  ""Async Capable"": false,
                  ""Startup Cost"": 3.94,
                  ""Total Cost"": 245645.74,
                  ""Plan Rows"": 2456413,
                  ""Plan Width"": 51,
                  ""Actual Startup Time"": 22.027,
                  ""Actual Total Time"": 18049.644,
                  ""Actual Rows"": 2456454,
                  ""Actual Loops"": 1,
                  ""Sort Key"": [""ban_numero.addok_id DESC""],
                  ""Shared Hit Blocks"": 212298,
                  ""Shared Read Blocks"": 45041,
                  ""Shared Dirtied Blocks"": 0,
                  ""Shared Written Blocks"": 0,
                  ""Local Hit Blocks"": 0,
                  ""Local Read Blocks"": 0,
                  ""Local Dirtied Blocks"": 0,
                  ""Local Written Blocks"": 0,
                  ""Temp Read Blocks"": 0,
                  ""Temp Written Blocks"": 0,
                  ""WAL Records"": 0,
                  ""WAL FPI"": 0,
                  ""WAL Bytes"": 0,
                  ""Subplans Removed"": 0,
                  ""Plans"": [
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban37_pkey"",
                      ""Relation Name"": ""ban_numero_ban37"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_1"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 21984.03,
                      ""Plan Rows"": 276399,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 19.675,
                      ""Actual Total Time"": 2230.574,
                      ""Actual Rows"": 276440,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_1.addok_id"", ""ban_numero_1.numero"", ""ban_numero_1.geom""],
                      ""Shared Hit Blocks"": 17017,
                      ""Shared Read Blocks"": 5237,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban75_pkey"",
                      ""Relation Name"": ""ban_numero_ban75"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_2"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 11945.52,
                      ""Plan Rows"": 151794,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.760,
                      ""Actual Total Time"": 1056.292,
                      ""Actual Rows"": 151794,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_2.addok_id"", ""ban_numero_2.numero"", ""ban_numero_2.geom""],
                      ""Shared Hit Blocks"": 12772,
                      ""Shared Read Blocks"": 2479,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban77_pkey"",
                      ""Relation Name"": ""ban_numero_ban77"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_3"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 35954.40,
                      ""Plan Rows"": 453582,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.705,
                      ""Actual Total Time"": 4814.613,
                      ""Actual Rows"": 453582,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_3.addok_id"", ""ban_numero_3.numero"", ""ban_numero_3.geom""],
                      ""Shared Hit Blocks"": 36190,
                      ""Shared Read Blocks"": 9983,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban78_pkey"",
                      ""Relation Name"": ""ban_numero_ban78"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_4"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 27341.41,
                      ""Plan Rows"": 345341,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.661,
                      ""Actual Total Time"": 3267.250,
                      ""Actual Rows"": 345341,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_4.addok_id"", ""ban_numero_4.numero"", ""ban_numero_4.geom""],
                      ""Shared Hit Blocks"": 27499,
                      ""Shared Read Blocks"": 8278,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban91_pkey"",
                      ""Relation Name"": ""ban_numero_ban91"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_5"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 26948.12,
                      ""Plan Rows"": 340013,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.049,
                      ""Actual Total Time"": 3041.894,
                      ""Actual Rows"": 340013,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_5.addok_id"", ""ban_numero_5.numero"", ""ban_numero_5.geom""],
                      ""Shared Hit Blocks"": 32158,
                      ""Shared Read Blocks"": 6263,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban92_pkey"",
                      ""Relation Name"": ""ban_numero_ban92"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_6"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 13102.78,
                      ""Plan Rows"": 166049,
                      ""Plan Width"": 52,
                      ""Actual Startup Time"": 0.032,
                      ""Actual Total Time"": 1099.042,
                      ""Actual Rows"": 166049,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_6.addok_id"", ""ban_numero_6.numero"", ""ban_numero_6.geom""],
                      ""Shared Hit Blocks"": 14674,
                      ""Shared Read Blocks"": 2637,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban93_pkey"",
                      ""Relation Name"": ""ban_numero_ban93"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_7"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 18518.74,
                      ""Plan Rows"": 234555,
                      ""Plan Width"": 52,
                      ""Actual Startup Time"": 0.037,
                      ""Actual Total Time"": 345.274,
                      ""Actual Rows"": 234555,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_7.addok_id"", ""ban_numero_7.numero"", ""ban_numero_7.geom""],
                      ""Shared Hit Blocks"": 22297,
                      ""Shared Read Blocks"": 3450,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban94_pkey"",
                      ""Relation Name"": ""ban_numero_ban94"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_8"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 15949.44,
                      ""Plan Rows"": 201701,
                      ""Plan Width"": 52,
                      ""Actual Startup Time"": 0.046,
                      ""Actual Total Time"": 547.246,
                      ""Actual Rows"": 201701,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_8.addok_id"", ""ban_numero_8.numero"", ""ban_numero_8.geom""],
                      ""Shared Hit Blocks"": 22762,
                      ""Shared Read Blocks"": 2558,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""Backward"",
                      ""Index Name"": ""ban_numero_ban95_pkey"",
                      ""Relation Name"": ""ban_numero_ban95"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""ban_numero_9"",
                      ""Startup Cost"": 0.42,
                      ""Total Cost"": 22685.86,
                      ""Plan Rows"": 286979,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.053,
                      ""Actual Total Time"": 817.695,
                      ""Actual Rows"": 286979,
                      ""Actual Loops"": 1,
                      ""Output"": [""ban_numero_9.addok_id"", ""ban_numero_9.numero"", ""ban_numero_9.geom""],
                      ""Shared Hit Blocks"": 26929,
                      ""Shared Read Blocks"": 4156,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    ""Settings"": {
      ""effective_cache_size"": ""5400MB"",
      ""max_parallel_workers"": ""4"",
      ""work_mem"": ""12MB""
    },
    ""Query Identifier"": -7271303740769922918,
    ""Planning"": {
      ""Shared Hit Blocks"": 1118,
      ""Shared Read Blocks"": 68,
      ""Shared Dirtied Blocks"": 0,
      ""Shared Written Blocks"": 0,
      ""Local Hit Blocks"": 0,
      ""Local Read Blocks"": 0,
      ""Local Dirtied Blocks"": 0,
      ""Local Written Blocks"": 0,
      ""Temp Read Blocks"": 0,
      ""Temp Written Blocks"": 0
    },
    ""Planning Time"": 5.777,
    ""Triggers"": [
    ],
    ""JIT"": {
      ""Functions"": 24,
      ""Options"": {
        ""Inlining"": false,
        ""Optimization"": false,
        ""Expressions"": true,
        ""Deforming"": true
      },
      ""Timing"": {
        ""Generation"": 1.251,
        ""Inlining"": 0.000,
        ""Optimization"": 0.638,
        ""Emission"": 18.494,
        ""Total"": 20.383
      }
    },
    ""Execution Time"": 23943.837
  }
]
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZWt2H/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZWuNT,incubator-baremaps,2572870483,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-06T10:58:35Z,2025-01-06T10:58:35Z,"The execution plan for the rewriten query:

(also on explain.dalibo : https://explain.dalibo.com/plan/d58h480861aac5cc)

```json
[
  {
    ""Plan"": {
      ""Node Type"": ""Aggregate"",
      ""Strategy"": ""Plain"",
      ""Partial Mode"": ""Simple"",
      ""Parallel Aware"": false,
      ""Async Capable"": false,
      ""Startup Cost"": 118.48,
      ""Total Cost"": 118.49,
      ""Plan Rows"": 1,
      ""Plan Width"": 32,
      ""Actual Startup Time"": 10.813,
      ""Actual Total Time"": 10.816,
      ""Actual Rows"": 1,
      ""Actual Loops"": 1,
      ""Output"": [""st_asmvt(ROW(st_asmvtgeom(toto.geom, 'BOX(291530.8258796632 6223044.220809339,291683.69993623346 6223197.094865911)'::box2d, 4096, 256, true), ((jsonb_build_object('id', toto.addok_id, 'numero', toto.numero)) - 'id'::text), ((row_number() OVER (?))::integer)), 'ban_numero'::text)""],
      ""Shared Hit Blocks"": 5,
      ""Shared Read Blocks"": 11,
      ""Shared Dirtied Blocks"": 0,
      ""Shared Written Blocks"": 0,
      ""Local Hit Blocks"": 0,
      ""Local Read Blocks"": 0,
      ""Local Dirtied Blocks"": 0,
      ""Local Written Blocks"": 0,
      ""Temp Read Blocks"": 0,
      ""Temp Written Blocks"": 0,
      ""WAL Records"": 0,
      ""WAL FPI"": 0,
      ""WAL Bytes"": 0,
      ""Plans"": [
        {
          ""Node Type"": ""WindowAgg"",
          ""Parent Relationship"": ""Outer"",
          ""Parallel Aware"": false,
          ""Async Capable"": false,
          ""Startup Cost"": 86.81,
          ""Total Cost"": 87.08,
          ""Plan Rows"": 12,
          ""Plan Width"": 85,
          ""Actual Startup Time"": 10.667,
          ""Actual Total Time"": 10.727,
          ""Actual Rows"": 22,
          ""Actual Loops"": 1,
          ""Output"": [""(row_number() OVER (?))::integer"", ""jsonb_build_object('id', toto.addok_id, 'numero', toto.numero)"", ""toto.geom"", ""toto.addok_id""],
          ""Shared Hit Blocks"": 5,
          ""Shared Read Blocks"": 11,
          ""Shared Dirtied Blocks"": 0,
          ""Shared Written Blocks"": 0,
          ""Local Hit Blocks"": 0,
          ""Local Read Blocks"": 0,
          ""Local Dirtied Blocks"": 0,
          ""Local Written Blocks"": 0,
          ""Temp Read Blocks"": 0,
          ""Temp Written Blocks"": 0,
          ""WAL Records"": 0,
          ""WAL FPI"": 0,
          ""WAL Bytes"": 0,
          ""Plans"": [
            {
              ""Node Type"": ""Sort"",
              ""Parent Relationship"": ""Outer"",
              ""Parallel Aware"": false,
              ""Async Capable"": false,
              ""Startup Cost"": 86.81,
              ""Total Cost"": 86.84,
              ""Plan Rows"": 12,
              ""Plan Width"": 51,
              ""Actual Startup Time"": 10.646,
              ""Actual Total Time"": 10.651,
              ""Actual Rows"": 22,
              ""Actual Loops"": 1,
              ""Output"": [""toto.addok_id"", ""toto.numero"", ""toto.geom""],
              ""Sort Key"": [""toto.addok_id DESC""],
              ""Sort Method"": ""quicksort"",
              ""Sort Space Used"": 26,
              ""Sort Space Type"": ""Memory"",
              ""Shared Hit Blocks"": 5,
              ""Shared Read Blocks"": 11,
              ""Shared Dirtied Blocks"": 0,
              ""Shared Written Blocks"": 0,
              ""Local Hit Blocks"": 0,
              ""Local Read Blocks"": 0,
              ""Local Dirtied Blocks"": 0,
              ""Local Written Blocks"": 0,
              ""Temp Read Blocks"": 0,
              ""Temp Written Blocks"": 0,
              ""WAL Records"": 0,
              ""WAL FPI"": 0,
              ""WAL Bytes"": 0,
              ""Plans"": [
                {
                  ""Node Type"": ""Append"",
                  ""Parent Relationship"": ""Outer"",
                  ""Parallel Aware"": false,
                  ""Async Capable"": false,
                  ""Startup Cost"": 0.28,
                  ""Total Cost"": 86.59,
                  ""Plan Rows"": 12,
                  ""Plan Width"": 51,
                  ""Actual Startup Time"": 4.468,
                  ""Actual Total Time"": 10.584,
                  ""Actual Rows"": 22,
                  ""Actual Loops"": 1,
                  ""Shared Hit Blocks"": 5,
                  ""Shared Read Blocks"": 11,
                  ""Shared Dirtied Blocks"": 0,
                  ""Shared Written Blocks"": 0,
                  ""Local Hit Blocks"": 0,
                  ""Local Read Blocks"": 0,
                  ""Local Dirtied Blocks"": 0,
                  ""Local Written Blocks"": 0,
                  ""Temp Read Blocks"": 0,
                  ""Temp Written Blocks"": 0,
                  ""WAL Records"": 0,
                  ""WAL FPI"": 0,
                  ""WAL Bytes"": 0,
                  ""Subplans Removed"": 0,
                  ""Plans"": [
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban37_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban37"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_1"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.829,
                      ""Actual Total Time"": 0.829,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_1.addok_id"", ""toto_1.numero"", ""toto_1.geom""],
                      ""Index Cond"": ""((toto_1.geom IS NOT NULL) AND (toto_1.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban75_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban75"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_2"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.763,
                      ""Actual Total Time"": 0.763,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_2.addok_id"", ""toto_2.numero"", ""toto_2.geom""],
                      ""Index Cond"": ""((toto_2.geom IS NOT NULL) AND (toto_2.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Bitmap Heap Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Relation Name"": ""ban_numero_ban77"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_3"",
                      ""Startup Cost"": 4.33,
                      ""Total Cost"": 20.12,
                      ""Plan Rows"": 4,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 2.875,
                      ""Actual Total Time"": 2.887,
                      ""Actual Rows"": 22,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_3.addok_id"", ""toto_3.numero"", ""toto_3.geom""],
                      ""Recheck Cond"": ""((toto_3.geom IS NOT NULL) AND (toto_3.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Exact Heap Blocks"": 5,
                      ""Lossy Heap Blocks"": 0,
                      ""Shared Hit Blocks"": 5,
                      ""Shared Read Blocks"": 3,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0,
                      ""Plans"": [
                        {
                          ""Node Type"": ""Bitmap Index Scan"",
                          ""Parent Relationship"": ""Outer"",
                          ""Parallel Aware"": false,
                          ""Async Capable"": false,
                          ""Index Name"": ""ban_numero_ban77_geom_idx"",
                          ""Startup Cost"": 0.00,
                          ""Total Cost"": 4.33,
                          ""Plan Rows"": 4,
                          ""Plan Width"": 0,
                          ""Actual Startup Time"": 2.865,
                          ""Actual Total Time"": 2.865,
                          ""Actual Rows"": 22,
                          ""Actual Loops"": 1,
                          ""Index Cond"": ""((toto_3.geom IS NOT NULL) AND (toto_3.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                          ""Shared Hit Blocks"": 0,
                          ""Shared Read Blocks"": 3,
                          ""Shared Dirtied Blocks"": 0,
                          ""Shared Written Blocks"": 0,
                          ""Local Hit Blocks"": 0,
                          ""Local Read Blocks"": 0,
                          ""Local Dirtied Blocks"": 0,
                          ""Local Written Blocks"": 0,
                          ""Temp Read Blocks"": 0,
                          ""Temp Written Blocks"": 0,
                          ""WAL Records"": 0,
                          ""WAL FPI"": 0,
                          ""WAL Bytes"": 0
                        }
                      ]
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban78_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban78"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_4"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 1.067,
                      ""Actual Total Time"": 1.067,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_4.addok_id"", ""toto_4.numero"", ""toto_4.geom""],
                      ""Index Cond"": ""((toto_4.geom IS NOT NULL) AND (toto_4.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban91_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban91"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_5"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 0.873,
                      ""Actual Total Time"": 0.873,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_5.addok_id"", ""toto_5.numero"", ""toto_5.geom""],
                      ""Index Cond"": ""((toto_5.geom IS NOT NULL) AND (toto_5.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban92_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban92"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_6"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 52,
                      ""Actual Startup Time"": 1.066,
                      ""Actual Total Time"": 1.066,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_6.addok_id"", ""toto_6.numero"", ""toto_6.geom""],
                      ""Index Cond"": ""((toto_6.geom IS NOT NULL) AND (toto_6.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban93_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban93"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_7"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 52,
                      ""Actual Startup Time"": 1.026,
                      ""Actual Total Time"": 1.026,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_7.addok_id"", ""toto_7.numero"", ""toto_7.geom""],
                      ""Index Cond"": ""((toto_7.geom IS NOT NULL) AND (toto_7.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban94_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban94"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_8"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 52,
                      ""Actual Startup Time"": 1.008,
                      ""Actual Total Time"": 1.008,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_8.addok_id"", ""toto_8.numero"", ""toto_8.geom""],
                      ""Index Cond"": ""((toto_8.geom IS NOT NULL) AND (toto_8.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    },
                    {
                      ""Node Type"": ""Index Scan"",
                      ""Parent Relationship"": ""Member"",
                      ""Parallel Aware"": false,
                      ""Async Capable"": false,
                      ""Scan Direction"": ""NoMovement"",
                      ""Index Name"": ""ban_numero_ban95_geom_idx"",
                      ""Relation Name"": ""ban_numero_ban95"",
                      ""Schema"": ""ign"",
                      ""Alias"": ""toto_9"",
                      ""Startup Cost"": 0.28,
                      ""Total Cost"": 8.30,
                      ""Plan Rows"": 1,
                      ""Plan Width"": 51,
                      ""Actual Startup Time"": 1.054,
                      ""Actual Total Time"": 1.054,
                      ""Actual Rows"": 0,
                      ""Actual Loops"": 1,
                      ""Output"": [""toto_9.addok_id"", ""toto_9.numero"", ""toto_9.geom""],
                      ""Index Cond"": ""((toto_9.geom IS NOT NULL) AND (toto_9.geom && '0103000020110F000001000000050000004043B7BF21CB114154FB417530BD57414043B7BF21CB1141A20AF2DE57BD57414038B85A98CD1141A20AF2DE57BD57414038B85A98CD114154FB417530BD57414043B7BF21CB114154FB417530BD5741'::geometry))"",
                      ""Rows Removed by Index Recheck"": 0,
                      ""Shared Hit Blocks"": 0,
                      ""Shared Read Blocks"": 1,
                      ""Shared Dirtied Blocks"": 0,
                      ""Shared Written Blocks"": 0,
                      ""Local Hit Blocks"": 0,
                      ""Local Read Blocks"": 0,
                      ""Local Dirtied Blocks"": 0,
                      ""Local Written Blocks"": 0,
                      ""Temp Read Blocks"": 0,
                      ""Temp Written Blocks"": 0,
                      ""WAL Records"": 0,
                      ""WAL FPI"": 0,
                      ""WAL Bytes"": 0
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    ""Settings"": {
      ""effective_cache_size"": ""5400MB"",
      ""max_parallel_workers"": ""4"",
      ""work_mem"": ""12MB""
    },
    ""Query Identifier"": 170389169440180166,
    ""Planning"": {
      ""Shared Hit Blocks"": 2,
      ""Shared Read Blocks"": 1,
      ""Shared Dirtied Blocks"": 0,
      ""Shared Written Blocks"": 0,
      ""Local Hit Blocks"": 0,
      ""Local Read Blocks"": 0,
      ""Local Dirtied Blocks"": 0,
      ""Local Written Blocks"": 0,
      ""Temp Read Blocks"": 0,
      ""Temp Written Blocks"": 0
    },
    ""Planning Time"": 1.596,
    ""Triggers"": [
    ],
    ""Execution Time"": 11.137
  }
]
```","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZWuNT/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZW8W5,incubator-baremaps,2572928441,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-06T11:34:47Z,2025-01-06T11:34:47Z,"To be complete, I have run the two queries on a materialized view to check if the partition wasn't the culprit of the performance decrease: I have the same performance gap with the materialized view.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZW8W5/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZXjhV,incubator-baremaps,2573088853,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-06T13:14:37Z,2025-01-06T13:14:37Z,"@AlexGacon Interesting, both queries seem to use the indexes correctly. 

I guess pushing the where clause down in the query is the right approach. Do you want to edit the tilestore that generates the query and validate the fix with your data? We can schedule a session if you need some help.

https://github.com/apache/incubator-baremaps/blob/63d0574734fa5452568d183a87864f6e81076e66/baremaps-core/src/main/java/org/apache/baremaps/tilestore/postgres/PostgresTileStore.java#L161","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZXjhV/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZfL--,incubator-baremaps,2575089598,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-07T11:48:42Z,2025-01-07T11:48:42Z,"Here are the binaries with your changes. Let me know if it works. I will also conduct some tests on the basemap before merging.

https://github.com/apache/incubator-baremaps/releases/tag/v0.8.2-test1","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZfL--/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZfNkQ,incubator-baremaps,2575096080,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-07T11:52:17Z,2025-01-07T11:52:17Z,"I currently get the following error when rendering the basemap:
ERROR: syntax error at or near ""WHERE""

I'll try to dig into this later tonight or tomorrow morning.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZfNkQ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZjU-y,incubator-baremaps,2576175026,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-07T20:36:13Z,2025-01-07T20:36:13Z,"@AlexGacon Here is the new link for testing the changes.

https://github.com/apache/incubator-baremaps/releases/tag/v0.8.2-test2","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZjU-y/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zm5D9,incubator-baremaps,2577109245,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-08T08:49:33Z,2025-01-08T08:49:33Z,"@bchapuis I tried to use it but there is SQL errors : 
```
ERROR: subquery in FROM must have an alias
  Hint: For example, FROM (SELECT ...) [AS] foo.
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zm5D9/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zm7aP,incubator-baremaps,2577118863,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-08T08:53:24Z,2025-01-08T08:53:24Z,"On https://github.com/apache/incubator-baremaps/blob/7acde84df595d190939c44995b65d032476ef51f/baremaps-core/src/main/java/org/apache/baremaps/tilestore/postgres/PostgresTileStore.java#L176, you should a `as foo` after the subquery.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zm7aP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zm9AZ,incubator-baremaps,2577125401,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-08T08:55:53Z,2025-01-08T08:55:53Z,And the same for this line : https://github.com/apache/incubator-baremaps/blob/7acde84df595d190939c44995b65d032476ef51f/baremaps-core/src/main/java/org/apache/baremaps/tilestore/postgres/PostgresTileStore.java#L174,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zm9AZ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zn81N,incubator-baremaps,2577386829,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-08T10:58:30Z,2025-01-08T10:58:30Z,"@AlexGacon Thanks, I really wonder why my version of postgres seems to be more forgiving... 

Here is a new version with the aliases that works on the basemap. Let me know if this version works for you as well. We will probably need a few back and forth as I'm not able to test with your schema and data.

https://github.com/apache/incubator-baremaps/releases/tag/v0.8.2-test3

I checked the unit tests and we are actually using postgres 14 and postgis 3.3 on the CI. Maybe we could add an integration test that validates your use case more specifically.

https://github.com/apache/incubator-baremaps/blob/767b079bc170aeecc787ab6daf04bec524763a09/baremaps-testing/src/main/java/org/apache/baremaps/testing/PostgresContainerTest.java#L40
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zn81N/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zp2wL,incubator-baremaps,2577886219,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-08T15:00:51Z,2025-01-08T15:00:51Z,@bchapuis the performance is improved a little bit but the where clause is still not correctly placed and the spatial index is not used (the spatial filter is done at the end of the query),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zp2wL/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZqhH1,incubator-baremaps,2578059765,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-08T16:09:34Z,2025-01-08T16:09:34Z,"@AlexGacon It looks more and more like the optimizer of postgres 16 does a very good job (is upgrading something you could consider?).

I'm currently experimenting with appending the where clause directly to the user provided query assuming that we always have aliases for the id, tags, and geom columns. I liked the current version with a subquery, as it covered most cases and didn't require to parse the query with JSQLParser to account for most corner cases (queries with existing WHERE clause, queries with GROUP BY and HAVING clauses, etc.). But if needed we can reintroduce this.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZqhH1/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zqpgx,incubator-baremaps,2578094129,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-08T16:24:42Z,2025-01-08T16:24:42Z,"@AlexGacon Can you try the following version?
https://github.com/apache/incubator-baremaps/releases/tag/v0.8.2-test4

The approach is quite naive but works for the basemap.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zqpgx/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZvScU,incubator-baremaps,2579310356,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-09T07:04:51Z,2025-01-09T07:04:51Z,"Hi @bchapuis! For the project I work on (https://ansc.interieur.gouv.fr/nexsis-18-112/), a postgres upgrade is a complex operation to organize so we don't do it very often.

I will give a try to your new version.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZvScU/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZvaQy,incubator-baremaps,2579342386,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-09T07:31:21Z,2025-01-09T07:31:21Z,The test4 version works perfectly now! Thank you for your time.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZvaQy/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZvuCd,incubator-baremaps,2579423389,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-09T08:23:40Z,2025-01-09T08:23:40Z,"@AlexGacon I think it's good if we find a solution that works for older versions of postgres and postgis. I will merge this solution and open a new issue that uses a sql parser (e.g. calcite or jsqlparser) to rewrite the query and make things more robust. Tanks a lot for your feedback, do not hesitate to log issues if you encounter other problems.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZvuCd/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZwnnI,incubator-baremaps,2579659208,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-09T10:04:48Z,2025-01-09T10:04:48Z,I will!,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZwnnI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZwoK3,incubator-baremaps,2579661495,909,NA,AlexGacon,3034717,Alexandre Gacon,,NA,2025-01-09T10:05:45Z,2025-01-09T10:05:45Z,@bchapuis any idea when you could make an official release?,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ZwoK3/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/909,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zx1Eu,incubator-baremaps,2579976494,909,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-09T11:57:23Z,2025-01-09T11:57:23Z,"@AlexGacon We haven't planned the next release yet, but it may be a good opportunity to test and validate our release process again. I expect it will take a couple of weeks: I'd like to finalize and merge #910 (probably next week), and then we'll need at least two weeks to hold a vote on both the project mailing list and the incubator mailing list. The key is to involve as many people as possible on these lists. Last time, the vote stalled because of a lack of activity.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6Zx1Eu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/913,https://api.github.com/repos/apache/incubator-baremaps/issues/913,incubator-baremaps,2777164493,913,Create a robust solution to generate the queries of the PostgresTileStore,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2025-01-09T08:33:06Z,2025-01-31T07:00:22Z,"The current solution is naive and does not support complex queries. It need to be reworked with a query parser such as jsqlparser or calcite to cover cases involving subqueries, GROUP BY, HAVING, LIMIT, and ORDER BY clauses in user provided queries.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/913/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/918,https://api.github.com/repos/apache/incubator-baremaps/issues/918,incubator-baremaps,2788245884,918,Release Baremaps 0.8.2,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-14T20:44:24Z,2025-01-15T11:36:54Z,"In order to release a new version of Apache Baremaps, follow these steps:

- [x] Notify the mailing list and ask everyone to pause commits on the main branch
- [x] Create a new issue on GitHub with the title ""Release Baremaps $RELEASE_VERSION""
- [x] Create a new branch for the release (e.g. `release-$RELEASE_VERSION`)

```bash
cd baremaps
git checkout -b release-$RELEASE_VERSION
```

- [x] Set the release version and commit the changes:

```bash 
./mvnw versions:set -DnewVersion=$RELEASE_VERSION
git commit -a -m ""Release Baremaps $RELEASE_VERSION""
git push --set-upstream origin release-$RELEASE_VERSION
```

- [x] Tag the last commit with the release candidate version:

```bash
git tag v$RELEASE_VERSION-rc$CANDIDATE_NUMBER
```

- [x] Push the tag to the remote repository (this will trigger GitHub Action to build the release candidate, publish the artifacts to the [dev directory](https://dist.apache.org/repos/dist/dev/incubator/baremaps/) of dist.apache.org repository, and draft a release on GitHub):

```bash
git push origin v$RELEASE_VERSION-rc$CANDIDATE_NUMBER
```


- [ ] Publish the release artifacts to the maven repository.

```bash
./mvnw clean deploy -Papache-release
```

- [x] Edit the release notes for this tag on GitHub.
- [ ] Ask the community to vote for the release candidate.
- [ ] If the release candidate is not approved by the community, commit the necessary changes, clean the git history, create a new release candidate, and repeat the process.

> TODO: The following step is not yet fully automated. We need to add secrets and steps to publish the artifacts to the [dev directory](https://dist.apache.org/repos/dist/dev/incubator/baremaps/) (APACHE_USERNAME, APACHE_PASSWORD) and to the maven repository (NEXUS_USERNAME, NEXUS_PASSWORD).

- [ ] If the release candidate is approved by the community, tag the release commit with the release version (this will trigger the same GitHub Action as before):

```bash
git tag -a v$RELEASE_VERSION
git push origin v$RELEASE_VERSION
```

- [ ] Register the release on [reporter.apache.org](https://reporter.apache.org/addrelease.html?incubator-baremaps).
- [ ] Rebase the release branch into the main branch.
- [ ] Clean up all the release candidate branches and tags.
- [ ] Publish the release on GitHub.
- [ ] Copy the release artifacts from the [dev directory](https://dist.apache.org/repos/dist/dev/incubator/baremaps/) to the [release directory](https://dist.apache.org/repos/dist/release/incubator/baremaps/).

```bash
svn cp https://dist.apache.org/repos/dist/dev/incubator/baremaps/$RELEASE_VERSION-rc$CANDIDATE_NUMBER https://dist.apache.org/repos/dist/release/incubator/baremaps/$RELEASE_VERSION -m ""Release Apache Baremaps (incubating) $RELEASE_VERSION""
```


- [ ] Set the version of the next iteration and commit the changes:

```bash
./mvnw versions:set -DnewVersion=$NEXT_VERSION-SNAPSHOT
git commit -a -m ""Prepare for next development iteration""
git push origin
```

```bash
./mvnw clean deploy
```

- [ ] Notify the community of the release by sending a message to the mailing list.

## Reproducing the build

The release artifacts are bit-by-bit reproducible if the following conditions are met:
- The build is run with the same version of the JDK (e.g. OpenJDK 17 temurin)
- The build is run with the maven wrapper (e.g. `./mvnw`)

The procedure has been tested on different operating systems (e.g. Linux and MacOS).
For convenience, we suggest to build the release artifacts on a clean environment (e.g. a fresh Docker container).

```bash
git checkout v$RELEASE_VERSION-rc$CANDIDATE_NUMBER
docker run \
  -v $(pwd):/baremaps \
  -w /baremaps \
  eclipse-temurin:17-jdk \
  ./mvnw clean install -DskipTests
```

## Verifying the release artifacts

Verify the GPG signature of the release artifacts:

```bash
gpg --verify apache-baremaps-$RELEASE_VERSION-incubating-bin.tar.gz.asc
gpg --verify apache-baremaps-$RELEASE_VERSION-incubating-src.tar.gz.asc
```

Verify the SHA512 checksum of the release artifacts:

```bash
shasum -a 512 -c apache-baremaps-$RELEASE_VERSION-incubating-bin.tar.gz.sha512
shasum -a 512 -c apache-baremaps-$RELEASE_VERSION-incubating-src.tar.gz.sha512
```

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/918/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/922,https://api.github.com/repos/apache/incubator-baremaps/issues/922,incubator-baremaps,2808023222,922,Upgrade Maplibre to version 5,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2025-01-23T22:09:02Z,2025-01-31T09:53:03Z,"Maplibre is referenced (CDN version) in a few html files of baremaps and on the web site. It would be great to upgrade it to the latest version (5.0.1).

https://github.com/maplibre/maplibre-gl-js","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/922/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/922,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6bqWlP,incubator-baremaps,2611571023,922,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-24T04:44:35Z,2025-01-24T04:44:35Z,"@bchapuis 

Hello! 

This issue seems like a great starting point to contribute to Baremaps.
I’d like to contribute to it. 🙂","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6bqWlP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/922,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brFkK,incubator-baremaps,2611763466,922,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-24T07:14:57Z,2025-01-24T07:14:57Z,"Great, thanks a lot! 👍 ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brFkK/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/922,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6bzYQ_,incubator-baremaps,2613937215,922,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-25T11:38:50Z,2025-01-25T11:38:50Z,"@bchapuis 

I worked on the tasks in the following two PRs!  
- https://github.com/apache/incubator-baremaps/pull/924
- https://github.com/apache/incubator-baremaps-site/pull/53

If there are any mistakes or things I might have missed, please feel free to let me know in the comments!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6bzYQ_/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/923,https://api.github.com/repos/apache/incubator-baremaps/issues/923,incubator-baremaps,2808733953,923,Document the structure of the project,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-24T07:29:15Z,2025-01-24T07:57:24Z,"The documentation contains TODOs that have not been completed.  
https://baremaps.apache.org/documentation/developer-manual/project-structure/

I wouldn't go into much details as the structure and the modules tend to evolve, but a high level description may be beneficial. For instance, we could give a broad description for: 
- baremaps-core, 
- baremaps-cli, 
- why we have other submodules for codecs (baremaps-openstreetmap, baremaps-pmtiles, etc.).

As said, I wouldn't go into the details as the structure evolves, the intend should be to give pointers to new commers.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/923/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/923,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brXHr,incubator-baremaps,2611835371,923,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-24T07:34:15Z,2025-01-24T07:34:15Z,I think adding the `documentation` label would be a good idea :),"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brXHr/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/923,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brcS0,incubator-baremaps,2611856564,923,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-24T07:39:19Z,2025-01-24T07:39:19Z,"Yes, I also forgot to mention that it may be easier to maintain the developper's documentation directly in the main repository instead of the web site. A low hanging fruit, may be to remove this section from the website and to move the exiting documentations in README.md files directly into submodules.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brcS0/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/923,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brkST,incubator-baremaps,2611889299,923,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-24T07:57:23Z,2025-01-24T07:57:23Z,"> A low hanging fruit, may be to remove this section from the website and to move the exiting documentations in README.md files directly into submodules.

Sounds Great 👍","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6brkST/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/925,https://api.github.com/repos/apache/incubator-baremaps/issues/925,incubator-baremaps,2819859527,925,Introduce an Issue Template for Better Reporting,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,CLOSED,2025-01-30T04:12:39Z,2025-02-01T09:58:30Z,"### Description  

Currently, issues in Apache Baremaps vary widely in nature, making it difficult to collect the necessary details for debugging. 
Introducing an `issue template` can help ensure that reports include key information, such as environment details, steps to reproduce, and relevant attachments, streamlining the resolution process and improving issue tracking efficiency.  

#### **Proposed Changes**  
- **Introduce multiple issue templates tailored for different types of reports**  
  Instead of a single template, multiple issue templates will be provided, each designed to collect specific details based on the type of issue:

#### **Bug Report** 
- **Description**: A clear and concise explanation of the issue.  
- **Environment**: Details such as OS, browser (if applicable), and software version.  
- **Steps to Reproduce**: A step-by-step guide to reproduce the issue.  
- **Attachments**: Relevant files, screenshots, or logs to help reproduce the issue.  

#### **Feature Request**
- **Description**: A detailed explanation of the desired functionality.  
- **Expected Impact**: A description of how the feature would enhance the project.  

#### **Question**  
- **Description**: A brief description of the question or issue.  
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/925/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/925,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdqgp,incubator-baremaps,2625021993,925,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-30T16:44:06Z,2025-01-30T16:44:06Z,"I agree with the proposed templates, but would encourage people to use the mailing list for questions.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdqgp/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/925,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdtn8,incubator-baremaps,2625034748,925,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-30T16:48:42Z,2025-01-30T16:48:42Z,"> I agree with the proposed templates, but would encourage people to use the mailing list for questions.

I think `contact_links` would be a good option.

- https://github.com/junit-team/junit5/blob/main/.github/ISSUE_TEMPLATE/config.yml

---

In the `JUnit 5` repository, when selecting `New Issue` and then choosing `Ask a question`, users are redirected to a URL chosen by the JUnit Team.  

![Image](https://github.com/user-attachments/assets/55a7888b-11b2-4e1a-a864-7ee177ddefa9)

In our case, it would be best to redirect users to our `mailing list`.

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdtn8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/926,https://api.github.com/repos/apache/incubator-baremaps/issues/926,incubator-baremaps,2819873329,926,Automatically Add `new` Label to Newly Created Issues and Close Inactive Issues After a Certain Period,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,CLOSED,2025-01-30T04:28:18Z,2025-02-01T09:53:40Z,"### **Description**
This will improve the organization of the repository and help maintainers manage issues more efficiently by preventing unresolved issues from remaining open indefinitely.

#### **Proposed Changes**
- **Introduce automation for label addition and issue closure based on activity**  
  This automation will ensure that newly created issues are easily identifiable and that inactive issues are either flagged or closed after a specified period, ensuring timely management.

#### **Automation Details**  

1. **Add `new` Label on Issue Creation**  
   - When a new issue is created, it will automatically be labeled as `new`.
   - This will make it easy for maintainers to identify new issues that have yet to be addressed.

2. **Mark Issues as `stale` After 14 Days of Inactivity**  
   - If an issue remains inactive for 14 days without any updates or responses, it will automatically be labeled `stale`.
   - This indicates to contributors that the issue requires attention.

3. **Close Issues After `21 Days` of Inactivity**  
   - If an issue stays inactive for `7` additional days (total of `21` days), it will be automatically closed.
   - A message will be added to indicate that the issue was closed due to inactivity and that contributors can reopen it if necessary by providing the requested information.

#### **Expected Behavior**  
- Newly created issues should automatically have the `new` label.
- Issues that have been inactive for `14` days should be labeled as `stale`.
- Issues that remain inactive for a total of `21` days will be closed with the following message:

  > ""This issue was closed due to lack of feedback after 21 days of inactivity. Please feel free to reopen it with the required details.""

You can find additional workflow details at the following links:
- [Label Opened Issues Workflow](https://github.com/junit-team/junit5/blob/main/.github/workflows/label-opened-issues.yml)
- [Close Inactive Issues Workflow](https://github.com/junit-team/junit5/blob/main/.github/workflows/close-inactive-issues.yml)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/926/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/926,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdo_O,incubator-baremaps,2625015758,926,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-30T16:42:35Z,2025-01-30T16:42:35Z,"This is great, I would just increase the durations, as most of us work on baremaps on the side. For instance, we could label as stale after one month and close after 3 month. What do you think?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdo_O/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/926,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdu8y,incubator-baremaps,2625040178,926,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-30T16:50:58Z,2025-01-30T16:50:58Z,"> This is great, I would just increase the durations, as most of us work on baremaps on the side. For instance, we could label as stale after one month and close after 3 month. What do you think?

Sounds like a great idea 👍🏻
I'll proceed with the work as you suggested.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdu8y/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/926,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdyhp,incubator-baremaps,2625054825,926,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-30T16:57:12Z,2025-01-30T16:57:12Z,"@bchapuis 

When you have time, could you assign me?
If possible, I'd appreciate it if you could assign me other issues as well. 🙂","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cdyhp/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/927,https://api.github.com/repos/apache/incubator-baremaps/issues/927,incubator-baremaps,2822621009,927,Basemap improvements,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T07:03:42Z,2025-01-31T10:23:19Z,"**Description:** The basemap is in a good shape, but we can still improve it. This issue will be used to list and track these improvements. Please, do not hesitate to list further improvements that you may notice.

**Guidelines:** We build on the work done for osm-carto, but we do not copy every style rules. For instance, we avoid the use of patterns (e.g. trees in forest polygons), as they require a raster sprites and do not scale well. Additionnaly, we try to avoid dashed lines and other directives that affect rendering when zooming in or out.

**How to help:** You can pick and solve an issue or report new ones. For this, the dev mode of apache baremaps is really handful, as it allows to display the vector basemap and openstreetmap side by side. Additionaly, it allows to inspect the content of the tileset and to display the openstreetmap metadata.

![Image](https://github.com/user-attachments/assets/58ce5b6b-30bc-45a6-ab5b-a8da70a00952)

![Image](https://github.com/user-attachments/assets/40ec8e97-7c93-42ac-8318-f59e53078b06)

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/927/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/928,incubator-baremaps,2822629352,928,Display boundaries and borders,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T07:07:21Z,2025-02-05T08:53:27Z,"**Description:** Openstreetmap contains tags for boundaries and borders and we should properly display them at low and high zoom levels. We currently display borders at level 13 and greater. This change probably requires to do some line work and simplifications in the database and possibly in the java code as well (for handling complex multipolygons).

**Tag**:
https://wiki.openstreetmap.org/wiki/Key:boundary

**Attachements**:
<img width=""650"" alt=""Image"" src=""https://github.com/user-attachments/assets/6b741b0a-588e-4ef1-9597-da601f3d9e41"" />

**Files:**
https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/boundary

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/928/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cjsDf,incubator-baremaps,2626601183,928,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-01-31T08:19:15Z,2025-01-31T08:19:15Z,"@bchapuis 

This issue looks interesting.  
Would it be okay if I take it on?  

I’d like to resolve the issue below and start working on it right away.
- https://github.com/apache/incubator-baremaps/pull/924#issuecomment-2621702075","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cjsDf/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ckBxO,incubator-baremaps,2626690126,928,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-01-31T08:59:15Z,2025-01-31T08:59:15Z,"Great, I left a comment in the other PR. Do not hesitate to reach out if you have difficulties entering the code for the basemap or the java code.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ckBxO/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dFnTI,incubator-baremaps,2635494600,928,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-05T01:23:33Z,2025-02-05T01:23:33Z,"@bchapuis 

Can I ask which part of the Java code is handling the multi-polygons?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dFnTI/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dHCJJ,incubator-baremaps,2635866697,928,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-05T07:13:17Z,2025-02-05T07:13:17Z,"Sure, here is the class that créâtes the multiplepolygons:
https://github.com/apache/incubator-baremaps/blob/96cf335eaefa6ccdff923f31c3b81adaef211016/baremaps-openstreetmap/src/main/java/org/apache/baremaps/openstreetmap/function/RelationMultiPolygonBuilder.java#L41","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dHCJJ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dHDYf,incubator-baremaps,2635871775,928,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-05T07:16:55Z,2025-02-05T07:16:55Z,"The most important test for osm data is located here:
https://github.com/apache/incubator-baremaps/blob/96cf335eaefa6ccdff923f31c3b81adaef211016/baremaps-openstreetmap/src/test/java/org/apache/baremaps/openstreetmap/OsmDataTest.java#L49

It uses the examples and corner cases listed in:
https://osmcode.org/osm-testdata/","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dHDYf/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/928,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dH8ya,incubator-baremaps,2636106906,928,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-05T08:53:26Z,2025-02-05T08:53:26Z,"@bchapuis 

Thank you! I’ll start working on it after I get off work. 😊","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dH8ya/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/929,https://api.github.com/repos/apache/incubator-baremaps/issues/929,incubator-baremaps,2822637021,929,Display highway shields,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T07:11:09Z,2025-02-05T02:36:50Z,"**Description:** We do not display highway shields yet in the basemap. It would be nice to have a solution that do not rely on colored sprites to display these shields, but I'm not sure how to do it. We probably need to investigate maplibre's documentation to do this and the solution should be discussed.

**Tag:**
https://wiki.openstreetmap.org/wiki/Key:highway

**Attachements:**
<img width=""204"" alt=""Image"" src=""https://github.com/user-attachments/assets/e06aa330-230c-4d35-9c9e-9d21199c495f"" />

**Files**: https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/highway","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/929/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/929,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dF5OP,incubator-baremaps,2635568015,929,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-05T02:33:05Z,2025-02-05T02:33:05Z,"I’ve gathered a few links that might be helpful for the discussion.

- https://www.npmjs.com/package/@americana/maplibre-shield-generator
- https://github.com/maplibre/maplibre-gl-js/issues/188

> It seems that MapLibre had an issue where the direction of shields changed depending on the road’s baseline. We should take this into account when designing our solution.

![Image](https://github.com/user-attachments/assets/204e5f75-a51d-4b12-a013-566ea7fd7676)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dF5OP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/930,https://api.github.com/repos/apache/incubator-baremaps/issues/930,incubator-baremaps,2822638168,930,Display river and lake labels,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T07:12:01Z,2025-01-31T08:08:21Z,"**Description:** We should display labels for rivers and lakes. Idealy, the initial solution should only rely on openstreetmap data.

**Tags:**
- https://wiki.openstreetmap.org/wiki/Tag:waterway=river
- https://wiki.openstreetmap.org/wiki/Tag:water=lake

**Attachements:**

<img width=""172"" alt=""Image"" src=""https://github.com/user-attachments/assets/0f06a01a-b285-4e7a-8348-94ac7aa9e8e0"" />

**Files:**
- https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/waterway
- https://github.com/apache/incubator-baremaps/blob/6486772109a342a96bd34977b0971d206814178c/basemap/layers/natural/overlay.js#L41
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/930/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/931,incubator-baremaps,2822641764,931,Display building numbers,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,CLOSED,2025-01-31T07:14:11Z,2025-02-03T10:25:54Z,"**Description:** Display building numbers on points and polygons tagged with ""building"". I think we should do this at high zoom levels only (e.g. >= 16?).

**Attachements:**
<img width=""312"" alt=""Image"" src=""https://github.com/user-attachments/assets/f743d2ae-a5ea-4dcb-884a-1639a3aa2d64"" />

**Files:** https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/building","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/931/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ct7Ov,incubator-baremaps,2629284783,931,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-02T07:47:15Z,2025-02-02T07:47:15Z,"@bchapuis 

For other beginners, I will only focus on resolving #928 and **this issue** as the `good first issues` and won’t work on the rest.
> It would be better for the community if multiple beginners work on resolving Good First Issues, rather than me solving all the issues myself 🙂

Once two issues are resolved, I plan to work on the following topics.
- FlightAware: Developing highly customized maps for the airline industry
- Camptocamp: Developing highly customized maps for emergency services in France.
- Alternatively, I plan to **introduce our project to Korean companies** and get **use case recommendations** to work on.
- etc

Thank you, as always! ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ct7Ov/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cuG9u,incubator-baremaps,2629332846,931,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-02T10:21:21Z,2025-02-02T10:21:21Z,"Good idea! Do not hesitate to report issues along the journey as some documentation may need updates.

Flightaware's use case is already in [beta](https://beta.flightaware.com/) and they developped some tools in go to [accelerate vector tile exports](https://github.com/flightaware/baremaps-exporter). Maybe we can bring some of their ideas in our export command and perform some benchmarks. Here is an additional [reference](https://andywoodruff.com/posts/2024/flightaware-maps/). I believe Camptocamp's usecase is related to intranet maps. I havn't seen those maps yet.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cuG9u/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cuPlq,incubator-baremaps,2629368170,931,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-02T12:06:36Z,2025-02-02T12:06:36Z,"> Good idea! Do not hesitate to report issues along the journey as some documentation may need updates.
> 
> Flightaware's use case is already in [beta](https://beta.flightaware.com/) and they developped some tools in go to [accelerate vector tile exports](https://github.com/flightaware/baremaps-exporter). Maybe we can bring some of their ideas in our export command and perform some benchmarks. Here is an additional [reference](https://andywoodruff.com/posts/2024/flightaware-maps/). I believe Camptocamp's usecase is related to intranet maps. I havn't seen those maps yet.

Thank you for the reference!

Accelerating the vector tile export speed is very interesting!
I'll analyze their approach and then write a detailed suggestion.

It would be great to discuss this on the mailing list or in an issue.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cuPlq/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cu-Kb,incubator-baremaps,2629558939,931,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-02T21:18:03Z,2025-02-02T21:18:03Z,I already brought some stuff (the query used to generate the tiles should be approximately the same). I'm not sure if the performence gain is at the level of the driver or could be achieved at the application level.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cu-Kb/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cvSei,incubator-baremaps,2629642146,931,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-03T00:15:18Z,2025-02-03T00:15:18Z,"> I already brought some stuff (the query used to generate the tiles should be approximately the same). I'm not sure if the performence gain is at the level of the driver or could be achieved at the application level.

Could you share the changes that have been made? 
I’d like to check as well and see at which level the performance improvement is happening.

To contribute effectively to the project in the long run, I need to have a solid understanding of the overall structure. 
Analyzing this would be a great learning experience for me in that regard. 😀","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cvSei/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/931,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cytCG,incubator-baremaps,2630537350,931,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-03T10:25:21Z,2025-02-03T10:25:21Z,"Yes, the changes mainly consisted in simplifications performed in the following file:

https://github.com/apache/incubator-baremaps/blob/main/baremaps-core/src/main/java/org/apache/baremaps/tilestore/postgres/PostgresTileStore.java

The query optimizer of postgres used to perform poorly on complex spatial queries and we were initially parsing and rewriting the queries. The query optimizer improved a lot recently (postgres 15+) and the SQL queries generated by the PostgresTileStore are now similar to what baremaps-exporter does.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cytCG/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/932,https://api.github.com/repos/apache/incubator-baremaps/issues/932,incubator-baremaps,2822691266,932,Display arrows on one way streets,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T07:44:24Z,2025-01-31T08:09:05Z,"**Description**: we do not display arrows on one way streets. We should find a solution that is independant to the color to do this and discuss it before implementing.

**Attachements**:
<img width=""677"" alt=""Image"" src=""https://github.com/user-attachments/assets/9258ffbe-7006-437f-a8a6-f5017c63c380"" />

**Files:**
https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/highway","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/932/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/933,https://api.github.com/repos/apache/incubator-baremaps/issues/933,incubator-baremaps,2822720311,933,Display a point below city names at low zoom level,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T07:59:55Z,2025-01-31T08:10:05Z,**Description:** We do not display points below city names at low zoom levels as osm-carto does. This issue intent at discussing the need for such points before implementing the solution.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/933/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/934,https://api.github.com/repos/apache/incubator-baremaps/issues/934,incubator-baremaps,2822728957,934,Display natural park boundaries and labels,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T08:05:19Z,2025-01-31T08:10:25Z,"**Descriptions:** We do not display labels and the boundaries were set very quickly. We can improve the current status by following what openstreetmap does.

**Attachements**:

<img width=""398"" alt=""Image"" src=""https://github.com/user-attachments/assets/52a2911e-c1fc-4f4f-9017-116ad5ead299"" />



","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/934/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/935,https://api.github.com/repos/apache/incubator-baremaps/issues/935,incubator-baremaps,2822742977,935,"Display mountains, peaks and volcanos",bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T08:14:01Z,2025-01-31T08:14:01Z,"**Description:** Display triangles for montains, volcanos and peaks.

**Tags:**
- https://wiki.openstreetmap.org/wiki/Tag:natural%3Dvolcano
- https://wiki.openstreetmap.org/wiki/Tag:natural%3Dpeak

**Attachements:**
<img width=""366"" alt=""Image"" src=""https://github.com/user-attachments/assets/bac41175-37b3-48a8-8eaf-0545790d689a"" />

**Files:**
- https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/natural
- https://github.com/apache/incubator-baremaps/tree/main/basemap/layers/point
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/935/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/936,https://api.github.com/repos/apache/incubator-baremaps/issues/936,incubator-baremaps,2822860582,936,Display icons on polygons,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T09:20:05Z,2025-01-31T09:20:35Z,"**Description:** we currently display icons for points, but we do not for polygons.

**Screenshot:** 

Here the parking icons are probably missing for this reason.

![Image](https://github.com/user-attachments/assets/3d0c736d-ce86-4f56-a860-b979d7d4f5bd)

**Files:**
- https://github.com/apache/incubator-baremaps/blob/main/basemap/layers/point/icon.js
- other files where the polygons can be found.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/936/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/937,https://api.github.com/repos/apache/incubator-baremaps/issues/937,incubator-baremaps,2822866698,937,Investigate why some icons are not displayed,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T09:23:01Z,2025-01-31T09:23:01Z,"**Description:** In some cases, icons are not displayed. It may be a layer ordering issue or something else. The screenshots below show that we have the appropriate data in the tileset.

**Screenshots:**

![Image](https://github.com/user-attachments/assets/c85261ee-e6ea-42b3-9139-e31d46830006)

![Image](https://github.com/user-attachments/assets/c37b9358-bbba-475f-9191-3f73f6e9fece)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/937/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/938,https://api.github.com/repos/apache/incubator-baremaps/issues/938,incubator-baremaps,2822870412,938,Display place names,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T09:25:03Z,2025-01-31T09:25:03Z,"**Description**: Place names are associatied with polygons. We should add legends for them (e.g. Place du temple in the screenshot).

**Screenshot**:

![Image](https://github.com/user-attachments/assets/c62cf8c9-802d-47e2-aad9-76073225ae46)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/938/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/939,https://api.github.com/repos/apache/incubator-baremaps/issues/939,incubator-baremaps,2822878342,939,Display small tunnels,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-01-31T09:28:54Z,2025-01-31T09:28:54Z,"**Description:** display small tunnels (e.g. for footways).

**Screenshots:**
![Image](https://github.com/user-attachments/assets/3bf675bf-9824-4d30-8403-1f545db2c2d0)

**Files:**
- https://github.com/apache/incubator-baremaps/blob/main/basemap/layers/highway/tunnel_line.js
- https://github.com/apache/incubator-baremaps/blob/main/basemap/layers/highway/tunnel_outline.js

","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/939/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/943,incubator-baremaps,2825049490,943,[BUG] The map is not displaying,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,OPEN,2025-02-01T07:49:20Z,2025-02-03T10:03:59Z,"<!-- 
Briefly describe the issue and expected behavior.  Keep it short but clear to help identify the problem quickly. 
-->
## Description
The map is not displaying on `localhost:9000`. 
However, I can't find any issues in the Chrome developer tools or the terminal.
<!-- 
Specify the environment details where the issue occurred. Helps to determine if the bug is environment-specific. 
-->
## Environment
- **OS:** macOS 15.1.1
- **Browser/Version:** chrome (Incognito mode)
- **Version:** 0.8.2-SNAPSHOT

<!-- 
List the steps to reproduce the issue. This helps others replicate the bug consistently. 
-->
## Steps to Reproduce
1. Go to root directory of basemap
2. `baremaps map serve --tileset tileset.js --style style.js`
3. Access localhost:9000 in Chrome's Incognite mode.

<!-- 
Describe the difference between the expected and actual outcomes. This helps clarify the impact of the bug. 
-->
## Expected vs Actual Behavior
- **Expected:** map should be displayed.
- **Actual:** map is not displaying.

<!-- 
(Optional) Add supporting materials like screenshots or logs to provide more context about the issue. 
-->
## Attachments (Optional)
### Chrome developer tools/console

![Image](https://github.com/user-attachments/assets/e2a1d18c-e966-493a-a220-dd3e1b5d024e)

### Chrome developer tools/networks

> Upon checking the developer tools, it seems that the vector tiles are loading correctly.

![Image](https://github.com/user-attachments/assets/a688bdd8-87e4-4e5c-8ffb-8c7cb368e346)
 
---

## Additional issue (lower priority than the one mentioned above).

**Additionally, it seems that a `CSP` issue occurs when running with the command below.**
> Even after setting `connect-src`, the issue remains unresolved.
```
baremaps map dev --tileset tileset.js --style style.js
```
![Image](https://github.com/user-attachments/assets/c2d50e26-e07b-4ad8-b7b4-0e6d758a0161)

**However, it works fine with the command below.  And the vector tiles are also loading correctly. 🤔**
```
baremaps map serve --tileset tileset.js --style style.js
```
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/943/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csN41,incubator-baremaps,2628836917,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-01T07:53:11Z,2025-02-01T07:53:11Z,"@bchapuis 

I noticed that https://unpkg.com/ is duplicated in the script-src section. Was that intentional? 👀
If not, I can create a PR to fix it❕

> I missed it as well 😅

https://github.com/apache/incubator-baremaps/pull/924#issuecomment-2626681315","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csN41/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csVMF,incubator-baremaps,2628866821,943,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-01T09:05:46Z,2025-02-01T09:05:46Z,"No it's not intentional 😅 I probably forgot to do a proper `mvn clean` before testing.

In dev mode, we load raster tiles from openstreetmap to compare the them with the raster tiles. Therefore, we must add the following url to the CSP directive: `https://tile.openstreetmap.org` for loading images.


","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csVMF/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csZJe,incubator-baremaps,2628883038,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-01T09:54:42Z,2025-02-01T09:54:42Z,"> No it's not intentional 😅 I probably forgot to do a proper `mvn clean` before testing.

Done in https://github.com/apache/incubator-baremaps/pull/944! 
Could you please check?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csZJe/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csZVz,incubator-baremaps,2628883827,943,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-01T09:56:58Z,2025-02-01T09:56:58Z,@YongGoose I think it would make sense to include the https://tile.openstreetmap.org url in this PR (see the console error in your last screenshot).,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csZVz/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csaWq,incubator-baremaps,2628887978,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-01T10:08:01Z,2025-02-01T10:08:01Z,"> [@YongGoose](https://github.com/YongGoose) I think it would make sense to include the https://tile.openstreetmap.org url in this PR (see the console error in your last screenshot).

Good catch!
I will apply that change.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csaWq/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csayh,incubator-baremaps,2628889761,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-01T10:13:40Z,2025-02-01T10:13:40Z,"@bchapuis 

Done in https://github.com/apache/incubator-baremaps/pull/944/commits/e84bbaf4b2dbae394db49f88d5e98d8712171569 !

I've tested it locally, and it seems to be working fine!  
Could you double-check it?","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csayh/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csdge,incubator-baremaps,2628900894,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-01T10:48:22Z,2025-02-01T10:48:22Z,"Unfortunately, the error has been resolved, but the map still doesn't display 🥲
I've tried multiple browsers, but the result is the same. 
> I've also cleared the cache and performed a hard refresh.

Could I ask if you have any suggestions for resolving this issue?

PS. Once the issue is resolved, if the same problem comes up on the mailing list or an issue is raised, I'll actively participate in the community to help!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csdge/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csgbu,incubator-baremaps,2628912878,943,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-01T11:24:55Z,2025-02-01T11:24:55Z,"Yes, I will try to have a look tonight.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6csgbu/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ctLxP,incubator-baremaps,2629090383,943,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-01T19:58:11Z,2025-02-01T19:58:11Z,"Do you have all the necessary data in the database? I just tried the latest version and everything works well in standard and incognito mode for the dev server.

![Image](https://github.com/user-attachments/assets/8eef08a7-476a-4dcd-a0a0-776683b03ce4)
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ctLxP/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ctxZN,incubator-baremaps,2629244493,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-02T05:02:25Z,2025-02-02T05:02:25Z,"@bchapuis 

I’m not exactly sure why, but the map is suddenly visible.
> I think this is the first time I’ve ever felt this excited about looking at a map.

![Image](https://github.com/user-attachments/assets/28c08e9f-2b4f-476b-bbee-7111cc20e83f)

However, to work on the issue below, I believe one more task is needed.
The issue I’m currently handling involves including boundaries and borders.
- https://github.com/apache/incubator-baremaps/issues/928

To achieve this, I need to view other countries as well, but at the moment, only `Switzerland` is visible.
I have modified the `postgresql.conf` file as instructed in the basemap `README`.

```
work_mem = 4GB
shared_buffers = 4GB
maintenance_work_mem = 16GB
autovacuum_work_mem = 4GB
max_worker_processes = 16
max_parallel_workers_per_gather = 8
max_parallel_workers = 16
wal_level = minimal
checkpoint_timeout = 10min
max_wal_size = 20GB
min_wal_size = 80MB
checkpoint_completion_target = 0.9
max_wal_senders = 0
```

If there’s anything additional I need to do or any JavaScript files I should modify, please let me know!","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6ctxZN/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cxjrD,incubator-baremaps,2630236867,943,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-03T08:10:39Z,2025-02-03T08:10:39Z,"@YongGoose you can import other countries by changing the url in the config file.

https://github.com/apache/incubator-baremaps/blob/6cae7e0f124068faed8a9e0943c8f7d25a5c173d/basemap/config.js#L20

As you may guess, generating vector tiles for the [Planet OSM](https://planet.openstreetmap.org/) requires 2-3 TBs of fast data storage (NVMe SSDs). I used to have a Hetzner server for this, but I'm currently looking for another solution. ","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cxjrD/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/943,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cygrg,incubator-baremaps,2630486752,943,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-03T10:03:57Z,2025-02-03T10:03:57Z,"> [@YongGoose](https://github.com/YongGoose) you can import other countries by changing the url in the config file.
> 
> [incubator-baremaps/basemap/config.js](https://github.com/apache/incubator-baremaps/blob/6cae7e0f124068faed8a9e0943c8f7d25a5c173d/basemap/config.js#L20)
> 
> Line 20 in [6cae7e0](/apache/incubator-baremaps/commit/6cae7e0f124068faed8a9e0943c8f7d25a5c173d)

Thank you!
I'll go ahead and modify the config.js as you suggested.

When you have some time, could you kindly take a look at the comments below?
- https://github.com/apache/incubator-baremaps/issues/931#issuecomment-2629642146
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6cygrg/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/946,https://api.github.com/repos/apache/incubator-baremaps/issues/946,incubator-baremaps,2826928334,946,Move the text-size of the labels in the theme variables,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,OPEN,2025-02-03T09:28:00Z,2025-02-03T09:28:10Z,"<!-- 
Clearly explain the feature you’re requesting. Focus on what it does and why it’s needed. 
-->
## Description
The size of the labels are currently hard coded in the directives. It would be nice to move them in the theme variables (e.g. basemap/themes/default.js).

<!-- 
Explain the positive outcomes this feature will bring. Helps prioritize based on impact. 
-->
## Expected Impact
This will allows to manage variants of the default theme more easily and to ease the creation of derivative maps.
","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/946/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/947,https://api.github.com/repos/apache/incubator-baremaps/issues/947,incubator-baremaps,2839626032,947,"[BUG] When the zoom level is set in `baseMap`, it is automatically converted to an integer.",YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,OPEN,2025-02-08T05:53:10Z,2025-02-08T12:24:11Z,"<!-- 
Briefly describe the issue and expected behavior.  Keep it short but clear to help identify the problem quickly. 
-->
## Description
If you set `minZoom` or 'maxZoom' to a float value like `2.5`, it will automatically be converted to `2`.
```
{
  minzoom: 2.5,
  maxzoom: 20,
  sql:
    ""SELECT id, tags, geom "" +
    ""FROM osm_boundary "" +
    ""WHERE tags ->> 'admin_level' = '2' "" +
    ""AND tags ->> 'maritime' = 'yes';"",
}
```

<!-- 
Specify the environment details where the issue occurred. Helps to determine if the bug is environment-specific. 
-->
## Environment
- **Browser/Version:** chrome
- **Version:** 0.8.1

<!-- 
Describe the difference between the expected and actual outcomes. This helps clarify the impact of the bug. 
-->
## Expected vs Actual Behavior
- **Expected:** Setting `minZoom` to 2.5 should apply it when the zoom level is `2.5` or higher.
- **Actual:** However, it actually applies when `minZoom` is `2.0` or higher.

<!-- 
(Optional) Add supporting materials like screenshots or logs to provide more context about the issue. 
-->
## Attachments (Optional)
Maritime boundaries should be applied from zoom level `2.5` and above, but they can be seen applying from `2.0`.
### Expected
![Image](https://github.com/user-attachments/assets/47b78048-7ba3-4c59-b420-e1238862056f)

### Actual
![Image](https://github.com/user-attachments/assets/e2bbf3ae-aca2-4a49-932a-367bb0d3cc26)","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/947/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/947,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6doD-3,incubator-baremaps,2644524983,947,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-08T05:54:21Z,2025-02-08T05:54:21Z,"@bchapuis 

If this is a bug, it could be a sub-issue of the below issue.
- https://github.com/apache/incubator-baremaps/issues/927","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6doD-3/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/947,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dp_hn,incubator-baremaps,2645031015,947,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-08T11:19:05Z,2025-02-08T11:19:05Z,I believe the java object uses an integer instead of a double for the zoom level. We can indeed change this as it better corresponds to the maplibre style specification.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dp_hn/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/947,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dqyHH,incubator-baremaps,2645238215,947,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-08T12:01:33Z,2025-02-08T12:01:33Z,"> I believe the java object uses an integer instead of a double for the zoom level. We can indeed change this as it better corresponds to the maplibre style specification.

I believe these two classes are definitely related!
- https://github.com/apache/incubator-baremaps/blob/28e5bb4b9d1693d297dc849074b9126dd392ce4d/baremaps-maplibre/src/main/java/org/apache/baremaps/maplibre/style/StyleSource.java#L43
- https://github.com/apache/incubator-baremaps/blob/28e5bb4b9d1693d297dc849074b9126dd392ce4d/baremaps-maplibre/src/main/java/org/apache/baremaps/maplibre/style/StyleLayer.java#L53

If this issue is not resolved by next week, I will take care of it myself.

PS. I am not a member of the Apache Baremaps repository, so I don't have the permissions to register this as a sub-issue. Would you mind handling this? 😅

I think it would be appropriate for these two issues to be registered as sub-issues of the #927.
- https://github.com/apache/incubator-baremaps/issues/947
- https://github.com/apache/incubator-baremaps/issues/949","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dqyHH/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/947,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6drKCT,incubator-baremaps,2645336211,947,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-08T12:23:06Z,2025-02-08T12:23:06Z,Thanks for the clarification. I attached it as a sub issue of #927.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6drKCT/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
issue,https://api.github.com/repos/apache/incubator-baremaps/issues/949,https://api.github.com/repos/apache/incubator-baremaps/issues/949,incubator-baremaps,2839690274,949,[FEATURE] Display few major cities,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,OPEN,2025-02-08T07:55:40Z,2025-02-08T12:25:16Z,"<!-- 
Clearly explain the feature you’re requesting. Focus on what it does and why it’s needed. 
-->
## Description
Currently, when the zoom level is above 3.0, many cities are displayed. However, I would prefer it if only a few major cities, like in OpenStreetMap, were shown.

![Image](https://github.com/user-attachments/assets/240b08f1-f33f-4493-9eef-851123e4f699)

<!-- 
Explain the positive outcomes this feature will bring. Helps prioritize based on impact. 
-->
## Expected Impact
The locations of major cities are clearly visible.","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/949/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/949,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6donf8,incubator-baremaps,2644670460,949,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-08T07:58:15Z,2025-02-08T07:58:15Z,"@bchapuis 

If there are no duplicate issues, it should be applied as a child issue of the this one.
- https://github.com/apache/incubator-baremaps/issues/927","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6donf8/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/949,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dqVvQ,incubator-baremaps,2645122000,949,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-08T11:38:22Z,2025-02-08T11:38:22Z,Sounds good to me 👍 Do not hesitate to create sub issues whenever you notice such possible improvements.,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dqVvQ/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/949,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dq0en,incubator-baremaps,2645247911,949,NA,YongGoose,104314593,Yongjun Hong,dev.yongjunh@gmail.com,NA,2025-02-08T12:03:42Z,2025-02-08T12:03:42Z,"> Sounds good to me 👍 Do not hesitate to create sub issues whenever you notice such possible improvements.

Thank you :)

I think it would be a good idea to add the `good first issue` label so that community members can take a shot at this issue","{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6dq0en/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
comment,https://api.github.com/repos/apache/incubator-baremaps/issues/949,https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6drL_C,incubator-baremaps,2645344194,949,NA,bchapuis,238747,Bertil Chapuis,bchapuis@gmail.com,NA,2025-02-08T12:25:15Z,2025-02-08T12:25:15Z,I added the label 👍,"{""url"": ""https://api.github.com/repos/apache/incubator-baremaps/issues/comments/IC_kwDOCc4G4s6drL_C/reactions"", ""total_count"": 0, ""+1"": 0, ""-1"": 0, ""laugh"": 0, ""hooray"": 0, ""confused"": 0, ""heart"": 0, ""rocket"": 0, ""eyes"": 0}"
